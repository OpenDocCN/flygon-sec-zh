- en: Chapter 3. Network Reconnaissance
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3章 网络侦察
- en: Now that you've come to grips with the way the bash shell works and learnt a
    couple of tricks and tips to wield it effectively, we can move on to using the
    shell and the Kali Linux command-line utilities to collect information about the
    networks you find yourself in, in your day-to-day routines.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经掌握了bash shell的工作方式，并学会了一些技巧和窍门来有效地使用它，我们可以继续使用shell和Kali Linux命令行实用程序来收集关于你日常工作中所在网络的信息。
- en: In this chapter, we will see how to use tools like Nmap, Whois, Dig, and various
    other network information grabbing Swiss Army knives to learn more about the security
    standing of the hosts on your local network or on networks external to yours.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将看到如何使用诸如Nmap、Whois、Dig和其他各种网络信息抓取工具来了解本地网络或外部网络上主机的安全状况。
- en: In the next section, we will cover a tool called `whois` that facilitates querying
    Whois servers for information about organizations and the IP addresses and domains
    they are responsible for.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将介绍一个名为`whois`的工具，它可以方便地查询Whois服务器，获取有关组织以及它们负责的IP地址和域名的信息。
- en: Interrogating the Whois servers
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 询问Whois服务器
- en: Whois servers hold information about what IP addresses, domain names, and other
    network addressing relevant information certain organizations are responsible
    for or strictly associated with. When you request information about a Whois record,
    all you are doing is querying a database hosted on a Whois server using a special
    application protocol called Whois. The details of the protocol are referenced
    in the *Further reading* section.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: Whois服务器保存了关于某些组织负责或严格相关的IP地址、域名和其他网络寻址相关信息。当你请求Whois记录的信息时，你所做的只是使用一个称为Whois的特殊应用协议查询托管在Whois服务器上的数据库。协议的细节在*进一步阅读*部分有引用。
- en: During a penetration test, you may be given a list of IP addresses to work with,
    or a domain name that resolves to an IP address. Often, you might want to know
    who this IP belongs to and what else is likely hosted on the same logical network
    block; Whois is a great tool to find out this kind of information.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在渗透测试期间，你可能会收到一个要处理的IP地址列表，或者一个解析为IP地址的域名。通常，你可能想知道这个IP属于谁，以及同一逻辑网络块上可能托管了什么其他内容；Whois是一个很好的工具，可以找出这类信息。
- en: Interrogating Whois servers from your command line is done by using a tool called
    `whois`, which comes shipped with many Linux/Unix distributions, Kali included.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 从命令行询问Whois服务器是通过使用一个名为“whois”的工具来完成的，它随许多Linux/Unix发行版一起提供，包括Kali。
- en: There are a number of options you can specify when you use the `whois` tool.
    Here, we will only be covering a few very useful ones. For those of you who would
    like to learn more about the `whois` tool, please see the information included
    in the *Further reading* section of this chapter.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 当你使用`whois`工具时，你可以指定许多选项。在这里，我们只会涵盖一些非常有用的选项。对于那些想要了解更多关于`whois`工具的人，请参阅本章*进一步阅读*部分中包含的信息。
- en: 'The basic functionality of Whois is to return a given set of attributes associated
    with an IP address: this collection of attributes is called a **whois** record.
    Looking up a record using the IP address is as simple as firing off the following
    command:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Whois的基本功能是返回与IP地址相关的一组属性：这些属性的集合称为**whois**记录。查找使用IP地址的记录就像简单地执行以下命令一样：
- en: '[PRE0]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'As an example, here''s how you retrieve the Whois record for one of the Google
    server addresses:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，这是你如何检索Google服务器地址的Whois记录：
- en: '[PRE1]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The previous command will produce the following output:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 上一个命令将产生以下输出：
- en: '![Interrogating the Whois servers](img/5107OT_03_01.jpg)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![询问Whois服务器](img/5107OT_03_01.jpg)'
- en: 'What you have in front of you when you run a Whois query or lookup is called
    an object, and each object has a bunch of attributes associated to it in key-value
    pairs. Each object has information regarding the person responsible for the record/object
    itself: this person is referred to as a maintainer. It is up to the maintainer
    to decide which attributes to use when he/she describes the related object. There
    are a number of possible attributes, which are referenced in the *Further reading*
    section for those of you who are interested in getting the full story.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 当你运行Whois查询或查找时，你面前的是一个对象，每个对象都有一堆与之相关的属性，以键值对的形式。每个对象都包含有关负责记录/对象本身的人的信息：这个人被称为维护者。维护者决定在描述相关对象时使用哪些属性。有许多可能的属性，对于那些有兴趣了解完整故事的人，这些属性在*进一步阅读*部分有引用。
- en: 'Besides just querying the Whois server for information associated with an IP
    address, you may also want to look up certain information associated with a given
    organization or maybe you want to look up all the information in the database
    that mentions a given value, for instance, the maintainer or a given e-mail address.
    Doing this is referred to as a reverse look attribute look up. The following command
    is used to do this:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 除了仅仅查询与IP地址相关的Whois服务器的信息，你可能还想查找与给定组织相关的某些信息，或者你可能想查找数据库中提到给定值的所有信息，例如，维护者或给定的电子邮件地址。这被称为反向查找属性查找。以下命令用于执行此操作：
- en: '[PRE2]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'For example, consider looking up all the whois records that are maintained
    by the folks from Yahoo!. The following command shows how you do this:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，考虑查找由Yahoo!的人员维护的所有whois记录。以下命令显示了如何做到这一点：
- en: '[PRE3]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Tip
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: You may want to look up the maintainer name for some of your favorite IP address
    ranges and use them in this example. You may not get exactly the same results
    as in the following demonstrations since by default the `Whois` tool may rely
    on a Whois server specific to your country.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能想要查找一些你喜欢的IP地址范围的维护者名称，并在这个例子中使用它们。由于默认情况下`Whois`工具可能依赖于特定于你国家的Whois服务器，所以你可能不会得到与以下演示完全相同的结果。
- en: 'You may want to filter out the IP addresses from this query. The simplest way
    to do this is with `grep`, as shown in the following command:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能希望从此查询中过滤出IP地址。最简单的方法是使用`grep`，如下命令所示：
- en: '[PRE4]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'You may also want to filter out only the IP address for use in other tools
    such as `Nmap` and `Dig`, which we will be covering in further sections of this
    chapter. The following is a little bash command that will be able to do this:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能还想仅过滤出IP地址以供其他工具使用，例如`Nmap`和`Dig`，我们将在本章的后续部分进行介绍。以下是一个能够执行此操作的小bash命令：
- en: '[PRE5]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The previous command should produce the following output:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令应该产生以下输出：
- en: '![Interrogating the Whois servers](img/5107OT_03_04.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![审问Whois服务器](img/5107OT_03_04.jpg)'
- en: 'Other attributes that you can use to do inverse queries are as follows:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用以下其他属性来执行反向查询：
- en: '`-i admin-c [NIC-handle or person]`'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-i admin-c [NIC句柄或人]`'
- en: '`-i person [NIC-handle or person]`'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-i person [NIC句柄或人]`'
- en: '`-i nsserver [Domain or address prefix or range or a single address]`'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-i nsserver [域或地址前缀或范围或单个地址]`'
- en: '`-i sub-dom [Domain]`'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-i sub-dom [域]`'
- en: '`-i upd-to [email]`'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-i upd-to [email]`'
- en: '`-i local-as [autonomous system number]`'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-i local-as [自治系统号]`'
- en: 'There are a number of them you could use: please see the *Further reading*
    section for the full list.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用其中的一些：请参阅*进一步阅读*部分获取完整列表。
- en: 'You could also use the `whois` tool to look up domain names related to a given
    domain name using the following line:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以使用`whois`工具查找与给定域名相关的域名，使用以下命令：
- en: '[PRE6]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'For instance, you could use it in the following way:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，您可以按以下方式使用它：
- en: '[PRE7]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Alternatively, you could use the following command:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，您可以使用以下命令：
- en: '[PRE8]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'By adding a little `grep` and `awk` magic to the lookup, you could filter out
    useful information such as domain names, as shown in the following code:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在查找中添加一些`grep`和`awk`魔法，您可以过滤出诸如域名之类的有用信息，如下面的代码所示：
- en: '[PRE9]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: We've pretty much covered the functions of the `whois` service that the penetration
    testers and security engineers may find useful. In the next section, we're going
    to cover using Dig to perform DNS interrogation.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经基本介绍了渗透测试人员和安全工程师可能会发现有用的`whois`服务的功能。在下一节中，我们将介绍使用Dig执行DNS审问。
- en: Interrogating the DNS servers
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 审问DNS服务器
- en: DNS servers exist to provide an association between the IP addresses that computers
    use and the domain names that people use. Usually, companies and organizations
    use multiple subdomains and may even use multiple domain names for a given IP
    address. Naturally, this means DNS servers are a wealth of information for a penetration
    tester looking to define the public footprint of an organization and map out his/her
    attack surface.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: DNS服务器存在是为了提供计算机使用的IP地址与人们使用的域名之间的关联。通常，公司和组织使用多个子域，甚至可能为给定的IP地址使用多个域名。这自然意味着DNS服务器对于渗透测试人员来说是一个丰富的信息来源，可以帮助他们定义组织的公共足迹并绘制攻击面。
- en: Using Dig
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Dig
- en: The first command-line tool we will be using here is called **Dig**. Dig is
    essentially a DNS lookup Swiss Army knife and facilitates just about everything
    you would need to know about a given domain or the domains related to an IP address.
    Using Dig, you will be emulating—actually performing—the kinds of queries browsers
    and other network applications use when they interact with DNS servers all across
    the world. Some queries even emulate the behavior of other DNS servers. Let's
    see how `dig` works and how we can make the best of it during a penetration test.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在这里使用的第一个命令行工具称为**Dig**。 Dig本质上是一个DNS查找瑞士军刀，可以方便地了解有关给定域或与IP地址相关的域的几乎所有信息。使用Dig，您将模拟-实际执行-浏览器和其他网络应用程序与世界各地的DNS服务器交互时使用的查询。有些查询甚至模拟其他DNS服务器的行为。让我们看看`dig`是如何工作的，以及在渗透测试期间如何充分利用它。
- en: 'The simplest way to use `dig` is to supply it with a domain name to look up.
    The following command shows you how do this:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`dig`的最简单方法是提供要查找的域名。以下命令向您展示了如何执行此操作：
- en: '[PRE10]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'For example, you could try `google.com` for the domain as follows:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，您可以尝试使用以下方式的域名`google.com`：
- en: '[PRE11]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The previous command will produce the following output:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令将产生以下输出：
- en: '![Using Dig](img/5107OT_03_05.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![使用Dig](img/5107OT_03_05.jpg)'
- en: The highlighted output in the previous screenshot shows the actual result returned,
    which is the IP address(es) of Google.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 前面截图中突出显示的输出显示了实际返回的结果，即Google的IP地址。
- en: 'You can also let `dig` know what kinds of records you''re looking for by making
    use of the `type` option as follows:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以通过使用`type`选项让`dig`知道您要查找的记录类型，如下所示：
- en: '[PRE12]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'For example, if you''re looking for the mail exchange records (MX records)
    for `google.com` you can supply the following options to `dig`:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果您要查找`google.com`的邮件交换记录（MX记录），您可以向`dig`提供以下选项：
- en: '[PRE13]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Otherwise, you can use the `–t` option as follows:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 否则，您可以使用`-t`选项，如下所示：
- en: '[PRE14]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Your output should look something like the following screenshot if the command
    executes correctly:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 如果命令执行正确，您的输出应该类似于以下截图：
- en: '![Using Dig](img/5107OT_03_06.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![使用Dig](img/5107OT_03_06.jpg)'
- en: 'The following are the record types you can look up using `dig`:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是您可以使用`dig`查找的记录类型：
- en: '`A`: This is address record and holds the IPs associated with the queried domain.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`A`：这是地址记录，保存了与查询域关联的IP。'
- en: '`AAAA`: This is the IP Version 6 address record.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`AAAA`：这是IP版本6地址记录。'
- en: '`CNAME`: This is the canonical name record, which will return the domain names
    for which the specified domain is a canonical record. This is like asking `dig`
    whether the supplied domain is a nick name for another, or more precisely, whether
    the given domain name uses the IP address of another domain, and `dig` returns
    these domains.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CNAME`：这是规范名称记录，它将返回指定域的域名，该域是规范记录。这就像询问`dig`所提供的域是否是另一个域的昵称，或者更准确地说，给定的域名是否使用另一个域的IP地址，`dig`会返回这些域。'
- en: '`MX`: This is the mail exchange record and lists the addresses that are associated
    with the supplied domain as message transfer agents. You would use this to find
    the mail domains for a given domain.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MX：这是邮件交换记录，列出了与提供的域关联的地址作为消息传输代理。您可以使用此选项查找给定域的邮件域。
- en: '`PTR`: This is for pointer records, which are often used in reverse DNS lookups.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PTR：这是指针记录，通常用于反向DNS查找。
- en: '`SOA`: This is the start of authority/zone record, which will return records
    related to the primary domain server "authoritive" for the supplied domain.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SOA：这是权威/区域记录的开始，它将返回与提供的域的主域服务器“授权”相关的记录。
- en: '`AXFR`: This is for authority zone transfer, which asks a given name server
    to return all the records related to a given domain. Modern DNS servers should
    not have this option enabled remotely as it presents considerable information
    about disclosure vulnerabilities—primarily internal address disclosure — and enables
    quite effective denial of service attacks.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AXFR：这是权威区域传输，它要求给定的名称服务器返回与给定域相关的所有记录。现代DNS服务器不应远程启用此选项，因为它会泄露大量关于披露漏洞的信息，主要是内部地址披露，并且会使拒绝服务攻击非常有效。
- en: There are a number of other interesting record types. I've listed the most commonly
    used ones here. For those of you who would like to find out what others are all
    about, please check the RFCs in the *Further reading* section at the end of the
    chapter.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一些其他有趣的记录类型。我在这里列出了最常用的记录类型。对于那些想要了解其他记录类型的人，请在本章末尾的*进一步阅读*部分查看RFC。
- en: 'The following command is an example of some of these record types in action:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 以下命令是这些记录类型的一些示例的实际操作：
- en: '[PRE15]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The previous command should return the result shown in the following screenshot:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 上一个命令应返回以下截图中显示的结果：
- en: '![Using Dig](img/5107OT_03_07.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![使用Dig](img/5107OT_03_07.jpg)'
- en: 'Otherwise, you could look up the domains for which `mail.google.com` is the
    canonical name. This is done using the following code:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 否则，您可以查找`mail.google.com`是规范名称的域。使用以下代码完成：
- en: '[PRE16]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The previous command should produce the following output:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 上一个命令应产生以下输出：
- en: '![Using Dig](img/5107OT_03_08.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![使用Dig](img/5107OT_03_08.jpg)'
- en: 'Often, you may want to skip all the detail returned from a DNS query and have
    `dig` only return the important data, namely the addresses you''ve requested.
    The `+short` option allows you to do this. It is used as shown in the following
    command:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，您可能希望跳过DNS查询返回的所有细节，并且只返回您请求的重要数据，即地址。`+short`选项允许您执行此操作。如下所示使用：
- en: '[PRE17]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'This option allows `dig` to be a little more manageable if it is used in pipes
    and bash for loops or other scripting, since it mitigates having to filter out
    all the other output. For example, you could use `dig` with `whois` as follows:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 此选项允许`dig`在使用管道和bash for循环或其他脚本时更易于管理，因为它减少了必须过滤所有其他输出的麻烦。例如，您可以如下使用`dig`与`whois`：
- en: '[PRE18]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Dig also allows reverse IP resolution using the `–x` option. For instance,
    if you''d like to find out which domain name is associated to a given IP, you
    would use the following command:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: Dig还允许使用`-x`选项进行反向IP解析。例如，如果您想找出与给定IP关联的域名，您可以使用以下命令：
- en: '[PRE19]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Often you may have a long list of IP addresses or a list you''ve managed to
    enumerate through other means, such as using `whois`, and you''d like to find
    out which of these are mapped to IP addresses. Now, you could manually fire off
    `dig` queries for each IP. However, using a little bash scripting with dig, you
    could automate the entire process very easily. Let''s suppose that the IPs you
    have are in a file, each on their own separate line. You would fire off the following
    command to reverse look up all of them:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，您可能会有一个长列表的IP地址或通过其他方式枚举的列表，例如使用`whois`，您可能想找出其中哪些映射到IP地址。现在，您可以手动为每个IP发出`dig`查询。但是，使用一点bash脚本和dig，您可以非常轻松地自动化整个过程。假设您的IP在一个文件中，每个IP占据一行。您可以发出以下命令来反向查找它们：
- en: '[PRE20]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: In the previous command, `[ip list]` would be the file containing the mentioned
    IP addresses.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一个命令中，`[ip list]`将是包含所述IP地址的文件。
- en: So that's it as far as the `dig` tool and a basic introduction to DNS protocol
    goes. I urge you to read more about how DNS works in the *Further reading* section.
    The next few sections will discuss tools that allow you to recover records from
    DNS servers using brute-forcing and other open source intelligence gathering.
    The two tools mentioned are used by penetration testers usually as a last resort,
    given that they brute-force the records and are quite an aggressive alternative
    to dig.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是`dig`工具和DNS协议的基本介绍。我建议您阅读有关DNS工作原理的更多信息。接下来的几节将讨论允许您使用暴力破解和其他开源情报收集从DNS服务器中恢复记录的工具。通常，渗透测试人员使用这两个工具作为最后的手段，因为它们会暴力破解记录，并且是`dig`的相当激进的替代方案。
- en: Using dnsmap
  id: totrans-91
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用dnsmap
- en: You may, at times, need to result to brute-forcing domain names or sub-domains,
    since these can prove very tricky to enumerate, for a given host or network if
    the other options such as `dig` and `whois` do not provide you with enough information
    to work with. In times like these, tools such as `dnsmap` and `dnsenum` come in
    very handy.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，您可能需要暴力破解域名或子域名，因为这些可能非常难以枚举，对于给定的主机或网络，如果其他选项如`dig`和`whois`没有提供足够的信息供您使用。在这种情况下，诸如`dnsmap`和`dnsenum`之类的工具非常有用。
- en: Using `dnsmap` is pretty straightforward. If you've been following the other
    commands we covered this should be a breeze.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`dnsmap`非常简单。如果您一直在关注我们介绍的其他命令，那么这应该很容易。
- en: 'The following is the usage specification for `dnsmap`:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是`dnsmap`的用法规范：
- en: '[PRE21]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Before we get into what these options mean, let''s see what `dnsmap` does in
    its most basic invocation, namely with no options:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们了解这些选项的含义之前，让我们看看`dnsmap`在其最基本的调用中是如何工作的，即没有选项：
- en: '[PRE22]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'For example, consider the following lookup for the `google.com` domain:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，考虑对`google.com`域进行以下查找：
- en: '![Using dnsmap](img/5107OT_03_10.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![使用dnsmap](img/5107OT_03_10.jpg)'
- en: If invoked with no arguments, `dnsmap` uses its own built-in wordlist to enumerate
    the domains. This word list can be found under the `/usr/share/wordlist_TLAs.txt`
    path.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有参数调用`dnsmap`，它将使用自己内置的单词列表来枚举域。此单词列表可以在`/usr/share/wordlist_TLAs.txt`路径下找到。
- en: 'The following are the `dnsmap` options:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是`dnsmap`的选项：
- en: '`-w WORDLIST`: This option accepts a wordlist as an argument. `dnsmap` will
    use this wordlist to enumerate the possible subdomains.'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-w WORDLIST`：此选项接受一个单词列表作为参数。`dnsmap`将使用此单词列表来枚举可能的子域。'
- en: '`-r RESULTS-FILE`: This option tells `dnsmap` where to save the results of
    its operation. There may be hundreds of enumerated IP addresses and subdomains,
    and it''s always good to save them somewhere to be processed later.'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-r RESULTS-FILE`：此选项告诉`dnsmap`在哪里保存其操作的结果。可能会有数百个枚举的IP地址和子域，将它们保存在某个地方以供以后处理总是很好的。'
- en: '`-c CSV-RESULTS-FILE`: This is the same as the preceding option, except results
    are saved in a **Common Separated Vector** (**CSV**) file, which is a popular
    format for databases.'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-c CSV-RESULTS-FILE`：这与前面的选项相同，只是结果保存在**逗号分隔向量**（**CSV**）文件中，这是数据库的常用格式。'
- en: '`-i IP-IGNORE-LIST`: This option accepts a list of IPs to ignore during lookups,
    in case they muddle or introduce false positives to the output.'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-i IP-IGNORE-LIST`：此选项接受要在查找过程中忽略的IP列表，以防它们混淆或向输出引入错误的阳性。'
- en: 'That''s about it for `dnsmap`: not a very complex tool but it always gets the
    job done!'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是关于`dnsmap`的全部内容：不是一个非常复杂的工具，但它总是能完成任务！
- en: Enumerating targets on the local network
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在本地网络上枚举目标
- en: Enumerating targets on your local network will be done here using a tool called
    **Network mapper** (**Nmap**) and another tool called **Arping**. Nmap itself
    is the de facto standard for network assessment and can pretty much do anything
    Hping, Fping, and Arping can do. In many situations, especially in firewall assessments,
    penetration testers need to be able to fine-tune the packets that are sent and
    perform analysis on precisely collected data. Tools such as Hping, Fping, and
    Arping are perfect for this as they allow penetration testers to construct any
    arbitrary packets for almost any networking protocol required.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，将使用一个名为**网络映射器**（**Nmap**）和另一个名为**Arping**的工具来枚举本地网络上的目标。Nmap本身是网络评估的事实标准，几乎可以执行Hping、Fping和Arping的任何操作。在许多情况下，特别是在防火墙评估中，渗透测试人员需要能够微调发送的数据包并对准确收集的数据进行分析。诸如Hping、Fping和Arping之类的工具非常适合这样做，因为它们允许渗透测试人员为几乎任何所需的网络协议构造任意数据包。
- en: In the next section, we'll cover the Arping tool and demonstrate how it can
    be used to perform discovery-based on the ARP protocol.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将介绍Arping工具，并演示如何使用它执行基于ARP协议的发现。
- en: Host discovery with Arping
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Arping进行主机发现
- en: Arping is a utility that allows you to craft ARP or ICMP packets and send them
    to arbitrary hosts on your local network. Naturally, this makes for a great way
    to enumerate live hosts. It's also a very information-driven tool and actually
    prints the ICMP and ARP replies straight to the screen.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: Arping是一个实用程序，允许您创建ARP或ICMP数据包并将其发送到本地网络上的任意主机。当然，这是一个枚举活动主机的好方法。它还是一个非常信息驱动的工具，实际上将ICMP和ARP回复直接打印到屏幕上。
- en: 'The following examples will demonstrate some simple usage of the Arping command.
    To start off, before we cover some of the options and addressing modes, let''s
    see how a simply ARP ping is done:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例将演示Arping命令的一些简单用法。首先，在我们介绍一些选项和地址模式之前，让我们看看如何进行简单的ARP ping：
- en: '[PRE23]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The following screenshot is what your output should look like, with the exception
    that the MAC address is returned and possibly the IP address is used:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 您的输出应该如下所示，除了返回MAC地址和可能使用IP地址之外：
- en: '![Host discovery with Arping](img/5107OT_03_12.jpg)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![使用Arping进行主机发现](img/5107OT_03_12.jpg)'
- en: If you receive a reply from a host, it's a strong indication that the mentioned
    host actually exists on the network. Of course, due to the lack of cryptographic
    strength of the ARP protocol, there really is no guarantee that this information
    is strictly true. You should remember this about all information communicated
    over insecure protocols.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 如果从主机收到回复，这强烈表明所提到的主机实际上存在于网络中。当然，由于ARP协议的加密强度不足，这些信息是否严格属实并不保证。您应该记住这一点，关于通过不安全协议传输的所有信息。
- en: 'You may want to walk through a list of IPs on a given subnet. Using a little
    bash scripting, you can do it the following way. The following code will be made
    available on the book''s website:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能希望遍历给定子网上的IP列表。使用一些bash脚本，您可以按以下方式执行。以下代码将在本书的网站上提供：
- en: '[PRE24]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'In the previous script, we used the `–c` command to make sure only three requests
    are sent. We also allow the user to specify the interface being used because often
    Arping doesn''t really look it up interfaces autonomously really well. Also, a
    prefix for the local IP address must be entered here. So, if you''d like to use
    this script, save it in a file (for this example, we will call it `arpsweep.sh`)
    and invoke it as follows if you''re using the default Ethernet interface:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一个脚本中，我们使用了`-c`命令来确保只发送三个请求。我们还允许用户指定正在使用的接口，因为通常Arping并不真正很好地自主查找接口。此外，必须在此处输入本地IP地址的前缀。因此，如果您想使用此脚本，请将其保存在文件中（在本例中，我们将其称为`arpsweep.sh`），并在使用默认以太网接口时调用它如下：
- en: '[PRE25]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Otherwise, if you''re using the default wireless LAN interface, then use the
    following command:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 否则，如果您使用默认的无线局域网接口，则使用以下命令：
- en: '[PRE26]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The other options for Arping are as follows:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: Arping的其他选项如下：
- en: '`-c COUNT`: This means only send `COUNT` amount of requests.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-c COUNT`：这意味着只发送`COUNT`数量的请求。'
- en: '`-d`: This finds duplicate replies. This option is great as a monitoring tool.
    It will be able to pick up if anyone on your network is spoofing the MAC address
    of another host; attackers often do this to initiate man-in-the-middle attacks.'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-d`：查找重复的回复。此选项作为监视工具非常好。它将能够检测到您网络中是否有人伪造了另一个主机的MAC地址；攻击者经常这样做以发起中间人攻击。'
- en: '`-i`: This is the interface. Don''t try to autonomously find the interface;
    use the one supplied.'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-i`：这是接口。不要尝试自动找到接口；使用提供的接口。'
- en: '`-p`: This turns on promiscuous mode for the specified interface and allows
    you to specify MAC addresses other than your own as the source, that is, MAC spoofing.'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-p`：为指定的接口打开混杂模式，并允许您指定其他MAC地址作为源地址，即MAC欺骗。'
- en: '`-r`: This displays raw output and means only the MAC and IP addresses are
    displayed for each reply.'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-r`：显示原始输出，表示每个回复只显示MAC和IP地址。'
- en: 'As for the addressing modes, the options are as follows:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 至于寻址模式，选项如下：
- en: '`-s MAC`: This means use `MAC` as the source MAC address. This option works
    great if the network or selection of hosts you are enumerating use source MAC
    filtering by only serving responses to a select number of hosts.'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-s MAC`：这意味着使用`MAC`作为源MAC地址。如果您正在枚举的网络或主机选择使用源MAC过滤，只向少数主机提供响应，这个选项非常有效。'
- en: Tip
  id: totrans-131
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Before sending off any packets, try running a packet capturing tool (which is
    covered later in the book) and try to get a feel for which communication patterns
    are regular. Which host is talking to which host using which protocol and how
    frequently. This may allow you to piggyback the natural rhythm of the network
    as much as possible and possibly fly completely under the radar of things such
    as Snort and other IDS/IPS tools.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在发送任何数据包之前，尝试运行数据包捕获工具（本书后面会介绍），并尝试了解哪些通信模式是常规的。哪个主机正在使用哪种协议与哪个主机通信，以及频率如何。这可能使您尽可能地利用网络的自然节奏，并可能完全不被Snort和其他IDS/IPS工具等工具察觉。
- en: '`-S IP`: This options instructs to use IP as the source IP address, that is,
    IP spoofing. If the host-based firewalls only allow a limited number of IP addresses
    to communicate with them, this option is great for spoofing one of the allowed
    IP addresses.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-S IP`：此选项指示使用IP作为源IP地址，即IP欺骗。如果基于主机的防火墙只允许有限数量的IP地址与其通信，此选项非常适合欺骗其中一个允许的IP地址。'
- en: '`-t MAC`: This options instructs to use `MAC` as the target MAC address.'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-t MAC`：此选项指示使用`MAC`作为目标MAC地址。'
- en: '`-T IP`: This options instructs to use `IP` as the target IP address.'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-T IP`：此选项指示使用`IP`作为目标IP地址。'
- en: That's about it as far as Arping goes. I would urge you to try out `arping`.
    When it comes to fine-tuning ICMP and ARP traffic, there are few tools that work
    as well as Arping does. If you need a little background on the ARP protocol, I've
    included some interesting links in the *Further reading* section for you to check
    out.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 就ARPing而言，就是这样了。我建议您尝试`arping`。在微调ICMP和ARP流量方面，很少有工具能像ARPing一样有效。如果您需要了解ARP协议的一些背景知识，我在*进一步阅读*部分中包含了一些有趣的链接供您查阅。
- en: Target enumeration with Nmap
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Nmap进行目标枚举
- en: ICMP may often at times be abused by attackers on a local network, since by
    its nature, it is not designed to provide security or designed to take into account
    any current security mechanisms. This often results in ICMP being abused by attackers
    to obtain sensitive information or information that can be used to determine or
    deduce sensitive details about hosts on a network.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: ICMP经常被攻击者在本地网络上滥用，因为它的性质决定了它不是为了提供安全性或考虑任何当前的安全机制而设计的。这经常导致攻击者滥用ICMP来获取敏感信息或可以用来确定或推断网络上主机的敏感细节的信息。
- en: 'To start off, let''s probe a host for responses using the ICMP protocol. Nmap''s
    usage specification for ICMP probing looks like the following command:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们使用ICMP协议探测主机的响应。Nmap对ICMP探测的使用规范如下命令：
- en: '[PRE27]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The following are some examples:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些示例：
- en: '[PRE28]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The `–sn` switch tells Nmap to use the ICMP protocol to determine whether the
    hosts in the mentioned range are reachable, and it also disables port scanning.
    `-v` means verbose mode and `–-reason` tells Nmap to actually print information
    about why it has determined certain results about a host. The output of the previous
    command is as shown in the following screenshot:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '`–sn`开关告诉Nmap使用ICMP协议来确定所述范围内的主机是否可达，并且禁用端口扫描。`-v`表示详细模式，`–-reason`告诉Nmap实际打印关于它确定主机的某些结果的信息。上一个命令的输出如下截图所示：'
- en: '![Target enumeration with Nmap](img/5107OT_03_14.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![使用Nmap进行目标枚举](img/5107OT_03_14.jpg)'
- en: ICMP protocol is a networking protocol used to request debugging or troubleshooting
    information from network hosts.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: ICMP协议是一种用于从网络主机请求调试或故障排除信息的网络协议。
- en: 'Other host discovery options include the following:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 其他主机发现选项包括以下内容：
- en: '`-PE`: This tells Nmap to use ICMP echo requests, which is the packet that''s
    sent when you ping a host.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-PE`：告诉Nmap使用ICMP回显请求，这是在ping主机时发送的数据包。'
- en: '`-PP`: This tells Nmap to use timestamp requests. Hosts that respond to timestamp
    requests are usually reported as findings in penetration tests. Often, default
    and weakly configured cryptographic libraries use system time to generate the
    cryptographic primitives. `-PM` uses ICMP net mask requests; these ICMP packets
    were originally implemented so that network engineers could query a host for information
    about its network configuration. The following command is an example of this:'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-PP`：告诉Nmap使用时间戳请求。响应时间戳请求的主机通常在渗透测试中报告为发现。通常，默认和配置薄弱的加密库使用系统时间来生成加密原语。`-PM`使用ICMP网络掩码请求；这些ICMP数据包最初是为了让网络工程师查询主机的网络配置信息而实现的。以下命令是一个示例：'
- en: '[PRE29]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'If you need to make use of other protocols to identify your targets, Nmap offers
    a wide range of functionality. The following are some of those options:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您需要使用其他协议来识别您的目标，Nmap提供了广泛的功能。以下是其中一些选项：
- en: '`-PS TCP SYN` **flag scan**: This option sends SYN packets to a host and determines
    whether they are actually on the network by interpreting the response or the lack
    there of.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-PS TCP SYN` **标志扫描**：此选项向主机发送SYN数据包，并通过解释响应或缺少响应来确定它们是否实际上在网络上。'
- en: '`-PA TCP ACK` **flag scan**: This option tells Nmap to send TCP ACK flags to
    the target to determine whether it is alive and responding to packets. Machines
    on a network will often try to strictly respect the TCP protocol standard and
    respond to packets with the ACK flag set by sending a packet with the REST packet.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-PA TCP ACK` **标志扫描**：此选项告诉Nmap向目标发送TCP ACK标志，以确定其是否存活并响应数据包。网络上的机器通常会严格遵守TCP协议标准，并通过发送带有REST数据包的ACK标志来响应数据包。'
- en: '`-PO IP` **protocol ping**: This option enumerates the protocols supported
    by a target host, by listening for TCP packets with the REST flag set, since live
    hosts will often respond this way to invalid packets with arbitrary identifiers
    set for the protocol number.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-PO IP` **协议ping**：此选项通过监听带有REST标志的TCP数据包来枚举目标主机支持的协议，因为活动主机通常会以这种方式响应对协议号设置任意标识符的无效数据包。'
- en: For more options available in Nmap regarding host discovery, please see the
    links included in the *Further reading* section.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 有关Nmap中有关主机发现的更多选项，请参阅*进一步阅读*部分中包含的链接。
- en: Summary
  id: totrans-155
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we focused on basic methods and tools penetration testers use
    to glean information about the networks they target during security assessments.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们重点介绍了渗透测试人员在安全评估期间用来获取有关其目标网络的信息的基本方法和工具。
- en: The chapter started off by demonstrating the Whois tool and covered tips and
    tricks one can use to automate the whois tool as well as do very rewarding look
    ups and integrate the output from Whois with other useful tools. We then moved
    on to the DNS protocol and covered tools available from the Kali Linux command
    line that can be used to gain information from DNS servers about a specific target.
    We specifically discussed `dig` and `dnsmap`. After this, we covered how to enumerate
    targets on a local network by making use of the light-weight addressing protocols
    commonly used in networks. The target enumeration section focused on demonstrating
    ways to use Arping and Nmap to enumerate local targets.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 本章首先演示了Whois工具，并介绍了可以用来自动化Whois工具以及进行非常有益的查找和将Whois的输出与其他有用工具集成的技巧和窍门。然后我们转向DNS协议，并介绍了Kali
    Linux命令行中可用的工具，可以用来从DNS服务器获取关于特定目标的信息。我们特别讨论了`dig`和`dnsmap`。之后，我们介绍了如何利用网络中常用的轻量级寻址协议来枚举本地网络上的目标。目标枚举部分重点演示了如何使用Arping和Nmap来枚举本地目标。
- en: Further reading
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: RIPE Whois Database Query Reference Manual at [http://www.ripe.net/ripe/docs/ripe-358](http://www.ripe.net/ripe/docs/ripe-358)
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RIPE Whois数据库查询参考手册在[http://www.ripe.net/ripe/docs/ripe-358](http://www.ripe.net/ripe/docs/ripe-358)
- en: dig (1) Linux man page at [http://linux.die.net/man/1/dig](http://linux.die.net/man/1/dig)
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: dig (1) Linux man页面在[http://linux.die.net/man/1/dig](http://linux.die.net/man/1/dig)
- en: Storing Certificates in the Domain Name System (DNS) at [http://tools.ietf.org/html/rfc4398](http://tools.ietf.org/html/rfc4398)
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在域名系统（DNS）中存储证书在[http://tools.ietf.org/html/rfc4398](http://tools.ietf.org/html/rfc4398)
- en: Domain Names – Implementation and Specification at [http://www.ietf.org/rfc/rfc1035.txt](http://www.ietf.org/rfc/rfc1035.txt)
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 域名 - 实施和规范在[http://www.ietf.org/rfc/rfc1035.txt](http://www.ietf.org/rfc/rfc1035.txt)
- en: Nmap Online Book at [http://nmap.org/book/toc.html](http://nmap.org/book/toc.html)
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nmap在线书籍在[http://nmap.org/book/toc.html](http://nmap.org/book/toc.html)
