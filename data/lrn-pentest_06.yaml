- en: Mastering Social Engineering
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 掌握社会工程
- en: Penetration testing does not always involve using a computer and firing exploits.
    In this chapter, we will learn how to master the art of social engineering, a
    skill that every penetration tester should have. Social engineering can be complex,
    as you try to use psychological manipulation to break the minds of your targets.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 渗透测试并不总是涉及使用计算机和利用漏洞。在本章中，我们将学习如何掌握社会工程的艺术，这是每个渗透测试人员都应该具备的技能。社会工程可能很复杂，因为你试图使用心理操纵来影响目标的思维。
- en: In this chapter, you will benefit from knowing what social engineering is, the
    different types of social engineering, and what tools can be used to perform social
    engineering. You will gain skills by learning how to build a social engineering
    attack using tools within Kali Linux. By continuing to explore and solidifying
    your social engineering skills, you can build a social attack, which, if executed
    on the right targets, can lead to you achieving your goal by using minimal software
    exploits.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将受益于了解什么是社会工程，社会工程的不同类型以及可以用来执行社会工程的工具。通过学习如何使用Kali Linux内的工具构建社会工程攻击，你将获得技能。通过继续探索和巩固你的社会工程技能，你可以构建一种社会攻击，如果对目标执行得当，可以通过最小的软件漏洞实现你的目标。
- en: 'As you progress through this chapter, you will learn about the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 随着你在本章的学习过程中，你将了解以下主题：
- en: What is social engineering?
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是社会工程？
- en: Social engineering tools
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 社会工程工具
- en: Creating a social engineering campaign
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建社会工程活动
- en: Technical requirements
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'The following technical requirements are needed for this chapter:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本章需要以下技术要求：
- en: Kali Linux 2019.1
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux 2019.1
- en: What is social engineering?
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是社会工程？
- en: Social engineering can be defined as a form of psychological manipulation that
    persuades a person into giving up confidential information. It is a form of a
    cyberattack that uses trickery and deception instead of using any type of software
    exploit. Of course, software is involved in building a social engineering attack,
    but the main component is how well you deceive the target into believing what
    you are doing is legitimate.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 社会工程可以被定义为一种心理操纵形式，说服一个人放弃机密信息。这是一种利用欺骗和欺诈而不是使用任何类型的软件漏洞的网络攻击形式。当然，软件参与了构建社会工程攻击，但主要组成部分是你如何欺骗目标相信你所做的是合法的。
- en: Software and humans are really not that different from each other. You may be
    wondering how humans and software can be so similar. Well, when it comes to vulnerabilities
    in both software and humans, these can be exploited and taken advantage of by
    attackers to get what they want. In relation to software, it's related to buggy
    code that is generally exploited, which leads to flaws in software that an attacker
    can compromise.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 软件和人类实际上并没有那么不同。你可能想知道人类和软件如何如此相似。当涉及到软件和人类的漏洞时，攻击者可以利用这些漏洞来获取他们想要的东西。与软件相关的漏洞通常是被利用的，这导致了软件的缺陷，攻击者可以利用这些缺陷。
- en: 'With humans, it is our nature that makes it easy for people to target others
    using psychological manipulation. Humans have a variety of emotions that separate
    us from other living creatures. However, some of those emotions are prime targets
    for social engineering attacks. For example, we have the following emotional traits:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 对于人类来说，我们的本性使得人们很容易利用心理操纵来攻击其他人。人类有各种情感，这让我们与其他生物有所不同。然而，其中一些情感是社会工程攻击的主要目标。例如，我们有以下情感特征：
- en: Helping others
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 帮助他人
- en: Trusting others
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信任他人
- en: Fear
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 恐惧
- en: Obedience to authority
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服从权威
- en: Social engineering attacks take advantage of the vulnerabilities of our emotions,
    and persuade us into performing an activity such as clicking a fraudulent link,
    visiting a malicious website, or opening a malicious document.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 社会工程攻击利用我们情感的脆弱性，说服我们执行某种活动，比如点击欺诈链接、访问恶意网站或打开恶意文件。
- en: Most organizations invest a lot of effort into training employees about social
    engineering, but sadly, some do not. Irrespective of security controls that are
    put in place, end users will ultimately have access to sensitive information that
    can cause harm to an organization if it fell into the wrong hands. Curiosity will
    cause a person to pick up that USB lying on the floor and plug it in to see what
    is on it. Dropping infected USB sticks around a target organization is a common
    penetration testing technique, and it is also used by attackers.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数组织都在培训员工有关社会工程方面投入了大量的精力，但遗憾的是，有些组织没有这样做。无论设置了什么安全控制措施，最终用户最终都将能够访问可能对组织造成伤害的敏感信息。好奇心会导致一个人捡起地上的USB并插入，看看里面有什么。在目标组织周围放置感染的USB存储设备是一种常见的渗透测试技术，攻击者也会使用这种方法。
- en: Social engineering comes in many forms, so let's explore some of them.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 社会工程有许多形式，让我们来探索其中一些。
- en: Pretexting
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 假设
- en: Pretexting can be defined as the practice of presenting yourself as someone
    else, with the intention of obtaining information. Pretexters can impersonate
    co-workers, IT staff, bankers, friends and family, or anyone that can be perceived
    as trustworthy or having authority over the target.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 假设可以被定义为以他人身份出现，目的是获取信息的做法。假设者可以冒充同事、IT人员、银行家、朋友和家人，或者任何被视为值得信赖或对目标有权威的人。
- en: Pretexting forms the foundation for any social engineering attack. When you're
    performing a penetration test, make sure that you spend enough time building a
    solid and believable pretext.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 假设形成了任何社会工程攻击的基础。当你进行渗透测试时，确保你花足够的时间建立一个坚实可信的假设。
- en: For example, we have all received emails claiming that we have inherited a small
    fortune, but in order to claim it, we need to either provide some kind of information
    or click on a link. The chances of a person falling for this is very slim, as
    the pretext is very poor. Let's assume that you always purchase online from Amazon,
    and now you receive an email from Amazon stating that there is a package that
    cannot be delivered due to missing information. This becomes more believable as
    the pretext is more solid.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们都收到过声称我们继承了一笔小财富的电子邮件，但为了领取它，我们需要提供某种信息或点击一个链接。一个人上当的机会非常渺茫，因为借口非常差。假设您总是在亚马逊上网购，现在您收到了一封来自亚马逊的邮件，声称由于缺少信息无法交付包裹。这样的借口更加可信。
- en: During a penetration test, you need may need to simulate a social engineering
    attack. Conducting proper information gathering on your target is critical to
    building a believable pretext. Some of the things that you would consider are
    company size, locations, number of employees, emails, employee information, and
    so on. You would also look at what is available from a technological standpoint,
    such as public-facing web servers, VPNs, and email servers.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在渗透测试期间，您可能需要模拟社会工程攻击。对目标进行适当的信息收集对构建一个可信的借口至关重要。您需要考虑的一些事情包括公司规模、地点、员工人数、电子邮件、员工信息等。您还需要考虑从技术角度来看有哪些可用的东西，比如面向公众的网络服务器、VPN和电子邮件服务器。
- en: Once you have obtained enough information, you can start defining success criteria
    for each pretext. For example, if the target organization does not have offices
    spread across the country, the chance of success of posing as an employee is low,
    as the employees are probably well-known. However, if the organization has a large
    presence that spans across multiple countries, you have a higher success rate
    of posing as an employee from a department in another location.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您获得足够的信息，您可以开始为每个借口定义成功的标准。例如，如果目标组织在全国范围内没有分布办公室，那么假扮成员工的成功几率就很低，因为员工可能是众所周知的。然而，如果该组织在多个国家拥有大量业务，您就有更高的成功率，可以假扮成另一个地点部门的员工。
- en: Phishing
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络钓鱼
- en: Phishing is a cyberattack whereby an attacker uses a disguised email to obtain
    sensitive information from a target. Information that's obtained can be anything
    from credit card details, user login information, network credentials, and more.
    This type of attack is done against both individuals and large organizations.
    You have probably noticed a lot of phishing emails in your personal email, since
    these attacks are performed at a very large scale. In this type of attack, the
    attackers are not interested in anyone specifically. They are simply casting a
    wide net, so to speak, in order to persuade any unsuspecting person into providing
    valuable information.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 网络钓鱼是一种网络攻击，攻击者使用伪装的电子邮件从目标那里获取敏感信息。获取的信息可以是信用卡详细信息、用户登录信息、网络凭证等任何东西。这种类型的攻击针对个人和大型组织。您可能已经在个人电子邮件中收到了许多网络钓鱼邮件，因为这些攻击是在非常大的规模上进行的。在这种类型的攻击中，攻击者对任何特定的人都不感兴趣。他们只是在广泛地投网，以说服任何不起疑的人提供有价值的信息。
- en: 'Some of the common features of a phishing email are as follows:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 一些网络钓鱼邮件的常见特征如下：
- en: '**Attachments**: You often notice attachments in emails that claim to contain
    an invoice or document. These usually contain a macro, which contains a payload
    that can drop a remote shell, allowing an attacker to access your computer, or
    even drop malware such as ransomware. Lately, some of these emails have been containing
    `.html` files, which are often in `.doc` or `.js` format. These have a low detection
    rate by antivirus software as they are not generally associated with email attacks.
    Of course, as antiviruses mature, so does the attacker''s tactics.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**附件**：您经常会在声称包含发票或文件的电子邮件中发现附件。这些通常包含一个宏，其中包含一个可以释放远程shell的有效负载，使攻击者可以访问您的计算机，甚至释放勒索软件等恶意软件。最近，一些这样的邮件包含`.html`文件，通常是`.doc`或`.js`格式。这些文件的杀毒软件检测率较低，因为它们通常不与电子邮件攻击相关联。当然，随着杀毒软件的成熟，攻击者的策略也在不断发展。'
- en: '**Hyperlinks**: Some phishing emails may contain a link redirecting you to
    a website that may look legit. Common types of phishing emails are those that
    request you to reset your password, or confirm your details to avoid your account
    being disabled, and so on. Usually, when you hover over the link, you will see
    the actual URL, which is not legitimate, but as the attackers mature in their
    tactics, they start using URLs that seem very similar to the legitimate one. For
    example, [https://www.facebook.com/](https://www.facebook.com/) could be depicted
    as [www.faccebook.com](https://www.facebook.com/) or [www.faceboook.com](https://www.facebook.com/),
    which can be easily missed if you don''t look carefully.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**超链接**：一些网络钓鱼邮件可能包含一个链接，将您重定向到一个看起来合法的网站。常见的网络钓鱼邮件类型包括要求您重置密码，或者确认您的详细信息以避免您的帐户被禁用等。通常，当您将鼠标悬停在链接上时，您会看到实际的URL，这并非合法，但随着攻击者策略的成熟，他们开始使用看起来非常类似于合法的URL。例如，[https://www.facebook.com/](https://www.facebook.com/)可能被描述为[www.faccebook.com](https://www.facebook.com/)或[www.faceboook.com](https://www.facebook.com/)，如果您不仔细观察，很容易被忽略。'
- en: '**Too good to be true**: Many phishing emails have statements that are designed
    to attract people''s attention. These are usually related to lucrative offers,
    such as winning a device, the lottery, or inheriting a small fortune from a distant
    relative. One thing to keep in mind is that if it seems too good to be true, it
    probably is.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**好得令人难以置信**：许多网络钓鱼邮件中都有旨在吸引人们注意的陈述。这些通常与诱人的优惠有关，比如赢得设备、彩票，或者从远亲那里继承一笔小财富。要记住的一件事是，如果看起来太好以至于难以置信，那可能就是如此。'
- en: Phishing kits are easily available on the dark net. The availability of these
    kits makes it easy for attackers with minimal skills to launch a phishing campaign.
    A phishing kit bundles website resources and tools that are ready to be installed
    on a server. Once installed, all that is required is for the attacker to send
    emails to the victims, which directs them to the phishing site.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 网络钓鱼工具包在暗网上很容易获得。这些工具包的可用性使得具有最低技能的攻击者可以轻松发动网络钓鱼攻击。网络钓鱼工具包捆绑了网站资源和工具，可以直接安装在服务器上。一旦安装完成，攻击者只需向受害者发送电子邮件，将他们引导到网络钓鱼网站。
- en: To keep abreast of current phishing links, take a look at the phishing feeds
    hosted on OpenPhish ([https://openphish.com](https://openphish.com)) and PhishTank
    ([https://www.phishtank.com](https://www.phishtank.com)).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 要及时了解当前的网络钓鱼链接，请查看OpenPhish（[https://openphish.com](https://openphish.com)）和PhishTank（[https://www.phishtank.com](https://www.phishtank.com)）上托管的网络钓鱼信息。
- en: Spear phishing
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 鱼叉式网络钓鱼
- en: Spear phishing is a cyberattack that is targeted toward a specific individual,
    department, or company that appears to be from a trusted source. This type of
    attack is hard to spot and are well thought out, and often the targets are researched
    well in advanced before such an attack is performed. This is not like a normal
    phishing attack where the attackers cast a wide net; spear phishing is a directed
    attack.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 鱼叉式网络钓鱼是针对特定个人、部门或公司的网络攻击，看起来来自一个可信任的来源。这种类型的攻击很难被发现，经过深思熟虑，通常在进行此类攻击之前会对目标进行深入研究。这不像普通的网络钓鱼攻击，攻击者会广泛投放网，鱼叉式网络钓鱼是一种有针对性的攻击。
- en: The core component of a spear phishing attack is information gathering. Gathering
    information about email addresses, people, and their positions within the target
    organization (using OSINT tools such as LinkedIn) will help you define who your
    target will be and who you can impersonate. As we learned in [Chapter 3](96db9b59-1985-4390-aa0c-ba91c0b0e9cf.xhtml),
    *Performing Information Gathering*, open source intelligence can provide you with
    a wealth of information on your targets.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 鱼叉式网络钓鱼攻击的核心组成部分是信息收集。收集有关电子邮件地址、人员以及他们在目标组织内的职位的信息（使用LinkedIn等OSINT工具）将有助于您确定您的目标和您可以冒充的人。正如我们在[第3章](96db9b59-1985-4390-aa0c-ba91c0b0e9cf.xhtml)中所学到的，*执行信息收集*，开源情报可以为您提供关于目标的大量信息。
- en: 'Some common features of spear phishing attacks are as follows:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 一些常见的鱼叉式网络钓鱼攻击特征如下：
- en: '**Business email compromise (BEC)**: This aims to abuse processes such as payroll
    or invoices. The attack would leverage an email from a reputable source (within
    the `from` field) and contain a document related to an invoice. To the average
    human, nothing appears untoward and they would open that invoice and ultimately
    expose their system to the attack.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**商业电子邮件欺诈（BEC）**：这旨在滥用诸如工资单或发票之类的流程。攻击将利用来自可靠来源（在`from`字段内）的电子邮件，并包含与发票相关的文件。对于普通人来说，看起来一切正常，他们会打开那张发票，最终暴露他们的系统受到攻击。'
- en: '**Multi-vector threats**: This attack uses multiple attack vectors. For example,
    the spear phishing email will contain dynamic URLs, drive-by downloads, and a
    payload encoded within a document to avoid detection.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**多向威胁**：这种攻击使用多种攻击向量。例如，鱼叉式网络钓鱼电子邮件将包含动态URL、恶意下载和文档中编码的有效负载，以避免被检测。'
- en: '**Virtually undetectable**: Since a well-crafted spear phishing email does
    not have characteristics that are found within the large amounts of normal phishing
    emails that are found on the internet, it makes it harder to detect by traditional
    reputation and spam filters.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**几乎无法检测**：由于精心制作的鱼叉式网络钓鱼电子邮件没有大量普通网络钓鱼电子邮件中的特征，使得它更难以被传统的声誉和垃圾邮件过滤器检测到。'
- en: '**Whaling**: In this type of attack, a spear phishing campaign is directed
    at a high-profile target, often someone in the c-suite of an organization. High-profile
    people often have more privileged information than the average person, and this
    makes them a prime target. Any information that''s stolen in a whaling attack
    is more lucrative on the black market, over and above the possibility of privileged
    credentials that an attacker can use.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**鲸鱼式网络钓鱼**：在这种类型的攻击中，鱼叉式网络钓鱼活动针对的是高调目标，通常是组织中的高管。高调人士通常比普通人拥有更多的特权信息，这使得他们成为主要目标。在鲸鱼式攻击中窃取的任何信息在黑市上都更有价值，除了攻击者可以使用的特权凭证的可能性之外。'
- en: Tailgating
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 尾随
- en: '**Tailgating** (also known as piggybacking) is a form of physical social engineering.
    Tailgating can be defined as a physical security breach where an unauthorized
    person follows an authorized person into a secure area.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 尾随（也称为搭便车）是一种身体社会工程学形式。尾随可以被定义为未经授权的人跟随经过授权的人进入安全区域的一种物理安全漏洞。
- en: A common type of tailgating would be someone waiting around a common area with
    their hands full for an authorized person to open an access-controlled door. During
    this time, the unauthorized person could ask them to hold the door open while
    they rush through. Some other forms might include striking up conversations with
    employees at a common smoking area. By the time the employee has completed smoking,
    he or she will likely hold the door open for you, masquerading as an employee.
    Humans have common courtesy, which can lead to vulnerabilities, such as holding
    doors open for unauthorized people.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 一种常见的尾随类型可能是有人在一个公共区域等待，双手拿满了东西，等待一个授权人员打开一个受控门。在这段时间里，未经授权的人可能会请求他们把门打开，然后他们就可以冲进去。其他形式可能包括在一个公共吸烟区与员工攀谈。等到员工吸完烟，他们很可能会为您开门，假装是员工。人类有常见的礼貌，这可能导致漏洞，比如为未经授权的人开门。
- en: Some organizations have good physical security in place, so this might not work
    everywhere. However, performing sufficient information gathering on the target's
    physical security will help you plan your attack.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 一些组织在物理安全方面做得很好，所以这种方法可能并不适用于所有地方。然而，对目标的物理安全进行充分的信息收集将有助于您计划攻击。
- en: As you perform penetration testing, you can leverage any of the preceding techniques
    within your penetration test. Having a good background understanding of what each
    technique entails will help you plan your penetration test more effectively.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在执行渗透测试时，您可以利用上述任何技术。对每种技术的良好背景了解将有助于您更有效地规划渗透测试。
- en: Social engineering tools
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 社会工程工具
- en: There are a number of social engineering toolkits available on the internet.
    Some are used to perform social engineering tasks as a form of awareness, while
    others are sold on the dark net for malicious purposes. We will not focus on social
    engineering tools on the dark net, as this is out of the scope of this book, but
    we will look at the tools that are available within Kali Linux and others that
    you can install.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网上有许多社会工程学工具包可供使用。有些用于执行社会工程任务以形成意识，而其他一些则在暗网上出售以恶意目的。我们不会专注于暗网上的社会工程工具，因为这超出了本书的范围，但我们将看看Kali
    Linux中可用的工具以及您可以安装的其他工具。
- en: The social engineering toolkit (SET)
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 社会工程工具包（SET）
- en: The **social engineering toolkit** (**SET**) is a suite of tools that allows
    you to focus on the human element while conducting penetration testing. The main
    purpose of the social engineering toolkit is to create social engineering attacks
    that you can use. The tool is a Python-driven tool that's currently supported
    on Linux. At the time of writing, it's under the experimental phase for macOS.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '**社会工程工具包**（SET）是一套工具，允许您在进行渗透测试时专注于人的因素。社会工程工具包的主要目的是创建您可以使用的社会工程攻击。该工具是一个由Python驱动的工具，目前在Linux上受支持。撰写本文时，它正在macOS的实验阶段。'
- en: 'The social engineering toolkit allows you to create a number of social engineering
    attacks. Attacks that are currently included at the time of writing are as follows:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 社会工程工具包允许您创建多种社会工程攻击。撰写本文时，包括以下攻击：
- en: '**Spear-phishing attacks**: Allows you to create email phishing campaigns.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**鱼叉式网络钓鱼攻击**：允许您创建电子邮件网络钓鱼活动。'
- en: '**Website attacks**: Allows you to create attacks such as website cloning and
    more.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网站攻击**：允许您创建网站克隆等攻击。'
- en: '**Infectious media generator**: Enables the creation of an autorun, which can
    be used on a USB device.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**传染性媒体生成器**：可创建可用于USB设备的自动运行。'
- en: '**Create a payload and listener**: Creates a reverse shell payload, allowing
    access to the target machine.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**创建有效载荷和监听器**：创建反向shell有效载荷，允许访问目标机器。'
- en: '**Mass mailer attack**: Creates a phishing email that can be sent to a large
    audience.'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**大规模邮件攻击**：创建可发送给大量受众的网络钓鱼邮件。'
- en: '**Arduino-based attacks**: Allows you to create attacks by leveraging Arduino
    devices such as the Teensy. When inserted into a PC, it''s detected as a keyboard,
    allowing exploits to be delivered to the target machine.'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基于Arduino的攻击**：允许您利用Arduino设备（如Teensy）创建攻击。插入PC时，它被检测为键盘，允许将漏洞传递到目标机器。'
- en: '**Wireless access point attacks**: Enables a malicious wireless access point
    to be created and allows you to intercept traffic as it passes.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无线接入点攻击**：允许创建恶意无线接入点，并允许您拦截通过的流量。'
- en: '**QRCode generator attacks**: Generates a QRCode to any URL you specify. This
    is good for redirecting your targets to a malicious URL.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**QR码生成器攻击**：生成您指定的任何URL的QR码。这对将目标重定向到恶意URL很有用。'
- en: '**Powershell attacks**: Creates Powershell-based attacks, which can be used
    to perform a blind shell or dump a SAM database.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Powershell攻击**：创建基于Powershell的攻击，可用于执行盲目shell或转储SAM数据库。'
- en: '**SMS spoofing attacks**: Creates an SMS, which can be used to social engineer
    your target.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**短信欺骗攻击**：创建可用于社会工程目标的短信。'
- en: 'At the time of writing, the current version of the social engineering toolkit
    was `8.0`. The pre-installed version in Kali Linux 2019.1 is `7.7.9`:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 撰写本文时，社会工程工具包的当前版本为`8.0`。Kali Linux 2019.1中预安装的版本为`7.7.9`：
- en: '![](img/a4996a3f-3ff6-4d0e-a542-cd3c12526317.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a4996a3f-3ff6-4d0e-a542-cd3c12526317.png)'
- en: 'Figure 1: Pre-installed version in Kali 2019.1'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图1：Kali 2019.1中预安装的版本
- en: In order to update to the latest version, you will need to download the latest
    version from the TrustedSec GitHub repository, which is located at [https://github.com/trustedsec/social-engineer-toolkit](https://github.com/trustedsec/social-engineer-toolkit).
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 要升级到最新版本，您需要从TrustedSec GitHub存储库下载最新版本，该存储库位于[https://github.com/trustedsec/social-engineer-toolkit](https://github.com/trustedsec/social-engineer-toolkit)。
- en: Once the download is completed, you can extract the contents of the folder within
    the `.zip` file to `/usr/share/set` to overwrite the necessary files. Once this
    is completed, you will be able to launch the latest version by running the `setoolkit` command
    from a Terminal window within Kali Linux.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 下载完成后，您可以将文件夹的内容从`.zip`文件提取到`/usr/share/set`以覆盖必要的文件。完成后，您将能够通过在Kali Linux中的终端窗口中运行`setoolkit`命令来启动最新版本。
- en: The social engineering toolkit has a ton of features that can be used in your
    penetration tests. Exploring the various techniques that it offers will help you
    craft a phishing campaign that is effective. The social engineering toolkit is
    pre-installed in Kali Linux 2019.1\. You can access it using the `setoolkit` command
    from a Terminal window.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 社会工程工具包具有大量功能，可用于您的渗透测试。探索它提供的各种技术将有助于您制定有效的网络钓鱼活动。社会工程工具包预装在Kali Linux 2019.1中。您可以在终端窗口中使用`setoolkit`命令访问它。
- en: Gophish
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Gophish
- en: Gophish is an open source framework that can be used to conduct phishing campaigns.
    It is designed for businesses and penetration testers. Gophish is cross-platform,
    and so you can run this tool on Windows, macOS, and Linux-based operating systems.
    Gophish has a graphical interface, making it easy and simple to build a phishing
    campaign. You have the ability to build a campaign and schedule its launch to
    a time that you prefer.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: Gophish是一个开源框架，可用于进行钓鱼活动。它专为企业和渗透测试人员设计。Gophish是跨平台的，因此您可以在Windows、macOS和基于Linux的操作系统上运行此工具。Gophish具有图形界面，使构建钓鱼活动变得简单易行。您可以构建一个活动并安排在您喜欢的时间启动。
- en: 'Some of the main features of Gophish are as follows:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: Gophish的一些主要特点如下：
- en: The ability to use templates and create your own
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用模板并创建自己的模板的能力
- en: Clone websites and define landing pages
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 克隆网站并定义着陆页面
- en: Capture credentials
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捕获凭证
- en: Schedule campaigns
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安排活动
- en: Build reports about the phishing campaign
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建有关钓鱼活动的报告
- en: Gophish is not pre-installed with Kali Linux and is available for download here: [https://github.com/gophish/gophish/releases](https://github.com/gophish/gophish/releases).
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: Gophish未预装在Kali Linux中，可在此处下载：[https://github.com/gophish/gophish/releases](https://github.com/gophish/gophish/releases)。
- en: Modlishka
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Modlishka
- en: Modlishka takes phishing campaigns to the next level. It is a flexible and powerful
    reverse proxy that provides a high level of automation for phishing attacks.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: Modlishka将钓鱼活动提升到一个新的水平。它是一个灵活而强大的反向代理，为钓鱼攻击提供了高度自动化。
- en: 'The aim of Modlishka is to do the following:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: Modlishka的目标是做到以下几点：
- en: Focus more on penetration testers who are carrying out an effective phishing
    campaign to show that phishing is a serious threat
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更加关注进行有效的钓鱼活动的渗透测试人员，以显示钓鱼是一个严重的威胁
- en: Look at current **two-factor authentication** (**2FA**) weaknesses and highlight
    these so that solutions can be put in place
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查看当前**双因素认证**（**2FA**）的弱点，并突出这些弱点，以便可以制定解决方案
- en: Raise awareness about phishing techniques
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提高对钓鱼技术的认识
- en: What is unique about Modlishka is that there is no need for templates. In other
    social engineering tools, you would need to use a template, or even build your
    own. Modlishka works on a reverse proxy so that the target website is opened live.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: Modlishka的独特之处在于不需要模板。在其他社会工程工具中，您需要使用模板，甚至构建自己的模板。Modlishka通过反向代理工作，以便目标网站可以实时打开。
- en: 'Some of the main features of Modlishka are as follows:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: Modlishka的一些主要特点如下：
- en: Support for most 2FA schemes
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持大多数2FA方案
- en: No need to create a website template—all you need to do is point Modlishka to
    the target domain
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无需创建网站模板，只需将Modlishka指向目标域名
- en: The TLS **cross** origin flow is fully controlled from the target's browser
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TLS **跨**源流完全由目标浏览器控制
- en: Phishing scenarios are easily configurable and flexible
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 钓鱼场景易于配置和灵活
- en: Ability to use pattern-based JavaScript payload injection
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 能够使用基于模式的JavaScript负载注入
- en: Ability to strip the encryption and security headers
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 剥离加密和安全标头的能力
- en: Credential harvesting
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 凭证收集
- en: Support of plugins
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 插件支持
- en: The installation of Modlishka requires the **Go** language. The Go language is
    an open source programming language that is developed by Google. It uses syntaxes
    similar to scripting languages, thus making it easy to build simple, reliable,
    and efficient software.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 安装Modlishka需要**Go**语言。Go语言是由Google开发的开源编程语言。它使用类似脚本语言的语法，因此易于构建简单、可靠和高效的软件。
- en: We will cover the installation of Modlishka later in this chapter.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本章后面介绍Modlishka的安装。
- en: Wifiphisher
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Wifiphisher
- en: 'Phishing does not only involve specially crafted emails and attachments. WiFi
    access points can be used to launch a phishing campaign against targets. There
    are multitudes of wireless networks available, with many of them being open to
    provide free access to the internet. Wifiphisher is a tool that allows you to
    mount automated phishing attacks against wireless networks in order to steal credentials
    or drop a payload such as malware. Wifiphisher is capable of using modern attack
    techniques such as KARMA, Known Beacons, and Evil Twin:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 钓鱼不仅涉及特制的电子邮件和附件。WiFi接入点可以用来对目标发起钓鱼攻击。有大量的无线网络可用，其中许多是开放的，提供免费的互联网访问。Wifiphisher是一个工具，允许您对无线网络进行自动化的钓鱼攻击，以窃取凭证或释放恶意软件等有效载荷。Wifiphisher能够使用现代攻击技术，如KARMA、已知信标和恶意双胞胎：
- en: '**Known Beacons**: This technique allows Wifiphisher to broadcast ESSIDs that
    are known'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已知信标**：此技术允许Wifiphisher广播已知的ESSIDs'
- en: '**KARMA**: This is a technique where Wifiphisher masquerades as a public network'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**KARMA**：这是一种技术，Wifiphisher伪装成公共网络'
- en: '**Evil Twin**: This technique creates rogue access points'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**恶意双胞胎**：此技术创建了恶意访问点'
- en: 'Some of the main features of Wifiphisher are as follows:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: Wifiphisher的一些主要特点如下：
- en: The ability to run on devices such as a Raspberry Pi.
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 能够在树莓派等设备上运行。
- en: It's extremely flexible in that it supports a multitude of arguments and uses
    community-driven phishing templates, which can be used for various scenarios.
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它非常灵活，支持多种参数，并使用社区驱动的钓鱼模板，可用于各种场景。
- en: It allows you to write simple or complicated modules that are based on Python.
    Wifiphisher allows you to write your own custom phishing scenarios that you can
    leverage in targeted penetration tests.
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它允许您编写基于Python的简单或复杂模块。Wifiphisher允许您编写自定义的钓鱼场景，可以在有针对性的渗透测试中利用。
- en: It's simple to use, since it allows you to run the `./bin/wifiphisher` command.
    This will bring up an interactive text interface to help you build an attack.
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它很简单使用，因为它允许您运行`./bin/wifiphisher`命令。这将启动一个交互式文本界面，帮助您构建攻击。
- en: 'A list of available phishing scenarios are shown in the following screenshot:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了可用的钓鱼场景列表：
- en: '![](img/7511dfd5-5ec8-464d-8b4a-b15b6c20bb5f.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7511dfd5-5ec8-464d-8b4a-b15b6c20bb5f.png)'
- en: 'Figure 2: List of available phishing scenarios in Wifiphisher'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 图2：Wifiphisher中可用的钓鱼场景列表
- en: At the time of writing, Wifiphisher is currently supported on Linux, with Kali
    Linux as its officially supported distribution. In order to use Wifiphisher, you
    must have a wireless network card that is capable of packet injection and supports
    monitoring mode. We will explore this in depth in [Chapter 9](297a1e63-5c9b-4871-a46b-e4f2b25da48c.xhtml),
    *Getting Started with Wireless Attacks**. ***Wifiphisher is not installed by default
    in Kali Linux 2019.1.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本文时，Wifiphisher目前仅在Linux上受支持，Kali Linux是其官方支持的发行版。为了使用Wifiphisher，您必须拥有一个能够进行数据包注入并支持监视模式的无线网络卡。我们将在[第9章](297a1e63-5c9b-4871-a46b-e4f2b25da48c.xhtml)中深入探讨这一点，即*开始无线攻击**。***Wifiphisher不是Kali
    Linux 2019.1的默认安装程序。
- en: 'Wifiphisher can be installed using the following command:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用以下命令安装Wifiphisher：
- en: '[PRE0]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Creating a social engineering campaign
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建社会工程活动
- en: Let's take a look at creating a social engineering campaign for a penetration
    test. In this campaign, we will target Office 365 users using Modlishka.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看为渗透测试创建一个社会工程活动。在这个活动中，我们将使用Modlishka针对Office 365用户进行目标定向。
- en: Installing Modlishka
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Modlishka
- en: 'In order to use Modlishka, we need to install the Go Language within Kali Linux.
    Perform the following steps to install it:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使用Modlishka，我们需要在Kali Linux中安装Go语言。执行以下步骤进行安装：
- en: 'From a Terminal window within Kali Linux, issue the `apt-get install golang` command.
    This will install the Go language. We need to define a `GOPATH` using the `export
    GOPATH=$HOME/Downloads/GO` command. To confirm the path that we have set, we can
    use the `echo $GOPATH` command:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Kali Linux的终端窗口中，发出`apt-get install golang`命令。这将安装Go语言。我们需要使用`export GOPATH=$HOME/Downloads/GO`命令定义一个`GOPATH`。为了确认我们设置的路径，我们可以使用`echo
    $GOPATH`命令：
- en: '![](img/c69f3a6e-5fee-4835-a7fc-85e1e03c5697.png)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c69f3a6e-5fee-4835-a7fc-85e1e03c5697.png)'
- en: 'Figure 3: Installing Go and defining the GOPATH'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 图3：安装Go并定义GOPATH
- en: 'Next, we need to download Modlishka into the `GO` folder. We do this by running
    the `go get -u github.com/drk1wi/Modlishka` command. This will now start to download
    Modlishka into the `GO`folder that we defined in *Step 1*. If you have used the
    preceding commands, your Modlishka installation will reside in `/root/Downloads/go/src/github.com/drk1wi/Modlishka`:'
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要将Modlishka下载到`GO`文件夹中。我们通过运行`go get -u github.com/drk1wi/Modlishka`命令来实现这一点。这将开始将Modlishka下载到我们在*步骤1*中定义的`GO`文件夹中。如果您使用了前面的命令，那么您的Modlishka安装将位于`/root/Downloads/go/src/github.com/drk1wi/Modlishka`中：
- en: '![](img/59a20938-d59e-4ef3-8dff-eab96406a384.png)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![](img/59a20938-d59e-4ef3-8dff-eab96406a384.png)'
- en: 'Figure 4: Downloading Modlishka'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 图4：下载Modlishka
- en: 'Now, we need to create a SSL certificate. Alternatively, you can use one that
    you may already have that''s tied to your phishing domain. Before we can create
    a certificate, we need to generate an RSA private key. This can be done using
    the `openssl genrsa -out ModlishkaCA.key 2048`command. Here, we are generating
    a `2048` bit key:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要创建SSL证书。或者，您可以使用已与您的钓鱼域相关联的证书。在我们创建证书之前，我们需要生成RSA私钥。这可以使用`openssl genrsa
    -out ModlishkaCA.key 2048`命令完成。在这里，我们生成一个`2048`位的密钥：
- en: '![](img/68bdb90d-1d6f-4ed1-9b6c-7bce519d5563.png)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![](img/68bdb90d-1d6f-4ed1-9b6c-7bce519d5563.png)'
- en: 'Figure 5: Generating the RSA private key'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 图5：生成RSA私钥
- en: Next, we generate the certificate using the key we created in *Step 3*. To create
    the certificate, we use the `openssl req -x509 -new -nodes -key ModlishkaCA.key
    -sha256 -days 1024 -out ModlishkaCA.pem`command. Once you have entered the command,
    you will be prompted to provide details about the certificate.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们使用在*步骤3*中创建的密钥生成证书。为了创建证书，我们使用`openssl req -x509 -new -nodes -key ModlishkaCA.key
    -sha256 -days 1024 -out ModlishkaCA.pem`命令。输入命令后，您将被提示提供有关证书的详细信息。
- en: 'In these fields, you will fill in details similar to what you did in the target
    domain that you want to perform the phishing attack on. Remember to import this
    certificate into the server that you will use for the phishing campaign. In the
    case of this demo, I have imported into Firefox ESR on Kali Linux:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些字段中，您将填写与您要对其执行钓鱼攻击的目标域中所做的类似的详细信息。记得将此证书导入您将用于钓鱼活动的服务器中。在这个演示案例中，我已经将其导入到Kali
    Linux上的Firefox ESR中：
- en: '![](img/0d434a38-4fe5-445b-aa1b-8d4e42323f5f.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0d434a38-4fe5-445b-aa1b-8d4e42323f5f.png)'
- en: 'Figure 6: Generating the SSL certificate'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图6：生成SSL证书
- en: Now, you need to import the key and certificate into the Modlishka certificate
    configuration file. You can open the `ModlishkaCA.pem`and `ModlishkaCA.key` files
    using any text editor. The certification configuration file is located in the
    `GO` folder. If you used the preceding commands, then it will be located in `/root/Downloads/go/src/github.com/drk1wi/Modlishka/plugin/autocert.go`.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您需要将密钥和证书导入Modlishka证书配置文件。您可以使用任何文本编辑器打开`ModlishkaCA.pem`和`ModlishkaCA.key`文件。认证配置文件位于`GO`文件夹中。如果您使用了前面的命令，那么它将位于`/root/Downloads/go/src/github.com/drk1wi/Modlishka/plugin/autocert.go`中。
- en: 'You will need to replace the values of the `CA CERT =` and the `CA CERT KEY
    =` fields with `ModlishkaCA.pem`and `ModlishkaCA.key`, respectively. Make sure
    that you paste data from each file within the inverted commas:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要将`CA CERT =`和`CA CERT KEY =`字段的值分别替换为`ModlishkaCA.pem`和`ModlishkaCA.key`。确保您将每个文件中的数据粘贴在引号内：
- en: '![](img/f4bd6d2f-6017-4443-8169-0305697828f4.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f4bd6d2f-6017-4443-8169-0305697828f4.png)'
- en: 'Figure 7: Pasting in the cert and key file data'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 图7：粘贴证书和密钥文件数据
- en: 'Once you have imported the certificates, you need to compile the tool using
    the `make` command:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入证书后，您需要使用`make`命令编译工具：
- en: '![](img/0d551a4a-b035-4413-9ab5-c24500b1c8fd.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0d551a4a-b035-4413-9ab5-c24500b1c8fd.png)'
- en: 'Figure 8: Output of running make command in Modlishka'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图8：运行Modlishka中make命令的输出
- en: Now, the tool is ready to be used. We will use a template that is already installed
    by default within the `/templates` folder. For the sake of this demo, the phishing
    URL will remain local on Kali Linux.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，该工具已准备好使用。我们将使用默认安装在`/templates`文件夹中的模板。为了演示的目的，钓鱼网址将保留在Kali Linux本地。
- en: 'In a real penetration test, you can modify the template file or create your
    own. You will need to modify fields such as `phishingDomain`, `listening port`,
    `listeningAddress`, `target`, and so forth. In this demo, we will use the `office365.json`
    template, without any changes:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 在真实的渗透测试中，您可以修改模板文件或创建自己的模板文件。您需要修改字段，如`phishingDomain`，`listening port`，`listeningAddress`，`target`等。在此演示中，我们将使用`office365.json`模板，不做任何更改：
- en: '![](img/b8387751-bcff-4ada-aa34-4ef131240a3a.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b8387751-bcff-4ada-aa34-4ef131240a3a.png)'
- en: 'Figure 9: Office365.json template configuration'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图9：Office365.json模板配置
- en: This concludes the setup of Modlishka. Now, we will move on to executing a phishing
    attack using Modlishka.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 这就完成了Modlishka的设置。现在，我们将继续使用Modlishka执行钓鱼攻击。
- en: Executing the attack
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 执行攻击
- en: 'The following steps demonstrate how to perform a phishing attack using Modlishka:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤演示了如何使用Modlishka执行钓鱼攻击：
- en: 'Now that Modlishka is set up, let''s start the program using the Office 365
    template. Modlishka can be started using the `./dist/proxy -config templates/office365.json`command.
    Note that once the tool is started, it will provide you with the proxy address.
    If you have followed the steps in the previous section, we did not define any
    address and used the built-in `https://loopback.modlishka.io`:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在Modlishka已经设置好，让我们使用Office 365模板启动程序。可以使用`./dist/proxy -config templates/office365.json`命令启动Modlishka。请注意，一旦工具启动，它将为您提供代理地址。如果您已经按照上一节中的步骤进行操作，我们没有定义任何地址，而是使用内置的`https://loopback.modlishka.io`：
- en: '![](img/c685455c-2366-483d-9d62-38c3d9637f47.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c685455c-2366-483d-9d62-38c3d9637f47.png)'
- en: 'Figure 10: The Modlishka reverse proxy has started'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 图10：Modlishka反向代理已启动
- en: 'Now, we can perform a login as if we were the user. I''ve used a demo Office
    365 tenant that I current own. In the following screenshot, you will notice the
    page that''s presented is for the Office 365 login page, but take note of the
    URL. For the sake of illustration, I have left it as the default `loopback.modlishka.io`,
    but when you perform a phishing attack in a penetration test, you will need to
    have a domain name that will be almost identical to your target:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们可以像用户一样执行登录。我使用了我目前拥有的演示Office 365租户。在下面的屏幕截图中，您将注意到呈现的页面是Office 365登录页面，但请注意URL。为了说明的目的，我将其保留为默认的`loopback.modlishka.io`，但是当您在渗透测试中执行钓鱼攻击时，您将需要拥有一个与目标几乎相同的域名：
- en: '![](img/2a2aea0a-504f-4332-a9de-f38add8120ec.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2a2aea0a-504f-4332-a9de-f38add8120ec.png)'
- en: 'Figure 11: Office 365 login page proxied through Modlishka'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 图11：Office 365登录页面通过Modlishka代理
- en: 'The login process works as if the user is logging into Office 365, because
    the user is actually logging into Office 365\. Modlishka is acting as a proxy
    for the traffic so that we can intercept any credentials. After the password is
    entered, the user is presented with a 2FA prompt to approve the login. Note the `rewriteResponses` in
    the background window:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 登录过程的工作方式就好像用户正在登录Office 365一样，因为用户实际上正在登录Office 365。Modlishka充当流量的代理，以便我们可以拦截任何凭据。输入密码后，用户将收到一个2FA提示来批准登录。请注意背景窗口中的`rewriteResponses`：
- en: '![](img/a1ab5c8b-cc0d-405e-8fe8-ed8d678c2fc4.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a1ab5c8b-cc0d-405e-8fe8-ed8d678c2fc4.png)'
- en: 'Figure 12: 2FA being proxied through Modlishka'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图12：2FA通过Modlishka代理
- en: 'Once the user approves the sign-in request, access is granted to Office 365
    and the user can continue to work as normal. Let''s take a look at what Modlishka
    was able to detect in the log file. In the JSON configuration file, we defined
    the name of the log file using the string `"log ": "ms.log"`. This will be located
    in the root of the Modlishka folder. By using a basic concatenate command to look
    for fields such as `"login="` and `"passwd="`, we are able to see the user''s
    credentials in plain text:'
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '一旦用户批准登录请求，就可以访问Office 365，并且用户可以继续正常工作。让我们看看Modlishka在日志文件中能够检测到什么。在JSON配置文件中，我们使用字符串`"log":
    "ms.log"`定义了日志文件的名称。这将位于Modlishka文件夹的根目录中。通过使用基本的连接命令来查找字段，如`"login="`和`"passwd="`，我们可以看到用户的凭据以纯文本形式显示：'
- en: '![](img/de66f82f-5394-4b71-9a5f-b63f1833d489.png)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![](img/de66f82f-5394-4b71-9a5f-b63f1833d489.png)'
- en: 'Figure 13: Credentials in plain text'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 图13：纯文本中的凭据
- en: The `%40` shown in the username is the HTML character set code, which is translated
    into the `"@"` symbol.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 用户名中的`％40`是HTML字符集代码，将被转换为`"@"`符号。
- en: Using SET to create a phishing campaign
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用SET创建钓鱼攻击
- en: 'Let''s perform a simple phishing attack using the **social engineering toolkit**
    (**SET**):'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用**社会工程工具包**（**SET**）执行简单的钓鱼攻击：
- en: From a Terminal window, type in the `setoolkit` command to launch the social
    engineering toolkit.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从终端窗口中，键入`setoolkit`命令以启动社会工程工具包。
- en: 'Once the toolkit has loaded, we will need to select option 5, `Mass Mailer
    Attack`*, *and then option 1, `EMail Attack Single EMail Address`:'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 工具包加载后，我们需要选择选项5，`大规模邮件发送攻击`，然后选择选项1，`单个电子邮件地址的电子邮件攻击`：
- en: '![](img/7aabb261-c424-4c04-94d0-df40eb06eb8b.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7aabb261-c424-4c04-94d0-df40eb06eb8b.png)'
- en: 'Figure 14: Selecting the Mass Mailer Attack'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 图14：选择大规模邮件发送攻击
- en: 'Next, we will define the parameters of the email. Here, you can specify the
    source address and the names of the sender and recipient, along with attaching
    a malicious file, among other things. We will not attach a file, instead using
    a malicious phishing link. The link was typed for illustration purposes, but the
    link is non-existent. Once you have filled in all the fields, the email will be
    sent:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将定义电子邮件的参数。在这里，您可以指定源地址和发件人和收件人的名称，以及附加恶意文件等内容。我们不会附加文件，而是使用恶意的钓鱼链接。该链接是为了说明目的而输入的，但该链接不存在。填写完所有字段后，电子邮件将被发送：
- en: '![](img/aa5ec343-3391-42b2-8391-ae00eae884f3.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![](img/aa5ec343-3391-42b2-8391-ae00eae884f3.png)'
- en: 'Figure 15: Defining the parameters for the phishing email'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 图15：定义钓鱼电子邮件的参数
- en: There are a number of open relay mail servers on the internet. You can use services
    such as `Mailgun` and `SendGrid` to test in your own environment.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网上有许多开放中继邮件服务器。您可以使用`Mailgun`和`SendGrid`等服务在自己的环境中进行测试。
- en: 'Notice that the email was received in the target''s mailbox with the parameters
    we defined:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，电子邮件已经在目标邮箱中按照我们定义的参数接收到了：
- en: '![](img/f13127e8-f82e-407b-9ce1-e3008b87a3f3.png)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f13127e8-f82e-407b-9ce1-e3008b87a3f3.png)'
- en: 'Figure 16: The malicious email received in target''s mailbox'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 图16：目标邮箱中收到的恶意电子邮件
- en: The social engineering toolkit has a lot to offer, and having a good understanding
    of the various options and how to use them will be beneficial as you plan your
    phishing campaigns in your penetration tests. Please explore the various options
    in your own lab environment.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 社会工程工具包有很多提供，了解各种选项以及如何使用它们将有助于您在渗透测试中计划您的钓鱼活动。请在您自己的实验室环境中探索各种选项。
- en: Summary
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: Social engineering really boils down to exploiting the nature of humans to trust
    people. It uses techniques that rely on human weaknesses rather than software
    or hardware weaknesses. There are a number of social engineering tools available
    on the internet that you can leverage to launch a social engineering attack as
    part of your penetration test.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 社会工程实际上归结为利用人类信任他人的本性。它使用依赖于人类弱点而不是软件或硬件弱点的技术。互联网上有许多社会工程工具可供您利用，以便在您的渗透测试中发起社会工程攻击。
- en: In this chapter, you have learned what social engineering is and the various
    types of social engineering. We highlighted the main features of each technique
    and looked at where you can find an up-to-date repository of the current phishing
    links that exist. We looked at common tools that can be used to create a social
    engineering campaign, and we worked on creating a campaign targeting Office 365.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您已经了解了社会工程学是什么，以及各种类型的社会工程学。我们强调了每种技术的主要特点，并看了看您可以在哪里找到当前存在的最新钓鱼链接的存储库。我们看了一些可以用来创建社会工程活动的常见工具，并致力于创建一个针对Office
    365的活动。
- en: In the next chapter ([Chapter 5](8c5306b6-5c1e-4554-a839-5b2422286120.xhtml),
    *Diving into the Metasploit Framework*), we will begin working with Metasploit.
    We will look at what Metasploit is, what you can accomplish using it, and how
    to use various exploits from Metasploit.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章（[第5章](8c5306b6-5c1e-4554-a839-5b2422286120.xhtml)，*深入了解Metasploit框架*）中，我们将开始使用Metasploit。我们将看看Metasploit是什么，您可以用它实现什么，以及如何使用Metasploit中的各种漏洞。
- en: Questions
  id: totrans-174
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: What is social engineering?
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么是社会工程学？
- en: What does social engineering rely on to make a successful attack?
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 社会工程学依靠什么来进行成功的攻击？
- en: What is an important foundational step to building a social engineering attack?
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 构建社会工程攻击的一个重要基础步骤是什么？
- en: Name two types of social engineering attacks.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 列举两种社会工程攻击类型。
- en: Which tool is unique to Modlishka?
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Modlishka独有的工具是什么？
