- en: Chapter 2. Choosing the Virtual Environment
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2章。选择虚拟环境
- en: 'In this chapter, we will discuss the different virtual environment platforms
    there are to choose from. We will look at most of the main virtual technology
    platforms that exist. We will discuss the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论可供选择的不同虚拟环境平台。我们将研究大多数主要的虚拟技术平台。我们将讨论以下主题：
- en: Commercial environments
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 商业环境
- en: Image conversion
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图像转换
- en: Converting from a physical to virtual environment
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从物理环境转换为虚拟环境
- en: One of the most challenging things we have to do is decide on the virtualization
    software that we want to use. Not only do we have to decide on what we want to
    do with respect to the software we choose, it is also required that we decide
    whether we want to build a dedicated virtual platform or run the software on our
    existing system. In this book, we are going to focus on creating a virtual environment
    on our existing system. However, it is still important to at least briefly discuss
    the option of creating a bare metal environment.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 我们必须做的最具挑战性的事情之一是决定我们想要使用的虚拟化软件。我们不仅需要决定我们选择的软件要做什么，还需要决定我们是否要构建一个专用的虚拟平台，还是在现有系统上运行软件。在本书中，我们将专注于在现有系统上创建虚拟环境。然而，至少简要讨论创建裸金属环境的选项仍然很重要。
- en: When we install a bare metal environment (also known as a type 1 install of
    a virtual environment), the OS is provided by the product in the form of a Hypervisor.
    Although this is an extremely useful way to create powerful and complex architectures,
    it requires the dedication of the hardware, and as such is not something we would,
    for the most part, be able to carry around with us. If you are in a lab environment
    and building the labs, then it is something you definitely should explore due
    to the power and options you have when creating machines.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们安装裸金属环境（也称为虚拟环境的类型1安装）时，操作系统由产品以Hypervisor的形式提供。虽然这是创建强大和复杂架构的一种极其有用的方式，但它需要专用硬件，并且因此大部分时间我们无法随身携带。如果您在实验室环境中构建实验室，那么您绝对应该探索这一点，因为您在创建机器时拥有的功能和选项。
- en: 'An example of a type 1 bare metal architecture is shown in the following screenshot:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了类型1裸金属架构的示例：
- en: '![Choosing the Virtual Environment](img/477-1_02_01.jpg)'
  id: totrans-8
  prefs: []
  type: TYPE_IMG
  zh: '![选择虚拟环境](img/477-1_02_01.jpg)'
- en: As the preceding screenshot shows, in a type 1 or bare metal architecture, the
    Hypervisor is installed in the system hardware and the virtualization resources
    are provided by the Hypervisor. You can configure a large number of options to
    include resource allocation when you use a virtual bare metal solution.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的屏幕截图所示，在类型1或裸金属架构中，Hypervisor安装在系统硬件中，并且虚拟化资源由Hypervisor提供。当您使用虚拟裸金属解决方案时，可以配置大量选项，包括资源分配。
- en: 'Type 1 virtualization provides a robust and extremely powerful solution to
    consider when you are building your pentesting labs. However, one thing that makes
    it a challenge to deploy is the fact that the OS is provided by the Hypervisor
    already installed in the hardware, and this can cause challenges with certain
    hardware versions; furthermore, for the most part, this type of solution is best
    implemented on a desktop or server-type machine. While it can be implemented on
    a laptop, it is more common on the other platforms. One potential option to use
    is to create your lab environment and then remotely access it. From a virtualization
    standpoint, it does not impact the machines we create; either type 1 or type 2
    will suffice. For our purposes in this book, we will use type 2 virtualization.
    An example of type 2 virtualization is shown in the following screenshot:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 类型1虚拟化在构建渗透测试实验室时提供了一个强大而极其有用的解决方案。然而，使其具有挑战性的一件事是操作系统已经由硬件中已安装的Hypervisor提供，这可能会对某些硬件版本造成挑战；此外，这种类型的解决方案大部分时间最好在台式机或服务器类型的机器上实施。虽然它可以在笔记本电脑上实施，但在其他平台上更常见。一个潜在的选择是创建您的实验室环境，然后远程访问它。从虚拟化的角度来看，它不会影响我们创建的机器；无论是类型1还是类型2都可以。在本书中，我们将使用类型2虚拟化。以下屏幕截图显示了类型2虚拟化的示例：
- en: '![Choosing the Virtual Environment](img/477-1_02_02.jpg)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![选择虚拟环境](img/477-1_02_02.jpg)'
- en: As can be seen, in type 2 virtualization, the Hypervisor rides on the operating
    system and the OS rides on the system hardware. Again, this is the architecture
    we will utilize as the book progresses. For now, we will look at both type 1 and
    type 2 solutions. Starting from [Chapter 3](ch03.html "Chapter 3. Planning a Range"),
    *Planning a Range*, we will maintain focus on the type 2 solution.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 如图所示，在类型2虚拟化中，Hypervisor运行在操作系统上，操作系统运行在系统硬件上。在本书的进展中，这是我们将使用的架构。现在，我们将研究类型1和类型2的解决方案。从[第3章](ch03.html
    "第3章。规划一个范围")开始，*规划一个范围*，我们将专注于类型2解决方案。
- en: Open source and free environments
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开源和免费环境
- en: 'There are a number of free and open source virtual environments; we will look
    at some of the more popular ones here. For this section, we will discuss the following
    products:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多免费和开源的虚拟环境；我们将在这里看一些更受欢迎的。在本节中，我们将讨论以下产品：
- en: VMware Player
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware Player
- en: VirtualBox
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VirtualBox
- en: Xen
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Xen
- en: Hyper-V
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Hyper-V
- en: vSphere Hypervisor
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: vSphere Hypervisor
- en: VMware Player
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: VMware Player
- en: The team at VMware has created a number of different products that are available
    for free. At the time of writing this book, VMware Player is still available free
    of charge, but unfortunately only for home users. One of the biggest limitations
    in the past was the fact that you could not use VMware Player to build and create
    virtual machines. Thankfully, the latest versions allow you to create machines.
    The limitations of the current version are in the networking department; this
    is because you cannot create additional switches with the VMware Player tool.
    For our purposes of building virtual pentesting labs, this is something that we
    really need, and if you do decide to use it, then you can only use VMware Player
    for basic network architecture. It is free, and this is why we are going to cover
    it. The first thing you want to do is download it. You can download it from [https://my.vmware.com/web/vmware/free#desktop_end_user_computing/vmware_player/6_0](https://my.vmware.com/web/vmware/free#desktop_end_user_computing/vmware_player/6_0).
    Once you have downloaded it, you will have to obtain a license key by registering
    with the site. Once you have the key, you can enter it during the installation
    or at a later time, and it will enable you to use the tool. For reference, to
    use the tool, the user guide is a good source, and there are several tutorials
    on the Internet for it too. Again, it is limited in what it can provide us, but
    a viable solution is to use it to test machines you build on as well as other
    machines without having to purchase another license for the software.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: VMware团队创建了许多不同的免费产品。在撰写本书时，VMware Player仍然可以免费使用，但不幸的是，只有家庭用户可以使用。过去的最大限制之一是您无法使用VMware
    Player构建和创建虚拟机。幸运的是，最新版本允许您创建虚拟机。当前版本的限制在网络部分；这是因为您无法使用VMware Player工具创建其他交换机。对于我们构建虚拟渗透测试实验室的目的，这是我们真正需要的东西，如果您决定使用它，那么您只能将VMware
    Player用于基本网络架构。它是免费的，这就是为什么我们要介绍它。您要做的第一件事是下载它。您可以从[https://my.vmware.com/web/vmware/free#desktop_end_user_computing/vmware_player/6_0](https://my.vmware.com/web/vmware/free#desktop_end_user_computing/vmware_player/6_0)下载它。下载后，您将需要通过注册网站来获取许可证密钥。一旦您获得密钥，您可以在安装期间或以后输入它，它将使您能够使用该工具。作为参考，用户指南是一个很好的来源，互联网上也有几个教程。再次强调，它在提供给我们的东西方面有限，但一个可行的解决方案是使用它来测试您构建的机器以及其他机器，而无需购买软件的另一个许可证。
- en: VirtualBox
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: VirtualBox
- en: Oracle VirtualBox is a very powerful tool and is one of the most popular when
    it comes to selecting a virtualization solution. The fact that it is so powerful
    and free makes it a great choice. The tool performs well on a variety of platforms
    and offers desktop as well as enterprise level capabilities. The current version
    at the time of writing this book is 4.3.2; you can download it from [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads).
    There are versions available for Windows, Mac, Linux, and Solaris. The reviews
    of Version 3 for VirtualBox reported a number of problems with the tool, but ever
    since Version 4 has come out, there have not been reports of the problems from
    the previous version.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: Oracle VirtualBox是一个非常强大的工具，是在选择虚拟化解决方案时最受欢迎的工具之一。它如此强大且免费，使其成为一个很好的选择。该工具在各种平台上表现良好，并提供桌面和企业级功能。撰写本书时的当前版本是4.3.2；您可以从[https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)下载它。有适用于Windows、Mac、Linux和Solaris的版本。关于VirtualBox
    3版本的评论报告了一些问题，但自从4版本推出以来，就没有关于先前版本的问题的报告了。
- en: As it is so popular and a viable choice, we will create a virtual machine using
    this tool. The user guide is very useful too if you have not used VirtualBox before.
    You can download it from [https://www.virtualbox.org/wiki/Documentation](https://www.virtualbox.org/wiki/Documentation).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 由于它如此受欢迎且是一个可行的选择，我们将使用该工具创建虚拟机。如果您以前没有使用过VirtualBox，则用户指南也非常有用。您可以从[https://www.virtualbox.org/wiki/Documentation](https://www.virtualbox.org/wiki/Documentation)下载它。
- en: 'Once you have installed the software, the program will launch itself automatically,
    and you should see a screen similar to that shown in the following screenshot:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 安装软件后，程序将自动启动，并且您应该看到类似于以下截图的屏幕：
- en: '![VirtualBox](img/477-1_02_08.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![VirtualBox](img/477-1_02_08.jpg)'
- en: We will need an ISO image to use for our virtual machine. For this, we will
    use the excellent tool Samurai **Web Testing Framework** (**WTF**). This is a
    web application testing framework that is a live Linux environment that has been
    preconfigured as a web pentesting framework. The CD contains some of the best
    open source and free tools to use to test and attack websites. You can download
    the ISO image from [http://www.samurai-wtf.org/](http://www.samurai-wtf.org/).
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要一个ISO镜像来用于我们的虚拟机。为此，我们将使用优秀的工具Samurai Web测试框架（WTF）。这是一个网络应用测试框架，是一个预先配置为Web渗透测试框架的Linux实时环境。CD包含一些最好的开源和免费工具，用于测试和攻击网站。您可以从[http://www.samurai-wtf.org/](http://www.samurai-wtf.org/)下载ISO镜像。
- en: To start the creation of the virtual machine, click on **New** to begin the
    process. In the window that opens to create the virtual machine, enter `Samurai`
    in the name field and select **Linux** as the operating system. Then, select the
    required version and click on **Next**.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始创建虚拟机，请单击“新建”以开始该过程。在打开以创建虚拟机的窗口中，在名称字段中输入“Samurai”，并选择Linux作为操作系统。然后，选择所需的版本，然后单击“下一步”。
- en: 'In the next window that comes up, you will select the RAM for the virtual machine;
    you can leave the setting at the default of **256 MB** or change it to another
    value that works best for you. An example of this window is shown in the following
    screenshot:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来弹出的窗口中，您将为虚拟机选择RAM；您可以将设置保留在默认的256 MB，也可以将其更改为最适合您的其他值。此窗口的示例如下截图所示：
- en: '![VirtualBox](img/477-1_02_09.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![VirtualBox](img/477-1_02_09.jpg)'
- en: The next thing we want to do is to create a hard disk for our virtual machine,
    but for our purposes, we are not going to use a hard disk; so, we will select
    the **do not add a virtual hard drive** setting and click on **Create**. You will
    be warned about creating a virtual machine without a hard drive, but this is OK
    because this is what we want to do. So, read the warning and click on **Continue**.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 我们接下来要做的事情是为我们的虚拟机创建一个硬盘，但出于我们的目的，我们不打算使用硬盘；因此，我们将选择**不添加虚拟硬盘**设置，并单击**创建**。您将收到有关创建没有硬盘的虚拟机的警告，但这没关系，因为这正是我们要做的。因此，请阅读警告并单击**继续**。
- en: 'Congratulations! If all has gone well, you have just created a virtual machine
    in VirtualBox. You should now have a window showing you the machine you have created,
    and it will look similar to the following screenshot:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！如果一切顺利，你刚刚在VirtualBox中创建了一个虚拟机。现在你应该看到一个窗口显示你创建的虚拟机，它看起来类似于以下的截图：
- en: '![VirtualBox](img/477-1_02_10.jpg)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![VirtualBox](img/477-1_02_10.jpg)'
- en: We are now ready to start our virtual machine! Click on the **Start** setting
    and start the virtual machine. This is where you will get a message about how
    you need to select an optical image to boot from, and this is where the image
    we downloaded comes in. So, we will do that now. At the prompt, navigate to the
    ISO image you have downloaded and boot the Samurai-WTF virtual machine. This is
    the process to use VirtualBox, and we will not continue on from here. You are
    welcome to experiment and practice on your own. One thing to be aware of is that
    sometimes, with certain machines, the VirtualBox software will have difficulties
    with the keyboard and the input. If this happens, it is recommended that you load
    the extensions that can be found at [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads).
    This is one of the reasons why VirtualBox is not the selected software for this
    book.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们准备启动我们的虚拟机！单击**启动**设置并启动虚拟机。这时会收到一条消息，告诉你需要选择一个光盘映像进行引导，这就是我们下载的映像派上用场的地方。所以，我们现在就来做这个。在提示符下，导航到您下载的ISO映像并启动Samurai-WTF虚拟机。这就是使用VirtualBox的过程，我们将不再继续下去。欢迎你自己进行实验和练习。需要注意的一点是，有时候，对于某些机器，VirtualBox软件可能会在键盘和输入方面出现困难。如果发生这种情况，建议您加载可以在[https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)找到的扩展。这也是为什么VirtualBox不是本书选择的软件的原因之一。
- en: Xen
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Xen
- en: 'It is no secret that the i386 market has been dominated for years by the solutions
    offered by VMware, but as time goes by, the market has plenty of solutions that
    continue to increase the size of their followings. This is where Xen comes in.
    It has gained popularity and continues to do so as word gets around about it and
    as the product continues to improve. You will probably ask this question if you
    are new to Xen: what is Xen? This is a very good question, and to explain it in
    detail is beyond the scope of the book. There are entire books written on Xen,
    so we will only cover the basics here. Xen got its start at the University of
    Cambridge in the UK. Since then, there have been many players in the Xen game,
    and this has added features and capabilities to the tool, which in turn has increased
    its popularity.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 众所周知，i386市场多年来一直被VMware提供的解决方案所主导，但随着时间的推移，市场上有很多解决方案不断增加其追随者的规模。这就是Xen的用武之地。它已经变得很受欢迎，并且随着人们对它的了解和产品的不断改进，它的受欢迎程度还在不断增加。如果你是Xen的新手，你可能会问这个问题：Xen是什么？这是一个很好的问题，详细解释超出了本书的范围。有很多关于Xen的专著，所以我们只会在这里介绍基础知识。Xen起源于英国剑桥大学。从那时起，Xen游戏中有很多参与者，这增加了工具的功能和能力，进而增加了它的受欢迎程度。
- en: Once the Xen project took off, as is typical in the IT world, the founders started
    their own company called XenSource, and then the company was taken over by Citrix.
    Citrix has expanded on the project and offers it as a solution along the lines
    of VMware ESX. Additionally, other vendors have added Xen into their product vendors
    such as Red Hat and Novell.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦Xen项目起步，就像IT世界典型的情况一样，创始人成立了自己的公司，名为XenSource，然后这家公司被Citrix收购。Citrix扩展了这个项目，并将其作为与VMware
    ESX类似的解决方案提供。此外，其他供应商也将Xen纳入其产品供应商，如Red Hat和Novell。
- en: For the latest information or to download Xen, refer to the website [www.citrix.com](http://www.citrix.com).
    For a very good tutorial, that is, a step-by-step guide to set up Xen on a SUSE
    Linux machine, you may refer to the URL [http://searchservervirtualization.techtarget.com/tip/Xen-and-virtualization-Preparing-SUSE-Linux-Enterprise-Server-10-for-virtualization](http://searchservervirtualization.techtarget.com/tip/Xen-and-virtualization-Preparing-SUSE-Linux-Enterprise-Server-10-for-virtualization).
    Note that there is a free registration required that consists of providing your
    e-mail address to read the document. It is worth it as they will send you links
    as new papers are published, so it becomes a nice, quick reference to stay updated.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 有关最新信息或下载Xen，请参阅网站[www.citrix.com](http://www.citrix.com)。要获得非常好的教程，即在SUSE Linux机器上设置Xen的逐步指南，您可以参考网址[http://searchservervirtualization.techtarget.com/tip/Xen-and-virtualization-Preparing-SUSE-Linux-Enterprise-Server-10-for-virtualization](http://searchservervirtualization.techtarget.com/tip/Xen-and-virtualization-Preparing-SUSE-Linux-Enterprise-Server-10-for-virtualization)。请注意，阅读该文档需要免费注册，即提供您的电子邮件地址。这是值得的，因为他们会在新文章发布时发送链接，因此它成为一个不错的快速参考，以保持更新。
- en: Note
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'I had a university professor when I was an undergraduate student who gave me
    some sound advice that I continue to follow and recommend others do too: to spend
    one hour a day reading something or doing something related to the IT industry.
    Those of you who are reading this book probably know that the IT industry is in
    a constant state of change and the data is perishable, so we have to do something
    to keep it fresh. For me, that one hour a day has been part of my daily life for
    more than 25 years and has helped me stay updated.'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我在大学本科时有一位教授给了我一些建议，我至今仍然遵循并推荐其他人也这样做：每天花一个小时阅读与IT行业相关的内容或做与之相关的事情。那些正在阅读本书的人可能知道IT行业处于不断变化的状态，数据是易逝的，因此我们必须做一些事情来保持其新鲜。对我来说，每天一个小时已经成为我生活的一部分超过25年，并帮助我保持更新。
- en: Finally, as we wrap up this section on Xen, one of the features we need as we
    build complex environments is the capability to convert from one format to another.
    This is something we will cover later on in this chapter, but for Xen, we will
    share a reference with you that explains in detail how to take a Xen virtual machine
    and convert it into a Hyper-V format. You will find that information at [http://technet.microsoft.com/en-us/library/hh427283.aspx](http://technet.microsoft.com/en-us/library/hh427283.aspx).
    You will note the reference is from Microsoft, and you will also note that this
    only works with specific versions of the Microsoft System Centre software, but
    it is good to know it is possible. So, if you ever find or have a Xen VM and want
    to convert it for use in Hyper-V, it is possible.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，当我们结束这一部分关于Xen的内容时，我们构建复杂环境所需的一个功能是能够将一个格式转换为另一个格式。这是我们稍后将在本章中介绍的内容，但对于Xen，我们将与您分享一个参考资料，详细解释了如何将Xen虚拟机转换为Hyper-V格式。您可以在[http://technet.microsoft.com/en-us/library/hh427283.aspx](http://technet.microsoft.com/en-us/library/hh427283.aspx)找到这些信息。您会注意到这个参考资料来自微软，您还会注意到这仅适用于特定版本的Microsoft
    System Centre软件，但知道这是可能的是很好的。因此，如果您曾经发现或拥有一个Xen虚拟机，并希望将其转换为Hyper-V以供使用，这是可能的。
- en: Hyper-V
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Hyper-V
- en: This is Microsoft's virtualization tool, and it is a continuation of their virtual
    PC product. While still relatively new to the virtualization landscape, Microsoft
    is catching up fast. The one area I find lacking within their tool is the networking
    and integration with desktop interfaces on Linux and Unix. Once they get these
    figured out, they will be worth serious consideration when selecting your virtual
    environment for your pentesting labs. Originally, Hyper-V was only offered as
    part of the server products for Microsoft starting with Windows Server 2008 and
    currently with Windows Server 2012.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 这是微软的虚拟化工具，是他们虚拟PC产品的延续。虽然在虚拟化领域仍然相对较新，但微软正在迅速赶上。我发现他们的工具中一个缺乏的领域是与Linux和Unix上的桌面界面的网络和集成。一旦他们解决了这些问题，他们将成为您在进行渗透测试实验室时选择虚拟环境的严肃考虑对象。最初，Hyper-V仅作为微软服务器产品的一部分提供，从Windows
    Server 2008开始，目前是Windows Server 2012。
- en: Now, there are options to install the capability with Windows 8\. This decision
    by Microsoft was based on the fact that the tool has been so popular on the server
    versions of their software that they wanted to expand it to give their customers
    more options when it comes to virtualization.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，有安装Windows 8的能力。微软做出这个决定是基于这样一个事实，即该工具在他们软件的服务器版本上如此受欢迎，他们希望扩展它，为客户在虚拟化方面提供更多选择。
- en: 'There are two main requirements for Hyper-V. The first requirement is that
    the operating system has to be 64 bits. The second requirement that is often overlooked
    is the capabilities of the processor in the machine. The Hyper-V technology requires
    that the chip support **Second Level Address Translation** (**SLAT**). To run
    Hyper-V on a platform other than a server, you will need to have one of the following:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: Hyper-V有两个主要要求。第一个要求是操作系统必须是64位。经常被忽视的第二个要求是机器中处理器的功能。Hyper-V技术要求芯片支持**二级地址转换**（**SLAT**）。要在服务器以外的平台上运行Hyper-V，您需要具备以下条件之一：
- en: Windows 8 Professional
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows 8专业版
- en: Windows 8 Enterprise
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows 8企业版
- en: Once you have your platform of choice, you can either add it as a feature if
    you are using one of the servers, or if you have selected one of the Windows 8
    platforms, then you can download Hyper-V from [http://www.microsoft.com/en-us/download/details.aspx?id=36188](http://www.microsoft.com/en-us/download/details.aspx?id=36188).
    Microsoft refers to the version of Hyper-V for non-server products as client Hyper-V.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您选择了您的平台，您可以将其添加为一个功能（如果您使用的是其中一个服务器），或者如果您选择了Windows 8平台之一，那么您可以从[http://www.microsoft.com/en-us/download/details.aspx?id=36188](http://www.microsoft.com/en-us/download/details.aspx?id=36188)下载Hyper-V。微软将非服务器产品的Hyper-V版本称为客户端Hyper-V。
- en: Regardless of the platform, the installation and configuration follows the same
    sequence. Now that you have Hyper-V, we will create a virtual machine so that
    you can work through the process of creating one. With Hyper-V, we have to set
    up a network that we are going to connect it to. We can set this up at the beginning
    or we can set it up after the creation of a virtual machine. For our purposes,
    we will create the network before we start the virtual machine creation process.
    In a basic architecture, we need two networks, one that connects to the external
    world (for example, the Internet) and a second network to connect to the internal
    machines. For simplicity, we will call them **ExternalNet** and **InternalNet**.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 无论平台如何，安装和配置都遵循相同的顺序。现在您有了Hyper-V，我们将创建一个虚拟机，以便您可以通过创建一个虚拟机的过程来进行工作。使用Hyper-V，我们必须设置一个网络，我们将连接到该网络。我们可以在开始时设置这个网络，也可以在创建虚拟机之后设置它。对于我们的目的，我们将在开始虚拟机创建过程之前创建网络。在基本架构中，我们需要两个网络，一个连接到外部世界（例如，互联网），第二个网络连接到内部机器。为简单起见，我们将它们称为**ExternalNet**和**InternalNet**。
- en: 'The first thing that you need to do is define a DHCP scope of `192.168.177.0/24`
    for the DHCP server. This is the network that will be used for external access,
    and the labs would be required to be set this way if you were to use this machine.
    If you are using a server platform, the steps to set up the network are as follows:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要做的第一件事是为DHCP服务器定义一个`192.168.177.0/24`的DHCP范围。这是用于外部访问的网络，如果你要使用这台机器，实验室需要设置成这样。如果你使用的是服务器平台，设置网络的步骤如下：
- en: Navigate to **Start** | **Administrative Tools** | **Hyper-V Manager**.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**开始** | **管理工具** | **Hyper-V管理器**。
- en: Click on **Virtual Network Manager** on the right-hand pane of Hyper-V, The
    **Virtual Network Manager** window appears.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Hyper-V的右窗格上点击**虚拟网络管理器**，**虚拟网络管理器**窗口将出现。
- en: Select **New Virtual network** on the left-hand pane and select **External**
    as the type of network, then click on **Add**. This is shown in the following
    screenshot:![Hyper-V](img/477-1_02_05.jpg)
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左窗格上选择**新建虚拟网络**，并选择**外部**作为网络类型，然后点击**添加**。如下面的屏幕截图所示：![Hyper-V](img/477-1_02_05.jpg)
- en: The process to create the InternalNet is the same, so we will not repeat it
    here. We will go through the steps of creating a virtual machine with Hyper-V
    to the point of a successful boot, then we will continue with the chapter.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 创建InternalNet的过程是相同的，所以我们不会在这里重复。我们将按照使用Hyper-V创建虚拟机的步骤，直到成功启动，然后我们将继续进行下一章。
- en: 'You will need an ISO image, and if you have one you want to use, then that
    is fine. We will use the popular pentesting framework from Offensive Security
    Kali Linux. You can download the ISO image from the location [http://www.kali.org/downloads/](http://www.kali.org/downloads/).
    Once you open this link, pick the version you would like to use and download it.
    Once you have downloaded it launch Hyper-V. If you are using a server platform,
    the steps are as follows:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 你将需要一个ISO镜像，如果你有一个想要使用的，那就很好。我们将使用Offensive Security Kali Linux的流行渗透测试框架。你可以从[http://www.kali.org/downloads/](http://www.kali.org/downloads/)下载ISO镜像。一旦你打开这个链接，选择你想要使用的版本并下载它。一旦你下载了它，启动Hyper-V。如果你使用的是服务器平台，步骤如下：
- en: Navigate to **Start** | **Administrative Tools** | **Hyper-V Manager**.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**开始** | **管理工具** | **Hyper-V管理器**。
- en: When the program opens, navigate to **Action** | **New** | **Virtual Machine**,
    and when the new virtual machine wizard opens, click on **Next**.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当程序打开时，导航到**操作** | **新建** | **虚拟机**，当新的虚拟机向导打开时，点击**下一步**。
- en: Enter a name for Kali for the virtual machine and click on **Next**. In the
    memory section, enter the maximum of RAM you can enter, and it should be at least
    1024 KB. Kali needs at least 1 GB of memory to run efficiently. Once you have
    entered the RAM, click on **Next**.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为虚拟机输入一个名称，并点击**下一步**。在内存部分，输入你可以输入的最大RAM，至少应该是1024 KB。Kali需要至少1GB的内存才能有效运行。一旦你输入了RAM，点击**下一步**。
- en: This will bring up the network connection selection; click on **Not connected**
    and then click on **Next** twice.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将带出网络连接选择；点击**未连接**，然后点击**下一步**两次。
- en: In the Installation Options window, select the radio button **Install an operating
    system from a boot CD/DVD-ROM** and then select the image file (ISO) and browse
    to the Kali image. Refer to the following screenshot:![Hyper-V](img/477-1_02_03.jpg)
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装选项窗口中，选择单选按钮**从引导CD/DVD-ROM安装操作系统**，然后选择镜像文件（ISO），并浏览到Kali镜像。参考下面的屏幕截图：![Hyper-V](img/477-1_02_03.jpg)
- en: This is the installation options screen for your reference
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 这是你参考的安装选项屏幕
- en: Once you have navigated to the ISO image, click on **Next**. Verify that your
    settings are correct and click on **Finish**.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你导航到ISO镜像，点击**下一步**。验证你的设置是否正确，然后点击**完成**。
- en: We now want to configure our network adapter. Within the Hyper-V environment,
    this can be a tricky process; so, the safest way when you are dealing with machines
    that are not from the Windows family is to select the legacy card. Right-click
    on the Kali virtual machine you have created and select **Legacy Network Adapter**.
    Then, click on **Add** as shown in the following screenshot:![Hyper-V](img/477-1_02_04.jpg)
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们想要配置我们的网络适配器。在Hyper-V环境中，这可能是一个棘手的过程；所以，当你处理不是来自Windows家族的机器时，最安全的方法是选择传统的网卡。右键单击你创建的Kali虚拟机，选择**传统网络适配器**。然后，点击**添加**，如下面的屏幕截图所示：![Hyper-V](img/477-1_02_04.jpg)
- en: Now that we have selected our network adapter type, we have to connect it to
    our network. In the drop-down window, select **External** network, click on **Apply**,
    and then click on **OK**.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们已经选择了我们的网络适配器类型，我们必须将其连接到我们的网络。在下拉窗口中，选择**外部**网络，点击**应用**，然后点击**确定**。
- en: A new virtual network will appear on the left-hand side of the window. Select
    it and then enter the name as `ExternalNet` in the right-hand pane of the window.
    Ensure that the **External** radio button is selected, click on the network adapter
    of your computer, and then click on **Apply**, as shown in the following screenshot:![Hyper-V](img/477-1_02_06.jpg)
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个新的虚拟网络将出现在窗口的左侧。选择它，然后在窗口的右侧窗格中输入名称为`ExternalNet`。确保选择了**External**单选按钮，点击计算机的网络适配器，然后点击**应用**，如下面的屏幕截图所示：![Hyper-V](img/477-1_02_06.jpg)
- en: If you get a warning message similar to the next screenshot, click on **Yes**
    to clear it. It is just to let you know that you may lose connectivity and have
    to re-enter the static network configuration data if you do lose the network connectivity.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你收到类似下一个屏幕截图的警告消息，点击**是**以清除它。这只是为了让你知道你可能会失去连接，并且必须重新输入静态网络配置数据，如果你失去了网络连接。
- en: If you do not want to be bothered by the alert again, then select the **Please
    don't ask me again** checkbox before you click on **Yes**, as shown in the following
    screenshot:![Hyper-V](img/477-1_02_07.jpg)
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你不想再被警告打扰，那么在点击**是**之前选择**请不要再次询问我**复选框，如下面的屏幕截图所示：![Hyper-V](img/477-1_02_07.jpg)
- en: We are now ready to start our virtual machine. Right-click on the Kali virtual
    machine and select **Start**. Then, right-click again and select **Connect**.
    Your virtual machine should boot, and you can enter `startx`, which will start
    the environment. At this point, it is up to you how much you explore with this
    virtual machine. We will continue with the chapter so that we can get through
    the different options of virtualization and move on to bigger and brighter things.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们现在准备启动我们的虚拟机。右键单击Kali虚拟机，然后选择**启动**。然后，再次右键单击并选择**连接**。您的虚拟机应该启动，并且您可以输入`startx`，这将启动环境。在这一点上，您可以自行决定要探索这个虚拟机多少。我们将继续本章，以便我们可以了解不同的虚拟化选项，并继续朝着更大更美好的事物前进。
- en: vSphere Hypervisor
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: vSphere Hypervisor
- en: This is the free version of the commercial entity, which is something you should
    consider for your lab environment. There are some versions that will work on a
    laptop and make it a part of their mobile lab environment too, but in my opinion,
    this is not the way to exploit the power of this type 1 virtualization solution.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 这是商业实体的免费版本，这是您应该考虑用于实验室环境的东西。有一些版本可以在笔记本电脑上运行，并将其作为移动实验室环境的一部分，但在我看来，这不是充分利用这种类型1虚拟化解决方案的方式。
- en: As previously discussed, a type 1 solution has the Hypervisor ride on the actual
    hardware of the system itself. There are no emulation routines or interaction
    with the OS required; it is a pure bare metal environment that, in most cases,
    equates to raw power.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，类型1解决方案使Hypervisor运行在系统的实际硬件上。不需要模拟例程或与操作系统的交互；这是一个纯粹的裸机环境，在大多数情况下等同于原始动力。
- en: 'While the setup is very easy to perform and most can do it without assistance,
    the VMware site has excellent resources for you to use to assist you with the
    installation. You can review these resources, including a video of how to perform
    the setup, at the following website:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然设置非常容易进行，大多数人可以在没有帮助的情况下完成，但VMware网站提供了出色的资源，以帮助您进行安装。您可以在以下网站上查看这些资源，包括如何执行设置的视频：
- en: '[http://www.vmware.com/products/vsphere-hypervisor/gettingstarted.html](http://www.vmware.com/products/vsphere-hypervisor/gettingstarted.html)'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.vmware.com/products/vsphere-hypervisor/gettingstarted.html](http://www.vmware.com/products/vsphere-hypervisor/gettingstarted.html)'
- en: As you will see when you visit the site, the team at VMware has provided you
    plenty of references to assist you with the installation, configuration, and deployment
    of their virtualization solutions. One last thing to mention here is the hardware
    requirements that are listed on the site; most of these are considered to be recommendations,
    and it is best to test the hardware for the product before you make it your preferred
    solution. Again, this is another reason why we do not recommend this solution
    on your mobile or laptop platform; laptops, for the most part, do not have the
    power that we want at our disposal when it comes to a bare metal virtual solution.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 当您访问该网站时，您会发现VMware团队为您提供了大量参考资料，以帮助您安装、配置和部署他们的虚拟化解决方案。在这里要提到的最后一件事是网站上列出的硬件要求；其中大多数被认为是建议，最好在将其作为首选解决方案之前测试产品的硬件。这也是为什么我们不建议在移动或笔记本平台上使用该解决方案的另一个原因；在大多数情况下，笔记本电脑没有我们在裸机虚拟解决方案中想要的动力。
- en: Commercial environments
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 商业环境
- en: As with the free offerings, there are a number of commercial environments that
    we want to discuss in this book. We will look at both type 1 and type 2 virtualization
    solutions.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 与免费提供的一样，我们想在本书中讨论一些商业环境。我们将研究类型1和类型2的虚拟化解决方案。
- en: vSphere
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: vSphere
- en: 'This is an extremely powerful continuation of the capabilities discussed with
    the VMware Hypervisor; the added capabilities and features make it well worth
    the investment to deploy sophisticated and complex virtual architectures. The
    tool provides so many additional options above and beyond the free variant. These
    options are as follows:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 这是与VMware Hypervisor讨论的功能的一个非常强大的延续；增加的功能和特性使得投资部署复杂和复杂的虚拟架构非常值得。该工具提供了许多超出免费变体的附加选项。这些选项如下：
- en: Pool computing and storage resources across multiple physical hosts
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 跨多个物理主机汇集计算和存储资源
- en: Centralized management of multiple hosts using the VMware vCenter Server™
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用VMware vCenter Server™对多个主机进行集中管理
- en: Deliver improved service levels and operational efficiency
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供改进的服务水平和运营效率
- en: Perform live migration of virtual machines
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行虚拟机的实时迁移
- en: Take advantage of automatic load balancing, business continuity, and backup
    and restore capabilities for your virtual machines
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用自动负载平衡、业务连续性和虚拟机的备份和恢复功能
- en: As you can see, there are many optimization options with the tool; however,
    unless you are building a complex and sophisticated testing lab, this tool goes
    beyond what we need as a solution. If you do find yourself running large global
    teams, then it is definitely an option that you should consider if it is within
    your budget.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，该工具有许多优化选项；但是，除非您正在构建一个复杂和精密的测试实验室，否则该工具超出了我们作为解决方案的需求。如果您发现自己在运行大型全球团队，那么这绝对是一个您应该考虑的选项，如果它在您的预算范围内的话。
- en: VMware Player Plus
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: VMware Player Plus
- en: As of this writing, VMware Player Plus is a relatively new offering from the
    group at VMware. We have already discussed the VMware Player tool. What this version
    does is provide an additional functionality. The tool is intended to provide the
    capability to deliver a managed desktop by allowing you to ship Player Plus with
    a virtual machine that is configured with your desktop image. This alleviates
    any requirement for shipping hardware to your clients or any other groups.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 截至目前，VMware Player Plus是VMware团队的一个相对较新的产品。我们已经讨论过VMware Player工具。这个版本提供了额外的功能。该工具旨在通过允许您使用配置了您的桌面图像的虚拟机来提供托管桌面的能力。这样就不需要向客户或其他组织发送硬件。
- en: 'An additional feature of VMware Player Plus is that it can be used to run restricted
    virtual machines that have been created by other commercial VMware products. This
    means you can password protect machines, and if the user does not have the password,
    then they cannot run the machine. An example of a password-protected machine is
    shown in the following screenshot:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: VMware Player Plus的另一个功能是可以用于运行由其他商业VMware产品创建的受限制的虚拟机。这意味着您可以对机器进行密码保护，如果用户没有密码，则无法运行该机器。以下是一个受密码保护的机器的示例截图：
- en: '![VMware Player Plus](img/477-1_02_20.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![VMware Player Plus](img/477-1_02_20.jpg)'
- en: At the time of writing this book, the tool does not provide a trial download,
    but you can read more information about it from [http://www.vmware.com/products/player/](http://www.vmware.com/products/player/).
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本书时，该工具并不提供试用下载，但您可以从[http://www.vmware.com/products/player/](http://www.vmware.com/products/player/)了解更多信息。
- en: XenServer
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: XenServer
- en: 'The group at Citrix has developed a powerful competitor to the solutions offered
    from VMware, and this is evident in their XenServer offering. They make the statement
    that they are the leading data center platform for cloud and desktop solutions;
    furthermore, according to their claims, four out of five of the largest hosting
    clouds are hosted by XenServer, and this is quite a claim indeed. Some examples
    of what the product can provide solutions for are as follows:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: Citrix团队开发了一款强大的竞争对手，即XenServer解决方案，这在其XenServer产品中表现出来。他们声称他们是云和桌面解决方案的领先数据中心平台；此外，根据他们的说法，五大主机云中有四个是由XenServer托管的，这确实是一个大胆的说法。该产品可以提供解决方案的一些示例如下：
- en: Highly secure and flexible network fabric
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度安全和灵活的网络结构
- en: Create and delegate rights
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建和委派权限
- en: High availability and load balancing support
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高可用性和负载平衡支持
- en: As with the vSphere commercial solution, this is not something we really require
    for building our labs, but it is a possibility for those who want to use something
    other than a VMware offering. You can find out more and also download it from
    [http://www.citrix.com/products/xenserver/how-it-helps.html](http://www.citrix.com/products/xenserver/how-it-helps.html).
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 与vSphere商业解决方案一样，这并不是我们构建实验室真正需要的东西，但对于那些想要使用除了VMware产品之外的东西的人来说，这是一个选择。您可以从[http://www.citrix.com/products/xenserver/how-it-helps.html](http://www.citrix.com/products/xenserver/how-it-helps.html)了解更多信息并进行下载。
- en: VMware Workstation
  id: totrans-96
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: VMware Workstation
- en: The team at VMware has been in the virtualization game for some time, and it
    shows when you use their Workstation product. The thing that separates VMware
    Workstation from the masses to me is the fact that you can integrate with most,
    if not all, devices you plug into your host machine relatively seamlessly. While
    it does cost to use VMware Workstation, the cost is relatively cheap, and it provides
    so much power to create extremely diverse and complex architectures. It is, by
    far, my favorite tool, and I will be using it in the next chapter and the consecutive
    ones as well. As I have mentioned, the Microsoft offering, having only been on
    the scene for a short period, is definitely improving, and it will make an interesting
    race as they continue to mature their product. This is a good thing for us! As
    consumers, we can only benefit from these vendors each trying to outdo each other.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: VMware团队在虚拟化领域已经有一段时间了，当您使用他们的Workstation产品时就会显现出来。对我来说，将VMware Workstation与其他大多数设备相对无缝地集成是它脱颖而出的地方。虽然使用VMware
    Workstation是需要付费的，但成本相对较低，并且提供了强大的功能，可以创建非常多样化和复杂的架构。这绝对是我最喜欢的工具，我将在下一章和接下来的章节中继续使用它。正如我所提到的，微软的产品虽然只在市场上短短时间，但确实在不断改进，随着产品的成熟，这将是一场有趣的竞赛。这对我们来说是件好事！作为消费者，我们只会从这些供应商互相竞争中受益。
- en: As mentioned, it is highly recommended that you consider purchasing the software.
    You can download the latest version of VMware Workstation from [http://www.vmware.com/products/workstation/workstation-evaluation](http://www.vmware.com/products/workstation/workstation-evaluation).
    As with other versions of software, you have to register and obtain a key to be
    able to power on virtual machines.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，强烈建议您考虑购买该软件。您可以从[http://www.vmware.com/products/workstation/workstation-evaluation](http://www.vmware.com/products/workstation/workstation-evaluation)下载最新版本的VMware
    Workstation。与其他软件版本一样，您必须注册并获取密钥才能启动虚拟机。
- en: 'Once you have downloaded it, you can install the software, and it is pretty
    straightforward. If you do have any questions, the VMware Workstation user guide
    is well written and is an excellent reference for you. You can also download it
    using the following link:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 下载后，您可以安装该软件，这非常简单。如果您有任何问题，VMware Workstation用户指南写得很好，是您的绝佳参考。您也可以使用以下链接进行下载：
- en: '[http://www.vmware.com/pdf/desktop/ws1001-using.pdf](http://www.vmware.com/pdf/desktop/ws1001-using.pdf)'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.vmware.com/pdf/desktop/ws1001-using.pdf](http://www.vmware.com/pdf/desktop/ws1001-using.pdf)'
- en: 'There is a large community forum that is also an excellent reference for information
    about the tool. Support is another reason why VMware continues to lead in the
    major categories of virtualization. Once you have installed the program and opened
    it, you should see a display on your screen similar to that shown in the following
    screenshot:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一个大型社区论坛，也是关于该工具的绝佳参考。支持是VMware继续在虚拟化的主要领域中领先的另一个原因。安装程序安装并打开后，您应该在屏幕上看到与以下截图类似的显示：
- en: '![VMware Workstation](img/477-1_02_11.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![VMware Workstation](img/477-1_02_11.jpg)'
- en: 'As you can see in the preceding screenshot, there are a number of options for
    us to start with. As we have used ISO images earlier, we will continue that trend
    here and also add another task of creating a virtual machine. For simplicity,
    we will use the same ISO Samurai WTF image that we used earlier, but you are welcome
    to download an ISO image of your choice and create the machine from this. Once
    you have made your choice of the ISO image to be used, we are ready to begin the
    installation. To start using this virtual machine, we will execute the following
    steps:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您在前面的屏幕截图中所看到的，我们有许多选项可供选择。由于我们之前使用过ISO映像，我们将继续这种趋势，并添加另一个任务来创建一个虚拟机。为简单起见，我们将使用之前使用过的ISO
    Samurai WTF映像，但您也可以下载您选择的ISO映像并从中创建机器。一旦您选择了要使用的ISO映像，我们就准备开始安装。要开始使用这个虚拟机，我们将执行以下步骤：
- en: Click on **Create a New Virtual Machine**. This will start the new virtual machine
    wizard. Accept the default setting of **Typical** and click on **Next**.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建新的虚拟机**。这将启动新的虚拟机向导。接受**典型**的默认设置，然后点击**下一步**。
- en: In the next window, select the radio button **Installer disc image file (iso)**
    and browse to the location of the ISO file. Then, click on **Next**, as shown
    in the following screenshot:![VMware Workstation](img/477-1_02_12.jpg)
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个窗口中，选择**安装程序光盘映像文件（iso）**的单选按钮，并浏览到ISO文件的位置。然后，点击**下一步**，如下图所示：![VMware
    Workstation](img/477-1_02_12.jpg)
- en: In the previous screenshot, you probably noticed the operating system was not
    automatically detected; therefore, we will have to enter the details manually.
    If it was detected, the wizard, for the most part, will perform the installation
    without interaction from the user.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一个屏幕截图中，您可能注意到操作系统没有被自动检测到；因此，我们将不得不手动输入详细信息。如果它被检测到，向导在大部分情况下将会在用户不进行交互的情况下执行安装。
- en: In the guest operating system window, select **Linux**, and in the drop-down
    menu, click on **Other** **Linux 2.6.x kernel**. Once you have made your selection,
    click on **Next**. Accept the defaults and click on **Next**.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在客户操作系统窗口中，选择**Linux**，在下拉菜单中，点击**其他** **Linux 2.6.x kernel**。一旦您做出选择，点击**下一步**。接受默认设置，然后点击**下一步**。
- en: At the **Specify disk Capacity** screen, read through the information on the
    advantages and disadvantages of splitting a disk. If you prefer to change the
    default setting you may do so, but for most, the default is acceptable unless
    you intend to have large machines.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**指定磁盘容量**屏幕上，阅读有关分割磁盘的优缺点的信息。如果您希望更改默认设置，可以这样做，但对于大多数人来说，默认设置是可以接受的，除非您打算拥有大型机器。
- en: Once you have made your decisions, click on **Next**. This should be the last
    screen; take a moment and review the information. Then, click on **Finish** and
    create your virtual machine. You should see the machine you created and the information
    for the machine configuration, as shown in the following screenshot:![VMware Workstation](img/477-1_02_13.jpg)
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您做出决定，点击**下一步**。这应该是最后一个屏幕；花点时间审查信息。然后，点击**完成**并创建您的虚拟机。您应该看到您创建的机器和机器配置信息，如下图所示：![VMware
    Workstation](img/477-1_02_13.jpg)
- en: The only thing left to do is to power on the virtual machine. Click on **Power
    on this virtual machine** and your machine will boot.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 唯一剩下的事情就是启动虚拟机。点击**启动此虚拟机**，您的机器将启动。
- en: Now, we are going to create a virtual machine for one of the machines that we
    will use in other chapters in the book. The machine we are going to use is already
    created and available as a virtual machine in the VMware VMDK file format. We
    will cover more on the different formats for virtual hard drives later in the
    chapter. We want to download the Broken Web Application Project virtual machine
    from **Open Web Application Security Group** (**OWASP**) available at [www.owasp.org](http://www.owasp.org).
    The virtual machine has been sponsored by Mandiant and is an excellent tutorial
    to practice web application testing. You can download the VM from [http://sourceforge.net/projects/owaspbwa/files/](http://sourceforge.net/projects/owaspbwa/files/).
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将为本书中其他章节中将使用的机器创建一个虚拟机。我们将要使用的机器已经创建并以VMware VMDK文件格式作为虚拟机可用。我们将在本章后面更多地介绍虚拟硬盘的不同格式。我们想要从**Open
    Web Application Security Group**（**OWASP**）的[www.owasp.org](http://www.owasp.org)上下载Broken
    Web Application Project虚拟机。这个虚拟机由Mandiant赞助，是一个练习Web应用程序测试的绝佳教程。您可以从[http://sourceforge.net/projects/owaspbwa/files/](http://sourceforge.net/projects/owaspbwa/files/)下载VM。
- en: 'Once the VM is downloaded, extract the VM to a folder on your machine. Once
    the files have been extracted, we need to start VMware Workstation and start the
    access process. The following are the steps that need to be executed:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦VM下载完成，将VM提取到您机器上的一个文件夹。文件提取完成后，我们需要启动VMware Workstation并开始访问过程。以下是需要执行的步骤：
- en: Click on **Open a Virtual Machine**. Navigate to the folder where you extracted
    the files and locate the configuration file for the Broken Web Application project
    VM.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**打开虚拟机**。导航到您提取文件的文件夹，并找到Broken Web Application项目VM的配置文件。
- en: Once you have located the file, select it and click on **Open** to open the
    file. This will open the VM and you should be in the configuration screen, as
    shown in the following screenshot:![VMware Workstation](img/477-1_02_14.jpg)
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您找到文件，选择它并点击**打开**以打开文件。这将打开VM，您应该在配置屏幕上，如下图所示：![VMware Workstation](img/477-1_02_14.jpg)
- en: As you can see in the preceding screenshot, the VM is configured to start on
    the NAT interface, and we will use this once we boot the VM. At the end of this
    section, we will take a look at what this NAT interface means in a VM environment.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您在前面的屏幕截图中所看到的，VM配置为在NAT接口上启动，并且我们将在启动VM时使用这个接口。在本节结束时，我们将看一下在VM环境中这个NAT接口的含义。
- en: We now want to start the machine; click on **Power on this virtual machine**
    and your machine will boot.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们要启动这台机器；点击**启动此虚拟机**，您的机器将启动。
- en: Once the machine has booted, you will see the login information for the machine
    to access it across the Internet. We could log in to the machine locally, but
    there really is no reason to do this. You are welcome to do this if you want to
    check the machine out or look around, but for our purposes, we will access it
    from the network. This is the preferred way to access it because it provides us
    with a GUI to all of the different tools within the VM. The VM screen that shows
    the status after the boot is shown in the following screenshot:![VMware Workstation](img/477-1_02_15.jpg)
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦机器启动，您将看到用于访问该机器的登录信息。我们可以在本地登录到机器，但实际上没有理由这样做。如果您想要检查机器或四处浏览，欢迎这样做，但出于我们的目的，我们将通过网络访问它。这是访问它的首选方式，因为它为我们提供了VM内的所有不同工具的图形用户界面。启动后显示状态的VM屏幕如下截图所示：![VMware
    Workstation](img/477-1_02_15.jpg)
- en: 'The information that we want here is the IP address that is assigned to the
    VM so that we can access it and check it out! Open the browser of your choice
    and enter the IP address that is shown and bring up the web interface to the Broken
    Web Application Project VM. An example of the web page that is presented to you
    is shown in the following screenshot:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 我们想要的信息是分配给VM的IP地址，以便我们可以访问并检查它！打开您选择的浏览器，输入显示的IP地址，并打开Broken Web Application
    Project VM的Web界面。向您展示的网页示例如下截图所示：
- en: '![VMware Workstation](img/477-1_02_16.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![VMware Workstation](img/477-1_02_16.jpg)'
- en: As the screenshot shows, there are many tools located in this VM distribution,
    and it is something that any tester can benefit from. The tutorials and applications
    that are contained here allow a user to practice their skills and the challenges,
    which are set up at different skill levels. You are encouraged to spend a lot
    of time here and come back often. We will be using it throughout the book as and
    when the situation requires it. Again, since the sponsorship of Mandiant, the
    VM has added a number of additional challenges. Some of you reading this book
    might be familiar with the OWASP's excellent tutorial Web Goat. This project is
    just an extension of this tutorial, and it has also added the Irongeek tool Mutillidae.
    You can read more about Mutillidae at [http://www.irongeek.com/i.php?page=mutillidae/mutillidae-deliberately-vulnerable-php-owasp-top-10](http://www.irongeek.com/i.php?page=mutillidae/mutillidae-deliberately-vulnerable-php-owasp-top-10)
    or even watch some of the informative videos at [www.irongeek.com](http://www.irongeek.com).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 正如截图所示，这个VM分发中有许多工具，这是任何测试人员都可以从中受益的。这里包含的教程和应用程序允许用户练习他们的技能和在不同技能水平上设置的挑战。鼓励您在这里花费大量时间，并经常回来。我们将在整本书中根据情况使用它。再次感谢Mandiant的赞助，VM增加了许多额外的挑战。阅读本书的一些人可能熟悉OWASP的优秀教程Web
    Goat。这个项目只是这个教程的延伸，它还添加了Irongeek工具Mutillidae。您可以在[http://www.irongeek.com/i.php?page=mutillidae/mutillidae-deliberately-vulnerable-php-owasp-top-10](http://www.irongeek.com/i.php?page=mutillidae/mutillidae-deliberately-vulnerable-php-owasp-top-10)上阅读更多关于Mutillidae的信息，甚至观看一些信息视频在[www.irongeek.com](http://www.irongeek.com)。
- en: 'We have one more topic to look at before we continue on with this chapter;
    it is the power of networking within VMware Workstation. This is one of the main
    reasons why I paid for and continue to pay for VMware Workstation. In your VMware
    Workstation, navigate to **Edit** | **Virtual Network Editor**. When the window
    opens, you will see the current switches that are configured in VMware. By default,
    VMware configures three virtual switches, and they are Vmnet0 for the bridged
    interface, Vmnet1 for the host only interface, and Vmnet8 for the NAT interface.
    We will not go into detail here as there are many sources from which we can learn
    more about the networks and what they mean, and one of the best is the VMware
    Workstation user guide we mentioned earlier in this chapter. The power of VMware
    Workstation is that we can have up to 10 virtual switches! What this means is
    that we can effectively architect 10 different network segments. The VMware network
    configuration allows us to set the IP address ranges that we want and also provides
    a DHCP server. For the most part, 10 is more than we need, and with Version 10x
    and higher, we can now have 20 and 255 network segments on Windows and Linux hosts,
    respectively. That is a lot of networks! It is this and other factors that make
    it our software of choice. We need the switching capability when we build layered
    and segmented architectures. An example of the network configuration on my machine
    is shown in the following screenshot:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们继续本章之前，我们还有一个主题要讨论；那就是VMware Workstation内部网络的功能。这是我支付并继续支付VMware Workstation的主要原因之一。在您的VMware
    Workstation中，导航至**编辑** | **虚拟网络编辑器**。窗口打开后，您将看到VMware中配置的当前交换机。默认情况下，VMware配置了三个虚拟交换机，它们是用于桥接接口的Vmnet0，用于主机接口的Vmnet1，以及用于NAT接口的Vmnet8。我们不会在这里详细介绍，因为有很多来源可以让我们了解更多关于网络以及它们的含义，其中最好的之一就是我们在本章前面提到的VMware
    Workstation用户指南。VMware Workstation的强大之处在于我们可以拥有多达10个虚拟交换机！这意味着我们可以有效地构建10个不同的网络段。VMware网络配置允许我们设置所需的IP地址范围，并提供DHCP服务器。在大多数情况下，10个已经足够了，而且在10x及更高版本中，我们现在可以在Windows和Linux主机上分别拥有20和255个网络段。这是非常多的网络！正是这一点以及其他因素使得它成为我们的首选软件。在构建分层和分段架构时，我们需要交换功能。我的机器上的网络配置示例如下截图所示：
- en: '![VMware Workstation](img/477-1_02_17.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![VMware Workstation](img/477-1_02_17.jpg)'
- en: In the preceding screenshot, you can observe that in my machine, most of the
    10 possible networks are visible. I have built numerous complex architectures
    over a period of time and have added more than one custom network.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述截图中，您可以看到在我的机器上，大部分10个可能的网络都是可见的。我已经在一段时间内构建了许多复杂的架构，并添加了一个以上的自定义网络。
- en: It is more than likely that you have the three default switches that are installed
    by the software. Feel free to add a switch if you want to see how the process
    is done. This is what allows us to build a true layered architecture that emulates
    something we could see in an engagement. In fact, it is rare to have a single
    segment or flat architecture you are testing, especially in any type of external
    testing. Therefore, it is imperative as we build and test advanced techniques
    that we have the ability to provide layers of protection so that we can either
    hack through or get around in some way to achieve a compromise.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 很可能您已经安装了软件提供的三个默认交换机。如果您想要查看该过程是如何进行的，可以随意添加一个交换机。这使我们能够构建一个真正的分层架构，模拟我们在参与中可能看到的情况。事实上，在测试中很少会出现单一段或扁平架构，尤其是在任何类型的外部测试中。因此，当我们构建和测试高级技术时，我们必须能够提供多层保护，以便我们可以通过或绕过某种方式来实现妥协。
- en: Image conversion
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 图像转换
- en: Recently, while working with developing labs for a client who extensively used
    a virtual environment, I was asked to migrate the virtual machines from VMware
    to Hyper-V. As I had very little experience with Hyper-V, it was a challenging
    task which took three weeks to complete. Satisfaction is one aspect of life which
    is achieved when we accept challenges and overcome the hurdles posed by them.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，我在为一个广泛使用虚拟环境的客户开发实验室时，被要求将虚拟机从VMware迁移到Hyper-V。由于我对Hyper-V的经验很少，这是一个具有挑战性的任务，花了三周的时间才完成。满足感是生活中的一部分，当我们接受挑战并克服它们带来的障碍时，就能实现满足感。
- en: Additionally, there were some things that worked perfectly fine in VMware but
    could not be accomplished in Hyper-V; one thing that would not work is the router
    emulation software. The primary issue with the migration is related to the virtual-hard-disk
    format. Hyper-V requires VHD and VMware uses the VMDK format for its virtual machine
    hard disks. In order to overcome the hurdle of image conversion, I was in search
    of a tool which would assist in this conversion.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，在VMware中完美运行的一些东西在Hyper-V中无法完成；其中一个无法运行的是路由器仿真软件。迁移的主要问题与虚拟硬盘格式有关。Hyper-V需要VHD，而VMware使用VMDK格式作为其虚拟机硬盘。为了克服图像转换的障碍，我在寻找一种可以帮助进行转换的工具。
- en: Fortunately, such a tool exists, and it's free! When you are building virtual
    machines, if you want to use another tool, or more commonly you have a format
    that you created or downloaded and it does not match the tool you are trying to
    use, then this tool is perfect for you! The tool I use often for accomplishing
    this is Starwind V2V Converter from Starwind Software, available at [http://www.starwindsoftware.com/](http://www.starwindsoftware.com/).
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，这样的工具存在，而且是免费的！当您构建虚拟机时，如果您想使用另一个工具，或者更常见的是您有一个与您尝试使用的工具不匹配的格式，那么这个工具就非常适合您！我经常使用的工具是Starwind
    Software提供的Starwind V2V Converter，可在[http://www.starwindsoftware.com/](http://www.starwindsoftware.com/)上获得。
- en: 'A note of caution here: the tool in my experience has not been perfect, but
    it has converted most of the VMDK files to the VHD format for Hyper-V without
    any problems. The only OS which has been posing problems during conversion and
    then getting it to work on Hyper-V has been "FreeBSD". Ironically, FreeBSD versions
    prior to Version 9x seem to work fine.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 这里需要注意的一点是：根据我的经验，该工具并不完美，但它已经成功将大多数VMDK文件转换为Hyper-V的VHD格式，没有任何问题。唯一在转换过程中出现问题并在Hyper-V上运行的操作系统是“FreeBSD”。讽刺的是，版本9x之前的FreeBSD似乎可以正常工作。
- en: 'You can download the software from [http://www.starwindsoftware.com/converter](http://www.starwindsoftware.com/converter).
    Note that you will be required to register and the application runs in Windows.
    Once you have downloaded the software, install it and then run the program. It
    is an easy-to-use tool; you select the file image to convert by navigating to
    it. Following this, the tool will display the options for the format output. An
    example of this is shown in the following screenshot:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[http://www.starwindsoftware.com/converter](http://www.starwindsoftware.com/converter)下载该软件。请注意，您需要注册，并且该应用程序在Windows上运行。下载软件后，安装并运行程序。这是一个易于使用的工具；您可以通过导航到文件图像来选择要转换的文件。随后，该工具将显示格式输出的选项。以下是一个示例截图：
- en: '![Image conversion](img/477-1_02_18.jpg)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![图像转换](img/477-1_02_18.jpg)'
- en: Once the output format has been selected, the process of conversion will run,
    and once it is finished, you only need to go through the steps that we have covered
    before for the tool that you have chosen. As discussed, the tool works very well
    and it saves a lot of time and provides you the ability to pick and choose any
    platform that you prefer for building the pentesting environments.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 选择输出格式后，转换过程将开始运行，一旦完成，您只需要按照之前涵盖的步骤进行所选工具的操作。正如讨论过的，该工具运行非常好，节省了大量时间，并且可以选择任何您喜欢的平台来构建渗透测试环境。
- en: Converting from a physical to virtual environment
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从物理到虚拟环境的转换
- en: 'Another option in many of the tools that can be used to help us when we create
    machines is the physical to virtual functionality, sometimes referred to as the
    P2V concept; furthermore, this provides us with the capability to build any machine,
    run the conversion process to take the physical machine, and then convert it to
    a virtual machine. This functionality allows you to build a custom pentesting
    platform machine and then perform the conversion and carry the machine anywhere
    you go out in the field. We have a couple of options that we will discuss. There
    is a free option that we can use provided by VMware called vCenter Converter.
    With this tool, you can convert not only physical Windows machines, but also Linux.
    To try it out and see how well it works, you can download it from [http://www.vmware.com/products/converter/](http://www.vmware.com/products/converter/).
    We have another option, that is, use the feature from our VMware Workstation installation.
    This is our preferred option. If you open the software, you will see there is
    an option to convert a physical machine to virtual, and this option is called
    **Virtualize a Physical Machine…**. Note that here you will have to install the
    converter the first time you select the option within VMware Workstation, as shown
    in the following screenshot:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多工具中，用于帮助我们创建机器的另一个选项是物理到虚拟功能，有时被称为P2V概念；此外，这为我们提供了构建任何机器的能力，运行转换过程以将物理机器转换为虚拟机。这种功能允许您构建自定义的渗透测试平台机器，然后执行转换并将机器带到您在外面的任何地方。我们将讨论几种选项。有一个免费选项，由VMware提供，称为vCenter
    Converter。使用这个工具，你不仅可以转换物理的Windows机器，还可以转换Linux机器。要尝试一下并看看它的效果如何，你可以从[http://www.vmware.com/products/converter/](http://www.vmware.com/products/converter/)下载它。我们还有另一个选项，即使用我们的VMware
    Workstation安装中的功能。这是我们的首选选项。如果你打开软件，你会看到有一个选项可以将物理机器转换为虚拟机，这个选项叫做**虚拟化物理机器…**。请注意，在VMware
    Workstation中首次选择该选项时，你将需要安装转换器，如下面的截图所示：
- en: '![Converting from a physical to virtual environment](img/477-1_02_19.jpg)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![从物理到虚拟环境的转换](img/477-1_02_19.jpg)'
- en: Summary
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we have discussed the different types of virtualization, where
    type 1, also known as bare metal virtualization, provides the Hypervisor that
    can be directly accessed and installed in the hardware and with type 2, the Hypervisor
    installed in the operating system. One of the advantages of a type 1 solution
    is the fact that the Hypervisor directly installed in the hardware provides for
    improved performance; a drawback of this is the fact that the hardware has to
    integrate with the product's Hypervisor and you have to ensure that you check
    that it does so.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讨论了不同类型的虚拟化，其中类型1，也称为裸机虚拟化，提供了可以直接访问和安装在硬件中的Hypervisor，而类型2，在操作系统中安装了Hypervisor。类型1解决方案的优势之一是直接安装在硬件中的Hypervisor提供了更好的性能；这种解决方案的缺点是硬件必须与产品的Hypervisor集成，并且您必须确保它确实如此。
- en: We looked at the different open source virtualization offerings that are possible,
    and we installed, configured basic settings, and created virtual machines in a
    number of tools. We downloaded and used an ISO image to create our virtual machine
    and booted the machine once it was created. Additionally, we downloaded the OWASP
    Broken Web Application Project virtual machine and used the existing configuration
    to run the machine.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 我们研究了可能的不同开源虚拟化方案，并在多种工具中安装、配置基本设置和创建了虚拟机。我们下载并使用ISO镜像来创建我们的虚拟机，并在创建后启动了该机器。此外，我们下载了OWASP
    Broken Web Application Project虚拟机，并使用现有配置来运行该机器。
- en: We also looked at some of the commercial offerings with respect to virtualization,
    and it is here that we explained the reason why we will work with the virtualization
    product VMware Workstation from this point forward. Additionally, we discussed
    the powerful features of both the XenServer and vSphere products.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还研究了一些商业虚拟化方案，并在这里解释了为什么我们将从现在开始使用虚拟化产品VMware Workstation。此外，我们还讨论了XenServer和vSphere产品的强大功能。
- en: One of the challenges we face is taking old and existing machines and using
    them with the different virtualization offerings that are out there, so we discussed
    a tool from the group at Starwind Software that can be used to convert from VMDK
    to VHD files and VHD to VMDK files, and with the exception of some, conversions
    work extremely well.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 我们面临的挑战之一是使用不同的虚拟化方案来处理旧的和现有的机器，因此我们讨论了Starwind Software团队的一个工具，可以用来将VMDK转换为VHD文件和VHD转换为VMDK文件，除了一些例外，转换效果非常好。
- en: We concluded this chapter with the concept of P2V, or physical to virtual conversion,
    which provides a way for us to take an existing or a new physical machine and
    convert it to a virtual one. In the next chapter, we will look at the challenge
    of planning and building our range.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在本章中总结了P2V的概念，即物理到虚拟转换，这为我们提供了一种将现有或新的物理机器转换为虚拟机的方法。在下一章中，我们将探讨规划和构建我们的范围的挑战。
