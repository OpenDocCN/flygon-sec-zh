- en: Chapter 1. Raspberry Pi and Kali Linux Basics
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章。树莓派和Kali Linux基础知识
- en: Kali Linux is one of the most popular penetration testing platforms used by
    security professionals, hackers, and researchers around the world for security
    and vulnerability assessment, attack research, and risk testing. Kali Linux offers
    a wide variety of popular open source tools that can be used in all aspects of
    penetration testing. Kali Linux has evolved from BackTrack 5 R3 into a model of
    a complete desktop OS.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux是全球安全专业人员、黑客和研究人员用于安全和漏洞评估、攻击研究和风险测试的最流行的渗透测试平台之一。Kali Linux提供了各种流行的开源工具，可用于渗透测试的各个方面。Kali
    Linux已经从BackTrack 5 R3发展成为一个完整桌面操作系统的模型。
- en: The Raspberry Pi is an extremely low-cost computer that plugs into a monitor
    using **High Definition Multimedia Interface** (**HDMI**) and uses your own USB
    keyboard and mouse. Many computer experts remember the days when computers would
    not just turn on and begin to operate; you had to actually do something with them.
    Raspberry Pi provides an environment to learn computing and programming at an
    extremely affordable price. People have used the portability and low cost of the
    device to build learning devices, remote cameras, security systems, earthquake
    detectors, and many other projects.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派是一种极低成本的计算机，可以通过**高清晰度多媒体接口**（**HDMI**）插入显示器，并使用您自己的USB键盘和鼠标。许多计算机专家还记得计算机不会自动开机并开始运行的日子；你必须实际对它们做些什么。树莓派提供了一个以极其实惠的价格学习计算和编程的环境。人们利用设备的便携性和低成本来构建学习设备、远程摄像头、安全系统、地震探测器等许多其他项目。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Purchasing and assembling a Raspberry Pi
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 购买和组装树莓派
- en: Installing Kali Linux
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装Kali Linux
- en: Combining Kali Linux and Raspberry Pi
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 结合Kali Linux和树莓派
- en: Cloning the Raspberry Pi SD card
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 克隆树莓派SD卡
- en: Avoiding common problems
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 避免常见问题
- en: Purchasing a Raspberry Pi
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 购买树莓派
- en: In this book, we chose the Raspberry Pi Model B+. You won't find any major differences
    if you are using another model; however, you may need to tune some things to work
    with your particular configuration.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们选择了树莓派B+型号。如果您使用其他型号，您不会发现任何主要区别；但是，您可能需要调整一些东西以适应您的特定配置。
- en: 'The following figure shows a Raspberry Pi Model B+ and highlights the differences
    between Model B and Model B+:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图片显示了树莓派B+型号，并突出了B型和B+型之间的区别：
- en: '![Purchasing a Raspberry Pi](img/6435OT_01_01.jpg)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![购买树莓派](img/6435OT_01_01.jpg)'
- en: 'Some key benefits of Model B+ as compared to the previous generations are as
    follows:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 与以前的型号相比，B+型的一些关键优势如下：
- en: More USB ports
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更多的USB端口
- en: Better hotplug capability
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更好的热插拔能力
- en: New Ethernet port with active lights
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带有活动指示灯的新以太网口
- en: Support for 40-pin **General-Purpose Input/Output** (**GPIO**) header
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持40针**通用输入/输出**（**GPIO**）标头
- en: A microSD card on the back apposed to a full-size SD card
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 背面的MicroSD卡而不是全尺寸SD卡
- en: Lower power requirements
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更低的功耗要求
- en: There are some available Raspberry Pi bundles such as the **Raspberry Pi Ultimate
    Kit**, which at the time of writing this book was available for $79.99 in US from
    [www.amazon.com](http://www.amazon.com). This kit provides a Raspberry Pi Model
    B+, case, power adapter, and Wi-Fi dongle. You can also find the basic B+ model
    that does not include the power adapter, SD card, and so on. This means that you
    can just get the chipboard for around $40 on [www.amazon.com](http://www.amazon.com).
    Some tasks, such as wire tapping, may require a second Ethernet port, but the
    Raspberry Pi by default only offers one Ethernet port.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些可用的树莓派捆绑产品，比如**树莓派终极套件**，在撰写本书时，该套件在美国[www.amazon.com](http://www.amazon.com)售价为79.99美元。该套件提供了一个树莓派B+型号、外壳、电源适配器和Wi-Fi转接器。您也可以找到不包括电源适配器、SD卡等的基本B+型号。这意味着您可以在[www.amazon.com](http://www.amazon.com)上仅以约40美元购买芯板。一些任务，比如窃听，可能需要第二个以太网口，但树莓派默认只提供一个以太网口。
- en: You can purchase a USB to Ethernet adapter for around $11.00 to meet this purpose.
    Also, many kits do not include an SD adapter for most computer readers. For example,
    portable MacBook Pro computers offer an SD port; however, you will need to pick
    up a microSD adapter for under $10 to be able to format the Raspberry Pi microSD
    card. For wireless penetration testing, you will need a USB to wireless adapter
    that can be purchased for around $10\. Overall, most Raspberry Pi components are
    inexpensive, keeping the total project cost for most systems between $50 – $100.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以购买一个约11美元的USB到以太网适配器来满足这一目的。此外，许多套件不包括大多数计算机读卡器的SD适配器。例如，便携式MacBook Pro计算机提供SD端口；但是，您需要花费不到10美元购买一个MicroSD适配器，以便格式化树莓派MicroSD卡。对于无线渗透测试，您需要购买约10美元的USB到无线适配器。总的来说，大多数树莓派组件都很便宜，使大多数系统的总项目成本在50美元至100美元之间。
- en: 'The following image shows an example of an unboxed Raspberry Pi chipboard:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图片显示了一个未打开的树莓派芯板的示例：
- en: '![Purchasing a Raspberry Pi](img/6435OT_01_02.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![购买树莓派](img/6435OT_01_02.jpg)'
- en: 'The following image contains an example of a Raspberry Pi bundle that is sold
    on eBay:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图片包含了一款在eBay上出售的树莓派捆绑产品的示例：
- en: '![Purchasing a Raspberry Pi](img/6435OT_01_03.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![购买树莓派](img/6435OT_01_03.jpg)'
- en: 'The following image is an example of a USB to Ethernet adapter:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图片是一个USB到以太网适配器的示例：
- en: '![Purchasing a Raspberry Pi](img/6435OT_01_04.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![购买树莓派](img/6435OT_01_04.jpg)'
- en: 'The following image is an example of a microSD to SD adapter:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图片是一个MicroSD到SD适配器的示例：
- en: '![Purchasing a Raspberry Pi](img/6435OT_01_05.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![购买树莓派](img/6435OT_01_05.jpg)'
- en: 'The following image is an example of a USB to Wi-Fi adapter:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图片是一个USB到Wi-Fi适配器的示例：
- en: '![Purchasing a Raspberry Pi](img/6435OT_01_06.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![购买树莓派](img/6435OT_01_06.jpg)'
- en: The **CanaKit** Wi-Fi adapter is good for the Raspberry Pi because of it's size,
    portability, and compatibility.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '**CanaKit** Wi-Fi转接器对树莓派来说很好，因为它的尺寸、便携性和兼容性。'
- en: In this book, we will explore how to use Raspberry Pi as a remote penetration
    testing agent, and use its wireless features to connect back to central management
    systems. It is most likely that you will need the components mentioned previously
    at some point as you become more familiar and comfortable with the Raspberry Pi
    using Kali Linux or other penetration testing applications.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们将探讨如何将树莓派用作远程渗透测试代理，并利用其无线功能连接到中央管理系统。随着您对使用Kali Linux或其他渗透测试应用程序的树莓派变得更加熟悉和舒适，很可能您会在某个时候需要之前提到的组件。
- en: 'Here is a summary list of the cost to build a Raspberry Pi for a penetration
    test:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是构建树莓派进行渗透测试的成本的摘要列表：
- en: Raspberry Pi B+ Model ranges between $35 and $45
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 树莓派B+型号的价格在35美元到45美元之间
- en: USB to wireless adapter ranges between $10 and $20
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: USB到无线适配器的价格在10美元到20美元之间
- en: USB to Ethernet adapter ranges between $10 and $20
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: USB到以太网适配器的价格在10美元到20美元之间
- en: SD to microSD converter with microSD card ranges between $10 and $20
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带microSD卡的SD到microSD转换器的价格在10美元到20美元之间
- en: Power adapter ranges between $5 and $10
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电源适配器的价格在5美元到10美元之间
- en: USB power supply for mobile penetration testing ranges between $10 and $20
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移动渗透测试的USB电源适配器价格在10美元到20美元之间
- en: Starter kit bundles can range from $60 to $90 depending on what is included
    in them.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 入门套件的价格范围从60美元到90美元不等，具体取决于其中包含的内容。
- en: Tip
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: This list doesn't include an HDMI-capable monitor, a USB keyboard, and a USB
    mouse that are typically needed to build a startup image.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 此列表不包括通常需要构建启动镜像的HDMI显示器、USB键盘和USB鼠标。
- en: Assembling a Raspberry Pi
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 组装树莓派
- en: A Raspberry Pi is typically just a chipboard with exposed circuits. Most people
    want to protect their investment as well as conceal their Raspberry Pi at a target
    location using a case. The majority of Raspberry Pi cases are designed to either
    pop in the circuit board or slip between wedges designed to hold the Pi in place.
    Once your Raspberry Pi is seated properly, most cases have a cover to seal the
    Pi while exposing the input ports.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派通常只是一个裸露的电路板。大多数人希望保护他们的投资，并在目标位置使用外壳隐藏他们的树莓派。大多数树莓派外壳设计为要么插入电路板，要么滑入设计用于固定树莓派的楔形间隙中。一旦您的树莓派正确安装，大多数外壳都有一个盖子来密封树莓派，同时暴露输入端口。
- en: The next step for assembly is to attach the input and output devices such as
    keyboard, wireless adapter, and mouse. The Raspberry Pi Model B+ offers four USB
    input ports for this purpose. There is also an HDMI output that is used to connect
    it to a monitor. For power, the Raspberry Pi uses 5 V micro USB power that can
    come from a USB hub, power adapter, or such other devices. The brain for the Raspberry
    Pi is the software installed on the microSD card; however, we need to first install
    the Kali Linux image on it before inserting it into the Raspberry Pi.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 组装的下一步是连接输入和输出设备，如键盘、无线适配器和鼠标。树莓派B+型号提供了四个USB输入端口供此用途。还有一个HDMI输出，用于连接到显示器。对于电源，树莓派使用5V微型USB电源，可以来自USB集线器、电源适配器或其他设备。树莓派的大脑是安装在microSD卡上的软件；然而，在将其插入树莓派之前，我们需要先在其上安装Kali
    Linux镜像。
- en: Note
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Some Raspberry Pi microSD cards come with preinstalled software. It is recommended
    to clone this software prior to formatting the microSD card for Kali Linux so
    that you have a backup copy of the factory-installed software. The process to
    clone your microSD card will be covered later in this chapter.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 一些树莓派microSD卡预装了软件。建议在为Kali Linux格式化microSD卡之前克隆此软件，以便您有备份副本。克隆microSD卡的过程将在本章后面介绍。
- en: Preparing a microSD card
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备microSD卡
- en: Now that your Raspberry Pi is assembled, we need to install Kali Linux. Most
    computers do not have microSD ports; however, many systems such as Apple MacBooks
    offer an SD input port. If your system does not have an SD port, external USB-based
    SD and microSD adapters are also available that are very cheap. For my example,
    I'll be using a MacBook that has an SD drive and a microSD adapter to allow me
    to format my Raspberry Pi microSD card.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您的树莓派已经组装好了，我们需要安装Kali Linux。大多数计算机没有microSD卡插槽；然而，许多系统，如苹果MacBook提供SD插槽。如果您的系统没有SD插槽，也可以购买非常便宜的外部基于USB的SD和microSD适配器。在我的例子中，我将使用一个带有SD驱动器和microSD适配器的MacBook来格式化我的树莓派microSD卡。
- en: Tip
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Your Raspberry Pi microSD card should have a minimum size of 8 GB to run Kali
    Linux properly. You also need to make sure that the microSD card is a high performance
    card. We recommend a minimum of a class 10 card for most projects.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 您的树莓派microSD卡应该至少有8GB的容量才能正常运行Kali Linux。您还需要确保microSD卡是高性能的。我们建议大多数项目至少使用10级卡。
- en: 'The following image shows a class 10 Kingston 8 GB microSD card:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图片显示了一个10级Kingston 8GB microSD卡：
- en: '![Preparing a microSD card](img/6435OT_01_07.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![准备microSD卡](img/6435OT_01_07.jpg)'
- en: 'Once you have found a way to use your microSD card in your computer, you will
    need to format the card. A free utility is available from the SD Association at
    [www.sdcard.org](http://www.sdcard.org), as shown in the following screenshot:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您找到了在计算机上使用microSD卡的方法，您将需要格式化该卡。您可以从SD协会的[www.sdcard.org](http://www.sdcard.org)上获得一个免费的实用工具，如下截图所示：
- en: '![Preparing a microSD card](img/6435OT_01_08.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![准备microSD卡](img/6435OT_01_08.jpg)'
- en: 'This utility will allow you to format your card properly. You can download
    it using the following steps:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 此实用程序将允许您正确格式化您的卡。您可以按照以下步骤下载它：
- en: Go to [https://www.sdcard.org/home/](https://www.sdcard.org/home/) through your
    web browser.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过您的网络浏览器前往[https://www.sdcard.org/home/](https://www.sdcard.org/home/)。
- en: On the left-hand side menu bar, select **Downloads**.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧菜单栏中，选择**下载**。
- en: Then, select **SD Card Formatter 4.0**.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，选择**SD卡格式化程序4.0**。
- en: Then, select your platform. A Mac and a Windows version is available.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，选择您的平台。Mac和Windows版本都可用。
- en: Finally, accept the **End User License Agreement**, download the software, and
    install it.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，接受**最终用户许可协议**，下载软件并安装。
- en: Once you have downloaded and inserted your SD card, launch the **SD Card Formatter**
    application. Make sure that you select the correct media, and when it is ready,
    click on the **Format** button. This will erase all the information on the SD
    card and prepare it for your Kali Linux installation.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 下载并插入SD卡后，启动**SD Card Formatter**应用程序。确保选择正确的媒体，准备就绪后，点击**格式化**按钮。这将擦除SD卡上的所有信息，并为您的Kali
    Linux安装做好准备。
- en: Make sure that you format the right drive or you could erase data from another
    source.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 确保格式化正确的驱动器，否则可能会擦除其他来源的数据。
- en: Tip
  id: totrans-65
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Make sure to make a backup copy of the existing image before formatting your
    microSD card to avoid the loss of default software or other data. Cloning a microSD
    card is covered later in this chapter.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在格式化microSD卡之前，请务必备份现有镜像，以避免丢失默认软件或其他数据。本章后面将介绍克隆microSD卡。
- en: 'The following screenshot shows the launch of the **SDFormatter** application:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了**SDFormatter**应用程序的启动：
- en: '![Preparing a microSD card](img/6435OT_01_09.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![准备microSD卡](img/6435OT_01_09.jpg)'
- en: If you are an Apple user, you can use the Disk Utility by clicking on **Finder**
    and typing `Disk Utility`. If your microSD card is seated properly, you should
    see it as a **Drive** option. Click on the microSD card and select the second
    tab in the center called **Erase**. We recommend that you use **MS-DOS (FAT)**
    for the **Format**. You won't need to name your microSD card, so leave **Name**
    blank. Next, click on the **Erase...** button to format it.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您是苹果用户，可以通过点击**Finder**并输入`Disk Utility`来使用Disk Utility。如果您的microSD卡安装正确，您应该将其显示为**Drive**选项。点击microSD卡，选择中间的第二个选项卡**Erase**。我们建议您使用**MS-DOS（FAT）**进行**格式化**。您不需要为microSD卡命名，所以将**Name**留空。接下来，点击**Erase...**按钮进行格式化。
- en: 'The following screenshot shows the launch of the Disk Utility:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了Disk Utility的启动：
- en: '![Preparing a microSD card](img/6435OT_01_10.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![准备microSD卡](img/6435OT_01_10.jpg)'
- en: Installing Kali Linux
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Kali Linux
- en: You are now ready to download Kali Linux on your Raspberry Pi. By default, the
    Kali Linux installation for the Raspberry Pi is optimized for the memory and ARM
    processor of the Pi device. We have found that this works fine for specific penetration
    objectives. If you attempt to add too many tools or functions, you will find that
    the performance of the device leaves a lot to be desired, and it may become unusable
    for anything outside a lab environment. A full installation of Kali Linux is possible
    on Raspberry Pi using the Kali Linux metapackages, which are beyond the scope
    of this book. For use cases that require a full installation of Kali Linux, we
    recommend you use a more powerful system.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在可以在Raspberry Pi上下载Kali Linux了。默认情况下，针对Raspberry Pi的Kali Linux安装针对Pi设备的内存和ARM处理器进行了优化。我们发现这对特定的渗透目标效果很好。如果尝试添加太多工具或功能，您会发现设备的性能令人不满意，并且可能无法用于实验室环境之外的任何用途。使用Kali
    Linux metapackages可以在Raspberry Pi上进行完整安装，这超出了本书的范围。对于需要完整安装Kali Linux的用例，我们建议您使用更强大的系统。
- en: To install Kali Linux on Raspberry Pi, you will need to download the custom
    Raspberry Pi image from Offensive Security. You can do this from [http://www.offensive-security.com/kali-linux-vmware-arm-image-download/](http://www.offensive-security.com/kali-linux-vmware-arm-image-download/).
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 要在Raspberry Pi上安装Kali Linux，您需要从Offensive Security下载定制的Raspberry Pi镜像。您可以从[http://www.offensive-security.com/kali-linux-vmware-arm-image-download/](http://www.offensive-security.com/kali-linux-vmware-arm-image-download/)进行下载。
- en: 'The following image shows the **Kali Linux Custom ARM Images** available for
    download:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图像显示了可供下载的**Kali Linux自定义ARM镜像**：
- en: '![Installing Kali Linux](img/6435OT_01_11.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![安装Kali Linux](img/6435OT_01_11.jpg)'
- en: Tip
  id: totrans-77
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: The best practice is to compute and compare the **SHA1SUM** hash of the image
    to verify it has not been tampered with prior to installation.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 最佳做法是计算并比较镜像的**SHA1SUM**哈希以验证在安装之前未被篡改。
- en: Once the image is downloaded, you will need to write it to the microSD card.
    If you are using a Linux or Mac platform, you can use the `dd` built-in utility
    from the command line. If you are using a Windows system, you can use the **Win32
    Disk Imager** utility.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 下载完镜像后，您需要将其写入microSD卡。如果您使用的是Linux或Mac平台，可以使用命令行中的`dd`内置实用程序。如果您使用的是Windows系统，可以使用**Win32
    Disk Imager**实用程序。
- en: The Win32 Disk Imager utility is a free tool that is used to write raw images
    onto SD/microSD cards.If you are using a USB adapter for your microSD card, you
    might face difficulty in getting the tool to work properly since some people have
    reported this problem.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: Win32 Disk Imager实用程序是一个免费工具，用于将原始镜像写入SD/microSD卡。如果您使用USB适配器来使用microSD卡，可能会遇到工具无法正常工作的困难，因为一些人报告了这个问题。
- en: You can download the Win32 Disk Imager utility from [http://sourceforge.net/projects/win32diskimager/](http://sourceforge.net/projects/win32diskimager/).
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[http://sourceforge.net/projects/win32diskimager/](http://sourceforge.net/projects/win32diskimager/)下载Win32
    Disk Imager实用程序。
- en: Once the tool is downloaded, you simply need to select the image file and your
    removable media to start the image writing process. This process can take a while
    to complete. On our systems, it took almost 30 minutes to complete.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 工具下载完成后，您只需选择镜像文件和可移动介质，即可开始镜像写入过程。此过程可能需要一段时间才能完成。在我们的系统上，完成这一过程大约需要30分钟。
- en: You are now ready to install the Kali Linux image that you downloaded earlier.
    Uncompress the archive onto your desktop. You can use a utility such as 7-Zip
    to uncompress the archive.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在可以安装之前下载的Kali Linux镜像了。将存档解压缩到您的桌面上。您可以使用诸如7-Zip之类的实用程序来解压缩存档。
- en: 'The following screenshot shows the **Win32 Disk Imager** utility:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了**Win32 Disk Imager**实用程序：
- en: '![Installing Kali Linux](img/6435OT_01_12.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![安装Kali Linux](img/6435OT_01_12.jpg)'
- en: 'If you are using a Mac platform, the first step is to determine from where
    the operating system is reading your SD card. You can do this from the terminal
    by issuing the `diskutil list` command as shown in the following screenshot:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是Mac平台，第一步是确定操作系统从何处读取您的SD卡。您可以通过终端发出`diskutil list`命令来执行此操作，如下面的屏幕截图所示：
- en: '![Installing Kali Linux](img/6435OT_01_13.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![安装Kali Linux](img/6435OT_01_13.jpg)'
- en: You can see from the screenshot that my SD card is listed as `disk1`. You can
    also see that I have existing partitions on the microSD card. This indicates that
    I did not format my media. You should go back to the beginning of this chapter
    and ensure that you have formatted your media before you continue further.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 从屏幕截图中可以看出，我的SD卡被列为`disk1`。您还可以看到我在microSD卡上有现有分区。这表明我没有格式化我的媒体。您应该回到本章的开头，确保在继续之前已经格式化了您的媒体。
- en: 'Although I prefer to use the SD Card Formatter application described earlier,
    you can also format the SD card directly from the command line on your Mac using
    the following steps:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我更喜欢使用之前描述的SD卡格式化应用程序，但您也可以通过以下步骤直接从Mac命令行格式化SD卡：
- en: First, you will need to unmount your SD card by issuing the `diskutil unmountDisk
    /dev/disk1` command.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，您需要通过发出`diskutil unmountDisk /dev/disk1`命令卸载您的SD卡。
- en: You can now format the SD card by issuing the `sudo newfs_msdos -F 16 /dev/disk1`
    command. (Make sure you select the correct disk. Failure to do so could result
    in catastrophic consequences.)
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在可以通过发出`sudo newfs_msdos -F 16 /dev/disk1`命令来格式化SD卡。（确保选择正确的磁盘。否则可能会导致灾难性后果。）
- en: Tip
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: It is highly recommended that you use a partition tool and clear out any partition
    before formatting.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 强烈建议您在格式化之前使用分区工具清除任何分区。
- en: You will be asked to enter your Mac OS System/Administrator password.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将被要求输入您的Mac OS系统/管理员密码。
- en: Tip
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: I have used `disk1` in the commands that require an SD card number, as my SD
    card was assigned as `disk1` automatically by my operating system. Your operating
    system might assign a different disk number to your SD card. Make sure to include
    your disk number when you issue the commands.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在需要SD卡号的命令中，我使用了`disk1`，因为我的SD卡在我的操作系统中自动分配为`disk1`。您的操作系统可能会为您的SD卡分配不同的磁盘号。在发出命令时，请确保包括您的磁盘号。
- en: Formatting your SD card before copying the image is considered to be the best
    practice. One thing to note is that we will be using the `dd` command, meaning
    it is not required to format your SD card since the `dd` command performs a bit-by-bit
    copy from the image to the SD card. Formatting is recommended to prevent other
    errors and anomalies.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在复制镜像之前格式化SD卡被认为是最佳实践。需要注意的一点是，我们将使用`dd`命令，这意味着不需要格式化您的SD卡，因为`dd`命令执行的是从镜像到SD卡的逐位复制。建议进行格式化以防止其他错误和异常。
- en: You are now ready to install the Kali Linux image that you downloaded earlier.
    Now, uncompress the archive onto your desktop. You can use a utility such as **The
    Unarchiver** or **Keka** for Mac to uncompress the archive.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在可以安装您之前下载的Kali Linux镜像。现在，将存档解压缩到您的桌面。您可以使用诸如**The Unarchiver**或**Keka**之类的实用程序在Mac上解压缩存档。
- en: Then, determine the name of your uncompressed image. In my example, the name
    of my uncompressed image is `kali-1.0.9-rpi.img`. You will once again need to
    identify how the system sees your SD card. You can do this again by issuing the
    `diskutil list` command.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，确定您未压缩的镜像的名称。在我的示例中，我的未压缩的镜像名称是`kali-1.0.9-rpi.img`。您将再次需要确定系统如何看待您的SD卡。您可以再次通过发出`diskutil
    list`命令来执行此操作。
- en: 'You can create and install the image by issuing the following command (you
    may be asked for your Mac OS System/Administrator password again):'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过发出以下命令来创建和安装镜像（可能会再次要求您的Mac OS系统/管理员密码）：
- en: '[PRE0]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The following image shows the launch of the previous command:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图片显示了上一个命令的启动：
- en: '![Installing Kali Linux](img/6435OT_01_14.jpg)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![安装Kali Linux](img/6435OT_01_14.jpg)'
- en: The command prompt will freeze while the image is written to the microSD card.
    Sit back and relax as the process can take some time. On my system, it took over
    30 minutes to complete.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在将镜像写入microSD卡时，命令提示符将冻结。坐下来放松一下，因为这个过程可能需要一些时间。在我的系统上，它花了超过30分钟才完成。
- en: Tip
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: You can see how far the `dd` process has progressed by pressing *Ctrl* + *T*
    and sending the `SIGINFO` command to the running process.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过按下*Ctrl* + *T*并向正在运行的进程发送`SIGINFO`命令来查看`dd`进程的进展。
- en: 'The following image shows the frozen command prompt when the image is being
    written to the microSD card:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图片显示了将镜像写入microSD卡时命令提示符冻结的情况：
- en: '![Installing Kali Linux](img/6435OT_01_15.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![安装Kali Linux](img/6435OT_01_15.jpg)'
- en: Note
  id: totrans-109
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: You may experience a permission denied error when you write the image to the
    microSD card on OS X systems if you do not include the `sudo` command. If you
    use a variation of this command, make sure the `sudo` command applies to the entire
    command by using brackets or you may still get this error.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在OS X系统上将镜像写入microSD卡时没有包括`sudo`命令，可能会遇到权限被拒绝的错误。如果您使用此命令的变体，请确保`sudo`命令适用于整个命令，使用括号，否则您可能仍会遇到此错误。
- en: Once you have completed the installation of the image, simply insert the microSD
    card into your Raspberry Pi and boot the system by plugging in its power source.
    Booting the system can take up to 5 minutes. You will be able to log in to the
    system using `root` as the username and `toor` as the password. If you wish to
    start the graphical environment, simply type `startx` in the terminal. Congratulations!
    You now have a working Kali system on your Raspberry Pi.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 安装镜像完成后，只需将microSD卡插入树莓派，并通过插入其电源来启动系统。启动系统可能需要最多5分钟。您将能够使用`root`作为用户名和`toor`作为密码登录系统。如果您希望启动图形环境，只需在终端中键入`startx`。恭喜！您现在在树莓派上拥有一个可用的Kali系统。
- en: Note
  id: totrans-112
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The system can take some time to boot. The Raspberry Pi supports the **Graphical
    User Interface** (**GUI**) and you can invoke it using the `startx` command. However,
    we recommend that you only use the command line on the Raspberry Pi. If you issue
    the `startx` command, the GUI can take up to 20 minutes to load and possibly act
    very slow or unresponsive.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 系统启动可能需要一些时间。树莓派支持**图形用户界面**（**GUI**），您可以使用`startx`命令来调用它。但是，我们建议您只在树莓派上使用命令行。如果您发出`startx`命令，GUI可能需要长达20分钟才能加载，并且可能会非常缓慢或无响应。
- en: Combining Kali Linux and Raspberry Pi
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结合Kali Linux和树莓派
- en: The Kali Linux Raspberry Pi image is optimized for the Raspberry Pi. When you
    boot up your Raspberry Pi with your Kali Linux image, you will need to use `root`
    as the username and `toor` as the password to log in. We recommend you immediately
    issue the `passwd` command once you log in to change the default password. Most
    attackers know the Kali Linux default login, so it is wise to protect your Raspberry
    Pi from unwanted outside access.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux树莓派镜像经过优化，适用于树莓派。当您使用Kali Linux镜像启动树莓派时，您需要使用`root`作为用户名和`toor`作为密码进行登录。我们建议您一旦登录就立即发出`passwd`命令来更改默认密码。大多数攻击者都知道Kali
    Linux的默认登录信息，因此明智的做法是保护您的树莓派免受不必要的外部访问。
- en: 'The following screenshot shows the launch of the `passwd` command to reset
    the default password:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了`passwd`命令的启动以重置默认密码：
- en: '![Combining Kali Linux and Raspberry Pi](img/6435OT_01_16.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![结合Kali Linux和树莓派](img/6435OT_01_16.jpg)'
- en: When you issue the `startx` command, your screen might go blank for a few minutes.
    This is normal. When your **X Windows** (GUI) desktop loads, it will ask you whether
    you would like to use the default workspace or a blank one. Select the default
    workspace. After you make your selection, the desktop might attempt to reload
    or redraw. It may be a few minutes before it is fully loaded.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 当您发出`startx`命令时，您的屏幕可能会在几分钟内变空。这是正常的。当您的**X Windows**（GUI）桌面加载时，它会询问您是否要使用默认工作区还是空白工作区。选择默认工作区。在您做出选择后，桌面可能会尝试重新加载或重绘。在完全加载之前可能需要几分钟。
- en: 'The following screenshot shows the launch of the `startx` command:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了`startx`命令的启动：
- en: '![Combining Kali Linux and Raspberry Pi](img/6435OT_01_17.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![结合Kali Linux和树莓派](img/6435OT_01_17.jpg)'
- en: The first thing that you need to do is upgrade the OS and packages. The upgrade
    process can take some time and will show its status during the process. Next,
    you need to make sure you upgrade the system within the X Windows (GUI) environment.
    Many users have reported that components are not fully upgraded unless they are
    in the X Windows environment. Access the X Windows environment using the `startx`
    command prior to launching the `apt-get upgrade` command.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要做的第一件事是升级操作系统和软件包。升级过程可能需要一些时间，并且在过程中会显示其状态。接下来，您需要确保在X Windows（GUI）环境中升级系统。许多用户报告说，除非在X
    Windows环境中，否则组件不会完全升级。在启动`apt-get upgrade`命令之前，使用`startx`命令访问X Windows环境。
- en: 'The following screenshot shows the launch of the `apt-get update` command:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了`apt-get update`命令的启动：
- en: '![Combining Kali Linux and Raspberry Pi](img/6435OT_01_18.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![结合Kali Linux和树莓派](img/6435OT_01_18.jpg)'
- en: 'The following screenshot shows the launch of the `apt-get upgrade` command:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了`apt-get upgrade`命令的启动：
- en: '![Combining Kali Linux and Raspberry Pi](img/6435OT_01_19.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![结合Kali Linux和树莓派](img/6435OT_01_19.jpg)'
- en: 'Here are the steps you need to follow to open the Kali Linux GUI:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是打开Kali Linux GUI所需遵循的步骤：
- en: Ensure you are in the X Windows desktop (using `startx`).
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保您在X Windows桌面中（使用`startx`）。
- en: Open a terminal command.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开终端命令。
- en: Enter the `apt-get update` command.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`apt-get update`命令。
- en: Enter the `apt-get upgrade` command.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`apt-get upgrade`命令。
- en: Enter the `sync` command.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`sync`命令。
- en: Enter the `sync` command.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`sync`命令。
- en: Enter the `reboot` command.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`reboot`命令。
- en: After you have upgraded your system, issue the `sync` command (as a personal
    preference, we issue this command twice). Reboot the system by issuing the `reboot`
    command. In a few minutes, your system should reboot and allow you to log back
    into the system. Issue the `startx` command to open the Kali Linux GUI.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 升级系统后，发出`sync`命令（作为个人偏好，我们发出此命令两次）。通过发出`reboot`命令重新启动系统。几分钟后，您的系统应重新启动并允许您重新登录系统。发出`startx`命令以打开Kali
    Linux GUI。
- en: 'The following screenshot shows the launch of the `sync` and `reboot` commands:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了`sync`和`reboot`命令的启动：
- en: '![Combining Kali Linux and Raspberry Pi](img/6435OT_01_20.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![结合Kali Linux和树莓派](img/6435OT_01_20.jpg)'
- en: You will need to upgrade your systems using the `apt-get update` and `apt-get
    upgrade` commands within the X Windows (GUI) environment. Failure to do so may
    cause your X Windows environment to become unstable.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要在X Windows（GUI）环境中使用`apt-get update`和`apt-get upgrade`命令升级系统。否则可能会导致X Windows环境不稳定。
- en: At this point, you are ready to start your penetration exercise with your Raspberry
    Pi running Kali Linux.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，您已准备好使用运行Kali Linux的树莓派开始渗透练习。
- en: Pros and cons of the Raspberry Pi
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 树莓派的利弊
- en: As stated in various parts of this book, the Raspberry Pi is designed to be
    an inexpensive computing option designed for various purposes. Inexpensive systems
    offer limited computing power, so one major drawback when using a Raspberry Pi
    for any type of penetration testing is its lack of power to run resource-intensive
    tasks. For this reason, it's highly recommended that use a Raspberry Pi for specific
    tasks rather than a go-to attack arsenal, as a full-blown Kali Linux installation
    offers many more tools over the limited Kali Linux ARM architecture.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 正如本书的各个部分所述，树莓派旨在成为一种廉价的计算选项，可用于各种用途。廉价的系统提供有限的计算能力，因此在使用树莓派进行任何类型的渗透测试时的一个主要缺点是其缺乏运行资源密集型任务的能力。因此，强烈建议您仅将树莓派用于特定任务，而不是作为攻击工具库，因为完整的Kali
    Linux安装在有限的Kali Linux ARM架构上提供了更多工具。
- en: 'The following two screenshots show the difference between the options available
    for one toolset category in the Kali Linux ARM architecture and a full-blown Kali
    Linux installation. We also found that some of the tools in the Kali Linux ARM
    do not function properly when they are run from the GUI, or they just failed in
    general. You will find more reliable tools in a full-blown installation of Kali
    Linux on a more powerful system than a Raspberry Pi. Here is the Kali Linux ARM
    screenshot showing **Live Host Identification** tools, which are **ncat** and
    **nmap**:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 以下两个屏幕截图显示了Kali Linux ARM架构中一个工具集类别的选项与完整的Kali Linux安装之间的区别。我们还发现，在从GUI运行Kali
    Linux ARM中的一些工具时，它们并不正常工作，或者根本失败了。在比树莓派更强大的系统上，你会在完整的Kali Linux安装中找到更可靠的工具。以下是Kali
    Linux ARM截图，显示了**Live Host Identification**工具，即**ncat**和**nmap**：
- en: '![Pros and cons of the Raspberry Pi](img/6435OT_01_21.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![树莓派的优缺点](img/6435OT_01_21.jpg)'
- en: 'Here are the tool options for the same **Live Host Identification** category
    found in a full-blown installation of **Kali Linux**. As you can see in the following
    screenshot, a lot more options are offered:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 这是完整安装的**Kali Linux**中相同**Live Host Identification**类别的工具选项。如下截图所示，提供了更多的选项：
- en: '![Pros and cons of the Raspberry Pi](img/6435OT_01_22.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![树莓派的优缺点](img/6435OT_01_22.jpg)'
- en: Raspberry Pi penetration testing use cases
  id: totrans-145
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 树莓派渗透测试用例
- en: There are use cases for leveraging a Raspberry Pi outside of its "cool" factor.
    The first use case is delivering low-cost, remote penetration testing nodes to
    hard-to-reach locations. An example of this is when you offer penetration testing
    services to branch offices in China, UK, and Australia with limited bandwidth
    across sites. Rather than flying to each location, you can charge your customer
    the cost to build a Raspberry Pi and ship out each box to a location. You can
    have a local person plug in the Raspberry Pi as a network tap and perform the
    penetration test remotely, thereby dramatically saving in travel and hardware
    costs. In most cases, you can probably let the customer remove and keep the Raspberry
    Pi after the penetration test due to its low cost. You would have saved a customer
    thousands of dollars using this method as an alterative to enterprise cloud scanning
    tools that on a average have a much higher cost associated per location.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派有很多用途，不仅仅是因为它很“酷”。第一个用例是将低成本的远程渗透测试节点部署到难以到达的地点。一个例子是，当你向中国、英国和澳大利亚的分公司提供带宽有限的渗透测试服务时，你可以让客户支付建立树莓派和将每个盒子运送到目的地的成本，而不是飞往每个地点。你可以让当地的人插入树莓派作为网络监听器，并远程执行渗透测试，从而大大节省旅行和硬件成本。在大多数情况下，由于成本低廉，你可能会让客户在渗透测试后移除并保留树莓派。通过这种方法，你可以为客户节省成千上万美元，而不是使用平均每个地点成本更高的企业云扫描工具。
- en: Another use case is abusing the average user's trust by physically accessing
    a target's location by claiming to be an IT or phone support representative doing
    maintenance. The Raspberry Pi chipboard can be hidden in any official looking
    hardware such as gutting a Cisco switch, hub, and so on, and placing the Raspberry
    Pi in one port. The average user wouldn't question a network box that looks like
    it belongs there.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个用例是通过声称自己是IT或电话支持代表进行维护，从而滥用普通用户的信任，物理访问目标位置。树莓派芯片板可以隐藏在任何官方外观的硬件中，比如清理思科交换机、集线器等，并将树莓派放在一个端口上。普通用户不会质疑看起来像是属于那里的网络盒子。
- en: In both these use cases, the major selling point is the Raspberry Pi's low cost,
    which means that losing a system won't break the bank. Also, both the use cases
    showcase the Raspberry Pi's value of being very mobile due to its small form.
    So, the Raspberry Pi makes a great alternative to more expensive remote penetration
    toolsets such as the ones offered by **PWNIE Express** (we are not saying that
    the PWNIE Express tools are not cool or desirable, but they will cost you a lot
    more than the Raspberry Pi approach). Speaking of which, you can run a light version
    of the PWNIE Express software on a Raspberry Pi as well, which is touched upon
    at the end of this book.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 在这两种用例中，树莓派的主要卖点是其低成本，这意味着丢失一个系统不会让你破产。此外，这两种用例都展示了树莓派由于其小巧的外形而非常适合移动。因此，树莓派是更昂贵的远程渗透工具集的一个很好的替代品，比如**PWNIE
    Express**提供的工具（我们并不是说PWNIE Express的工具不酷或不值得拥有，但它们的成本远高于树莓派的方法）。顺便说一句，你也可以在树莓派上运行PWNIE
    Express软件的轻量版，这在本书的最后部分有提及。
- en: A common reason to consider a Raspberry Pi is its flexibility of design, its
    software, and its online community. There are thousands of websites dedicated
    to using the Raspberry Pi for various types of use cases. So, if you run into
    a snag, you are most likely to find a solution on Google. There are many options
    for operating systems and pretty much everything seems to be open source. This
    makes requirements for many design requests possible, such as the need to develop
    a large amount of affordable systems for mobile classrooms.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑使用树莓派的一个常见原因是其设计的灵活性、软件和在线社区。有成千上万的网站专门用于树莓派的各种用例。因此，如果遇到问题，你很可能会在谷歌上找到解决方案。有许多操作系统和几乎所有东西都是开源的。这使得许多设计需求成为可能，比如需要为移动教室开发大量经济实惠的系统。
- en: With a Raspberry Pi, the possibilities are endless. Regarding penetration testing,
    Kali Linux offers pretty much everything you would need for a basic exercise.
    The Kali Linux ARM is limited; however, you can always use `apt-get` to download
    any missing tools to meet your requirements for a penetration testing exercise
    as long as the tool doesn't require massive computing power. We will be covering
    how to download missing tools later in the book. So, go shell out $50 – $100 on
    a Raspberry Pi and check out the online communities for more information on how
    you can take your Raspberry Pi to the next level.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 有了Raspberry Pi，可能性是无限的。关于渗透测试，Kali Linux几乎提供了您进行基本练习所需的一切。Kali Linux ARM有限；但是，只要工具不需要大量计算能力，您可以随时使用`apt-get`下载任何缺失的工具，以满足您对渗透测试练习的要求。我们将在本书的后面介绍如何下载缺失的工具。所以，花50美元至100美元购买一个Raspberry
    Pi，并查看在线社区，了解如何将您的Raspberry Pi提升到更高水平的更多信息。
- en: Cloning the Raspberry Pi SD card
  id: totrans-151
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 克隆Raspberry Pi SD卡
- en: It is recommended that you back up the original system software that came with
    your Raspberry Pi prior to formatting it for a Kali Linux installation. Most Raspberry
    Pi microSD cards come with a form of **New Out of the Box Software** (**NOOBS**)
    that contains various operating system options from which you can select your
    primary operating system. If you already erased your microSD card, you can download
    the NOOBS software from [http://www.raspberrypi.org/downloads/](http://www.raspberrypi.org/downloads/).
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 建议在将Raspberry Pi格式化为Kali Linux安装之前备份原始系统软件。大多数Raspberry Pi microSD卡都带有一种**新开箱即用软件**（**NOOBS**），其中包含各种操作系统选项，您可以从中选择主操作系统。如果您已经擦除了您的microSD卡，可以从[http://www.raspberrypi.org/downloads/](http://www.raspberrypi.org/downloads/)下载NOOBS软件。
- en: 'The cloning process for your SD card is very simple. Many Windows utilities
    such as Win32 Disk Imager, which was covered earlier in the chapter, will make
    an exact copy of the SD card. On a Mac, open a command prompt to identify your
    SD card and type the `diskutil list` command:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: SD卡的克隆过程非常简单。许多Windows实用程序，如前面章节介绍的Win32 Disk Imager，将制作SD卡的精确副本。在Mac上，打开命令提示符以识别您的SD卡，并键入`diskutil
    list`命令：
- en: '![Cloning the Raspberry Pi SD card](img/6435OT_01_23.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![克隆Raspberry Pi SD卡](img/6435OT_01_23.jpg)'
- en: 'In the preceding screenshot, my microSD card is **/dev/disk1**. On your system,
    your microSD card might be different; so, make sure to verify it. I can clone
    my card by creating a disk image and saving it to the desktop. I will issue the
    following command:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 在上面的截图中，我的microSD卡是**/dev/disk1**。在您的系统上，您的microSD卡可能不同，因此请务必进行验证。我可以通过创建磁盘映像并将其保存到桌面来克隆我的卡。我将发出以下命令：
- en: '[PRE1]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The following screenshot shows how I had to enter my password before the command
    would execute:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了在执行命令之前我必须输入密码：
- en: '![Cloning the Raspberry Pi SD card](img/6435OT_01_24.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![克隆Raspberry Pi SD卡](img/6435OT_01_24.jpg)'
- en: The process can take up to 30 minutes to clone an SD card. The speed of creating
    the image will depend on the size and speed of the microSD card, the amount of
    data on it, and the speed of your computer. In other words, be patient and let
    it copy.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 克隆SD卡的过程可能需要长达30分钟。创建镜像的速度将取决于microSD卡的大小和速度，上面的数据量以及您的计算机的速度。换句话说，要有耐心，让它复制。
- en: Note
  id: totrans-160
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: You may experience a permission denied error when you write the image to the
    microSD card on OS X systems if you do not include the `sudo` command. If you
    use a variation of this command, make sure the `sudo` command applies to the entire
    command by using brackets or you may still get this error.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在OS X系统上将镜像写入microSD卡时遇到权限被拒绝的错误，如果不包括`sudo`命令，则可能会遇到问题。如果您使用此命令的变体，请确保`sudo`命令适用于整个命令，使用括号，否则您可能仍会遇到此错误。
- en: Avoiding common problems
  id: totrans-162
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 避免常见问题
- en: 'One of the worst things is following the directions from a book and running
    into an error during the process. We have imaged multiple Raspberry Pi systems
    and at times experienced interesting and sometimes unpleasant behaviors. Here
    are some problems that we ran into with their suggested workarounds: hopefully,
    this saves you the time we spent banging our heads against the wall.'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 最糟糕的事情之一就是按照书上的指示进行操作时遇到错误。我们曾经为多个Raspberry Pi系统创建镜像，有时会遇到有趣的，有时会遇到不愉快的行为。以下是我们遇到的一些问题及其建议的解决方法：希望这能节省您花在摔头上的时间。
- en: '**Power issues**: We attempted to use small USB keychain power adapters that
    had 5 V micro USB power to make our system very portable. Sometimes these worked
    and sometimes they just showed that the Raspberry Pi was powered but the system
    didn''t boot. Make sure to test this because sometimes you might find certain
    power adapters that don''t work. Most Raspberry Pi systems have lights on the
    side, showing red for power and yellow for when it is operating properly. Check
    the manufacture website of your model for more details.'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**电源问题**：我们尝试使用5V微型USB电源的小型USB钥匙链电源适配器，以使我们的系统非常便携。有时这些适配器有效，有时它们只是显示Raspberry
    Pi已经供电，但系统没有启动。请务必测试，因为有时您可能会发现某些电源适配器不起作用。大多数Raspberry Pi系统的侧面有灯，显示红色为电源，黄色为正常运行时。查看您型号的制造商网站以获取更多详细信息。'
- en: '**MicroSD card reading issues**: We heard that some people''s microSD card
    readers didn''t identify the SD card once it was inserted into their systems.
    Some Mac users claimed that they had to "blow into the SD reader hole", while
    others found that they had to use an external reader to get the microSD card to
    be recognized by the system. We recommend that you try another system. If you
    are purchasing a microSD converter, make sure that the seller has listed it as
    being Raspberry Pi microSD compatible. An external microSD reader shouldn''t cost
    more than $10\. You can also follow the troubleshooting steps that are available
    at [http://elinux.org/R-Pi_Troubleshooting](http://elinux.org/R-Pi_Troubleshooting).'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MicroSD卡阅读问题：我们听说有些人的MicroSD卡读卡器在插入系统后无法识别SD卡。一些Mac用户声称他们不得不“对着SD读卡器孔吹气”，而其他人发现他们不得不使用外部读卡器才能使MicroSD卡被系统识别。我们建议您尝试另一个系统。如果您要购买MicroSD转换器，请确保卖家已将其列为树莓派MicroSD兼容。外部MicroSD读卡器的价格不应超过10美元。您还可以按照[http://elinux.org/R-Pi_Troubleshooting](http://elinux.org/R-Pi_Troubleshooting)上提供的故障排除步骤进行操作。
- en: If you find that your Raspberry Pi isn't working once you install an image to
    the microSD card, verify whether the microSD card is inserted properly. You should
    hear a slight click sound and it should pop in and out with the help of a spring-like
    support. If it doesn't seem like it's sliding in properly, the microSD card is
    probably upside down or it is the wrong type of card. If you insert the microSD
    card properly and nothing happens once the system is powered up, make sure you
    are using the correct power. The next problem could be that the image wasn't installed
    properly. We found that some people had their computers go to sleep mode during
    the `dd` process causing only part of the Kali Linux image to copy over. Make
    sure that you verify whether the image is copied over properly. Also, verify whether
    the image that you downloaded is authentic. Offensive Security includes SHA1SUM,
    which is used to verify whether your image has been tampered with. Another issue
    could be the way you uncompressed the tar file. Make sure that you use a valid
    method or the image file could become corrupted. If you notice that the image
    is booting, watch the boot sequence for error messages before the command prompt
    becomes available.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您发现安装图像到MicroSD卡后树莓派不起作用，请验证MicroSD卡是否正确插入。您应该听到轻微的点击声，并且它应该在弹簧支撑的帮助下弹入和弹出。如果它似乎没有正确滑入，那么MicroSD卡可能是颠倒的，或者是错误类型的卡。如果您正确插入MicroSD卡，但系统启动后什么也没有发生，请确保您使用了正确的电源。下一个问题可能是图像没有正确安装。我们发现一些人在`dd`过程中，他们的计算机进入了睡眠模式，导致只有部分Kali
    Linux图像被复制。请确保您验证图像是否正确复制。还要验证您下载的图像是否真实。Offensive Security包括SHA1SUM，用于验证图像是否被篡改。另一个问题可能是您解压tar文件的方式。请确保您使用有效的方法，否则图像文件可能会损坏。如果您注意到图像正在引导，请在命令提示符可用之前观察引导顺序以查看错误消息。
- en: '**Permission denied**: Many Mac users found they didn''t have the proper permissions
    to run the `dd` command. This could be caused by a few things. First, make sure
    that your microSD card or SD adapter doesn''t have a protection mode that is physically
    set. Next, make sure the reader and the adapter are working properly. There have
    been reports that MAC users have had to "blow into the SD reader" to clear the
    dust and get it to function properly. Make sure that you use the `sudo` command
    for the entire statement as stated in the previous warnings. If the error continues,
    try an external microSD reader as your current one may permit formatting but have
    problems with the `dd` command.'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**权限被拒绝**：许多Mac用户发现他们没有适当的权限来运行`dd`命令。这可能是由几个原因引起的。首先，请确保您的MicroSD卡或SD适配器没有物理设置的保护模式。接下来，请确保读卡器和适配器正常工作。有报道称MAC用户不得不“对着SD读卡器吹气”以清除灰尘并使其正常工作。请确保您按照先前的警告所述对整个语句使用`sudo`命令。如果错误仍然存在，请尝试使用外部MicroSD读卡器，因为您当前的读卡器可能允许格式化，但在`dd`命令方面存在问题。'
- en: '**Blank screen after startx**: If you access the command line and type `startx`,
    you should see the Raspberry Pi start the Kali Linux GUI. This may take a few
    minutes to start depending on the size and speed of your Raspberry Pi as well
    as what you have installed. If you have too many applications installed that boggle
    your system, you may find that they overwhelm your Raspberry Pi and freeze the
    GUI. As stated earlier, we highly recommend using a Raspberry Pi for targeted
    penetration goals with limited functions rather than loading it with more tools
    than necessary. There are many other systems that are more powerful and should
    be considered over a Raspberry Pi if your mission requires heavy processing power
    or a full-blown version of Kali Linux. Also, we find that many applications run
    better using the command line rather than launching them from the GUI. It is recommended
    to use Kali Linux from the command line whenever possible.'
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**startx后出现空白屏幕**：如果您访问命令行并输入`startx`，您应该看到树莓派启动Kali Linux GUI。这可能需要几分钟的时间，具体取决于您的树莓派的大小和速度，以及您安装了什么。如果您安装了太多应用程序，使您的系统混乱，您可能会发现它们会压倒您的树莓派并冻结GUI。正如前面所述，我们强烈建议将树莓派用于有限功能的定向渗透目标，而不是加载比必要更多的工具。如果您的任务需要大量处理能力或完整版本的Kali
    Linux，那么应考虑使用更强大的其他系统而不是树莓派。此外，我们发现许多应用程序在命令行中运行比从GUI启动更好。建议尽可能在命令行中使用Kali Linux。'
- en: '**Blank screen with working mouse after startx**: We ran into this problem
    after we accessed the Kali Linux GUI, ran `apt-get update` from a terminal window,
    and rebooted the system. On the second boot, we ran `startx` and found that the
    system seemed to boot properly; however, we were stuck with a blank screen and
    a working mouse. If we had an open web browser prior to shutting the system down,
    that browser would also appear; however, if we had closed it, then we would have
    nothing but a mouse scrolling over a blank screen. Sometimes our Raspberry Pi
    did this after the second `startx` boot even if we didn''t perform the update.'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`startx`后出现工作鼠标的空白屏幕：我们在从终端窗口运行`apt-get update`并重新启动系统后，遇到了这个问题。在第二次启动时，我们运行了`startx`，发现系统似乎正常启动；然而，我们却卡在了一个空白屏幕和一个工作的鼠标上。如果在关闭系统之前有一个打开的网络浏览器，那么浏览器也会出现；但是，如果我们关闭了它，那么我们就只能看到一个在空白屏幕上滚动的鼠标。有时，即使我们没有进行更新，我们的树莓派在第二次`startx`启动后也会出现这种情况。'
- en: This problem is caused by some files that don't update properly while running
    `apt-get update`, and this causes problems with the display adapter or just a
    general issue with the version of Kali Linux that you have installed. There are
    two possible workarounds for this.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 这个问题是由一些文件在运行`apt-get update`时没有正确更新引起的，这会导致显示适配器的问题或者只是您安装的Kali Linux版本的一般问题。对此有两种可能的解决方法。
- en: You most likely ran the `apt-get update` and `apt-get upgrade` commands outside
    the X Windows environment. Therefore, you will need to reimage and run your microSD
    card with a fresh version of Kali Linux, run `apt-get update` and then `apt-get
    upgrade` within the X Windows environment, and then sync and reboot your system.
    Follow these exact steps to avoid the problem.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 您很可能是在X Windows环境之外运行了`apt-get update`和`apt-get upgrade`命令。因此，您需要重新镜像并使用新版本的Kali
    Linux运行您的microSD卡，在X Windows环境中运行`apt-get update`和`apt-get upgrade`，然后同步并重新启动系统。遵循这些确切的步骤以避免出现问题。
- en: The second workaround is to reimage your microSD card with a fresh version of
    Kali Linux and not run the `apt-get update` command. I know this, but some people
    will spend two weeks troubleshooting when they could have spent 30 minutes reimaging
    and moving on. Keep in mind that you may run into the blank screen with operating
    mouse problem regardless, so it is recommended to follow the update and upgrade
    procedure provided in this book prior to using Kali Linux on your Raspberry Pi.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个解决方法是重新镜像您的microSD卡，使用新版本的Kali Linux，并不运行`apt-get update`命令。我知道这一点，但有些人会花两个星期来解决问题，而他们本可以花30分钟重新镜像并继续。请记住，即使您遵循了本书中提供的更新和升级程序，在使用树莓派上的Kali
    Linux之前，您可能仍会遇到空白屏幕和工作鼠标的问题。
- en: '**Kali Linux programs not found in GUI**: We found that some versions of the
    Kali Linux ARM image for Raspberry Pi would boot up properly, launch the GUI once
    we entered `startx`, but would not display the Kali Linux tools under the applications
    drop-down menu once the GUI was done loading. This is a similar problem to the
    display issue explained earlier, which means that it can be fixed by performing
    the `apt-get update` and `apt-get upgrade` steps explained in this book that tell
    you what to do once you log into the GUI for the first time. The update and upgrade
    process should install and upgrade any corrupt files that are causing this problem.
    We once found that after going through the recommended update and upgrade process,
    the Kali Linux software appeared under the applications menu upon successfully
    upgrading and rebooting the system.'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux程序在GUI中找不到：我们发现树莓派的某些版本的Kali Linux ARM镜像在启动后，输入`startx`后会正常启动GUI，但是在GUI加载完成后，在应用程序下拉菜单中找不到Kali
    Linux工具。这与之前解释的显示问题类似，这意味着可以通过执行本书中解释的`apt-get update`和`apt-get upgrade`步骤来解决这个问题，这些步骤告诉您第一次登录GUI后该做什么。更新和升级过程应该安装和升级导致此问题的任何损坏文件。我们曾经发现，在经过推荐的更新和升级过程后，成功升级和重新启动系统后，Kali
    Linux软件出现在应用程序菜单下。
- en: Tip
  id: totrans-174
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: A great resource for troubleshooting problems is [http://elinux.org/R-Pi_Troubleshooting](http://elinux.org/R-Pi_Troubleshooting).
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 解决问题的一个很好的资源是[http://elinux.org/R-Pi_Troubleshooting](http://elinux.org/R-Pi_Troubleshooting)。
- en: Summary
  id: totrans-176
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we covered options for purchasing hardware and how to assemble
    a Raspberry Pi. We discussed recommended hardware accessories such as microSD
    cards and Wi-Fi adapters so that you are able to complete the steps given in this
    book.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讨论了购买硬件的选项以及如何组装树莓派。我们讨论了推荐的硬件配件，如microSD卡和Wi-Fi适配器，以便您能够完成本书中给出的步骤。
- en: Once we covered purchasing the proper hardware, we walked you through our best
    practice procedure for installing Kali Linux on a Raspberry Pi. This included
    the detailed procedure to format and upgrade Kali Linux as well as the common
    problems that we ran into with possible remediation tips. At the end of this chapter,
    you should have a fully working Kali Linux installation, updated software, and
    everything running on your Raspberry Pi for a basic setup.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们讨论了购买适当的硬件，我们就会为您介绍在树莓派上安装Kali Linux的最佳实践程序。这包括详细的格式化和升级Kali Linux的过程，以及我们遇到的可能的常见问题的解决方法。在本章结束时，您应该已经在树莓派上拥有一个完全可用的Kali
    Linux安装，更新的软件，并且一切都在您的树莓派上运行以进行基本设置。
- en: In the next chapter, we will discuss the advantage of using a Raspberry Pi as
    a penetration testing platform. We will cover how to optimize Kali Linux applications
    for the Raspberry Pi as well as how to remotely control and manage your Raspberry
    Pi as a Kali Linux attack platform.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将讨论将树莓派用作渗透测试平台的优势。我们将介绍如何优化树莓派上的Kali Linux应用程序，以及如何远程控制和管理您的树莓派作为Kali
    Linux攻击平台。
