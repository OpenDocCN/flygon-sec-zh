- en: Chapter 6. Other Raspberry Pi Projects
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第6章。其他树莓派项目
- en: The Raspberry Pi was designed to be a system that can be customized for just
    about anything within the reach of a low budget OS. There are hundreds of documented
    use cases and many vendors posting ARM images scaled down to be part of the Raspberry
    Pi community. This includes creators of other penetration arsenals outside of
    Offensive Security's Kali Linux.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派被设计成一个可以根据低预算OS的要求进行定制的系统。有数百种记录的用例和许多供应商发布的ARM图像，缩小以成为树莓派社区的一部分。这包括Offensive
    Security的Kali Linux之外的其他渗透武器的创建者。
- en: When evaluating other penetration testing ARM images for the Raspberry Pi, we
    found that most of the distributions were very similar to each other because they
    are using the same tools, and in many instances, the same builds. This means the
    upgrade life cycle and path for most applications will also be the same regardless
    of the ARM image you choose to go with. At the end of the day, you will need to
    pick a distribution that makes the most sense for you. If you are not sure what
    that is, then don't worry, it is Kali Linux.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在评估树莓派上的其他渗透测试ARM图像时，我们发现大多数发行版非常相似，因为它们使用相同的工具，并且在许多情况下，使用相同的构建。这意味着大多数应用程序的升级生命周期和路径也将是相同的，无论您选择使用哪种ARM图像。最终，您需要选择一个对您来说最有意义的发行版。如果您不确定是什么，请不要担心，那就是Kali
    Linux。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: PwnPi
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PwnPi
- en: Raspberry Pwn
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 树莓派Pwn
- en: PwnBerry Pi
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PwnBerry Pi
- en: Defending your network
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保护您的网络
- en: Intrusion detection and prevention
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 入侵检测和防范
- en: Snort
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Snort
- en: Content filters
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内容过滤器
- en: KidSafe
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: KidSafe
- en: Remote access with OpenVPN
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用OpenVPN进行远程访问
- en: Tor relays and routers
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tor中继和路由器
- en: Raspberry Tor
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 树莓派Tor
- en: Tor router
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tor路由器
- en: Running Raspberry Pi on your PC using QEMU emulator
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在PC上使用QEMU模拟器运行树莓派
- en: Other Raspberry Pi uses
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他树莓派用途
- en: Flight tracking using PiAware
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用PiAware进行飞行跟踪
- en: PiPlay
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PiPlay
- en: PrivateEyePi
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PrivateEyePi
- en: Let's look at some alternative penetration testing offerings aside from Kali
    Linux. The first one on the list is one of the most popular images, PwnPi, that
    some believe is a better option than Kali Linux.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看除了Kali Linux之外的一些替代渗透测试方案。列表中的第一个是最受欢迎的图像之一，PwnPi，有人认为它比Kali Linux更好。
- en: PwnPi
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: PwnPi
- en: 'PwnPi is an extremely mature penetration testing platform for the Raspberry
    Pi. At the time of writing this book, many people in the community claimed it
    is a more stable environment than Kali Linux specifically on the Raspberry Pi.
    However, we believe there is a shift in supporting Kali Linux for the Raspberry
    Pi rather than PwnPi because of the existing popularity and namesake of Kali Linux.
    Some people might call us biased, but hey, this is our second book on Kali Linux.
    The following screenshot is the PwnPi 3.0 introductory image when booting it up:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: PwnPi是树莓派的一个非常成熟的渗透测试平台。在撰写本书时，社区中有许多人声称它比树莓派上的Kali Linux更稳定。然而，我们认为支持树莓派上的Kali
    Linux而不是PwnPi存在一种转变，因为Kali Linux已经很受欢迎。有些人可能会说我们有偏见，但嘿，这是我们第二本关于Kali Linux的书。以下是PwnPi
    3.0引导图像的屏幕截图：
- en: '![PwnPi](img/6435OT_06_01.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![PwnPi](img/6435OT_06_01.jpg)'
- en: PwnPi brings some unique features such as support for over two hundred tools.
    PwnPi is built on Debian Wheezy optimized for the Raspberry Pi and has simple
    scripts to automatically configure reverse shell connections. You can learn more
    about PwnPi at [pwnpi.sourceforge.net](http://pwnpi.sourceforge.net).
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: PwnPi带来了一些独特的功能，比如支持200多种工具。PwnPi是基于树莓派优化的Debian Wheezy构建的，并且有简单的脚本来自动配置反向shell连接。您可以在[pwnpi.sourceforge.net](http://pwnpi.sourceforge.net)了解更多关于PwnPi的信息。
- en: 'Let''s look at installing and running PwnPi on a Raspberry Pi in the following
    manner:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们以以下方式在树莓派上安装和运行PwnPi：
- en: The first step is downloading PwnPi from the [pwnpi.sourceforge.net](http://pwnpi.sourceforge.net)
    website. The installation is similar to Kali Linux. For example, we used the `sudo
    dd if=pwnpi-3.0.img of=/dev/disk2` command to install the `pwnpi-3.0.img` file
    to our microSD card identified as `disk2` on our Mac computer.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是从[pwnpi.sourceforge.net](http://pwnpi.sourceforge.net)网站下载PwnPi。安装类似于Kali
    Linux。例如，我们使用`sudo dd if=pwnpi-3.0.img of=/dev/disk2`命令将`pwnpi-3.0.img`文件安装到我们的microSD卡上，我们的Mac电脑上标识为`disk2`。
- en: Sometimes, we experienced booting problems when attempting to load the `pwnpi-3.0.img`.
    The work around is downloading the latest Raspberry Pi firmware from [https://github.com/raspberrypi/firmware](https://github.com/raspberrypi/firmware),
    which will be a ZIP file. Open that ZIP file and go to the `boot` folder. Copy
    everything in the `boot` folder and paste it in the `root` directory of the SD
    card once `pwnpi-3.0.img` has been installed. You will replace any existing files
    that overlap.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 有时，在尝试加载`pwnpi-3.0.img`时，我们遇到了启动问题。解决方法是从[https://github.com/raspberrypi/firmware](https://github.com/raspberrypi/firmware)下载最新的树莓派固件，这将是一个ZIP文件。打开该ZIP文件并转到`boot`文件夹。将`boot`文件夹中的所有内容复制并粘贴到SD卡的`root`目录中，一旦安装了`pwnpi-3.0.img`，您将替换任何重叠的现有文件。
- en: Once this is done, put the microSD card into the Raspberry Pi and fire up PwnPi.
    We recommend backing up your current configuration and operating before proceeding.
    This method is described in detail in [Chapter 1](ch01.html "Chapter 1. Raspberry
    Pi and Kali Linux Basics"), *Raspberry Pi and Kali Linux Basics*.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，将microSD卡插入树莓派并启动PwnPi。我们建议在继续之前备份当前配置和操作。这种方法在[第1章](ch01.html "第1章。树莓派和Kali
    Linux基础")中有详细描述，*树莓派和Kali Linux基础*。
- en: Note
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: We found that PwnPi as well as some other ARM images would not boot up at times
    due to drive problems. This is why we included the previous step covering how
    to add the firmware boot files prior to launching PwnPi. Try this technique if
    you run across an ARM image that does not boot properly.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 我们发现PwnPi以及其他一些ARM图像有时无法启动，这是由于驱动问题。这就是为什么我们在启动PwnPi之前包括了如何添加固件引导文件的先前步骤。如果您遇到ARM图像无法正确启动，请尝试此技术。
- en: Go and boot up your Raspberry Pi with your Raspberry Pwn image.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 去吧，用你的树莓派Pwn镜像启动你的树莓派。
- en: When you log in, you will be asked for a username and password. The default
    username is `root` and the default password is `toor`.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录时，将要求输入用户名和密码。默认用户名为`root`，默认密码为`toor`。
- en: We recommend running the `apt-get update` and `apt-get upgrade` commands at
    this point. PwnPi also has a basic web interface that you can launch, however,
    most tools will still need to be run from a terminal or command line. To launch
    the GUI desktop, just type `startx`.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们建议此时运行`apt-get update`和`apt-get upgrade`命令。PwnPi还有一个基本的web界面，您可以启动，但是大多数工具仍然需要从终端或命令行运行。要启动GUI桌面，只需输入`startx`。
- en: 'Since most tools will need to be run from the command line, the GUI provides
    some manageability for terminal windows and a list of some of the tools that come
    with PwnPi in the menus, as shown in the following screenshot:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 由于大多数工具需要从命令行运行，GUI提供了一些终端窗口的可管理性，以及PwnPi菜单中附带的一些工具列表，如下面的屏幕截图所示：
- en: '![PwnPi](img/6435OT_06_02.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![PwnPi](img/6435OT_06_02.jpg)'
- en: To launch any of the tools in PwnPi, simply navigate to the `/pentest` directory.
    You will find all the tools at this location. For example, if you want to run
    **Social-Engineer Toolkit**, simply type `/pentest/exploits/se-toolkit` from the
    terminal window. This will launch the tool. You can browse the directory for additional
    tools. Have a look at the previous chapters for information on how to use other
    popular tools found both in Kali Linux as well as PwnPi.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动PwnPi中的任何工具，只需导航到`/pentest`目录。您会在这个位置找到所有的工具。例如，如果您想运行**社会工程师工具包**，只需在终端窗口中输入`/pentest/exploits/se-toolkit`。这将启动该工具。您可以浏览目录以查找其他工具。查看前几章，了解如何使用Kali
    Linux和PwnPi中发现的其他流行工具的信息。
- en: 'The following screenshot shows the launch of **The Social-Engineer Toolkit**:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的屏幕截图显示了**社会工程师工具包**的启动：
- en: '![PwnPi](img/6435OT_06_03.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![PwnPi](img/6435OT_06_03.jpg)'
- en: Note
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Most security distributions will keep their tools in the `/pentest` directory.
    The actual tools themselves are exactly the same across distributions if you are
    using the same version of the tool.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数安全发行版将把它们的工具放在`/pentest`目录中。如果您使用的是相同版本的工具，那么各个发行版中的实际工具本身是完全相同的。
- en: Raspberry Pwn
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 树莓派Pwn
- en: Raspberry Pwn is from the same team that brings you Pwn Pad and Pwn Phone. The
    Debian-based distribution will have your favorite tools such as SET, Wireshark,
    dnswalk, and various wireless testing applications. Consider it an alternative
    to Kali Linux containing many similar tools.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: Raspberry Pwn来自带给您Pwn Pad和Pwn Phone的同一个团队。这个基于Debian的发行版将拥有您喜爱的工具，如SET、Wireshark、dnswalk和各种无线测试应用程序。可以将其视为包含许多类似工具的Kali
    Linux的替代品。
- en: The installation process of Raspberry Pwn is different from a typical ARM image.
    This is because Raspberry Pwn basically sits on top of the Raspbian operating
    system.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: Raspberry Pwn的安装过程与典型的ARM镜像不同。这是因为Raspberry Pwn基本上是建立在Raspbian操作系统之上的。
- en: 'Let''s look at how to install and run Raspberry Pwn using the following steps:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何使用以下步骤安装和运行Raspberry Pwn：
- en: You need to first download a basic Debian Raspberry Pi (Raspbian) distribution
    found at [http://www.raspberrypi.org/downloads](http://www.raspberrypi.org/downloads).
    These images are constantly being updated so at the time of writing this book,
    we used the `2014-09-09-wheezy-raspbian.img` command, which worked fine.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要首先下载基本的Debian树莓派（Raspbian）发行版，可以在[http://www.raspberrypi.org/downloads](http://www.raspberrypi.org/downloads)找到。这些镜像文件不断更新，所以在撰写本书时，我们使用了`2014-09-09-wheezy-raspbian.img`命令，效果很好。
- en: You will need to install this image using the process covered in [Chapter 1](ch01.html
    "Chapter 1. Raspberry Pi and Kali Linux Basics"), *Raspberry Pi and Kali Linux
    Basics*. The command to install the Debian image is `sudo dd if=2014-09-09-wheezy-raspbian.img
    of=/dev/disk2`.
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要使用[第1章](ch01.html "第1章。树莓派和Kali Linux基础")中介绍的过程来安装此镜像，*树莓派和Kali Linux基础*。安装Debian镜像的命令是`sudo
    dd if=2014-09-09-wheezy-raspbian.img of=/dev/disk2`。
- en: Once installed, put the microSD into your Raspberry Pi and make sure to connect
    it through the Ethernet port to an active port that provides access to the Internet.
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，将microSD卡插入树莓派，并确保通过以太网端口连接到提供互联网访问的活动端口。
- en: Use the `sudo –i` command to become the root user.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`sudo –i`命令成为root用户。
- en: Test network connectivity by pinging `google.com`. Once you confirm you have
    network connectivity, type `apt-get update` to update the firmware. This should
    only take a few minutes.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过ping `google.com`来测试网络连接。确认您有网络连接后，输入`apt-get update`来更新固件。这应该只需要几分钟。
- en: Once the update process completes, type `apt-get install git` as shown in the
    preceding screenshot. This is followed by the `git clone https://github.com/pwnieexpress/Raspberry-Pwn.git`
    command to download the Raspberry Pwn software as shown in the following screenshot:![Raspberry
    Pwn](img/6435OT_06_05.jpg)
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新过程完成后，输入`apt-get install git`，如前面的屏幕截图所示。然后输入`git clone https://github.com/pwnieexpress/Raspberry-Pwn.git`命令，下载Raspberry
    Pwn软件，如下面的屏幕截图所示：![Raspberry Pwn](img/6435OT_06_05.jpg)
- en: After a few minutes, you should be ready to install the software. Go to the
    `Raspberry-Pwn` directory using `cd Raspberry-Pwn` and type `./INSTALL_raspberry_pwn.sh`
    to install the software as shown in the following screenshot:![Raspberry Pwn](img/6435OT_06_06.jpg)
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 几分钟后，您应该准备好安装软件了。使用`cd Raspberry-Pwn`进入`Raspberry-Pwn`目录，然后输入`./INSTALL_raspberry_pwn.sh`来安装软件，如下面的屏幕截图所示：![Raspberry
    Pwn](img/6435OT_06_06.jpg)
- en: This process should take 10-20 minutes.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 这个过程应该需要10-20分钟。
- en: 'Once the installation completes, you will come to a `raspberrypi login #` command
    prompt. Use the default Debian login, with the username `pi` and password `raspberry`.
    If you changed your Raspbian login, use that instead.'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '安装完成后，您将进入`raspberrypi login #`命令提示符。使用默认的Debian登录，用户名为`pi`，密码为`raspberry`。如果您更改了Raspbian登录信息，请使用更改后的信息。'
- en: It is normally not a bad idea to run `apt-get update` and `apt-get upgrade`
    at this point.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在运行`apt-get update`和`apt-get upgrade`通常不是一个坏主意。
- en: To access the available tools, navigate to the `/pentesting` folder. In that
    folder, you will find a variety of tools seen in many popular penetration arsenals.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问可用的工具，请转到`/pentesting`文件夹。在该文件夹中，您将找到许多流行的渗透工具中看到的各种工具。
- en: Note
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Warning: if you type `startx,` it will only launch the Raspbian **K Desktop
    Environment** (**KDE**). It has nothing that is specific to the Raspberry Pwn
    installation, and might cause corruption if used. We recommend not using the KDE
    desktop and staying only with command-line functionality.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 警告：如果输入`startx`，它只会启动Raspbian的**K桌面环境**（**KDE**）。它没有任何特定于Raspberry Pwn安装的内容，并且可能会导致损坏。我们建议不要使用KDE桌面，只使用命令行功能。
- en: Raspberry Pwn is a great toolkit that is very efficient for network sniffing,
    social engineering attacks using SET, and other similar tools. It doesn't have
    the depth and breadth as Kali, but what it lacks, it makes up for in performance.
    Although it does not support it yet, we are hoping Pwnie Express will add the
    ability for Raspberry Pwn to be centrally managed through Pwnie Express's central
    management consoles making Raspberry Pwn a cheap sensor for that architecture.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: Raspberry Pwn是一个非常高效的工具包，非常适用于网络嗅探、使用SET进行社会工程攻击以及其他类似工具。它没有Kali那样的深度和广度，但它在性能上弥补了这一不足。尽管它目前还不支持，但我们希望Pwnie
    Express能够添加Raspberry Pwn通过Pwnie Express的中央管理控制台进行集中管理的功能，使Raspberry Pwn成为该架构的廉价传感器。
- en: 'The following screenshot shows Raspberry Pwn released by Pwnie Express:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了Pwnie Express发布的Raspberry Pwn：
- en: '![Raspberry Pwn](img/6435OT_06_07.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![Raspberry Pwn](img/6435OT_06_07.jpg)'
- en: PwnBerry Pi
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: PwnBerry Pi
- en: PwnBerry Pi is advertised as "another penetration testing suite for Raspberry
    Pi" and it has many of the same tools as Kali Linux. Colleagues and other professionals
    have told us (the authors of this book) that the creators of PwnBerry Pi have
    done a good job in optimizing this platform for web-based attacks. We however,
    have not experienced this in our own personal testing.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: PwnBerry Pi被宣传为“另一个用于Raspberry Pi的渗透测试套件”，它拥有许多与Kali Linux相同的工具。同事和其他专业人士告诉我们（本书的作者）PwnBerry
    Pi的创建者在优化这个平台用于基于Web的攻击方面做得很好。然而，在我们自己的个人测试中并没有体验到这一点。
- en: It should also be noted that best practice is not to use many of the tools required
    for web-based penetration testing from a lower-end system such as a Raspberry
    Pi. For example, PwnBerry Pi includes the installation file for BeEF rather than
    installing it knowing most penetration testers wouldn't run this application from
    an ARM image. If you install BeEF on this ARM image, you will see a warning banner
    added by the PwnBerry Pi development team claiming they experienced erratic behavior
    when using BeEF from the PwnBerry Pi image.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 还应该注意的是，最佳做法是不要从低端系统（如Raspberry Pi）使用许多用于基于Web的渗透测试所需的工具。例如，PwnBerry Pi包括BeEF的安装文件，而不是安装它，因为大多数渗透测试人员不会从ARM镜像运行此应用程序。如果在这个ARM镜像上安装BeEF，您将看到PwnBerry
    Pi开发团队添加的警告横幅，声称他们在使用PwnBerry Pi镜像时遇到了不稳定的行为。
- en: 'Let''s look at how to install PwnBerry Pi. The installation process of PwnBerry
    Pi is different from Kali Linux but similar to the Raspberry Pwn process. You
    will download the Raspbian image and run PwnBerry Pi on top of that image in the
    following manner:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何安装PwnBerry Pi。PwnBerry Pi的安装过程与Kali Linux不同，但与Raspberry Pwn的过程类似。您将下载Raspbian镜像，并以以下方式在该镜像上运行PwnBerry
    Pi：
- en: You need to first download a basic Debian distribution found at [http://www.raspberrypi.org/downloads](http://www.raspberrypi.org/downloads).
    These images are constantly being updated, so at the time of writing this book,
    we used the `2014-09-09-wheezy-raspbian.img` image, which worked fine.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要首先下载在[http://www.raspberrypi.org/downloads](http://www.raspberrypi.org/downloads)找到的基本Debian发行版。这些镜像文件正在不断更新，因此在撰写本书时，我们使用了`2014-09-09-wheezy-raspbian.img`镜像文件，效果很好。
- en: Install the image using the process covered in [Chapter 1](ch01.html "Chapter 1. Raspberry
    Pi and Kali Linux Basics"), *Raspberry Pi and Kali Linux Basics*. The command
    to install the Debian image is `sudo dd if=2014-09-09-wheezy-raspbian.img of=/dev/disk2`
    assuming your microSD is seen as `disk2`.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用[第1章](ch01.html "第1章. Raspberry Pi和Kali Linux基础")中介绍的过程安装镜像，*Raspberry Pi和Kali
    Linux基础*。安装Debian镜像的命令是`sudo dd if=2014-09-09-wheezy-raspbian.img of=/dev/disk2`，假设您的microSD被视为`disk2`。
- en: Once installed, put the microSD into your PwnBerry Pi and make sure to connect
    it through the Ethernet port to an active port that provides access to the Internet.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，将microSD卡插入PwnBerry Pi，并确保通过以太网端口连接到提供互联网访问的活动端口。
- en: Use the `sudo –i` command to become the root user.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`sudo –i`命令成为root用户。
- en: Test network connectivity by pinging `google.com`. Once you confirm you have
    network connectivity, type `apt-get update` and `apt-get upgrade` to update the
    firmware. This should only take a few minutes.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过ping `google.com`来测试网络连接。确认您有网络连接后，输入`apt-get update`和`apt-get upgrade`来更新固件。这应该只需要几分钟。
- en: Once the upgrade process completes, type `apt-get install git` followed by `git
    clone https://github.com/g13net/PwnBerryPi.git` to download the PwnBerry Pi software.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 升级过程完成后，输入`apt-get install git`，然后输入`git clone https://github.com/g13net/PwnBerryPi.git`来下载PwnBerry
    Pi软件。
- en: After a few minutes, you should be ready install the software. Go to the PwnBerry
    Pi directory using `cd PwnBerry Pi` and type `./install-pwnberrypi.sh` to install
    the software. This process should take 10-20 minutes.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 几分钟后，您应该准备安装软件。转到PwnBerry Pi目录，使用`cd PwnBerry Pi`并输入`./install-pwnberrypi.sh`来安装软件。这个过程应该需要10-20分钟。
- en: 'Once the installation completes, you will see **PwnBerry Pi Release 1.0 installed
    successfully!** and a command prompt `raspberrypi login #`. Use the default Debian
    login to access the terminal, with the username `pi` and password `raspberry`.'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '安装完成后，您将看到**PwnBerry Pi Release 1.0安装成功！**和一个命令提示符`raspberrypi login #`。使用默认的Debian登录访问终端，用户名为`pi`，密码为`raspberry`。'
- en: Like many other distributions, the tools for PwnBerry Pi are stored under a
    folder called `pentest` accessed through a terminal window using the `cd /pentest`
    command. Once you access the `pentest` folder, you will see a bunch of folders
    containing various penetration testing tools available to install. The following
    screenshot shows opening a terminal from the GUI and using the `ls` command to
    list all the folders in the directory. Each folder is labeled for a set of available
    tools.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 与许多其他发行版一样，PwnBerry Pi的工具存储在一个名为`pentest`的文件夹下，通过终端窗口使用`cd /pentest`命令访问。一旦您访问了`pentest`文件夹，您将看到一堆包含各种可安装的渗透测试工具的文件夹。以下截图显示了从GUI打开终端，并使用`ls`命令列出目录中的所有文件夹。每个文件夹都标有一组可用工具的标签。
- en: Note
  id: totrans-75
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Warning: you do not want to use the `startx` command, because it will bring
    up the KDE for Raspbian. Running the KDE does not serve any purpose for PwnBerry
    Pi and could cause problems with running PwnBerry Pi tools.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 警告：您不应该使用`startx`命令，因为它会在Raspbian上启动KDE。运行KDE对PwnBerry Pi没有任何意义，可能会导致运行PwnBerry
    Pi工具时出现问题。
- en: '![PwnBerry Pi](img/6435OT_06_08.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![PwnBerry Pi](img/6435OT_06_08.jpg)'
- en: There are a few notable exceptions. Metasploit is found under the `/opt/msf3`
    directory. You will notice that this is an older version of Metasploit. Newer
    versions did not work correctly with PwnBerry Pi. However, this particular version
    of Metasploit worked quite well with regards to performance.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些值得注意的例外。Metasploit位于`/opt/msf3`目录下。您会注意到这是一个较旧的版本的Metasploit。更新版本与PwnBerry
    Pi无法正常工作。然而，这个特定版本的Metasploit在性能方面表现得相当不错。
- en: Note
  id: totrans-79
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that all tools are not preinstalled. You must first install a tool before
    it can be used.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，并非所有工具都是预安装的。您必须先安装工具才能使用。
- en: Our testing found some of the tools functioned properly while others had warning
    banners regarding possible issues with using them on a Raspberry Pi. Overall,
    PwnBerry Pi is a decent option, however, we recommend a more established arsenal
    such as Kali Linux or PwnPi.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的测试发现，一些工具运行正常，而其他工具则显示了关于在树莓派上使用可能存在问题的警告横幅。总的来说，PwnBerry Pi是一个不错的选择，但是我们建议使用更成熟的工具，比如Kali
    Linux或PwnPi。
- en: Defending your network
  id: totrans-82
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 保护您的网络
- en: Most topics in this book cover attack scenarios. Unfortunately, one day you
    might experience attempts against your own systems. This means your security defense
    measures will be challenged and hopefully you will have the right tools to identify
    and prevent the breach from causing damage to your organization.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的大部分内容涵盖了攻击场景。不幸的是，有一天您可能会经历对自己系统的攻击。这意味着您的安全防御措施将受到挑战，希望您有正确的工具来识别并阻止入侵对组织造成的损害。
- en: We want to be clear that *the Raspberry Pi is not the ideal tool to leverage
    for cyber defense*. Best practice is layering security solutions that offer various
    features such as application layer controls, stateful firewall, intrusion prevention,
    access control, network segmentation, malware detection, network monitoring, data
    loss, and so on. Most tools that provide the level of protection you need to combat
    the threats seen on today's networks require very high power processing and tons
    of storage. Unfortunately, the Raspberry Pi does not offer this.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 我们要明确指出，*树莓派不是用于网络防御的理想工具*。最佳实践是层层叠加安全解决方案，提供各种功能，如应用层控制、有状态防火墙、入侵预防、访问控制、网络分割、恶意软件检测、网络监控、数据丢失等。大多数提供您需要应对当今网络上出现的威胁的保护级别的工具需要非常高的处理能力和大量存储空间。不幸的是，树莓派没有提供这一点。
- en: If you are looking to test some basic security concepts in a small lab such
    as segmentation using firewall features or scanning for basic threats with an
    IDS, the Raspberry Pi can act as a decent portable lab. Some ARM images claim
    to be ideal for home office protection, however, we would not recommend using
    a Raspberry Pi with the intention of protecting real assets.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想在一个小型实验室中测试一些基本的安全概念，比如使用防火墙功能进行分割或使用IDS扫描基本威胁，树莓派可以作为一个不错的便携式实验室。一些ARM镜像声称非常适合家庭办公室保护，但是我们不建议使用树莓派来保护真实资产。
- en: Let's start off by looking at how to turn a Raspberry Pi into IDS/IPS. Later
    in this chapter, we will look at other Raspberry Pi security defense use cases
    such as how to use the Raspberry Pi as a VPN server, a content filer, or a Tor
    node.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们首先看看如何将树莓派转变为IDS/IPS。在本章的后面，我们将看看其他树莓派安全防御用例，比如如何将树莓派用作VPN服务器、内容过滤器或Tor节点。
- en: Intrusion detection and prevention
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 入侵检测和预防
- en: There might be a time when you become the victim of a network breach. The best
    defense is layering multiple security solutions that cover various points on your
    network so if one gets bypassed, other tools are there to identify and stop the
    attacker. Common defense tools range from firewalls to detection technologies
    such as IDS/IPS solutions.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 也许有一天您会成为网络入侵的受害者。最好的防御是在网络上覆盖多个点的多个安全解决方案，因此如果一个被绕过，其他工具可以识别并阻止攻击者。常见的防御工具包括防火墙和IDS/IPS解决方案等检测技术。
- en: The Raspberry Pi can be configured as a low budget IDS/IPS to protect a part
    of your network. This should obviously only be considered for a very specific
    goal as there are far better options for providing real long term IPS/IDS solutions.
    The Raspberry Pi does not have the horsepower or storage for anything beyond basic
    detection and prevention, so consider this option for lab use and training purposes.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派可以配置为低成本的IDS/IPS，以保护您网络的一部分。显然，这只能被视为一个非常具体的目标，因为提供真正长期的IPS/IDS解决方案有更好的选择。树莓派没有足够的计算能力或存储空间来进行基本检测和预防之外的任何操作，因此请考虑这个选项用于实验和培训目的。
- en: When considering an IPS/IDS, the first thing to decide is how it will be deployed.
    The typical use case is between a router and another device, or between a system
    and network. You could also be an intrusion detection system, meaning the device
    is a tap in the network viewing copies of the traffic and won't have any enforcement
    capabilities. In my example, I'll use Snort as an inline IPS between my laptop
    and external network acting as a man-in-the-middle. This could be ideal for connecting
    to an untrusted network while not leveraging VPN. This setup will require two
    Ethernet ports so I'll be utilizing a USB to Ethernet adapter to accommodate the
    second port.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在考虑IPS/IDS时，首先要决定的是如何部署。典型的用例是在路由器和另一台设备之间，或者在系统和网络之间。您还可以作为入侵检测系统，这意味着设备是网络中的一个监听器，查看流量的副本，并且不具有任何执行能力。在我的例子中，我将使用Snort作为我的笔记本电脑和外部网络之间的内联IPS，充当中间人。这对于连接到不受信任的网络而不使用VPN可能是理想的。这种设置将需要两个以太网端口，因此我将使用USB到以太网适配器来容纳第二个端口。
- en: 'Deploying the Raspberry Pi for man-in-the-middle attacks is similar to acting
    as a man-in-the-middle for IPS deployments. You will need to set the IP address
    of both interfaces as `0.0.0.0,` and use the bridge utility to bridge both interfaces
    together. We covered this process in [Chapter 3](ch03.html "Chapter 3. Penetration
    Testing"), *Penetration Testing* under the *Man-in-the-middle* section. A summary
    of the commands used to bridge the two interfaces together is shown in the following
    screenshot:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 将树莓派部署为中间人攻击类似于在IPS部署中充当中间人。您需要将两个接口的IP地址都设置为`0.0.0.0`，并使用桥接工具将两个接口桥接在一起。我们在[第3章](ch03.html
    "第3章 渗透测试")*渗透测试*的*中间人*部分中介绍了这个过程。以下是用于将两个接口桥接在一起的命令的摘要：
- en: '![Intrusion detection and prevention](img/6435OT_06_09.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![入侵检测和预防](img/6435OT_06_09.jpg)'
- en: Snort
  id: totrans-93
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Snort
- en: The most popular open source IDS/IPS used today is Snort now owned by Cisco
    due to the acquisition of Sourcefire. The major problem with using Snort on a
    Raspberry Pi is the resource requirements that extend beyond what the Raspberry
    offers. It is recommended to tune down processes on Snort prior to running it
    to get decent functionality.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 今天最流行的开源IDS/IPS是Snort，现在由思科公司拥有，因为其收购了Sourcefire。在树莓派上使用Snort的主要问题是资源需求超出了树莓派所提供的范围。建议在运行Snort之前调整Snort的进程以获得良好的功能。
- en: Snort can run from a Kali Linux installation but it is not preinstalled.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: Snort可以从Kali Linux安装中运行，但它不是预装的。
- en: Note
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Make sure you download and update Snort prior to bridging your interfaces or
    you won't have Internet access. A possible work-around is adding a third wireless
    or Ethernet adapter to provide Internet access for updates while you leverage
    the other two ports for bridging.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 确保在桥接接口之前下载并更新Snort，否则您将无法访问互联网。一个可能的解决方法是添加第三个无线或以太网适配器，以便在利用其他两个端口进行桥接时为更新提供互联网访问。
- en: 'Let''s look at how to install and use Snort once your man-in-the-middle bridge
    is established in the following manner:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看在建立中间人桥之后如何安装和使用Snort：
- en: 'The first step to is download required files using the following command:'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是使用以下命令下载所需文件：
- en: '[PRE0]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Snort also requires libraries that do not ship with the Kali Linux ARM image.
    To get the libraries required for Snort to function properly, type the following
    command:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Snort还需要一些Kali Linux ARM镜像中没有的库。为了使Snort正常运行所需的库，请输入以下命令：
- en: '[PRE1]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Next, you need to uncompress the file by using the `tar –zxvf libdnet-1.12.tgz`
    command. Once the file is uncompressed, use the `cd` command to navigate to the
    directory.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您需要使用`tar –zxvf libdnet-1.12.tgz`命令解压文件。解压文件后，使用`cd`命令导航到该目录。
- en: You will change the `CFLAGS` variables to be configured for a 64-bit OS by typing
    the `./configure CFLAGS="-fPIC"` command. Once this is done, type the `make` command.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将通过输入`./configure CFLAGS="-fPIC"`命令来更改`CFLAGS`变量，以便为64位操作系统进行配置。完成此操作后，输入`make`命令。
- en: 'Next, you need to build a symbolic link from the location of `libdnet` to where
    Snort expects `libdnet` to be located. Type the following command to do this:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您需要从`libdnet`的位置建立到Snort期望`libdnet`位于的符号链接。输入以下命令来执行此操作：
- en: '[PRE2]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Now, you need to move to a directory used for Snort. We created a new directory
    called `snort` on our desktop by using the `mkdir snort` command from the desktop
    folder in command line or by right clicking on the desktop in the GUI and selecting
    it to make a new directory.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您需要转到用于Snort的目录。我们通过在命令行中的桌面文件夹中使用`mkdir snort`命令或在GUI中右键单击桌面并选择它来创建一个名为`snort`的新目录。
- en: Next, we will need to download the Snort data acquisition libraries. Type the
    `wget https://www.snort.org/downloads/snort/daq-2.0.4.tar.gz` command to do this.
    Note the version we are using might be different from what is available. Check
    [snort.org](http://snort.org) to ensure you are using the latest version.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要下载Snort数据采集库。输入`wget https://www.snort.org/downloads/snort/daq-2.0.4.tar.gz`命令来执行此操作。请注意，我们使用的版本可能与可用版本不同。请检查[snort.org](http://snort.org)以确保您使用的是最新版本。
- en: 'Download Snort with the following command:'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令下载Snort：
- en: '[PRE3]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Next, we will unzip and install the Snort data acquisition libraries using
    the following commands:'
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将使用以下命令解压并安装Snort数据采集库：
- en: '[PRE4]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The last step is downloading either Oinkcode, or community rules. **Oinkcode**
    rules are unique keys associated with an existing Snort user account. If you do
    not have Oinkcode rules, you can download community rules.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后一步是下载Oinkcode或社区规则。**Oinkcode**规则是与现有Snort用户帐户关联的唯一密钥。如果您没有Oinkcode规则，可以下载社区规则。
- en: We will download community rules by using the `wget https://www.snort.org/rules/community`
    command. This should download a file called `community.tar.gz` into your directory.
    You will need to uncompress the file using the `tar xvfz community.tar.gz -C /etc/snort/rules`
    command.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将使用 `wget https://www.snort.org/rules/community` 命令下载社区规则。这应该会在您的目录中下载一个名为
    `community.tar.gz` 的文件。您需要使用 `tar xvfz community.tar.gz -C /etc/snort/rules` 命令来解压缩文件。
- en: Note
  id: totrans-115
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: In some cases, you might need to add an extension to the file. If you only see
    community or some variation without the `.tar.gz` extension, type the `mv community
    community.tar.gz` command.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，您可能需要向文件添加一个扩展名。如果您只看到 community 或一些没有 `.tar.gz` 扩展名的变体，请键入 `mv community
    community.tar.gz` 命令。
- en: Now we are ready to install Snort. To install Snort, type `apt-get install snort`.
    You will get a prompt to configure the IP address and subnet mask of the Snort
    interface as shown in the following screenshot:![Snort](img/6435OT_06_10.jpg)
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们准备安装 Snort。要安装 Snort，请键入 `apt-get install snort`。您将收到一个提示来配置 Snort 接口的 IP
    地址和子网掩码，如下面的屏幕截图所示：![Snort](img/6435OT_06_10.jpg)
- en: 'You should see Snort complete its installation process, as shown in the following
    screenshot:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该看到 Snort 完成其安装过程，如下面的屏幕截图所示：
- en: '![Snort](img/6435OT_06_11.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![Snort](img/6435OT_06_11.jpg)'
- en: You have successfully configured Snort. There are many things you can do with
    Snort from this point such as analyzing traffic crossing the network bridge you
    set up in previous steps by using the `snort` command. We could write an entire
    book on Snort, and there are some books dedicated to the subject matter. If you
    are unfamiliar with Snort, we suggest you visit [www.snort.org](http://www.snort.org).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 您已成功配置了 Snort。从这一点开始，您可以使用 `snort` 命令分析通过您在之前步骤中设置的网络桥传输的流量。我们可以写一本关于 Snort
    的整本书，也有一些专门讨论这个主题的书籍。如果您对 Snort 不熟悉，我们建议您访问 [www.snort.org](http://www.snort.org)。
- en: The easiest way to start Snort is just to type `./snort –i eth0`; this will
    start Snort and listen on Ethernet `0`. There are many more advanced configurations
    that allow you to capture and run everything to a syslog server for further analysis.
    By default, Snort will log everything to the terminal screen, as shown in the
    following screenshot. Don't worry if it is difficult to see, as the messages scroll
    fast on the screen and that is why most people will log to an external syslog
    server.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 启动 Snort 最简单的方法就是键入 `./snort –i eth0`；这将启动 Snort 并监听以太网 `0`。还有许多更高级的配置，允许您捕获并将所有内容运行到一个
    syslog 服务器进行进一步分析。默认情况下，Snort 会将所有内容记录到终端屏幕上，如下面的屏幕截图所示。如果难以看清，不用担心，因为消息在屏幕上滚动得很快，这就是为什么大多数人会将其记录到外部
    syslog 服务器的原因。
- en: '![Snort](img/6435OT_06_12.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![Snort](img/6435OT_06_12.jpg)'
- en: 'One additional step you might take is setting up Snort to automatically start
    by creating a script. This is typically only used if you have the Raspberry Pi
    dedicated to Snort. The following example shows how to create a script to auto
    start snort when you boot up your Raspberry Pi:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能要采取的一个额外步骤是设置 Snort 自动启动，方法是创建一个脚本。这通常只用于将树莓派专用于 Snort 的情况。以下示例显示了如何创建一个脚本，在启动树莓派时自动启动
    snort：
- en: '[PRE5]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Content filter
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 内容过滤器
- en: A content filter is used to control the type of content a reader is authorized
    to access while surfing the Internet. Older content filters require lot of manual
    tuning based on updating URL lists, however, most commercial offerings provide
    content categories that are automatically updated with new website labels. The
    most common use case for requiring a content filter is blocking inappropriate
    content such as pornography from business networkers. Typically, content filters
    are bundled in with capabilities offered by network proxies or application layer
    firewalls.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 内容过滤器用于控制读者在浏览互联网时被授权访问的内容类型。旧的内容过滤器需要基于更新 URL 列表的手动调整，然而，大多数商业产品提供的内容类别会自动更新为新的网站标签。需要内容过滤器的最常见用例是阻止商业网络中的不当内容，如色情内容。通常，内容过滤器与网络代理或应用层防火墙提供的功能捆绑在一起。
- en: Let's look at how to turn a Raspberry Pi into a home office content filter.
    This is great for parents wanting to keep their personal network kid-friendly.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何将树莓派变成家庭办公室内容过滤器。这对于希望保持其个人网络适合儿童的父母来说非常有用。
- en: KidSafe
  id: totrans-128
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: KidSafe
- en: KidSafe is used to filter inappropriate content while users surf the Internet.
    KidSafe accomplishes this by using open source web URL filtering services through
    a Squid proxy. This allows parents to control their children's Internet experience
    through an easy-to-use GUI.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: KidSafe 用于在用户浏览互联网时过滤不当内容。KidSafe 通过使用 Squid 代理的开源 Web URL 过滤服务来实现这一点。这使得父母可以通过易于使用的
    GUI 控制他们孩子的互联网体验。
- en: KidSafe can be installed on any Linux-based system including Kali Linux for
    the Raspberry Pi. The application is suited for low powered, low cost computing
    systems making it ideal for home use. We recommend installing KidSafe on the Raspbian
    operating system so you don't have to worry about the additional settings associated
    with setting up Kali Linux. The Raspbian ARM image is typically installed by default
    when purchasing a Raspberry Pi. However, you can download it from [http://www.raspberrypi.org/downloads/](http://www.raspberrypi.org/downloads/).
    The installation process is similar to how we installed Kali Linux in [Chapter
    1](ch01.html "Chapter 1. Raspberry Pi and Kali Linux Basics"), *Raspberry Pi and
    Kali Linux Basics*.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: KidSafe 可以安装在包括树莓派的 Kali Linux 在内的任何基于 Linux 的系统上。该应用适用于低功耗、低成本的计算系统，非常适合家庭使用。我们建议在
    Raspbian 操作系统上安装 KidSafe，这样您就不必担心设置 Kali Linux 相关的额外设置。购买树莓派时，通常会默认安装 Raspbian
    ARM 映像。但是，您也可以从 [http://www.raspberrypi.org/downloads/](http://www.raspberrypi.org/downloads/)
    下载它。安装过程类似于我们在[第1章](ch01.html "第1章 树莓派和Kali Linux基础")中安装 Kali Linux 的过程，*树莓派和Kali
    Linux基础*。
- en: 'The steps are as follows:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤如下：
- en: 'The first step to prepare for KidSafe is changing the default **Dynamic Host
    Configuration Protocol** (**DHCP**) behavior to a static address so we don''t
    have to worry about our IP address changing. Clients such as PCs and phones will
    proxy to and from this IP address to connect to the Internet, so it is important
    to make sure a static address is selected that is reachable by other devices on
    the network. It is also important that it is static so endpoints don''t have to
    adjust their proxy settings. We can do this in the following way:'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了为KidSafe做好准备的第一步是将默认的**动态主机配置协议**（**DHCP**）行为更改为静态地址，这样我们就不必担心IP地址的变化。诸如PC和手机之类的客户端将代理到这个IP地址，以连接到互联网，因此重要的是确保选择一个可被网络上其他设备访问的静态地址。同样重要的是它是静态的，这样端点就不必调整其代理设置。我们可以通过以下方式来实现这一点：
- en: Let's change our IP address to a static address.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们将我们的IP地址更改为静态地址。
- en: Type the `ifconfig` command to see your network interfaces. You should see something
    like what's shown in the following screenshot. Note what you see when you run
    the command.![KidSafe](img/6435OT_06_13.jpg)
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 键入`ifconfig`命令以查看您的网络接口。您应该看到类似于以下截图所示的内容。运行命令时请注意您看到的内容。![KidSafe](img/6435OT_06_13.jpg)
- en: You will edit the network interface file. We will use `vi`, but you can use
    your favorite editor. Type the `sudo nano /etc/network/interfaces` command. The
    launch of this command is shown in the following screenshot:![KidSafe](img/6435OT_06_14.jpg)
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将编辑网络接口文件。我们将使用`vi`，但您可以使用您喜欢的编辑器。键入`sudo nano /etc/network/interfaces`命令。此命令的启动如下截图所示：![KidSafe](img/6435OT_06_14.jpg)
- en: 'Look for the line that says something close to `iface eth0 inet dhcp`. You
    will change that line to a static address. In our example, we will change to a
    static IP of `10.0.1.167` with a subnet mask of `255.255.255.0` as well as default
    gateway of `10.0.1.1` using the commands in the following screenshot:'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查找接近`iface eth0 inet dhcp`的行。您将把该行更改为静态地址。在我们的示例中，我们将使用命令更改为静态IP`10.0.1.167`，子网掩码为`255.255.255.0`，默认网关为`10.0.1.1`，如下截图所示：
- en: '![KidSafe](img/6435OT_06_15.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![KidSafe](img/6435OT_06_15.jpg)'
- en: Now, let's install Tor using the `sudo apt-get install tor` command.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们使用`sudo apt-get install tor`命令安装Tor。
- en: Next, install Squid using the `sudo apt-get install squid3` command.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用`sudo apt-get install squid3`命令安装Squid。
- en: Next, install a light web server using the `sudo apt-get install lighttpd` command.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用`sudo apt-get install lighttpd`命令安装一个轻量级的Web服务器。
- en: PHP is required for KidSafe. To install PHP, use the `sudo apt-get install php5-common
    php5-cgi php5 php5-mysql` command. You need to enable PHP scripts using the `sudo
    lighty-enable-mod fastcgi-phpa` command.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: KidSafe需要PHP。要安装PHP，请使用`sudo apt-get install php5-common php5-cgi php5 php5-mysql`命令。您需要使用`sudo
    lighty-enable-mod fastcgi-phpa`命令启用PHP脚本。
- en: At this point, you will need to reload the server using the `sudo service lighttpd
    force-reload` command.
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此时，您需要使用`sudo service lighttpd force-reload`命令重新加载服务器。
- en: The next step is to install the GUI admin tool for PHP. This is not required
    but we recommend it since it makes administrating PHP much easier. To install
    the GUI admin, use the `sudo apt-get install phpmyadmin` command. Once installed,
    you will be able to administer PHP from a web browser by accessing `http://localhost/phpmyadmin/`.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是安装PHP的GUI管理工具。这不是必需的，但我们建议安装，因为它可以更轻松地管理PHP。要安装GUI管理工具，请使用`sudo apt-get
    install phpmyadmin`命令。安装完成后，您将能够通过访问`http://localhost/phpmyadmin/`来从Web浏览器管理PHP。
- en: Next, we will change the directory owner and group by typing the `sudo chown
    www-data:www-data /var/www` command. We also need to change permissions on our
    directory using the `sudo chmod 775 /var/www` command.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将通过键入`sudo chown www-data:www-data /var/www`命令更改目录所有者和组。我们还需要使用`sudo chmod
    775 /var/www`命令更改我们的目录权限。
- en: If you do not have a username, create one using the `sudo adduser proxy` command.
    Also, make sure to change the password for your username using the `sudo passwd
    proxy` command. You will add your username to the directory group to give it permissions
    to manage using the `sudo usermod -a -G www-data proxy` command.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您没有用户名，请使用`sudo adduser proxy`命令创建一个。另外，确保使用`sudo passwd proxy`命令更改您的用户名的密码。您将使用`sudo
    usermod -a -G www-data proxy`命令将您的用户名添加到目录组，以便赋予其管理权限。
- en: Change to `/opt` directory. You can do so by typing in `sudo cd /opt`. Make
    sure you are in the `/opt` directory by using the `cd` command.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 切换到`/opt`目录。您可以通过键入`sudo cd /opt`来实现。确保您使用`cd`命令处于`/opt`目录中。
- en: Next, we will download a helper application that is used to configure the proxy
    and Squid settings much easier. Go to [http://www.penguintutor.com/software/squid-kidsafe/0.2.0/kidsafe-squidapp-0.2.0.tgz](http://www.penguintutor.com/software/squid-kidsafe/0.2.0/kidsafe-squidapp-0.2.0.tgz)
    to download the application. You can do so by typing `sudo wget http://www.penguintutor.com/software/squid-kidsafe/0.2.0/kidsafe-squidapp-0.2.0.tgz`
    from the command line. Make sure you are in the `/opt` directory.
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将下载一个辅助应用程序，用于更轻松地配置代理和Squid设置。转到[http://www.penguintutor.com/software/squid-kidsafe/0.2.0/kidsafe-squidapp-0.2.0.tgz](http://www.penguintutor.com/software/squid-kidsafe/0.2.0/kidsafe-squidapp-0.2.0.tgz)下载该应用程序。您可以通过在命令行中键入`sudo
    wget http://www.penguintutor.com/software/squid-kidsafe/0.2.0/kidsafe-squidapp-0.2.0.tgz`来实现。确保您处于`/opt`目录中。
- en: Note
  id: totrans-148
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Check whether you are using and downloading the latest version. If not, adjust
    this to the latest version; most likely, only the version number will change when
    downloading the file.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 检查您是否正在使用和下载最新版本。如果没有，请将其调整为最新版本；在下载文件时，最有可能只有版本号会发生变化。
- en: Use the `sudo tar –zxvf kidsafe-squidapp-0.2.0.tgz` command to untar the file.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`sudo tar –zxvf kidsafe-squidapp-0.2.0.tgz`命令解压文件。
- en: You will edit the `/opt/kidsafe/kidsafe.squid3.inc` file using your favorite
    editor. Go to the last line of the file and change the `192.168.0.3` address to
    your IP address.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用您喜欢的编辑器编辑`/opt/kidsafe/kidsafe.squid3.inc`文件。转到文件的最后一行，并将`192.168.0.3`地址更改为您的IP地址。
- en: Change `acl local_acl dst 192.168.0.0/16` to what is appropriate for your subnet.
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`acl local_acl dst 192.168.0.0/16`更改为适合您子网的内容。
- en: You will need to merge the Squid files with the KidSafe files. Do so by typing
    `include /opt/kidsafe/kidsafe.squid3.inc`.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要将Squid文件与KidSafe文件合并。通过输入`include /opt/kidsafe/kidsafe.squid3.inc`来执行此操作。
- en: 'Several files will need their permissions changed or updated. Type in the following
    commands:'
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 几个文件将需要更改或更新其权限。输入以下命令：
- en: '[PRE6]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Now you can download and install the KidSafe application in the `/var/www` directory.
    To download KidSafe, type `sudo wget kidsafe-webapp-0.2.0.tgz`. Make sure you
    are in the `/var/www` directory. Also note the version you are downloading as
    it might differ from the example we used.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您可以在`/var/www`目录中下载并安装KidSafe应用程序。要下载KidSafe，请输入`sudo wget kidsafe-webapp-0.2.0.tgz`。确保您在`/var/www`目录中。还要注意您正在下载的版本，因为它可能与我们使用的示例不同。
- en: 'Uncompress the file using the following command:'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令解压文件：
- en: '[PRE7]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Now open up a web browser and go to `http://localhost/phpmyadmin/`. Click on
    **Databases** and select **Create New Database**. Name the database `kidsafe`.
    We will set the database type to **Local** as shown in the following screenshot:![KidSafe](img/6435OT_06_45.jpg)
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在打开一个网页浏览器，转到`http://localhost/phpmyadmin/`。点击**数据库**，选择**创建新数据库**。将数据库命名为`kidsafe`。我们将数据库类型设置为**本地**，如下截图所示：![KidSafe](img/6435OT_06_45.jpg)
- en: '**Password** will be set to: <as defined in the `kidsafe-config.php` file>.
    Save and apply the configuration. In the **Database-specific privileges** menu
    select the `kidsafe` database. For **Privileges,** select only **SELECT**, **INSERT**,
    **UPDATE**, **DELETE**. For **Grant**, select **No**. For **Table-specific privileges,**
    select **No**.'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**密码**将设置为：<如`kidsafe-config.php`文件中定义的>。保存并应用配置。在**特定于数据库的权限**菜单中选择`kidsafe`数据库。对于**权限**，只选择**SELECT**，**INSERT**，**UPDATE**，**DELETE**。对于**授权**，选择**否**。对于**特定于表的权限**，选择**否**。'
- en: Now click on the **Databases** button on the left side of the tab. Go to the
    **SQL** tab and execute the commands (just copy and paste) from the following
    file at [http://www.penguintutor.com/software/squid-kidsafe/0.2.1/kidsafe-database.txt](http://www.penguintutor.com/software/squid-kidsafe/0.2.1/kidsafe-database.txt).
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在点击标签页左侧的**数据库**按钮。转到**SQL**标签页，并执行来自[http://www.penguintutor.com/software/squid-kidsafe/0.2.1/kidsafe-database.txt](http://www.penguintutor.com/software/squid-kidsafe/0.2.1/kidsafe-database.txt)的命令（只需复制并粘贴）。
- en: Note
  id: totrans-162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Alternatively you can get the same file at [http://www.drchaos.com/wp-content/uploads/2014/11/kidsafe-database.txt](http://www.drchaos.com/wp-content/uploads/2014/11/kidsafe-database.txt).
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，您也可以在[http://www.drchaos.com/wp-content/uploads/2014/11/kidsafe-database.txt](http://www.drchaos.com/wp-content/uploads/2014/11/kidsafe-database.txt)获取相同的文件。
- en: 'The following screenshot shows the **phpMyAdmin** page:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了**phpMyAdmin**页面：
- en: '![KidSafe](img/6435OT_06_16.jpg)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![KidSafe](img/6435OT_06_16.jpg)'
- en: Note
  id: totrans-166
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Your PHP page will look significantly different than ours. That is because we
    are running multiple applications and databases.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 您的PHP页面将与我们的页面有很大不同。这是因为我们正在运行多个应用程序和数据库。
- en: 'You should change permissions on the `log` file. Type the following commands:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您应更改`log`文件的权限。输入以下命令：
- en: '[PRE8]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Setup is now complete. You can configure rules, logins, and other settings by
    going to `http://localhost/kidsafe`.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 设置现在已经完成。您可以通过转到`http://localhost/kidsafe`来配置规则、登录和其他设置。
- en: Note
  id: totrans-171
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For more information on how to use KidSafe check out [http://www.penguintutor.com/linux/raspberrypi-kidsafe](http://www.penguintutor.com/linux/raspberrypi-kidsafe).
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 有关如何使用KidSafe的更多信息，请访问[http://www.penguintutor.com/linux/raspberrypi-kidsafe](http://www.penguintutor.com/linux/raspberrypi-kidsafe)。
- en: 'The following screenshot shows the KidSafe administered **Website blocked**
    page:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了KidSafe管理的**网站被阻止**页面：
- en: '![KidSafe](img/6435OT_06_17.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![KidSafe](img/6435OT_06_17.jpg)'
- en: Tip
  id: totrans-175
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Don't manually manage websites you want to block. Download free blacklists from
    [http://www.squidguard.org/blacklists.html](http://www.squidguard.org/blacklists.html)
    to get updated lists that have categorized millions of websites.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 不要手动管理您想要阻止的网站。从[http://www.squidguard.org/blacklists.html](http://www.squidguard.org/blacklists.html)下载免费的黑名单，以获取已分类数百万个网站的更新列表。
- en: Remote access with OpenVPN
  id: totrans-177
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用OpenVPN进行远程访问
- en: A **Virtual Private Network** (**VPN**) is an essential security element to
    many organizations. VPNs provide a method to connect directly to a remote network
    as if you are on-site and protect traffic in between the client and the connected
    network using encryption. This prevents many man-in-the-middle attacks and allows
    people to be more productive while out of the office. OpenVPN can turn a Raspberry
    Pi into a VPN concentrator providing these and other benefits at an extremely
    low cost.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: '**虚拟专用网络**（**VPN**）是许多组织的基本安全要素。 VPN提供了一种直接连接到远程网络的方法，就好像您在现场一样，并使用加密保护客户端和连接网络之间的流量。这可以防止许多中间人攻击，并允许人们在办公室外更加高效。
    OpenVPN可以将树莓派转变为VPN集中器，以极低的成本提供这些和其他好处。'
- en: 'Let''s look at how to transform a Raspberry Pi into a VPN concentrator using
    the following steps:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何通过以下步骤将树莓派转变为VPN集中器：
- en: The first step is installing the latest Raspbian image through the NOOBS package
    or directly from the Raspberry Pi website following steps from [Chapter 1](ch01.html
    "Chapter 1. Raspberry Pi and Kali Linux Basics"), *Raspberry Pi and Kali Linux
    Basics*.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是通过NOOBS软件包或直接从树莓派网站按照[第1章](ch01.html "第1章。树莓派和Kali Linux基础")中的步骤安装最新的Raspbian镜像，*树莓派和Kali
    Linux基础*。
- en: We also suggest updating your image with the `apt-get update` and `apt-get upgrade`
    commands as specified for Kali Linux in [Chapter 1](ch01.html "Chapter 1. Raspberry
    Pi and Kali Linux Basics"), *Raspberry Pi and Kali Linux Basics*.
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还建议根据Kali Linux中指定的`apt-get update`和`apt-get upgrade`命令更新您的镜像，详见[第1章](ch01.html
    "第1章。树莓派和Kali Linux基础")中的*树莓派和Kali Linux基础*。
- en: Since the goal of this solution is to be outside-facing, we strongly suggest
    changing the default password before starting the OpenVPN configuration.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于此解决方案的目标是面向外部，我们强烈建议在开始OpenVPN配置之前更改默认密码。
- en: Note
  id: totrans-183
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: You need to be a `root` user prior to launching the update and upgrade commands
    using the `sudo –i` command.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用`sudo –i`命令之前，您需要成为`root`用户才能启动更新和升级命令。
- en: Once your Raspbian build is upgraded, you will need to identify an accessible
    IP address to the outside network where you plan to connect from. You will also
    need to pick a port to connect through, such as UDP traffic on port 1194\. This
    would mean opening forward port 1194 on your router and firewall. You can use
    a different port or protocol, such as TCP depending on what you are confortable
    with opening on your router and firewall.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你的Raspbian构建升级完成，你需要确定一个外部网络可访问的IP地址，你计划从中连接。你还需要选择一个连接的端口，比如UDP流量的端口1194。这意味着你需要在路由器和防火墙上打开1194端口的转发。你可以使用不同的端口或协议，比如TCP，取决于你在路由器和防火墙上愿意打开的内容。
- en: OpenVPN isn't installed by default on most operating systems, so you will need
    to use `apt-get install openvpn` to install it as shown in the following screenshot:![Remote
    access with OpenVPN](img/6435OT_06_18.jpg)
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 大多数操作系统默认情况下都没有安装OpenVPN，所以你需要使用`apt-get install openvpn`来安装它，如下图所示:![使用OpenVPN进行远程访问](img/6435OT_06_18.jpg)
- en: 'Next you will want to generate keys to protect your VPN server. We will use
    `easy-rsa` for this purpose. You will need to be a `root` user so make sure to
    type `sudo –s` prior to moving forward. Use the following command to copy everything
    from the `easy-rsa/2.0` folder to the `easy-rsa` folder:'
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '接下来，你将想要生成密钥来保护你的VPN服务器。我们将使用`easy-rsa`来实现这个目的。你需要成为`root`用户，所以确保在继续之前输入`sudo
    –s`。使用以下命令将`easy-rsa/2.0`文件夹中的所有内容复制到`easy-rsa`文件夹中:'
- en: '[PRE9]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Tip
  id: totrans-189
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: This type of certificate is fine for a small VPN deployment. However, if this
    grows, you might want to consider generating a **Certificate Signing Request**
    (**CSR**) using OpenSSL and getting that signed through a trusted certificate
    authority.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 这种类型的证书对于小型VPN部署来说是可以的。但是，如果这个规模扩大，你可能需要考虑使用OpenSSL生成一个**证书签名请求**（**CSR**）并通过受信任的证书颁发机构进行签名。
- en: Next, go to the `easy-rsa` folder found with `cd /etc/openvpn/easy-rsa`. If
    you type `ls`, you should see a file called `vars`. We want to edit that, so type
    `nano vars`. Now, find and change the `EASY_RSA` variable to `export EASY_RSA="/etc/openvpn/easy-rsa"`.
    The following screenshot shows this adjustment at line 13:![Remote access with
    OpenVPN](img/6435OT_06_19.jpg)
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，进入`easy-rsa`文件夹，使用`cd /etc/openvpn/easy-rsa`。如果输入`ls`，你应该看到一个名为`vars`的文件。我们想要编辑它，所以输入`nano
    vars`。现在，找到并更改`EASY_RSA`变量为`export EASY_RSA="/etc/openvpn/easy-rsa"`。下面的截图显示了第13行的这个调整:![使用OpenVPN进行远程访问](img/6435OT_06_19.jpg)
- en: You could increase the encryption method from 1024-bit to 2048-bit if you are
    paranoid. Just find the line that states `export KEY_SIZE=1024` and increase the
    value to `2048`. Once you are done, type *Ctrl* + *X* to save your changes.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你很谨慎，你可以将加密方法从1024位增加到2048位。只需找到声明`export KEY_SIZE=1024`的行，并将值增加到`2048`。完成后，输入*Ctrl*
    + *X*保存更改。
- en: Now we need to build a **Certificate Authority** (**CA**) certificate and Root
    CA certificate. The Raspberry Pi will act as its own certificate authority and
    sign off on OpenVPN keys. You should still be in the `easy-rsa` folder. Type `source
    ./vars` to load the `vars` document. Type `./clean-all` to remove any previous
    keys.
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们需要构建一个**证书颁发机构**（**CA**）证书和根CA证书。树莓派将充当自己的证书颁发机构，并签署OpenVPN密钥。您应该仍然在`easy-rsa`文件夹中。输入`source
    ./vars`以加载`vars`文档。输入`./clean-all`以删除任何先前的密钥。
- en: Type `./build-ca` to build your certificate authority. You will be asked a bunch
    of questions regarding where you live, company name, and so on. The following
    screenshot shows the first question once I ran the previous commands:![Remote
    access with OpenVPN](img/6435OT_06_20.jpg)
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`./build-ca`来构建你的证书颁发机构。你将被问及关于你居住的地方、公司名称等一系列问题。下面的截图显示了我运行前面命令后的第一个问题:![使用OpenVPN进行远程访问](img/6435OT_06_20.jpg)
- en: After you finish the last question regarding an e-mail address, you can name
    your server by using the `./build-key-server [Server_Name]` command. Once again,
    you will have to answer some optional fields. Make sure this time around you use
    the name you picked for the **Common Name** field, which should default to that
    name. You must also leave **A challenge password** field blank.
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在完成关于电子邮件地址的最后一个问题后，你可以使用`./build-key-server [Server_Name]`命令为服务器命名。再次，你将不得不回答一些可选字段。确保这一次使用你选择的**通用名称**字段的名称，这应该是默认的名称。你还必须将**挑战密码**字段留空。
- en: You will get a message saying your certificate will be signed for 3,650 more
    days and it will ask you to commit. Say yes (**y**) and it will generate your
    certificate.
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将收到一条消息，说你的证书将在3650天后签署，并询问你是否要提交。选择是（**y**），它将生成你的证书。
- en: Now that the server side is up, let's build keys for the "clients" also known
    as users. For example, we will create a key for our laptop. To do this, use the
    `./build-key-pass [UserName]` command. So for our example, the user name is `laptop1`.
    It will ask you for a pass phrase to remember. Fill that out and go through the
    prompts. Make sure to leave **A challenge password** field blank. Confirm to sign
    the certificate and it will display that the database has been updated.
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在服务器端已经准备好了，让我们也为“客户端”（也称为用户）生成密钥。例如，我们将为我们的笔记本电脑创建一个密钥。为此，使用`./build-key-pass
    [UserName]`命令。所以对于我们的例子，用户名是`laptop1`。它会要求你记住一个密码短语。填写好并按照提示进行。确保将**挑战密码**字段留空。确认签署证书，它将显示数据库已更新。
- en: Go to the `keys` folder using `cd keys` and type `openssl rsa –in laptop1.key
    –des3 –out laptop1.3des.key`. This will apply `des3` also known as des encryption
    three times to each data block.
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`cd keys`进入`keys`文件夹，然后输入`openssl rsa –in laptop1.key –des3 –out laptop1.3des.key`。这将对每个数据块应用称为des加密三次的`des3`。
- en: At this point, you have created a server certificate and a client certificate.
    You can repeat the client process if you want to create certificates for other
    devices. When you are done, go back to the `easy-rsa` folder using `cd` so you
    can generate the Diffie-Hellman key exchange. Type `./build-dh` to execute this.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这一点上，你已经创建了一个服务器证书和一个客户端证书。如果你想为其他设备创建证书，可以重复客户端过程。完成后，使用`cd`返回`easy-rsa`文件夹，这样你就可以生成Diffie-Hellman密钥交换。输入`./build-dh`来执行这个命令。
- en: Note
  id: totrans-200
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: You might get a prompt to first enter `source /vars` prior to using the `./build-dh`
    command. Run that command before rerunning the `./build-dh` command.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用`./build-dh`命令之前，您可能会收到首先输入`source /vars`的提示。在重新运行`./build-dh`命令之前运行该命令。
- en: This could take a while depending on your encryption size. If you increased
    things to 2048-bit encryption earlier on, expect to wait longer. We are stuck
    with 1024, so it took a few minutes to complete.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能需要一些时间，具体取决于您的加密大小。如果您之前将加密升级到2048位，那么需要等待更长时间。我们使用的是1024位，所以完成需要几分钟。
- en: The next step is to enable **Denial of Service** (**DoS**) protection using
    a **Hash-based Message Authentication Code** (**HMAC**) key. This will have the
    Raspberry Pi first ask for a static key before attempting to authenticate an access
    request. This stops attackers from spamming the server with random repeated requests.
    Use the `openvpn –genkey –secret keys/ta.key` command to enable this.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是使用**基于哈希的消息认证码**（**HMAC**）密钥启用**拒绝服务**（**DoS**）保护。这将使树莓派在尝试验证访问请求之前首先要求一个静态密钥。这可以阻止攻击者用随机重复的请求攻击服务器。使用`openvpn
    –genkey –secret keys/ta.key`命令启用此功能。
- en: 'At this point, we have generated keys and had a CA sign them. Now let''s configure
    OpenVPN. We first need to create a `.conf` file that will be used by OpenVPN to
    list things such as where we are connecting from and the type of connections.
    Type `nano /etc/openvpn/server.conf`. This will open a blank document in the `openvpn`
    folder. Use the following commands to configure OpenVPN:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经生成了密钥并让CA对其进行签名。现在让我们配置OpenVPN。我们首先需要创建一个`.conf`文件，OpenVPN将使用它来列出我们要连接的位置和连接类型等信息。输入`nano
    /etc/openvpn/server.conf`。这将在`openvpn`文件夹中打开一个空白文档。使用以下命令配置OpenVPN：
- en: Tip
  id: totrans-205
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Make sure to adjust to your network where the comments are asking for your information.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 确保根据评论要求调整到您的网络，评论要求您提供信息。
- en: '[PRE10]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Press *Ctrl* + *X* once you are finished to save.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后按*Ctrl* + *X*保存。
- en: 'Now, we need to create another file to configure the Raspberry Pi to forward
    Internet traffic. To do this, let''s edit a file called `sysctl.conf` by using
    the `nano /etc/sysctl.conf` command. Look for the line close to the top that says
    **# Uncomment the next line to enable packet forwarding for IPv4 and remove the
    #** to uncomment it. This will tell the Raspberry Pi to relay Internet traffic
    rather than just being a receiver. Press *Ctrl* + *X* to save changes.'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要创建另一个文件来配置树莓派以转发Internet流量。为此，让我们使用`nano /etc/sysctl.conf`命令编辑一个名为`sysctl.conf`的文件。查找接近顶部的一行，其中写着**#取消注释下一行以启用IPv4的数据包转发并删除#**，取消注释它。这将告诉树莓派转发Internet流量，而不仅仅是接收。按*Ctrl*
    + *X*保存更改。
- en: Next, type `sysctl –p` to apply the changes. The `sysctl` command configures
    kernel parameters at runtime.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，输入`sysctl –p`以应用更改。`sysctl`命令在运行时配置内核参数。
- en: 'Everything regarding the VPN should be up, however, the Raspbian firewall will
    block incoming connections. Also, the Raspbian''s firewall configuration resets
    by default when the Pi is rebooted. We need to use a script to make sure the Raspberry
    Pi remembers that the OpenVPN connection is always permitted. Use the `nano /etc/firewall-openvpn-rules.sh`
    command to open a blank executable file. Enter the following commands into the
    file:'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关于VPN的一切应该都已经准备就绪，但是Raspbian防火墙将阻止传入的连接。此外，当树莓派重新启动时，默认情况下Raspbian的防火墙配置会重置。我们需要使用脚本确保树莓派记住始终允许OpenVPN连接。使用`nano
    /etc/firewall-openvpn-rules.sh`命令打开一个空白的可执行文件。在文件中输入以下命令：
- en: '[PRE11]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The `10.0.2.0/24` in the command is the default address for Raspberry Pi clients
    that are connected over the VPN. You need to update this to your Raspberry Pi's
    IP address. Note that the script specifies the `eth0` interface as the outside-facing
    interface. Type *Ctrl* + *X* to save the changes.
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 命令中的`10.0.2.0/24`是连接到VPN的树莓派客户端的默认地址。您需要将其更新为您的树莓派IP地址。请注意，脚本将`eth0`接口指定为面向外部的接口。按*Ctrl*
    + *X*保存更改。
- en: 'You need to change this to an executable file by updating its permissions and
    ownership of the `etc/firewall-openvpn-rules.sh` file. We need to change the mode
    to `700,` meaning owner can read, write, execute, as well as change the owner
    to `root`. The commands to do this are:'
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要通过更新`etc/firewall-openvpn-rules.sh`文件的权限和所有权将其更改为可执行文件。我们需要将模式更改为`700`，意味着所有者可以读取、写入、执行，并将所有者更改为`root`。执行以下命令：
- en: '[PRE12]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: We need to place this script into the interface setup code so it runs on boot.
    This will punch the hole for OpenVPN to function properly. Type `nano /etc/network/interfaces`,
    look for the line that states `iface eth0 inet dhcp`, and add the line `pre-up
    /etc/firewall-openvpn-rules.sh` with an indent below this line. Type *Ctrl* +
    *X* to save your changes.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要将此脚本放入接口设置代码中，以便在启动时运行。这将为OpenVPN打洞，使其正常运行。输入`nano /etc/network/interfaces`，查找声明`iface
    eth0 inet dhcp`的行，并在该行下方缩进添加一行`pre-up /etc/firewall-openvpn-rules.sh`。按*Ctrl*
    + *X*保存更改。
- en: Reboot your Pi using `sudo reboot`.
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`sudo reboot`重新启动您的树莓派。
- en: Congratulations, you have a fully functional VPN concentrator!
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜，您现在拥有一个完全功能的VPN集中器！
- en: Now let's download an OpenVPN client and connect back to our Raspberry Pi OpenVPN
    server using the following steps. There are a variety of OpenVPN clients that
    are available. We actually prefer Viscosity from SparkLabs.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们下载一个OpenVPN客户端，并使用以下步骤重新连接到我们的树莓派OpenVPN服务器。有各种可用的OpenVPN客户端。我们实际上更喜欢来自SparkLabs的Viscosity。
- en: Go to [https://www.sparklabs.com/viscosity/](https://www.sparklabs.com/viscosity/)
    to download the Viscosity client.
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问[https://www.sparklabs.com/viscosity/](https://www.sparklabs.com/viscosity/)下载Viscosity客户端。
- en: Note
  id: totrans-221
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: There are many OpenVPN clients available, including many free ones. The steps
    will be similar for other clients.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多可用的OpenVPN客户端，包括许多免费的客户端。其他客户端的步骤将类似。
- en: 'The following screenshot shows the Viscosity client''s **Preferences** window:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了Viscosity客户端的**首选项**窗口：
- en: '![Remote access with OpenVPN](img/6435OT_06_21.jpg)'
  id: totrans-224
  prefs: []
  type: TYPE_IMG
  zh: '![使用OpenVPN进行远程访问](img/6435OT_06_21.jpg)'
- en: After you install the client, you will need to add a new connection. Put in
    the IP address of your VPN server so the client knows where to connect. This is
    the reachable IP address of your Raspberry Pi server. The following screenshot
    shows the **New Connection** window's **General** tab:![Remote access with OpenVPN](img/6435OT_06_22.jpg)
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装客户端后，您需要添加一个新连接。输入VPN服务器的IP地址，以便客户端知道要连接到哪里。这是您的树莓派服务器的可达IP地址。以下屏幕截图显示了**新连接**窗口的**常规**选项卡：![使用OpenVPN进行远程访问](img/6435OT_06_22.jpg)
- en: Next, click on the **Authentication** tab. In the drop-down list, select **PKCS12**.
    We have different authentication schemes available, however, if you remember when
    we set up our system, we generated client certificates. We can simply select the
    **PKCS12** certificate and import it directly into our client.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，点击**认证**选项卡。在下拉列表中，选择**PKCS12**。我们有不同的认证方案可用，但是，如果您记得我们设置系统时生成了客户端证书。我们可以简单地选择**PKCS12**证书并将其直接导入到我们的客户端。
- en: Note
  id: totrans-227
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: You will need to go back to your Raspberry Pi and export your client certificate
    so you can import it prior to this step. You can simply save your client certificate
    on a USB drive or e-mail it yourself.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要返回到您的树莓派并导出您的客户端证书，以便在此步骤之前导入它。您可以简单地将客户端证书保存在USB驱动器上或通过电子邮件发送给自己。
- en: 'The following screenshot shows the menu under the **Authentication** tab:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了**认证**选项卡下的菜单：
- en: '![Remote access with OpenVPN](img/6435OT_06_23.jpg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![使用OpenVPN进行远程访问](img/6435OT_06_23.jpg)'
- en: You can now click on **Save**, then right-click on the connection, and click
    **Connect** as shown in the following screenshot:![Remote access with OpenVPN](img/6435OT_06_24.jpg)
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您可以单击**保存**，然后右键单击连接，并单击**连接**，如下图所示：![使用OpenVPN进行远程访问](img/6435OT_06_24.jpg)
- en: You are now connected to your OpenVPN server.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已连接到您的OpenVPN服务器。
- en: Tor relays and routers
  id: totrans-233
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Tor中继和路由器
- en: Tor, sometimes known as onion routing, is used for anonymous access to the Internet
    by using a system of volunteer nodes and services to route and mask traffic. Using
    Tor makes it difficult to track Internet usage. This is ideal when you want to
    defend against unwanted traffic analysis that can be used to violate your privacy.
    Detailed information around Tor can be found at [https://www.torproject.org/](https://www.torproject.org/).
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: Tor，有时被称为洋葱路由，用于通过一系列志愿节点和服务进行路由和伪装流量的匿名访问互联网。使用Tor可以使跟踪互联网使用变得困难。当您想要防御可能用于侵犯您的隐私的不必要的流量分析时，这是理想的选择。有关Tor的详细信息可以在[https://www.torproject.org/](https://www.torproject.org/)找到。
- en: 'A Tor relay works by randomly selecting systems to use as a path to communicate
    from one point to another. Endpoints access the Tor network by using special software
    that pushes traffic through the Tor network. The following diagram shows how two
    systems might use different paths to communicate back and forth on a Tor network:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: Tor中继通过随机选择系统来用作通信的路径。端点通过使用特殊软件访问Tor网络，将流量推送到Tor网络中。以下图表显示了两个系统如何在Tor网络上来回通信的不同路径：
- en: '![Tor relays and routers](img/6435OT_06_25.jpg)'
  id: totrans-236
  prefs: []
  type: TYPE_IMG
  zh: '![Tor中继和路由器](img/6435OT_06_25.jpg)'
- en: The Raspberry Pi can be configured as a Tor node and Tor router. A Tor node
    acts as a system passing through other users' traffic, meaning it is part of the
    Tor network helping other people remain anonymous while they access the Internet.
    A Tor router acts as an entry point for an internal network into the Tor network,
    so all devices surfing through the router will have their traffic randomized through
    the Tor network. A Tor router replaces the need for every user to run the special
    Tor software to access the Tor network, since all traffic is routed through Tor
    by the router.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派可以配置为Tor节点和Tor路由器。Tor节点充当通过其他用户流量的系统，这意味着它是Tor网络的一部分，帮助其他人在访问互联网时保持匿名。Tor路由器充当内部网络进入Tor网络的入口点，因此通过路由器上网的所有设备的流量都将通过Tor网络进行随机化。Tor路由器取代了每个用户都运行特殊的Tor软件来访问Tor网络的需要，因为所有流量都通过路由器路由到Tor。
- en: Let's look at how to turn a Raspberry Pi into a Tor node and Tor router.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何将树莓派变成Tor节点和Tor路由器。
- en: Raspberry Tor
  id: totrans-239
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 树莓派Tor
- en: You can turn your Raspberry Pi running Kali Linux into a Tor node so that you
    can take part in the Tor project.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以将运行Kali Linux的树莓派变成Tor节点，以便参与Tor项目。
- en: Note
  id: totrans-241
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Running a TOR node might have legal or ethical constraints and requirements.
    We suggest you do your research before running Tor to completely understand what
    it means. Running a TOR node might mean anonymous users will be using your Internet
    connection for possibly malicious or illegal activities. Additionally, with the
    closure of Silk Road 2.0 and other law enforcement arrests, the anonymity of Tor
    has recently been questioned.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 运行TOR节点可能会有法律或道德约束和要求。我们建议您在运行Tor之前进行研究，以完全了解其含义。运行TOR节点可能意味着匿名用户将使用您的互联网连接进行可能的恶意或非法活动。此外，随着丝绸之路2.0的关闭和其他执法逮捕，Tor的匿名性最近受到质疑。
- en: 'If you are going to participate in the Tor network with your Kali Linux Raspberry
    Pi, you will need to do some cleanup work using the following steps:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您打算使用Kali Linux树莓派参与Tor网络，您需要使用以下步骤进行一些清理工作：
- en: First, turn off any excess services or applications running on Raspberry Pi.
    If you are unsure, start with a clean install, or use the Raspbian distribution
    instead.
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，关闭树莓派上运行的任何多余服务或应用程序。如果不确定，请从干净的安装开始，或者改用Raspbian发行版。
- en: Change your `root` password. Use a minimum of twelve alphanumeric characters.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更改您的`root`密码。使用至少十二个字母数字字符。
- en: 'We will install `sudo` packages and add a `tor` username. That way, you don''t
    have to work with the `root` username. We will also update and upgrade our software;
    use the following steps:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将安装`sudo`软件包并添加`tor`用户名。这样，您就不必使用`root`用户名。我们还将更新和升级我们的软件；使用以下步骤：
- en: '[PRE13]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: We will also need to add the `tor` account to the list of `sudoers`. You can
    do this by editing the `/etc/sudoers` file. Type the `sudo visudo` command then
    add the line `tor ALL=(ALL) ALL`.
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还需要将`tor`帐户添加到`sudoers`列表中。您可以通过编辑`/etc/sudoers`文件来实现这一点。输入`sudo visudo`命令，然后添加`tor
    ALL=(ALL) ALL`行。
- en: Note
  id: totrans-249
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The `visudo` command is the traditional and most commonly accepted way to edit
    the list of `sudoers`. However, in some operating systems, this command is not
    available. In those situations, you will need to edit the `sudoers` file directly.
    You might do so with the `vi /etc/sudoers` command.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: '`visudo`命令是编辑`sudoers`列表的传统和最常接受的方式。但是，在某些操作系统中，这个命令是不可用的。在这种情况下，您需要直接编辑`sudoers`文件。您可以使用`vi
    /etc/sudoers`命令来这样做。'
- en: 'The following screenshot shows the `/etc/sudoers` file:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了`/etc/sudoers`文件：
- en: '![Raspberry Tor](img/6435OT_06_26.jpg)'
  id: totrans-252
  prefs: []
  type: TYPE_IMG
  zh: 树莓派Tor
- en: We need to change the default DHCP behavior of Kali Linux to a static address.
    Technically, we could keep a DHCP address, but most likely you will need a static
    address on the device. Type the `ifconfig` command to see your network interfaces.
    You should see something like what's shown in the following screenshot. Write
    this down:![Raspberry Tor](img/6435OT_06_27.jpg)
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要将Kali Linux的默认DHCP行为更改为静态地址。从技术上讲，我们可以保留DHCP地址，但很可能您需要设备上的静态地址。输入`ifconfig`命令以查看您的网络接口。您应该看到类似于下面屏幕截图所示的内容。记下这个：树莓派Tor
- en: You will edit the network interface file. We will use `vi`, but you can use
    your favorite editor. Use the `sudo vi /etc/network/interfaces` command.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 您将编辑网络接口文件。我们将使用`vi`，但您可以使用您喜欢的编辑器。使用`sudo vi /etc/network/interfaces`命令。
- en: 'Look for the line that says something close to `iface eth0 inet dhcp`, as shown
    in the following screenshot:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 查找类似于`iface eth0 inet dhcp`的行，如下面的屏幕截图所示：
- en: '![Raspberry Tor](img/6435OT_06_28.jpg)'
  id: totrans-256
  prefs: []
  type: TYPE_IMG
  zh: 树莓派Tor
- en: 'You will change that line to a static address. In our example, we will change
    to a static IP of `10.0.1.167,` with a subnet mask of `255.255.255.0,` as well
    as default gateway of `10.0.1.1` using the following commands:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 您将把该行更改为静态地址。在我们的示例中，我们将更改为静态IP`10.0.1.167`，子网掩码为`255.255.255.0`，默认网关为`10.0.1.1`，使用以下命令：
- en: '[PRE14]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'The following screenshot shows the launch of the preceding commands:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了上述命令的启动：
- en: '![Raspberry Tor](img/6435OT_06_29.jpg)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: 树莓派Tor
- en: Now, let's install Tor. Type the `sudo apt-get install tor` command. Edit the
    `tor config` file in `/etc/tor/torrc`. You will need to add or change the configuration
    to match the following lines. It is okay if there is excess stuff in the configuration
    file.
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们安装Tor。输入`sudo apt-get install tor`命令。编辑`/etc/tor/torrc`中的`tor config`文件。您需要添加或更改配置以匹配以下行。如果配置文件中有多余的内容，也没关系。
- en: 'Add or change the following to match the configuration:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 添加或更改以下内容以匹配配置：
- en: '[PRE15]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The following screenshot shows the launch of the `sudo apt-get install tor`
    command:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了`sudo apt-get install tor`命令的启动：
- en: '![Raspberry Tor](img/6435OT_06_30.jpg)'
  id: totrans-265
  prefs: []
  type: TYPE_IMG
  zh: 树莓派Tor
- en: You will need to ensure TCP ports 9030 and 9001 are open from your firewall
    to your Raspberry Pi. You will want to make sure that the outside world can contact
    these ports as well. You might need to **Network Address Translate** (**NAT**)
    your Raspberry Pi with a static (or one-to-one) NAT statement. If you have a home
    router, this is sometimes called a **Demilitarized Zone** (**DMZ**) or a Game
    port.
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '您需要确保从防火墙到树莓派的TCP端口9030和9001是打开的。您希望确保外部世界也可以联系到这些端口。您可能需要使用静态（或一对一）NAT语句对树莓派进行**网络地址转换**（**NAT**）。如果您有家用路由器，有时称为**非军事区**（**DMZ**）或游戏端口。 '
- en: Reboot your system.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新启动系统。
- en: Now, start Tor by using the `sudo /etc/init.d/tor restart` command in CLI. Check
    the Tor `log` file to ensure the service has started. The Tor `log` files are
    located in `/var/log/tor/log`. You can view the `log` files by issuing the `less
    /var/log/tor/log` command. Look for the entry **Tor has successfully opened a
    circuit. Looks like client functionality is working**. If you see this, you have
    set up your system correctly.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用CLI中的`sudo /etc/init.d/tor restart`命令启动Tor。检查Tor的`log`文件以确保服务已启动。Tor的`log`文件位于`/var/log/tor/log`中。您可以通过发出`less
    /var/log/tor/log`命令来查看`log`文件。查找条目**Tor has successfully opened a circuit. Looks
    like client functionality is working**。如果看到这个，您已经正确设置了系统。
- en: 'At this point, you will most likely want to use a Tor client to get on the
    Tor network. There are many clients available for a variety of operating systems.
    Here are a few links to help you get started:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，您很可能需要使用Tor客户端来连接Tor网络。有许多客户端适用于各种操作系统。以下是一些帮助您入门的链接：
- en: 'Windows: [https://www.torproject.org/docs/tor-doc-windows.html.en](https://www.torproject.org/docs/tor-doc-windows.html.en)'
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Windows: [https://www.torproject.org/docs/tor-doc-windows.html.en](https://www.torproject.org/docs/tor-doc-windows.html.en)'
- en: 'Linux/Unix/BSD: [https://www.torproject.org/docs/tor-doc-unix.html.en](https://www.torproject.org/docs/tor-doc-unix.html.en)'
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Linux/Unix/BSD: [https://www.torproject.org/docs/tor-doc-unix.html.en](https://www.torproject.org/docs/tor-doc-unix.html.en)'
- en: 'Debian/Ubuntu: [https://www.torproject.org/docs/debian.html.en](https://www.torproject.org/docs/debian.html.en)'
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Debian/Ubuntu: [https://www.torproject.org/docs/debian.html.en](https://www.torproject.org/docs/debian.html.en)'
- en: 'Mac OS X: [https://www.torproject.org/docs/tor-doc-osx.html.en](https://www.torproject.org/docs/tor-doc-osx.html.en)'
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Mac OS X: [https://www.torproject.org/docs/tor-doc-osx.html.en](https://www.torproject.org/docs/tor-doc-osx.html.en)'
- en: 'Android: [https://www.torproject.org/docs/android.html.en](https://www.torproject.org/docs/android.html.en)'
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Android: [https://www.torproject.org/docs/android.html.en](https://www.torproject.org/docs/android.html.en)'
- en: At this point, you have a fully functional Tor relay point and a Tor client
    to access the Tor network. You will not see much when the product is configured,
    besides some information and status messages on the terminal. There are other
    views available that will give you more information on traffic and your node participation
    status as well, which you can toggle through.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一点上，您已经拥有一个完全功能的Tor中继点和一个Tor客户端，可以访问Tor网络。配置产品时，除了终端上的一些信息和状态消息外，您不会看到太多内容。还有其他可用的视图，可以为您提供有关流量和节点参与状态的更多信息，您可以通过切换查看。
- en: '![Raspberry Tor](img/6435OT_06_31.jpg)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
  zh: '![树莓派Tor](img/6435OT_06_31.jpg)'
- en: The Tor terminal
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: Tor终端
- en: Tor router
  id: totrans-278
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Tor路由器
- en: The previous section explained how Raspberry Tor turns the Raspberry Pi into
    a Tor node. You can connect to the node and be anonymous with your traffic as
    well as other users who are on the Tor network. To connect to a node, you typically
    need to use special software. What if you want to run your entire network through
    Tor so that all traffic coming from your network remains anonymous? This can be
    accomplished by turning a Raspberry Pi into a Tor router.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 前一节解释了树莓派Tor如何将树莓派变成Tor节点。您可以连接到节点，并且您的流量以及其他在Tor网络上的用户都可以匿名。要连接到节点，通常需要使用特殊软件。如果您想通过Tor运行整个网络，以便来自您网络的所有流量保持匿名，该怎么办？这可以通过将树莓派变成Tor路由器来实现。
- en: For example, you can have the Raspberry Pi plug into your outside router and
    broadcast a private SSID that users can connect to and have their traffic filtered
    through the Tor network. This is ideal for setting up a quick mobile hotspot that
    masks all user traffic using Tor.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，您可以让树莓派插入您的外部路由器并广播一个私有SSID，用户可以连接到该SSID，并通过Tor网络过滤其流量。这对于设置一个快速的移动热点非常理想，该热点可以使用Tor掩盖所有用户流量。
- en: 'Let''s look at how to configure a Raspberry Pi into a Tor router using the
    following steps:'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何使用以下步骤将树莓派配置为Tor路由器：
- en: The first step is downloading the latest version of Raspbian from [http://www.raspberrypi.org/downloads/](http://www.raspberrypi.org/downloads/).
    The latest version in our case is `2014-09-09-wheezy-raspbian.img`. You will need
    to unzip the file after you have downloaded it.
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是从[http://www.raspberrypi.org/downloads/](http://www.raspberrypi.org/downloads/)下载Raspbian的最新版本。在我们的情况下，最新版本是`2014-09-09-wheezy-raspbian.img`。下载后，您需要解压该文件。
- en: 'Install the Raspbian image onto a SD (microSD) card you will use in the Raspberry
    Pi. We covered this process in [Chapter 1](ch01.html "Chapter 1. Raspberry Pi
    and Kali Linux Basics"), *Raspberry Pi and Kali Linux Basics*. The command for
    our image is as follows:'
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Raspbian镜像安装到您将在Raspberry Pi上使用的SD（microSD）卡上。我们在[第1章](ch01.html "第1章 树莓派和Kali
    Linux基础")中介绍了这个过程，*树莓派和Kali Linux基础*。我们的镜像命令如下：
- en: '[PRE16]'
  id: totrans-284
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Note
  id: totrans-285
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: You can run any Debain-based Linux system for this project. We prefer using
    Kali Linux, however, the reason we selected Raspbian is because Kali Linux has
    many services that can be exploited if not turned off or properly configured.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以为此项目运行任何基于Debain的Linux系统。我们更喜欢使用Kali Linux，但我们选择Raspbian的原因是因为Kali Linux有许多服务，如果没有关闭或正确配置，就可能被利用。
- en: Boot your Raspberry Pi with the Raspbian image you installed on your microSD.
    The default username and password for Raspbian is `pi` and `raspberry`.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用您在microSD上安装的Raspbian镜像启动您的Raspberry Pi。Raspbian的默认用户名和密码是`pi`和`raspberry`。
- en: When you log in to the GUI desktop, open the terminal application on the desktop.
    Type the `sudo apt-get update` command followed by `sudo apt-get upgrade`.
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当您登录GUI桌面时，在桌面上打开终端应用程序。输入`sudo apt-get update`命令，然后输入`sudo apt-get upgrade`。
- en: You need to install a DHCP server. You will get errors by doing this but ignore
    them. Type the `sudo apt-get install vim tor hostapd isc-dhcp-server` command.
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要安装DHCP服务器。这样做会导致错误，但请忽略它们。输入`sudo apt-get install vim tor hostapd isc-dhcp-server`命令。
- en: Next, you will edit the `/etc/dhcp/dhcpd.conf` file with your favorite editor.
    Open up the `/etc/default/isc-dhcp-server` file and go to the last line. Edit
    the `INTERFACES` line to read `INTERFACES="wlan0"`. Make sure you include the
    quotes with `wlan0` in your configuration.
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您将使用您喜欢的编辑器编辑`/etc/dhcp/dhcpd.conf`文件。打开`/etc/default/isc-dhcp-server`文件并转到最后一行。编辑`INTERFACES`行，使其读取`INTERFACES="wlan0"`。确保在配置中包含带有`wlan0`的引号。
- en: 'You will need to edit the `wlan0` network configuration. Use your favorite
    editor to change the `/etc/network/interfaces` file. Go to the `wlan0` section
    and give it a static IP address. The file should look like the following:'
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要编辑`wlan0`网络配置。使用您喜欢的编辑器更改`/etc/network/interfaces`文件。转到`wlan0`部分并为其提供静态IP地址。文件应如下所示：
- en: '[PRE17]'
  id: totrans-292
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Tip
  id: totrans-293
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Notice that we are commenting out some of the old configurations. It's considered
    best practice is to do this rather than delete them in the event we need to revert
    back.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，我们正在注释掉一些旧的配置。最佳做法是这样做，而不是在需要恢复时删除它们。
- en: Next, we will want to configure the Raspberry Pi with encryption so that our
    wireless network has security. You will need to create a new file called `/etc/hostapd/hostapd.conf`.
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将希望使用加密配置树莓派，以便我们的无线网络具有安全性。您需要创建一个名为`/etc/hostapd/hostapd.conf`的新文件。
- en: Note
  id: totrans-296
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that you will need to ensure your wireless card is compatible with `hostapt.conf`.
    If it is not, you will need to compile your own version or you cannot have wireless
    security. The people at Adafruit have an alternate `hostapd.conf` file that works
    with many other chipsets. You can find it at [http://www.adafruit.com/downloads/adafruit_hostapd.zip](http://www.adafruit.com/downloads/adafruit_hostapd.zip).
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，您需要确保您的无线网卡与`hostapt.conf`兼容。如果不兼容，您将需要编译自己的版本，否则无法实现无线安全。Adafruit的人员有一个与许多其他芯片组兼容的备用`hostapd.conf`文件。您可以在[http://www.adafruit.com/downloads/adafruit_hostapd.zip](http://www.adafruit.com/downloads/adafruit_hostapd.zip)找到它。
- en: 'We will configure our `hostapd.conf` file for WPA2-PSK encryption, SSID of
    DrChaos, and a password of Kali Raspberry. Of course these settings can be changed
    to anything of your liking. Create a file called `/etc/hostapd/hostapd.conf` or
    download it from [http://www.adafruit.com/downloads/adafruit_hostapd.zip](http://www.adafruit.com/downloads/adafruit_hostapd.zip)
    and place it in the `/etc/hostapd` directory. You might need to create the directory
    in the following manner:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将为WPA2-PSK加密、DrChaos的SSID和Kali Raspberry的密码配置我们的`hostapd.conf`文件。当然，这些设置可以根据您的喜好进行更改。创建一个名为`/etc/hostapd/hostapd.conf`的文件，或者从[http://www.adafruit.com/downloads/adafruit_hostapd.zip](http://www.adafruit.com/downloads/adafruit_hostapd.zip)下载并将其放在`/etc/hostapd`目录中。您可能需要以以下方式创建该目录：
- en: '[PRE18]'
  id: totrans-299
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Note
  id: totrans-300
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Go to `/sys/class/net/wlan0/device/driver/module/drivers` to see what driver
    you are using for the first line of the file.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 转到`/sys/class/net/wlan0/device/driver/module/drivers`，查看文件的第一行使用的驱动程序。
- en: Open the `/etc/sysctl.conf` file and remove the comment from the `net.ipv4.ip_forward=1`
    line to make it active.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 打开`/etc/sysctl.conf`文件，并取消`net.ipv4.ip_forward=1`行的注释，使其生效。
- en: 'Turn on IP forwarding by typing the following command:'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过输入以下命令打开IP转发：
- en: '[PRE19]'
  id: totrans-304
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Next, we will add some simple **iptable** rules to NAT and route our data from
    wireless to the Internet.
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将添加一些简单的**iptable**规则，将我们的数据从无线路由到互联网。
- en: Note
  id: totrans-306
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The following iptable rules are extremely relaxed. It is possible that these
    rules might expose the true IP address of the client under certain circumstances.
    If you would like to add an additional layer of security, then skip step 16 (or
    change the echo from `1` back to `0`), and explicitly state which connections
    you will allow.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 以下的iptables规则非常宽松。在某些情况下，这些规则可能会暴露客户端的真实IP地址。如果您想增加额外的安全层，那么跳过第16步（或将echo从`1`改回`0`），并明确说明您将允许哪些连接。
- en: 'Add the following commands in iptables:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 在iptables中添加以下命令：
- en: '[PRE20]'
  id: totrans-309
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The following screenshot shows our data being routed with `iptables`:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的屏幕截图显示我们的数据通过`iptables`进行路由：
- en: '![Tor router](img/6435OT_06_32.jpg)'
  id: totrans-311
  prefs: []
  type: TYPE_IMG
  zh: '![Tor路由器](img/6435OT_06_32.jpg)'
- en: 'Next, you need to edit the `/etc/tor/torrc` file in the following manner:'
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您需要以以下方式编辑`/etc/tor/torrc`文件：
- en: '[PRE21]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: You can now plug in your wired connection on the Raspberry Pi to the Internet.
    At this point, your wireless users will be able to connect the DrChaos SSID using
    the password of Kali Raspberry to connect. All traffic will be funneled through
    the Tor network.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您可以将树莓派上的有线连接插入到互联网中。此时，您的无线用户将能够连接到DrChaos SSID，使用Kali Raspberry的密码进行连接。所有流量将通过Tor网络进行传输。
- en: 'Open up a web browser and go to [https://check.torproject.org/](https://check.torproject.org/),
    and you will get a message showing whether you are on Tor or not as shown in the
    following screenshot:'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 打开一个网页浏览器，转到[https://check.torproject.org/](https://check.torproject.org/)，你将收到一条消息，显示你是否在Tor网络上，如下面的屏幕截图所示：
- en: '![Tor router](img/6435OT_06_33.jpg)'
  id: totrans-316
  prefs: []
  type: TYPE_IMG
  zh: '![Tor路由器](img/6435OT_06_33.jpg)'
- en: Running Raspberry Pi on your PC with QEMU emulator
  id: totrans-317
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在PC上使用QEMU模拟器运行树莓派
- en: You probably noticed a mixture of pictures and screenshots in this book. That
    is because when we were writing this book, we had to constantly change to different
    operating systems, take screenshots, test different adapters, and install various
    software programs. In some cases, we used SSH from a PC into the Raspberry Pi
    while in other cases, we used a X-Windows client. Sometimes, we even just took
    a picture of the screen with a camera since the Raspberry Pi's output was on a
    monitor that didn't offer screen captures. With all of these changes being considered,
    one tool we found invaluable was QEMU.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能已经注意到这本书中有各种图片和屏幕截图。这是因为在写这本书时，我们不断地改变不同的操作系统，拍摄屏幕截图，测试不同的适配器，并安装各种软件程序。在某些情况下，我们从PC远程登录到树莓派，而在其他情况下，我们使用了X-Windows客户端。有时，我们甚至用相机拍摄屏幕的照片，因为树莓派的输出显示在一个不提供屏幕截图的显示器上。在考虑到所有这些变化的情况下，我们发现QEMU是一个非常有价值的工具。
- en: '**Quick EMUlator** (**QEMU**) is an emulator that lets you mimic many different
    processors and load many different operating systems. We mimicked the ARM-based
    processor in the Raspberry Pi and were successfully able to load and run multiple
    operating systems just like we would have done on a real Raspberry Pi. Emulation
    is not without its problems. Sometimes, operating systems would not load or would
    have performance issues, crash, stop working, and so on, even when they had absolutely
    no issues on the real Raspberry Pi hardware. We found that the time saved using
    this application outweighed the problems caused by emulation.'
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: '**Quick EMUlator** (**QEMU**)是一个模拟器，可以模拟许多不同的处理器和加载许多不同的操作系统。我们模拟了树莓派中基于ARM的处理器，并成功地加载和运行了多个操作系统，就像在真正的树莓派上一样。模拟并非没有问题。有时，即使在真正的树莓派硬件上完全没有问题，操作系统也可能无法加载或出现性能问题、崩溃、停止工作等。我们发现，使用这个应用程序节省的时间超过了模拟带来的问题。'
- en: 'Let''s look at how to install QEMU emulator using the following steps:'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何使用以下步骤安装QEMU模拟器：
- en: The first step is going to [http://qemu.weilnetz.de/](http://qemu.weilnetz.de/)
    and downloading QEMU emulator for Windows, as shown in the following screenshot:![Running
    Raspberry Pi on your PC with QEMU emulator](img/6435OT_06_34.jpg)
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是前往[http://qemu.weilnetz.de/](http://qemu.weilnetz.de/)并下载Windows版的QEMU模拟器，如下面的屏幕截图所示：![在PC上使用QEMU模拟器运行树莓派](img/6435OT_06_34.jpg)
- en: There is also a Linux version available as well as a Mac OS X port using Homebrew
    and XTools where you can achieve the same thing. We will showcase the PC version
    for our next example. We found the Windows version the easiest to install, Linux
    version the most reliable, and Mac version a little difficult to work with and
    get installed correctly. Your mileage may vary.
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一个Linux版本，以及使用Homebrew和XTools的Mac OS X版本，可以实现相同的功能。我们将展示PC版本作为下一个示例。我们发现Windows版本最容易安装，Linux版本最可靠，Mac版本有点难以使用和正确安装。你的情况可能有所不同。
- en: Select the appropriate version (64-bit or 32-bit). After you download the correct
    version, run the `install exe` file. You will see that in most cases, the PC (i386)
    system emulation is not selected. Ensure you select this option. Note the default
    installation directory for QEMU. In most cases, it is `C:\Program Files\qemu`.
    *Do not change it*.
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择适当的版本（64位或32位）。下载正确的版本后，运行`install exe`文件。你会发现在大多数情况下，PC（i386）系统仿真没有被选中。确保你选择了这个选项。注意QEMU的默认安装目录。在大多数情况下，它是`C:\Program
    Files\qemu`。*不要改变它*。
- en: If you have not already downloaded the appropriate Raspberry image, you should
    do it now. Once again, you can use the Kali Linux ARM image, or you can download
    any compatible image. We will use the Raspbian operating system that can be downloaded
    at [http://www.raspberrypi.org/downloads/](http://www.raspberrypi.org/downloads/).
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你还没有下载适当的树莓派镜像，现在应该去做。你可以使用Kali Linux ARM镜像，或者你可以下载任何兼容的镜像。我们将使用可以在[http://www.raspberrypi.org/downloads/](http://www.raspberrypi.org/downloads/)下载的Raspbian操作系统。
- en: Next, you will need to download the Linux QEMU `kernel` file. You can do so
    by going to [http://xecdesign.com/downloads/linux-qemu/kernel-qemu](http://xecdesign.com/downloads/linux-qemu/kernel-qemu).
    Once you have downloaded the kernel, place it in the same directory as the QEMU
    folder you just unzipped.
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，你需要下载Linux QEMU的`kernel`文件。你可以通过访问[http://xecdesign.com/downloads/linux-qemu/kernel-qemu](http://xecdesign.com/downloads/linux-qemu/kernel-qemu)来下载。一旦你下载了内核，将它放在刚刚解压的QEMU文件夹的同一个目录中。
- en: After you have unzipped the IMG file and placed it in the same directory as
    QEMU, you need to run it. Go to the DOS prompt and navigate to `c:\Program Files\qemu`.
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在解压IMG文件并将其放在与QEMU相同的目录之后，你需要运行它。转到DOS提示符并导航到`c:\Program Files\qemu`。
- en: 'You will launch the Raspbian image system (or any Raspberry Pi image system)
    with the following command:'
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将使用以下命令启动Raspbian镜像系统（或任何树莓派镜像系统）：
- en: '[PRE22]'
  id: totrans-328
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Note
  id: totrans-329
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that `qemu-system-armw.exe` is used for Windows environments. All other
    environments will use `qemu-system-arm.exe`. The last command loads the operating
    system. Use the exact name of the uncompressed operating system you put in the
    same folder as QEMU. It can take several minutes for QEMU to start after you give
    the command. There have been reports that QEMU does not work well with Windows
    8/8.1 or Mac OS X Yosemite (10.10).
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，`qemu-system-armw.exe`用于Windows环境。所有其他环境将使用`qemu-system-arm.exe`。最后一个命令加载操作系统。使用你放在与QEMU相同文件夹中的未压缩操作系统的确切名称。在你给出命令后，QEMU启动可能需要几分钟。有报道称，QEMU在Windows
    8/8.1或Mac OS X Yosemite（10.10）上工作不好。
- en: The first part of the command launches the emulator for the specific processor.
    The second part of the command specifies the disk image file. Notice, we renamed
    the image from `2014-09-09-wheezy-raspbian.img` to `raspbian.img` just to make
    life easier for us. Do not forget to use your extensions when specifying to QEMU
    what to launch.![Running Raspberry Pi on your PC with QEMU emulator](img/6435OT_06_35.jpg)
  id: totrans-331
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 命令的第一部分启动了特定处理器的仿真器。命令的第二部分指定了磁盘映像文件。注意，我们将镜像从`2014-09-09-wheezy-raspbian.img`重命名为`raspbian.img`，只是为了让我们的生活更轻松。在指定要启动的内容时，不要忘记使用你的扩展名。![在PC上使用QEMU仿真器运行树莓派](img/6435OT_06_35.jpg)
- en: Launch of QEMU
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 启动QEMU
- en: Your Raspberry Pi operating system (in our case Raspbian) will boot up in a
    QEMU window. You can now interact with the operating system and test different
    applications and tools. Furthermore, the QEMU documentation has advanced configuration
    options for networking between multiple emulators, mapping to physical hardware
    devices, and other advanced configurations. In most cases, the emulator will work
    perfectly to test typical applications and connectivity.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 你的树莓派操作系统（在我们的例子中是Raspbian）将在一个QEMU窗口中启动。你现在可以与操作系统交互并测试不同的应用程序和工具。此外，QEMU文档还有关于多个仿真器之间的网络高级配置选项，映射到物理硬件设备以及其他高级配置。在大多数情况下，仿真器将完美地工作来测试典型的应用程序和连接。
- en: Other Raspberry Pi uses
  id: totrans-334
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他树莓派用途
- en: This book focused on using the Raspberry Pi as a means of delivery penetration
    testing capabilities. There are a ton of other use cases beyond hacking such as
    preventing attacks, or on a less serious note, playing games. Check out the main
    Raspberry Pi website located at [http://www.raspberrypi.org/](http://www.raspberrypi.org/)
    for more information.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书侧重于使用树莓派作为交付渗透测试能力的手段。除了黑客攻击之外，还有很多其他用例，比如防止攻击，或者更不严肃地玩游戏。查看位于[http://www.raspberrypi.org/](http://www.raspberrypi.org/)的主要树莓派网站获取更多信息。
- en: Here are some other software options we found beneficial for the Raspberry Pi.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们发现对树莓派有益的一些其他软件选项。
- en: Flight tracking using PiAware
  id: totrans-337
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用PiAware进行飞行跟踪
- en: You can use your Raspberry Pi along with FlightAware ([www.flightaware.com](http://www.flightaware.com))
    to build an **Automatic Dependent Surveillance-Broadcast** (**ADS-B**) system.
    ADS–B is a cooperative aircraft surveillance technology used by air traffic control
    agencies all over the world that determines the position of aircrafts reported
    by satellite and other navigation systems. Aircrafts periodically broadcast their
    ADS–B location enabling it to be tracked.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用你的树莓派和FlightAware（[www.flightaware.com](http://www.flightaware.com)）来构建一个**自动相关监视广播**（**ADS-B**）系统。ADS-B是一种合作飞机监视技术，由世界各地的空中交通管制机构使用，它通过卫星和其他导航系统确定飞机的位置。飞机定期广播它们的ADS-B位置，使其可以被跟踪。
- en: 'FlightAware has a large number of its own receivers, but invites aviation hobbyists
    to track airline data and help FlightAware process it, so it may be used on their
    website for the entire community. PiAware is the tool that helps turn your Raspberry
    Pi into a radar-tracking system that can be used by FlightAware. The following
    image shows a Raspberry Pi built for this purpose:'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: FlightAware拥有大量自己的接收器，但邀请航空爱好者跟踪航空公司数据并帮助FlightAware处理数据，以便可以在他们的网站上为整个社区使用。PiAware是一个工具，可以将你的树莓派变成一个雷达跟踪系统，FlightAware可以使用。下面的图片显示了一个为此目的而构建的树莓派：
- en: '![Flight tracking using PiAware](img/6435OT_06_36.jpg)'
  id: totrans-340
  prefs: []
  type: TYPE_IMG
  zh: '![使用PiAware进行飞行跟踪](img/6435OT_06_36.jpg)'
- en: To kick off this project, you need to download the PiAware operating system
    and install it on your Raspberry Pi. Refer to [Chapter 1](ch01.html "Chapter 1. Raspberry
    Pi and Kali Linux Basics"), *Raspberry Pi and Kali Linux Basics* of this book
    on how to install operating systems on a microSD card for your Raspberry Pi. PiAware
    can be found at [http://piaware.flightcdn.com/piaware-sd-card-1.16.img.zip](http://piaware.flightcdn.com/piaware-sd-card-1.16.img.zip).
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始这个项目，你需要下载PiAware操作系统并安装到你的树莓派上。请参考本书的[第1章](ch01.html "第1章. 树莓派和Kali Linux基础")，*树莓派和Kali
    Linux基础*，了解如何在树莓派的microSD卡上安装操作系统。PiAware可以在[http://piaware.flightcdn.com/piaware-sd-card-1.16.img.zip](http://piaware.flightcdn.com/piaware-sd-card-1.16.img.zip)找到。
- en: 'After you have booted your Raspberry Pi with the PiAware operating system,
    you will need to plug in your ADS-B USB receiver to your Raspberry Pi. We recommend
    the NooElec NESDR Mini USB RTL-SDR & ADS-B Receiver Set, which can be purchased
    in the United States for approximately $22\. The following image shows the NooElec
    NESDR Mini:'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用PiAware操作系统启动树莓派后，你需要将ADS-B USB接收器插入树莓派。我们推荐在美国购买价格约为22美元的NooElec NESDR Mini
    USB RTL-SDR & ADS-B接收器套装。以下图片显示了NooElec NESDR Mini：
- en: '![Flight tracking using PiAware](img/6435OT_06_37.jpg)'
  id: totrans-343
  prefs: []
  type: TYPE_IMG
  zh: '![使用PiAware进行飞行跟踪](img/6435OT_06_37.jpg)'
- en: Aircraft signals are not meant to pass through buildings so you should put your
    antenna outside and in the line of sight for aircrafts to get the best signal.
    You will need to sign up for a free FlightAware account at [http://flightaware.com/account/join/?referer=/account/join/](http://flightaware.com/account/join/?referer=/account/join/).
    Your data will be processed by FlightAware and will be viewable after 30 minutes
    at [http://flightaware.com/adsb/stats](http://flightaware.com/adsb/stats).
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 飞机信号不应通过建筑物传递，所以你应该把天线放在室外，以便飞机能够获得最佳信号的视线范围内。你需要在[http://flightaware.com/account/join/?referer=/account/join/](http://flightaware.com/account/join/?referer=/account/join/)注册一个免费的FlightAware账户。你的数据将由FlightAware处理，并在30分钟后可以在[http://flightaware.com/adsb/stats](http://flightaware.com/adsb/stats)上查看。
- en: Congratulations, you now have a working system!
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜，你现在有一个可用的系统！
- en: '![Flight tracking using PiAware](img/6435OT_06_38.jpg)'
  id: totrans-346
  prefs: []
  type: TYPE_IMG
  zh: '![使用PiAware进行飞行跟踪](img/6435OT_06_38.jpg)'
- en: A fully operational flight tracker
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 一个完全可操作的飞行跟踪器
- en: PiPlay
  id: totrans-348
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: PiPlay
- en: This book focuses on penetration testing and other security needs, however,
    we thought to add a cool ARM image that turns your Raspberry Pi into a gaming
    system. This includes emulators of many popular gaming systems such as PlayStation,
    Game Boy, **Super Nintendo Entertainment System** (**SNES**), NES, Atari, and
    so on. You can find more at [http://blog.sheasilverman.com/pimame-raspberry-pi-os-download/](http://blog.sheasilverman.com/pimame-raspberry-pi-os-download/).
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 本书侧重于渗透测试和其他安全需求，但我们想添加一个很酷的ARM镜像，将你的树莓派变成一个游戏系统。这包括许多流行游戏系统的模拟器，如PlayStation、Game
    Boy、**超级任天堂娱乐系统**（**SNES**）、NES、Atari等。你可以在[http://blog.sheasilverman.com/pimame-raspberry-pi-os-download/](http://blog.sheasilverman.com/pimame-raspberry-pi-os-download/)找到更多信息。
- en: 'To install PiPlay, use the same process as for Kali Linux. For example, I used
    `sudo dd if=piplay-0.8-beta6.img of=/dev/disk2` to install the 0.8 beta image
    on my microSD card found on the `disk2` space. Once installed, you have to just
    power up the Raspberry Pi with the installed **PiPlay** image and it should boot
    up to the main GUI, as shown in the following screenshot:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装PiPlay，使用与Kali Linux相同的过程。例如，我使用`sudo dd if=piplay-0.8-beta6.img of=/dev/disk2`来在我的microSD卡上的`disk2`空间安装0.8测试版镜像。安装完成后，你只需启动安装了**PiPlay**镜像的树莓派，它应该会启动到主GUI，如下截图所示：
- en: '![PiPlay](img/6435OT_06_39.jpg)'
  id: totrans-351
  prefs: []
  type: TYPE_IMG
  zh: '![PiPlay](img/6435OT_06_39.jpg)'
- en: 'If you click the arrow, you will find additional menu options for other gaming
    systems and configuration options. The following screenshot shows the second menu:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你点击箭头，你会找到其他游戏系统和配置选项的附加菜单选项。以下截图显示了第二个菜单：
- en: '![PiPlay](img/6435OT_06_40.jpg)'
  id: totrans-353
  prefs: []
  type: TYPE_IMG
  zh: '![PiPlay](img/6435OT_06_40.jpg)'
- en: The first thing you will want to do once PiPlay is up is look for updates. You
    do this by clicking the large arrows in the menu to the third screen that shows
    the **Update PiPlay** option. You must be online to do this so you can either
    plug in a Ethernet cable, or use the **Setup Wireless** button to establish a
    wireless connection prior to looking for updates. If you are online, you will
    see your IP address in the top right-hand corner of the main menu. The following
    screenshot shows the third menu screen and my PiPlay connected to the Internet
    represented by an IP address in the top right-hand corner. The previous screenshots
    displayed **No Network Connection** in this spot.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦PiPlay启动，你会想要做的第一件事就是寻找更新。你可以通过点击菜单中的大箭头到显示**更新PiPlay**选项的第三个屏幕来做到这一点。你必须在线才能这样做，所以你可以插入以太网电缆，或者使用**设置无线**按钮在寻找更新之前建立无线连接。如果你在线，你会在主菜单的右上角看到你的IP地址。以下截图显示了第三个菜单屏幕和我的PiPlay连接到互联网，右上角显示IP地址。之前的截图在这个位置显示**无网络连接**。
- en: '![PiPlay](img/6435OT_06_41.jpg)'
  id: totrans-355
  prefs: []
  type: TYPE_IMG
  zh: '![PiPlay](img/6435OT_06_41.jpg)'
- en: If you click on an operating system such as SNES, you will notice you don't
    have any games. You can find tons of game files in the ROM format online.
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你点击像SNES这样的操作系统，你会发现你没有任何游戏。你可以在网上找到大量的ROM格式的游戏文件。
- en: Note
  id: totrans-357
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Downloading ROMs or making backup copies might violate copyright or other laws.
    There are many sources of ROMs, some of them are original games created by the
    authors, which are distributed at no cost or at a nominal charge. Copies of ROMs
    are usually distributed through websites, usenet newsgroups, and peer-to-peer
    type networks.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 下载ROM或制作备份副本可能会违反版权或其他法律。ROM有许多来源，其中一些是作者创建的原始游戏，可以免费或以名义费用分发。ROM的副本通常通过网站、usenet新闻组和点对点类型的网络分发。
- en: 'PiPlay makes it pretty easy to install ROM with a few scraper applications
    built in. That''s all there is to it. Download a ROM, use the scraper app to install
    the ROM, identify the ROM that was added to your system, and you should be good
    to go. The following screenshot shows the start screen of a game called Cave Story
    that comes with the PiPlay installed image:'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: PiPlay使安装ROM变得非常容易，内置了一些刮刀应用程序。就是这样。下载一个ROM，使用刮刀应用程序安装ROM，识别添加到系统中的ROM，然后就可以使用了。以下屏幕截图显示了一个名为Cave
    Story的游戏的启动屏幕，该游戏包含在PiPlay安装的镜像中：
- en: '![PiPlay](img/6435OT_06_42.jpg)'
  id: totrans-360
  prefs: []
  type: TYPE_IMG
  zh: '![PiPlay](img/6435OT_06_42.jpg)'
- en: PrivateEyePi
  id: totrans-361
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: PrivateEyePi
- en: 'PrivateEyePi is a home automation and security system that is open source and
    can take advantage of motion detectors, cameras, heat signatures, infrared, and
    night vision. It can be monitored and managed through a simple web interface or
    customized mobile applications. The following figure shows a detailed description
    of a **Home Monitor** system:'
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: PrivateEyePi是一个家庭自动化和安全系统，是开源的，可以利用运动检测器、摄像头、热签名、红外线和夜视。它可以通过简单的网络界面或定制的移动应用程序进行监控和管理。以下图显示了**Home
    Monitor**系统的详细描述：
- en: '![PrivateEyePi](img/6435OT_06_43.jpg)'
  id: totrans-363
  prefs: []
  type: TYPE_IMG
  zh: '![PrivateEyePi](img/6435OT_06_43.jpg)'
- en: Since the system has many different options and can get overly complicated,
    we won't go into the details on how to configure it. The author by the name of
    Gadjet has documented the entire process, including parts, where to buy them,
    and step-by-step instructions on how to install them at [https://sites.google.com/site/gadjetnut/home/home-alarm-system-project](https://sites.google.com/site/gadjetnut/home/home-alarm-system-project).
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 由于系统有许多不同的选项，可能会变得过于复杂，我们不会详细介绍如何配置它。名为Gadjet的作者已经记录了整个过程，包括零件、在哪里购买以及如何一步一步地安装它们的说明，网址为[https://sites.google.com/site/gadjetnut/home/home-alarm-system-project](https://sites.google.com/site/gadjetnut/home/home-alarm-system-project)。
- en: 'The following figure shows an alarm triggered by the **Home Monitor** system:'
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图显示了由**Home Monitor**系统触发的警报：
- en: '![PrivateEyePi](img/6435OT_06_44.jpg)'
  id: totrans-366
  prefs: []
  type: TYPE_IMG
  zh: '![PrivateEyePi](img/6435OT_06_44.jpg)'
- en: Some basic low-level voltage experience is needed to build all the parts, or
    you can purchase many of them that are prebuilt. We did hear a few concerns about
    this project. These concerns mainly centered on how reliable this would be as
    a security system and whether the economics made sense, since basic alarm systems
    would cost around the same price. However, we believe this could be great as a
    team, classroom, or hobby project. Furthermore, the customization and options
    to expand the system can potentially be much greater than anything that is available
    from a major commercial vendor.
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 构建所有部件需要一些基本的低电压经验，或者你可以购买许多预先构建好的部件。我们听到了一些关于这个项目的担忧。这些担忧主要集中在这作为一个安全系统的可靠性以及经济是否合理，因为基本的报警系统成本大约相同。然而，我们相信这可能是一个很好的团队、课堂或者业余项目。此外，定制和扩展系统的选项可能比任何主要商业供应商提供的任何东西都要多。
- en: More uses
  id: totrans-368
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多用途
- en: There are a ton of other uses of the Raspberry Pi, well beyond security that
    we did not touch upon. Some of our favorites include **OpenELEC** (short for **Open
    Embedded Linux Entertainment Center**) that can turn your Raspberry Pi into a
    home media hub. Other uses include building motion sensors, an earthquake detector,
    a gas detector, and many other things. We hope by concluding this chapter, you
    will be inspired to use your Raspberry Pi in new and productive ways.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派有许多其他用途，远远超出了我们没有涉及的安全范围。我们最喜欢的一些用途包括**OpenELEC**（**Open Embedded Linux Entertainment
    Center**的缩写），可以将您的树莓派变成家庭媒体中心。其他用途包括构建运动传感器、地震检测器、气体检测器等等。我们希望通过结束本章，你会受到启发，以新的、有益的方式使用你的树莓派。
- en: Summary
  id: totrans-370
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: This last chapter provided additional tools and use cases for using a Raspberry
    Pi. We briefly covered some alternative penetration testing arsenals to Kali Linux,
    but believe Kali Linux should see the most innovation based on its popularity
    in the IT community. We also touched upon ARM images that can be used for defensive
    purposes such as firewalls, IPS/IDS, and VPN. We closed with some fun ARM images
    that are not necessarily security-related, but cool regardless.
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 本章提供了使用树莓派的其他工具和用例。我们简要介绍了一些替代Kali Linux的渗透测试武器库，但认为Kali Linux应该基于其在IT社区中的流行度而进行最多的创新。我们还提到了可以用于防御目的的ARM镜像，如防火墙、IPS/IDS和VPN。最后，我们介绍了一些有趣的ARM镜像，虽然不一定与安全相关，但无论如何都很酷。
- en: 'This wraps up this book. Hopefully, you enjoyed reading it. We would love to
    hear from you. Feel free to reach us on our respective blogs and share your thoughts.
    Aamir Lakhani can be reached at [www.drchaos.com](http://www.drchaos.com) and
    Joseph Muniz can be reached at [www.thesecurityblogger.com](http://www.thesecurityblogger.com).
    We had a ton of fun working through the topics covered and wish you the best with
    your Raspberry Pi experience. That includes those looking to do good or evil with
    this new knowledge. Aamir really wanted to close with the Spiderman quote about
    responsibility. So against Joseph''s suggestion, here it is: "With great power
    comes great responsibility". Have fun and happy hacking!'
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 这就结束了这本书。希望你喜欢阅读。我们很乐意听到你的想法。欢迎访问我们各自的博客并分享你的想法。Aamir Lakhani的网址是[www.drchaos.com](http://www.drchaos.com)，Joseph
    Muniz的网址是[www.thesecurityblogger.com](http://www.thesecurityblogger.com)。我们非常享受讨论的主题，并祝愿你在使用树莓派的经历中一切顺利。这包括那些希望运用这些新知识做好事或者做坏事的人。Aamir真的很想用蜘蛛侠的责任报告结束。所以尽管Joseph建议不要，这里还是有："伟大的力量带来伟大的责任"。玩得开心，愉快的黑客活动！
