- en: '*Chapter 1*: Building Your AWS Environment'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第1章*：构建您的AWS环境'
- en: '**Amazon Web Services** (**AWS**) is a growing cloud technology provider that
    many companies use to help house their data. Originating from Seattle, Washington
    in late 2006, AWS is steadily becoming the most prominent service provider. Due
    to its usability and its user-friendly interfaces, AWS is used by over 800,000
    companies and makes up 65% or more of the cloud infrastructure space. Some of
    its better-known services, such as S3, Lambda, and EC2 will be frequently talked
    about through this book and are services that are commonly used in the real world.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**亚马逊网络服务**（**AWS**）是一个不断发展的云技术提供商，许多公司使用它来帮助存储他们的数据。AWS起源于2006年底的华盛顿西雅图，正逐渐成为最重要的服务提供商。由于其易用性和用户友好的界面，AWS被超过80万家公司使用，占据了65%或更多的云基础设施空间。本书将经常讨论一些较为知名的服务，如S3、Lambda和EC2，并且这些服务在现实世界中被广泛使用。'
- en: This chapter is going to go over the basics of AWS and will walk through setting
    up an AWS account. It's important that we learn the basics of getting our AWS
    account configured and ready so that there isn't any additional housekeeping needed
    after setting up an account. After setting up an account, we'll walk through and
    set up a few EC2 instances with various flavors of operating systems, and look
    at vulnerable services within those operating systems. It's encouraged that, after
    completing the chapter, you look at building out more EC2 instances with other
    operating systems for your environment.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将介绍AWS的基础知识，并指导您设置AWS账户。我们学习如何配置和准备AWS账户的基础知识非常重要，这样在设置账户后就不需要进行额外的管理。设置账户后，我们将设置几个具有不同操作系统版本的EC2实例，并查看这些操作系统中的易受攻击的服务。鼓励您在完成本章后，查看如何在您的环境中构建更多的EC2实例，使用其他操作系统。
- en: 'In this chapter, we''ll explore AWS through the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将通过以下主题探索AWS：
- en: Exploring Amazon Web Services
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 探索亚马逊网络服务
- en: Understanding the testing environment
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解测试环境
- en: Configuring the environment
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置环境
- en: Exploring vulnerable services
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 探索易受攻击的服务
- en: Attacking vulnerabilities
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻击漏洞
- en: The AWS Command Line Interface
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AWS命令行界面
- en: Technical requirements
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To follow along with the instructions in this chapter, you will need the following:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 要按照本章的说明进行操作，您需要以下内容：
- en: A browser of your choice (Chrome, Firefox, Edge)
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您选择的浏览器（Chrome，Firefox，Edge）
- en: 'PuTTY: [https://www.chiark.greenend.org.uk/~sgtatham/putty/](https://www.chiark.greenend.org.uk/~sgtatham/putty/)
    (installation steps are covered in the *Connecting with PuTTY* section).'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'PuTTY: [https://www.chiark.greenend.org.uk/~sgtatham/putty/](https://www.chiark.greenend.org.uk/~sgtatham/putty/)（安装步骤在*使用PuTTY连接*部分有介绍）。'
- en: 'Check out the following video to see the Code in Action: [https://bit.ly/3kPrVkh](https://bit.ly/3kPrVkh)'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 查看以下视频以查看代码的实际操作：[https://bit.ly/3kPrVkh](https://bit.ly/3kPrVkh)
- en: Exploring Amazon Web Services (AWS)
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索亚马逊网络服务（AWS）
- en: AWS is a cloud service provided by Seattle tech company, Amazon. AWS's comprehensive
    and easy-to-use setup makes it very attractive to small start-ups and large corporations.
    It works by allowing companies and businesses to set up their infrastructure off-premises
    and within the physical resources of Amazon. This type of service, called **Infrastructure
    as a Service**, delivers cloud computing as a whole service. You will see more
    of how easy it is to automate and build in AWS as we set up our lab throughout
    this book. However, you'll also notice some issues that may commonly be overlooked,
    such as security.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: AWS是由西雅图科技公司亚马逊提供的云服务。AWS全面而易于设置，非常受小型初创公司和大型企业的青睐。它通过允许公司和企业在亚马逊的物理资源之外设置他们的基础设施来运作。这种服务称为**基础设施即服务**，它将云计算作为一个整体服务交付。随着我们在本书中设置我们的实验室，您将看到在AWS中自动化和构建是多么容易。然而，您也会注意到一些可能经常被忽视的问题，比如安全性。
- en: AWS doesn't take full responsibility for companies' data and security. In fact,
    Amazon has put out a *shared responsibility model* that ensures that both parties
    understand their rights and responsibilities in terms of customers' data. After
    all, Amazon is a company that is known as *customer-obsessed*.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: AWS并不完全对公司的数据和安全负责。事实上，亚马逊发布了一个*共享责任模型*，确保双方了解他们在客户数据方面的权利和责任。毕竟，亚马逊是一个以“以客户为中心”而闻名的公司。
- en: AWS security and penetration testing
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: AWS安全和渗透测试
- en: As you read through this book, you'll be exposed to some different concepts
    that may not have been discussed before. The reason for this is due to AWS pentesting
    being a relatively new subject that is gaining popularity in the security space
    of information technology. The good thing about this is it allows subject matter
    experts to lend a hand in helping to create a pentesting culture around AWS and
    provides newer ideas for how penetration testing is executed in both AWS and system
    security.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 当您阅读本书时，您将接触到一些以前可能没有讨论过的不同概念。这是因为AWS渗透测试是一个相对新的主题，在信息技术安全领域越来越受欢迎。这件好事是它允许主题专家帮助创建围绕AWS的渗透测试文化，并为在AWS和系统安全中执行渗透测试提供新的想法。
- en: Next, you're going to dive into AWS and create an account of your very own.
    After that, we'll get started by creating our own cloud pentest playground where
    we will set up a vulnerable host that can be tested later on.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，您将深入了解AWS，并创建自己的账户。之后，我们将开始创建我们自己的云渗透测试游乐场，我们将在其中设置一个易受攻击的主机，以便以后进行测试。
- en: Understanding our testing environment
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解我们的测试环境
- en: It's essential to understand all the systems we are going to be deploying and
    their use in this book. Building a lab benefits security research because it allows
    you to perform the same tactics and techniques that real hackers would execute,
    without having to worry about breaking any laws. For our lab, we will be setting
    up various hosts that mimic real-life systems that you would see incorporated
    into businesses. The only difference is we will be using some much older versions
    of software and operating systems. The purpose of using older systems is because
    they typically are much more vulnerable than their up-to-date, newer versions,
    making learning pentesting much easier – and fun!
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 了解我们将要部署的所有系统及其在本书中的用途至关重要。构建实验室有助于安全研究，因为它允许您执行与真正黑客相同的策略和技术，而无需担心违反任何法律。对于我们的实验室，我们将设置各种主机，模拟您在企业中看到的真实系统。唯一的区别是我们将使用一些较旧版本的软件和操作系统。使用较旧的系统的目的是因为它们通常比最新版本更容易受到攻击，这样学习渗透测试就更容易
    - 也更有趣！
- en: We want to ensure that we learn a little bit of everything, so we will be using
    both Windows- and Unix-based operating systems. These systems are built drastically
    differently but are systems that you will face in real-life pentesting situations.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望确保我们学习一点点所有内容，因此我们将使用基于Windows和Unix的操作系统。这些系统构建方式大不相同，但是在现实的渗透测试情况下，您将会遇到这些系统。
- en: Additionally, we will be using an operating system called "Kali Linux" as our
    hacking operating system. Kali Linux is a very popular hacking operating system
    used in the pentesting community, primarily due to its coming preinstalled with
    various hacking tool suites and being maintained by offensive security.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们将使用一个名为“Kali Linux”的操作系统作为我们的黑客操作系统。Kali Linux是一个非常受欢迎的黑客操作系统，主要用于渗透测试社区，主要是因为它预装了各种黑客工具套件，并由攻击性安全维护。
- en: Configuring your environment
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置您的环境
- en: Configuring your environment is the most important task of this book. Without
    it, you won't have anything to test your skills! Building out an environment will
    teach you how to configure instances, add resources to them, and connect to them.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 配置您的环境是本书中最重要的任务。没有它，您将无法测试您的技能！构建环境将教会您如何配置实例，向其添加资源，并连接到它们。
- en: Setting up an account
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置账户
- en: 'To begin the process of creating your own AWS account, follow these steps:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始创建自己的AWS账户，请按照以下步骤进行：
- en: Please open a browser of your choice and go to the AWS home page located at
    [https://aws.amazon.com/](https://aws.amazon.com/).
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请打开您选择的浏览器，并转到位于[https://aws.amazon.com/](https://aws.amazon.com/)的AWS首页。
- en: 'You will be greeted with a landing page and will see a button titled **Create
    a Free Account**. Simply click on **Create a Free Account** to get started with
    creating your profile:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 您将被迎接一个登陆页面，并会看到一个名为**创建免费账户**的按钮。只需点击**创建免费账户**开始创建您的个人资料：
- en: '![Figure 1.1 – AWS account creation'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.1 – AWS账户创建'
- en: '](img/Figure_1.01_B15630.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.01_B15630.jpg)'
- en: Figure 1.1 – AWS account creation
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.1 – AWS账户创建
- en: After clicking the button, you'll see how to create an AWS account. Fill out
    the information accordingly. If you use a student email address, you can get access
    to extra goodies:![Figure 1.2 – Account creation form
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击按钮后，您将看到如何创建AWS账户。根据信息填写表格。如果您使用学生邮箱地址，您可以获得额外的好处：![图1.2 – 账户创建表格
- en: '](img/Figure_1.02_B15630.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.02_B15630.jpg)'
- en: Figure 1.2 – Account creation form
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.2 – 账户创建表格
- en: 'Once the form''s filled out, click **Continue** and you''ll receive an email
    prompting you with a greeting and welcoming you to AWS:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 填写完表格后，点击**继续**，您将收到一封电子邮件，其中会有问候语并欢迎您加入AWS：
- en: '![Figure 1.3 – Email from AWS after account creation'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.3 – AWS账户创建后的电子邮件'
- en: '](img/Figure_1.03_B15630.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.03_B15630.jpg)'
- en: Figure 1.3 – Email from AWS after account creation
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.3 – AWS账户创建后的电子邮件
- en: Congratulations, you now have your very own account to access for the rest of
    this book. Feel free to get a feel for all the resources available in AWS before
    moving on. AWS is full of resources and information that you can use at your disposal.
    Once you're ready, move onto the next section as you learn how to create your
    very own EC2 instances.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜，您现在拥有自己的账户，可以在本书的其余部分中使用。在继续之前，随意了解AWS中所有可用的资源。AWS充满了您可以随时使用的资源和信息。一旦准备好，继续下一节，学习如何创建您自己的EC2实例。
- en: Important note
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: When setting up an account, use a .`edu` address if possible. There are additional
    benefits you can use with an AWS account. A link will be available at the end
    of this chapter for more information about student benefits.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在设置账户时，尽可能使用.edu地址。您可以使用AWS账户的其他优惠。本章末尾将提供有关学生福利的更多信息的链接。
- en: The next section will discuss how to create your very own EC2 instances in your
    new AWS account.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 下一节将讨论如何在您的新AWS账户中创建您自己的EC2实例。
- en: Setting up EC2 instances
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置EC2实例
- en: '**EC2** (**Elastic Compute Cloud**) instances essentially replace the need
    for hardware by providing scalable computing within the Amazon cloud. Think of
    an EC2 instance as a computer with no operating system. This is beneficial because
    it allows organizations to scale their systems, with little to no overhead! However,
    while it is a benefit to have such a simple solution, the downside can come in
    the common form of poor management. It''s extremely easy to deploy an EC2 instance
    only for it to go unnoticed by administrators. But that computer is someone else''s
    computer that you''re renting. Keep in mind that a computer is just a computer,
    so you will need to place an operating system on it.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '**EC2**（弹性计算云）实例基本上取代了硬件的需求，通过在亚马逊云中提供可伸缩的计算。将EC2实例视为没有操作系统的计算机。这是有益的，因为它允许组织扩展其系统，几乎没有额外开销！然而，虽然拥有这样一个简单的解决方案是有益的，但缺点可能表现为常见的管理不善。部署EC2实例非常容易，但管理员可能会忽视它。但是那台计算机是别人的计算机，您正在租用它。请记住，一台计算机只是一台计算机，因此您需要在上面安装操作系统。'
- en: Before we begin discussing the instances we are creating, let's make a quick
    mention of why we are setting these instances up. Part of being a pentester is
    understanding how things are set up. Often, pentesters come from a development
    and system administrator background and have a fundamental understanding of how
    systems work. We are setting up various operating systems and taking a first-hand
    look at how common issues are implemented in EC2 instances and the operating systems.
    Let's look at what we will be creating throughout this chapter.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们开始讨论我们正在创建的实例之前，让我们简要提一下为什么我们要设置这些实例。作为渗透测试人员，理解系统的设置方式是很重要的。通常，渗透测试人员来自开发和系统管理员背景，并且对系统工作原理有基本的理解。我们正在设置各种操作系统，并首次查看EC2实例和操作系统中实现的常见问题。让我们看看本章中我们将要创建的内容。
- en: We will create three EC2 instances with various images. Doing so will give us
    the tools and understanding of how accessing each system is different from the
    other. The first operating system that we are going to install will be **CentOS
    7**.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将创建三个具有不同镜像的EC2实例。这样做将使我们了解如何访问每个系统与其他系统不同。我们将安装的第一个操作系统将是**CentOS 7**。
- en: CentOS is a very popular Unix-based operating system that will allow us to explore
    how Linux filesystems work in more depth. It is essential that we are exposed
    to various systems when learning penetration testing because, in the field, you
    can have a variety of targets that will be in the scope of a penetration test.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: CentOS是一个非常流行的基于Unix的操作系统，它将允许我们更深入地探索Linux文件系统的工作原理。在学习渗透测试时，暴露于各种系统是至关重要的，因为在这个领域，你可能会有各种目标需要进行渗透测试。
- en: Setting up an EC2 instance with CentOS
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用CentOS设置EC2实例
- en: 'If you haven''t already, go ahead and log into your AWS account. Once you log
    into your account, you will be in the **AWS Management Console**. This is where
    we will start creating EC2 instances for this chapter. The following steps highlight
    how to deploy an EC2 instance:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你还没有，请登录你的AWS账户。一旦你登录你的账户，你将进入**AWS管理控制台**。这是我们将开始为本章创建EC2实例的地方。以下步骤介绍了如何部署EC2实例：
- en: From the main console, you will see **EC2** under the word **Compute**. Click
    on it to begin the process of creating an EC2 instance:![Figure 1.4 – AWS Management
    Console
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从主控制台中，你会看到**计算**下面的**EC2**。点击它开始创建EC2实例的过程：![图1.4–AWS管理控制台
- en: '](img/Figure_1.04_B15630.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.04_B15630.jpg)'
- en: Figure 1.4 – AWS Management Console
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.4–AWS管理控制台
- en: 'After clicking on it, you will see a button labeled **Launch instance** in
    the bottom left-hand corner. There is also the **Instance** option in the left
    drop-down pane. Click on **Launch instance** to start building out your first
    EC2 instance:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击它后，你会看到左下角有一个标有**启动实例**的按钮。左侧下拉窗格中还有**实例**选项。点击**启动实例**开始构建你的第一个EC2实例：
- en: '![Figure 1.5 – EC2 launch'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.5–EC2启动'
- en: '](img/Figure_1.05_B15630.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.05_B15630.jpg)'
- en: Figure 1.5 – EC2 launch
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.5–EC2启动
- en: After clicking **Launch instance**, you'll need to configure a host operating
    system within your EC2 instance. For this exercise, we'll choose the minimal CENTOS
    7 install for our host operating system. This operating system is going to be
    what "lives" in the EC2 instance.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**启动实例**后，你需要在你的EC2实例中配置一个主机操作系统。对于本练习，我们将选择最小的CENTOS 7安装作为我们的主机操作系统。这个操作系统将是EC2实例中的“生存者”。
- en: 'Now that we have set up our AWS account, we will break down, step by step,
    the process needed to build an EC2 instance. As mentioned, the EC2 instance is
    what our operating system will be hosted on. I recommend you get comfortable with
    this process as you will be building instances quite a bit throughout this book.
    To begin setting up some instances, follow the provided steps to get started.
    The steps are in sequence with building an EC2 instance. If you miss one step,
    ensure you go back and cover the step before moving on:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经设置好了AWS账户，我们将逐步分解所需的步骤来构建EC2实例。如前所述，EC2实例是我们的操作系统所在的地方。我建议你熟悉这个过程，因为在本书中你将经常构建实例。要开始设置一些实例，请按照提供的步骤开始。这些步骤是按顺序构建EC2实例的。如果你错过了某一步，请确保在继续之前回过头来补上这一步：
- en: 'Choose an Amazon Machine Image: Go to Amazon Marketplace and search for an
    image to install on your EC2 instance. As stated, we will use **CentOS 7** for
    this example:![Figure 1.6 – EC2 operating system'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择Amazon机器镜像：前往Amazon市场搜索一个镜像来安装在你的EC2实例上。如前所述，我们将使用**CentOS 7**作为示例：![图1.6–EC2操作系统
- en: '](img/Figure_1.06_B15630.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.06_B15630.jpg)'
- en: Figure 1.6 – EC2 operating system
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.6–EC2操作系统
- en: 'Choose an instance type: Ensure that you use the free tier to avoid charges.
    If you do forget, Amazon will bill you monthly for any usage that goes over your
    plan. However, feel free to use the paid tiers if you so choose. For this exercise,
    we are going to be using the free tier since it will serve as enough.'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择实例类型：确保使用免费套餐以避免收费。如果你忘记了，亚马逊将会按月向你收取超出计划的任何使用费用。但是，如果你愿意，可以随意使用付费套餐。对于本练习，我们将使用免费套餐，因为它足够使用。
- en: After that, you'll want to create a new **virtual private cloud** (**VPC**)
    network that your EC2 instance can live in. The VPC acts as a network that allows
    secure communications between other instances within the VPC. It also allows connections
    outside of the VPC via a VPN:![Figure 1.7– Creating a VPC
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 之后，你将需要创建一个新的**虚拟私有云**（**VPC**）网络，你的EC2实例可以驻留在其中。VPC充当一个允许VPC内其他实例之间进行安全通信的网络。它还允许通过VPN连接VPC之外的连接：![图1.7–创建VPC
- en: '](img/Figure_1.07_B15630.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.07_B15630.jpg)'
- en: Figure 1.7– Creating a VPC
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.7–创建VPC
- en: After that, you'll need to create a subnet that your hosts can connect to. Make
    sure you remember the VPC and the subnet for later when setting up other instances:![Figure
    1.8 – Creating a VPC part 2
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 之后，你需要创建一个子网，让你的主机可以连接到。确保你记住VPC和子网，以备设置其他实例时使用：![图1.8–创建VPC第2部分
- en: '](img/Figure_1.08_B15630.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.08_B15630.jpg)'
- en: Figure 1.8 – Creating a VPC part 2
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.8–创建VPC第2部分
- en: Next, you'll be prompted about storage for the OS. The storage that is allocated
    will suffice for the exercise:![Figure 1.9 – Storage setup
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您将被提示关于操作系统的存储。分配的存储空间将足够进行练习：![图1.9 – 存储设置
- en: '](img/Figure_1.09_B15630.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.09_B15630.jpg)'
- en: Figure 1.9 – Storage setup
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.9 – 存储设置
- en: 'Next, we will be configuring routes for the instance. Routes are going to allow
    and disallow traffic to and from the host on certain ports of your instances.
    For this exercise, please set up the following routes as illustrated:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将为实例配置路由。路由将允许或禁止流量在实例的某些端口上进出。在本练习中，请设置如下所示的路由：
- en: '[PRE0]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The following screenshot highlights the changes we are making and inputting:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图突出显示了我们正在进行和输入的更改：
- en: '![Figure 1.10 – Creating a security group'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.10 – 创建安全组'
- en: '](img/Figure_1.10_B15630.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.10_B15630.jpg)'
- en: Figure 1.10 – Creating a security group
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.10 – 创建安全组
- en: You're going to need to create a key pair that you can use to connect to your
    instance. Make sure that you save the key pair in a place where you won't lose
    it. You're going to need to use that key to access the instance. The following
    screenshot illustrates naming the key `AWS Pentest`. Feel free to call yours whatever
    you like:![Figure 1.11 – Creating a key pair
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要创建一个密钥对，以便连接到您的实例。确保将密钥对保存在一个不会丢失的地方。您需要使用该密钥来访问实例。以下截图说明了命名密钥为`AWS Pentest`。随意命名您喜欢的内容：![图1.11
    – 创建密钥对
- en: '](img/Figure_1.11_B15630.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.11_B15630.jpg)'
- en: Figure 1.11 – Creating a key pair
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.11 – 创建密钥对
- en: Once you name the key pair, download it and save it in a safe place. It's important
    to make sure you save the key and even make a copy of it in case the original
    key becomes lost. You won't be able to retrieve the key from your instance.![Figure
    1.12 – Dashboard for running EC2 instances
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您命名了密钥对，下载并将其保存在安全的地方。确保保存密钥，并在原始密钥丢失时制作副本。您将无法从实例中检索密钥。![图1.12 – 运行EC2实例的仪表板
- en: '](img/Figure_1.12_B15630.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.12_B15630.jpg)'
- en: Figure 1.12 – Dashboard for running EC2 instances
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.12 – 运行EC2实例的仪表板
- en: Once finished, click on **Running instances** to check your instance. We will
    discuss how to connect to it via SSH later in the book.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，单击**运行实例**以检查您的实例。我们将在本书后面讨论如何通过SSH连接到它。
- en: You have now set up your first instance! Don't feel pressured if you're having
    issues connecting to it, such as a permissions error; ensure that you have the
    right permissions set to your instance's key. Right-click on the instance and
    click **Connect** to be advised on how to set the permissions. We will discuss
    connecting to instances in just a bit. For now, discover what's available in the
    AWS console. There is quite a bit that we will talk about, but it doesn't hurt
    to take a look and get to know it. When you're ready, move on to the next section.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已经设置了第一个实例！如果您在连接时遇到权限错误等问题，请不要感到压力；确保您已经为实例的密钥设置了正确的权限。右键单击实例，然后单击**连接**以获得如何设置权限的建议。我们稍后将讨论连接到实例。现在，先发现AWS控制台中提供了什么。我们将会谈论很多内容，但先看一看并了解一下也无妨。准备好后，继续下一节。
- en: Setting up a Windows host
  id: totrans-88
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置Windows主机
- en: The following section is going to discuss how to set up a Windows host in AWS.
    Setting up the host will be very similar to setting up the CentOS 7 server, with
    a few differences. It's important that we understand how Windows systems work
    and how we can set them up in AWS. As you move through your penetration testing
    journey, you'll come to find out that many businesses use Windows in their AWS
    environments and their onsite devices.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的部分将讨论如何在AWS中设置Windows主机。设置主机将与设置CentOS 7服务器非常相似，但也有一些不同之处。重要的是，我们要了解Windows系统的工作原理以及如何在AWS中设置它们。随着您进行渗透测试的旅程，您会发现许多企业在其AWS环境和现场设备中使用Windows。
- en: 'Let''s set up the host:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们设置主机：
- en: Let's go back to the AWS Management Console and select **Launch instance** to
    bring up another instance, just as we did before.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们回到AWS管理控制台，并选择**启动实例**以启动另一个实例，就像之前一样。
- en: Go to AWS Marketplace and select **Windows Server 2008 R2 Base**.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到AWS市场并选择**Windows Server 2008 R2 Base**。
- en: Important note
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: We want to use an older version, rather than a new, updated one because security
    issues are much easier to exploit in the older version. Since the purpose of this
    book is learning, we want to be able to easily exploit known issues that are typically
    found in older versions, rather than trying to exploit hardened newer operating
    systems. Make sure that you select the same VPC settings as before. Doing so ensures
    that all the VMs, such as your CentOS 7 and Windows host, are on the same network.
    This will help us later when practicing pentesting because we will be working
    on the same virtual network, making it easier for instances to communicate with
    each other.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望使用旧版本，而不是新版本，因为在旧版本中安全问题更容易被利用。由于本书的目的是学习，我们希望能够轻松地利用通常在旧版本中发现的已知问题，而不是试图利用加固的新操作系统。确保选择与之前相同的VPC设置。这样做可以确保所有VM，如您的CentOS
    7和Windows主机，都在同一网络上。这将有助于我们在后面进行渗透测试时，因为我们将在同一虚拟网络上工作，使实例之间更容易进行通信。
- en: 'Here''s what it looks like in the marketplace:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在市场上看起来是这样的：
- en: '![Figure 1.13 – Windows 2008 EC2'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.13 – Windows 2008 EC2'
- en: '](img/Figure_1.13_B15630.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.13_B15630.jpg)'
- en: Figure 1.13 – Windows 2008 EC2
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.13 – Windows 2008 EC2
- en: Just as before, we need to ensure we have the correct ports open. Take note
    that `3389` is open. Port `3389` is the port that is associated with **RDP**.
    Having this set correctly ensures that you can connect to the Windows host later
    on:![Figure 1.14 – Windows 2008 EC2 open ports
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与之前一样，我们需要确保打开正确的端口。请注意`3389`端口是打开的。端口`3389`是与**RDP**相关联的端口。正确设置这一点可以确保您以后可以连接到Windows主机：![图1.14
    – Windows 2008 EC2开放端口
- en: '](img/Figure_1.14_B15630.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.14_B15630.jpg)'
- en: Figure 1.14 – Windows 2008 EC2 open ports
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.14 – Windows 2008 EC2开放端口
- en: Now that we have the host all ready to go, we will need to connect to it. Since
    this is a Windows host, we won't be able to SSH into it like we traditionally
    do with other hosts. This is because the host uses the Remote Desktop Protocol
    on port `3389`, instead of using SSH on port `22`. Instead of getting a key, we
    will need to get the password stored on the Windows host.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们已经准备好主机，我们需要连接到它。由于这是一个Windows主机，我们无法像传统方式那样通过SSH连接到它。这是因为主机使用端口`3389`上的远程桌面协议，而不是使用端口`22`上的SSH。我们不需要获取密钥，而是需要获取存储在Windows主机上的密码。
- en: To get the password, simply right-click on your Windows instance and select
    **Get Windows Password**. If you just set up your Windows host, it could take
    up to 4 minutes for you to be able to decrypt the password:![Figure 1.15 – Windows
    2008 EC2 password retrieval
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要获取密码，只需右键单击Windows实例，然后选择**获取Windows密码**。如果刚刚设置了Windows主机，可能需要最多4分钟才能解密密码：![图1.15
    - Windows 2008 EC2密码检索
- en: '](img/Figure_1.15_B15630.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.15_B15630.jpg)'
- en: Figure 1.15 – Windows 2008 EC2 password retrieval
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.15 - Windows 2008 EC2密码检索
- en: Decrypt the password by entering the encrypted password as illustrated. Once
    you have put the password in the field, click on **Decrypt Password**:![Figure
    1.16 – Decrypting Windows passwords
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过输入加密密码来解密密码，如图所示。在字段中放入密码后，单击**解密密码**：![图1.16 - 解密Windows密码
- en: '](img/Figure_1.16_B15630.jpg)'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.16_B15630.jpg)'
- en: Figure 1.16 – Decrypting Windows passwords
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.16 - 解密Windows密码
- en: 'Once complete, you''ll be prompted with a **User name** and **Password** to
    access your host. Just as before, ensure you save these credentials somewhere
    safe so that you do not lose them. However, you can recover them as long as you
    have the encrypted password. Storing the encrypted password can be as easy as
    storing it in a password vault, or storing it in a cloud storage space, such as
    an S3 bucket. Make sure that only you have access to where it is stored. For the
    best results, implement user-based access control to the filesystems:'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，您将收到一个**用户名**和**密码**的提示，以访问您的主机。与以前一样，请确保将这些凭据保存在安全的地方，以免丢失。但是，只要您拥有加密密码，就可以恢复它们。存储加密密码可以像将其存储在密码保险库中那样简单，或者将其存储在云存储空间中，例如S3存储桶中。确保只有您可以访问存储位置。为了获得最佳结果，实施基于用户的文件系统访问控制：
- en: '![Figure 1.17 – User name and Password'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.17 - 用户名和密码'
- en: '](img/Figure_1.17_B15630.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.17_B15630.jpg)'
- en: Figure 1.17 – User name and Password
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.17 - 用户名和密码
- en: To test the connection, open the Remote Desktop client on your host machine
    and use the public DNS of the EC2 instance. If all goes well, then you should
    be able to log in to the desktop!
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 要测试连接，请在主机上打开远程桌面客户端，并使用EC2实例的公共DNS。如果一切顺利，您应该能够登录到桌面！
- en: Attacker setup – setting up a Kali instance
  id: totrans-114
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 攻击者设置 - 设置Kali实例
- en: For this section, we will set up a **Kali Linux** image that can act as our
    attack host. Kali Linux is a popular operating system used by security professionals
    to test their systems and applications. This is largely due to the operating system
    coming preinstalled with tools that can assist in enumeration and exploitation!
    Kali Linux will be used as one of our main hosts as we go through this book and
    will be a tool that you will use in your pentesting endeavors!
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将设置一个可以充当攻击主机的**Kali Linux**镜像。Kali Linux是安全专业人员用来测试其系统和应用程序的流行操作系统。这在很大程度上是因为操作系统预装了可以帮助枚举和利用的工具！Kali
    Linux将作为我们主要主机之一，并将成为您在渗透测试中使用的工具！
- en: 'Since we already know how to set up an EC2 instance, we are going to only focus
    on how to connect our Kali host using a tool called **PuTTY**. PuTTY is a tool
    that allows administrators to remotely access their systems, as we will do later
    in this chapter. As you set up your Kali machine, ensure that you use the same
    VPC and subnet settings you did for your other machines:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们已经知道如何设置EC2实例，我们将只专注于如何使用名为**PuTTY**的工具连接我们的Kali主机。PuTTY是一种允许管理员远程访问其系统的工具，正如我们将在本章后面所做的那样。在设置Kali机器时，请确保使用与其他机器相同的VPC和子网设置：
- en: To start, go to **AWS Marketplace** and retrieve an instance of Kali Linux.
    Then proceed to create the EC2 instance as you did with the previous exercises:![Figure
    1.18 – Kali Linux EC2 instance
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，转到**AWS Marketplace**并检索Kali Linux的实例。然后继续创建EC2实例，就像您在之前的练习中所做的那样：![图1.18
    - Kali Linux EC2实例
- en: '](img/Figure_1.18_B15630.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.18_B15630.jpg)'
- en: Figure 1.18 – Kali Linux EC2 instance
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.18 - Kali Linux EC2实例
- en: The same as before, make sure you create a new key pair with a new name.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 与以前一样，请确保创建一个新的密钥对并使用新名称。
- en: Important note
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: It's best advised to create new keys for every instance and not share keys between
    instances. In a real-world situation, if a key were to become compromised and
    *all* hosts used the same key, then it would be assumed that all hosts were to
    become compromised. It would be a "shared secret" between all hosts.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 最好为每个实例创建新的密钥，并且不要在实例之间共享密钥。在现实世界的情况下，如果一个密钥被泄露，*所有*主机都使用相同的密钥，那么可以假定所有主机都将被泄露。这将成为所有主机之间的“共享秘密”。
- en: 'Here''s what the window looks like:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 窗口如下所示：
- en: '![Figure 1.19 – Kali secret key'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.19 - Kali秘钥'
- en: '](img/Figure_1.19_B15630.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.19_B15630.jpg)'
- en: Figure 1.19 – Kali secret key
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.19 - Kali秘钥
- en: 'Now that we have the key pair, we need to connect to the Kali machine. Right-click
    on the instance from your console and follow the connection instructions to your
    instance:'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们有了密钥对，我们需要连接到Kali机器。从控制台右键单击实例，然后按照连接说明连接到您的实例：
- en: '[PRE1]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The following screenshot shows the steps and their meaning to help understand
    what these commands are doing:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了这些命令的步骤及其含义，以帮助理解这些命令在做什么：
- en: '![Figure 1.20 – Kali information'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.20 - Kali信息'
- en: '](img/Figure_1.20_B15630.jpg)'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.20_B15630.jpg)'
- en: Figure 1.20 – Kali information
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.20 - Kali信息
- en: As you can see in the screenshot, the prompt highlights a few housekeeping steps
    before we can access our EC2 instance.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您在截图中所看到的，提示突出显示了在访问EC2实例之前需要进行的一些日常事务步骤。
- en: Open the SSH client. In our case, we will be using PuTTY for our connections
    and will look at how to connect in the next section.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开SSH客户端。在我们的情况下，我们将使用PuTTY进行连接，并将在下一节中看看如何连接。
- en: Locate the .`pem` file that we just saved. The `.pem` file acts as the secret
    key and allows you to authenticate the EC2 instance.
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到我们刚保存的`.pem`文件。`.pem`文件充当秘钥，允许你对EC2实例进行身份验证。
- en: We need to change the permissions of the key using the `chmod` command.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要使用`chmod`命令更改密钥的权限。
- en: The public DNS name that is assigned to our instance is the resource name used
    to connect to the instance.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分配给我们实例的公共DNS名称是连接到实例的资源名称。
- en: Lastly, the command shows us how we can use the SSH command, found pre-installed
    on our Linux machines, to connect to our cloud resource using the secret key and
    the username `root`.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，该命令向我们展示了如何使用预先安装在我们的Linux机器上的SSH命令，使用秘钥和用户名`root`连接到我们的云资源。
- en: Next, we will look at how to connect to the instance with PuTTY.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将看看如何使用PuTTY连接到实例。
- en: Connecting with PuTTY
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用PuTTY连接
- en: PuTTY is a tool that allows users to connect to a host from various ports. Unlike
    a terminal or command line, PuTTY gives an interface that allows users to interact
    with their host with the click of a mouse instead of having to connect with the
    terminal. It's crucial that we understand various ways to connect to our instances,
    and PuTTY is a common resource to connect to EC2 instances in a real environment.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: PuTTY是一个工具，允许用户从各种端口连接到主机。与终端或命令行不同，PuTTY提供了一个界面，允许用户通过鼠标点击与主机交互，而不是必须通过终端连接。我们必须了解连接到我们实例的各种方式，PuTTY是连接到真实环境中的EC2实例的常用资源。
- en: 'We can use PuTTY or SSH to connect to any of the instances we set up in our
    own lab. The purpose of this section will be to walk you through the steps of
    creating an SSH key from a private key assigned to an EC2 instance:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用PuTTY或SSH连接到我们在自己实验室中设置的任何实例。本节的目的是引导你完成从分配给EC2实例的私钥创建SSH密钥的步骤：
- en: To begin, ensure that PuTTY is installed on your computer. You can download
    the right client for you here ([https://www.chiark.greenend.org.uk/~sgtatham/putty/](https://www.chiark.greenend.org.uk/~sgtatham/putty/)).
    Once installed, move on to converting the private key.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先确保PuTTY已安装在你的计算机上。你可以在这里下载适合你的客户端([https://www.chiark.greenend.org.uk/~sgtatham/putty/](https://www.chiark.greenend.org.uk/~sgtatham/putty/))。安装完成后，继续转换私钥。
- en: Start a program called `.pem` file. We created `.pem` files with our CentOS
    7 instance before as well. Once you load the key into `.ppk`:![Figure 1.21 – PuTTY
    key generator
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动一个名为`.pem`文件的程序。我们之前也使用我们的CentOS 7实例创建了`.pem`文件。一旦将密钥加载到`.ppk`中：![图1.21 -
    PuTTY密钥生成器
- en: '](img/Figure_1.21_B15630.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.21_B15630.jpg)'
- en: Figure 1.21 – PuTTY key generator
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.21 - PuTTY密钥生成器
- en: 'Now that you have created a `.ppk` file, it''s time to start up PuTTY and test
    your connection. Go to **Connection** > **SSH** > **Auth** and load your new key
    that you created in the previous step:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你已经创建了一个`.ppk`文件，是时候启动PuTTY并测试你的连接了。转到**连接** > **SSH** > **Auth**，加载你在上一步创建的新密钥：
- en: '![Figure 1.22 – PuTTY key configuration'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.22 - PuTTY密钥配置'
- en: '](img/Figure_1.22_B15630.jpg)'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.22_B15630.jpg)'
- en: Figure 1.22 – PuTTY key configuration
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.22 - PuTTY密钥配置
- en: 'Once the key is ready to go, it''s time to input the specific data needed to
    start up your connection to your instance. The following steps will guide you
    through this process:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦密钥准备就绪，就可以输入启动连接到实例所需的具体数据了。以下步骤将指导你完成这个过程：
- en: Go back to the **Session** tab in PuTTY. Once in the session tab, input the
    **Host Name** of the instance you are connecting to. The hostname is the public
    DNS record that you can find in the AWS console. You can also click **Connect**
    on your instance to be provided the public DNS name.
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回PuTTY中的**会话**选项卡。在会话选项卡中，输入你要连接的实例的**主机名**。主机名是你可以在AWS控制台中找到的公共DNS记录。你也可以点击你的实例上的**连接**来获取公共DNS名称。
- en: Once the hostname is configured, ensure that the port is set to `22` for **SSH**:![Figure
    1.23 – PuTTY connection
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦主机名配置好，确保端口设置为`22`以进行**SSH**连接：![图1.23 - PuTTY连接
- en: '](img/Figure_1.23_B15630.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.23_B15630.jpg)'
- en: Figure 1.23 – PuTTY connection
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.23 - PuTTY连接
- en: Now we're ready to connect to our instance. Click `.ppk` file:![Figure 1.24
    – PuTTY terminal
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们准备连接到我们的实例。点击`.ppk`文件：![图1.24 - PuTTY终端
- en: '](img/Figure_1.24_B15630.jpg)'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.24_B15630.jpg)'
- en: Figure 1.24 – PuTTY terminal
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.24 - PuTTY终端
- en: 'Now you''re being logged in as the user `ec2-user`. This user doesn''t have
    very high privileges, so feel free to alter them by switching into the root account
    using the following command:'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你以`ec2-user`用户登录。这个用户权限不是很高，所以可以随意通过以下命令切换到root账户来更改权限：
- en: '[PRE2]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: These privileges allow the user to alter, read, and execute any files on the
    Linux-based operating system. These high-privilege users can be found in the file
    path `/etc/sudoers`. Congratulations, you now have successfully connected to your
    instance using PuTTY.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 这些特权允许用户在基于Linux的操作系统上更改、读取和执行任何文件。这些高特权用户可以在文件路径`/etc/sudoers`中找到。恭喜，你现在已成功使用PuTTY连接到你的实例。
- en: Great job finishing this section! You should now be comfortable with setting
    up EC2 instances within AWS and also under the basics of configuring various operating
    systems. As stated, it is extremely important that you understand the differences
    because as you go on pentesting, you will be exposed to numerous operating systems,
    such as Windows- and Unix-based systems.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 完成了这一部分，做得很好！现在你应该可以轻松地在AWS中设置EC2实例，也了解了配置各种操作系统的基础知识。正如所述，你理解这些差异非常重要，因为在渗透测试中，你将接触到许多操作系统，如基于Windows和Unix的系统。
- en: Next, we are going to move on to looking at vulnerable services and how we use
    our knowledge to set up a vulnerable service in our pentesting environment.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将继续查看易受攻击的服务，以及如何利用我们的知识在渗透测试环境中设置易受攻击的服务。
- en: Exploring vulnerable services
  id: totrans-164
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索易受攻击的服务
- en: Vulnerable services can be the Achilles heel of a system if left unpatched.
    What this means is vulnerabilities, if left unpatched, leave a severe weakness
    in companies' systems that can allow malicious hackers to gain access. A vulnerability
    is classed as an issue in a system that, if not fixed, could cause large issues
    if it were to become an attack vector. Vulnerabilities come in many variants and
    can come in the form of outdated operating systems, open ports, unauthorized access,
    and many more. To fix known vulnerabilities and protect systems from attacks,
    patches and updates have to be installed accordingly. Doing so helps remediate
    most of the major problems you will see.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 如果不打补丁，有漏洞的服务可能是系统的软肋。 这意味着漏洞如果不打补丁，会在公司的系统中留下严重的弱点，可以让恶意黑客获取访问权限。 漏洞被归类为系统中的问题，如果不修复，可能会在成为攻击向量时造成严重问题。
    漏洞有许多变种，可以以过时的操作系统、开放端口、未经授权的访问等形式出现。 为了修复已知的漏洞并保护系统免受攻击，必须相应地安装补丁和更新。 这样做有助于解决您将看到的大多数主要问题。
- en: Discovering vulnerable services
  id: totrans-166
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发现有漏洞的服务
- en: 'Now that we know what a vulnerability is, let''s mention the typical way pentesting
    discovers vulnerabilities:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们知道了漏洞是什么，让我们提一下渗透测试发现漏洞的典型方式：
- en: Ensure that you have a list of targets. Targets are categorized as hosts – we
    can think of EC2 instances as hosts.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保您有一个目标列表。 目标被分类为主机-我们可以将EC2实例视为主机。
- en: Once you have a list of hosts, you'll need to scan them and enumerate information
    from them. Scanning can be used with various tools, which we will use more of
    in [*Chapter 9*](B15630_09_Final_ASB_ePub.xhtml#_idTextAnchor381)*, Real-Life
    Pentesting with Metasploit and More!*.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您有主机列表，您将需要扫描它们并从中枚举信息。 扫描可以使用各种工具，我们将在[*第9章*](B15630_09_Final_ASB_ePub.xhtml#_idTextAnchor381)*，使用Metasploit和更多进行真实渗透测试*中使用更多。
- en: You then create the risk associated with vulnerabilities you found while scanning
    and enumerating. Risk is typically labeled as **low**, **medium**, **high**, or
    **critical** – with **critical** having the most impact.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，您会创建与扫描和枚举时发现的漏洞相关的风险。 风险通常被标记为**低**、**中**、**高**或**关键**-**关键**具有最大的影响。
- en: You may also find "low-hanging fruit" while scanning. Low-hanging fruit are
    easy-to-exploit vulnerabilities that allow you to exploit a target quickly.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在扫描时，您可能还会发现“低挂果实”。 低挂果实是易于利用的漏洞，允许您快速利用目标。
- en: Discovered vulnerabilities should be reported immediately so that they can be
    properly patched. Typically, another team is assigned to fix these issues and
    apply patches to the systems.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发现的漏洞应立即报告，以便可以正确修补它们。 通常，另一个团队被指定来修复这些问题并对系统应用补丁。
- en: This is the basis of how vulnerabilities are discovered in a pentesting environment.
    Now let's look at how vulnerable services are created from an administrator's
    point of view.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 这是在渗透测试环境中发现漏洞的基础。 现在让我们从管理员的角度看一下如何创建有漏洞的服务。
- en: Creating vulnerable services
  id: totrans-174
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建有漏洞的服务
- en: 'For this short example, we are going to install `vsftpd` and enable anonymous
    login on our CentOS 7 machine. Anonymous login is a default feature in quite a
    few FTP clients and allows anyone to connect to the FTP using the following credentials:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个简短的示例中，我们将在我们的CentOS 7机器上安装`vsftpd`并启用匿名登录。 匿名登录是相当多FTP客户端的默认功能，并允许任何人使用以下凭据连接到FTP：
- en: 'Username: `Anonymous`'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户名：`匿名`
- en: 'Password: `Anonymous`'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码：`匿名`
- en: 'As you can already assume, allowing anyone such easy access to your server
    creates a huge security risk. We will learn how to set up the server as vulnerable,
    and then later will learn some security controls that we can put in place to lock
    down the FTP server:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您可能已经猜到的那样，允许任何人如此轻松地访问您的服务器会带来巨大的安全风险。 我们将学习如何将服务器设置为有漏洞，然后稍后将学习一些我们可以采取的安全控制措施来锁定FTP服务器：
- en: '`ssh` into the CentOS 7 server that we set up. You will need to log in as the
    user **ec2-user**, and not **root**.'
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`ssh`进入我们设置的CentOS 7服务器。 您需要以用户**ec2-user**登录，而不是**root**。'
- en: 'Once logged into the server, run the following commands to update your server
    and install the `vsftp` service:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到服务器后，运行以下命令来更新服务器并安装`vsftp`服务：
- en: '[PRE3]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Follow this by running the following:'
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来运行以下命令：
- en: '[PRE4]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Verify the service is running by typing `sudo service vsftpd status`. Now that
    `vsftpd` is installed, we need to ensure that anonymous login is enabled. Run
    the following command to access the `vsftpd` configuration file:'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过输入`sudo service vsftpd status`来验证服务是否正在运行。 现在`vsftpd`已安装，我们需要确保匿名登录已启用。 运行以下命令访问`vsftpd`配置文件：
- en: '[PRE5]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'It will look like the following screenshot:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 它将看起来像以下的屏幕截图：
- en: '![Figure 1.25 – Installing Metasploit'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.25-安装Metasploit'
- en: '](img/Figure_1.25_B15630.jpg)'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.25_B15630.jpg)'
- en: Figure 1.25 – Installing Metasploit
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.25-安装Metasploit
- en: Now your server is set with anonymous login. Later on in the book, in [*Chapter
    3*](B15630_03_Final_ASB_ePub.xhtml#_idTextAnchor098)*, Exploring Pentesting and
    AWS,* we will discuss how to scan and connect to the service locally and remotely
    from other instances within our environment.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您的服务器已设置为匿名登录。 本书的后面，在[*第3章*](B15630_03_Final_ASB_ePub.xhtml#_idTextAnchor098)*，探索渗透测试和AWS*中，我们将讨论如何从本地和远程连接到服务，以及如何从环境中的其他实例进行扫描。
- en: We now have some understanding of what vulnerabilities are and how to reproduce
    them ourselves. It's important to understand the full scope of the technical attributes
    of what we will be doing throughout this book. In regard to vulnerabilities, please
    note that discovering vulnerabilities is not the same as attacking them. When
    discovering vulnerabilities, you will be assigned to discover, assess, and evaluate
    any vulnerabilities found. Pentesting executes this type of testing one step further
    by attacking and exploiting those vulnerabilities through manual and automated
    exploitation.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在对漏洞是什么以及如何自己复制它们有了一些了解。了解我们将在本书中进行的技术属性的全部范围是很重要的。关于漏洞，请注意，发现漏洞并不等同于攻击它们。在发现漏洞时，您将被指派发现、评估和评估任何发现的漏洞。渗透测试通过手动和自动利用进一步攻击和利用这些漏洞。
- en: Let's move on to discussing what attacking vulnerabilities entails.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们继续讨论攻击漏洞的内容。
- en: Attacking vulnerabilities
  id: totrans-193
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 攻击漏洞
- en: Attacking vulnerabilities is one of the more interesting aspects of cybersecurity.
    It's one thing to discover and patch an issue that you may have discovered, but
    actually getting to attack it takes your skills to another level! Attacking vulnerabilities
    is what sets penetration testing apart from other security careers. While most
    security positions only discover and remediate, pentesting attacks and exploits
    discovered issues. Doing so sheds light on how real a system's security posture
    may or may not be. One of the more popular tools you will hear about is called
    Metasploit.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击漏洞是网络安全中更有趣的方面之一。发现并修补您可能发现的问题是一回事，但实际攻击它则需要您的技能达到另一个水平！攻击漏洞是渗透测试与其他安全职业的区别所在。大多数安全职位只是发现和补救，而渗透测试则攻击和利用发现的问题。这样做可以揭示一个系统的安全姿态有多真实或不真实。您将听到的更流行的工具之一是Metasploit。
- en: Exploring Metasploit
  id: totrans-195
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 探索Metasploit
- en: A popular tool in the pentesting community is a framework known as **Metasploit
    Framework**. Also known as **Metasploit**, the automated software comes preinstalled
    on Kali Linux with exploits and payloads that can be configured and launched at
    vulnerable hosts. It also comes with exploits applicable to all flavors of operating
    systems, and payloads of various types. The exploits are known as modules and
    created in **Ruby**.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 在渗透测试社区中，一个流行的工具是被称为**Metasploit Framework**的框架。也被称为**Metasploit**，这个自动化软件预装在Kali
    Linux上，具有可以配置和启动在易受攻击主机上的漏洞和有效载荷。它还具有适用于各种操作系统的漏洞和各种类型的有效载荷。这些漏洞被称为模块，并且是用**Ruby**创建的。
- en: One of the more common exploits is the `443`. The listener can be set up to
    listen on port `443` and establish a connection once the web exploit is executed.
    We will look at more ways to use Metasploit in [*Chapter 9*](B15630_09_Final_ASB_ePub.xhtml#_idTextAnchor381)*,
    Real-Life Pentesting with Metasploit and More!*.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 其中一个更常见的漏洞是`443`。监听器可以设置为在端口`443`上监听，并在执行Web漏洞后建立连接。我们将在[*第9章*](B15630_09_Final_ASB_ePub.xhtml#_idTextAnchor381)*，使用Metasploit进行真实渗透测试和更多!*中看到更多使用Metasploit的方法。
- en: We need to learn to walk before we can run, so now let's take a look at getting
    Metasploit set up on our Kali Linux host. The next portion is going to give you
    an exercise to get Metasploit up and running.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要学会走路才能跑，所以现在让我们来看看如何在我们的Kali Linux主机上设置Metasploit。接下来的部分将给您一个练习，让您启动和运行Metasploit。
- en: 'For this exercise, we are simply going to connect to the Kali Linux host and
    update Metasploit. New exploits are constantly getting uploaded to Metasploit,
    so it is important that you update often:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个练习，我们只是要连接到Kali Linux主机并更新Metasploit。新的漏洞不断上传到Metasploit，因此经常更新是很重要的。
- en: Here's how we are going to update Metasploit. Connect to your Kali instance
    you set up earlier in the chapter by using the PuTTY methods from before. Review
    the section to connect if you need to. Once connected, you'll want to switch over
    to the `sudo su`.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这就是我们将如何更新Metasploit。通过之前使用PuTTY方法设置的Kali实例连接到它。如果需要，可以查看连接部分。一旦连接，您将希望切换到`sudo
    su`。
- en: 'Now that you are the **root** user, let''s update Metasploit to the current
    version. We want to ensure that Metasploit is updated with the most recent exploits
    and modules for testing. To update the tool, type the following command:'
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您是**root**用户，让我们将Metasploit更新到当前版本。我们希望确保Metasploit更新了最新的漏洞和模块进行测试。要更新工具，请输入以下命令：
- en: '[PRE6]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The screenshot illustrates the command being executed in our Kali Linux terminal:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 屏幕截图显示了在我们的Kali Linux终端中执行的命令：
- en: '![Figure 1.26 – Installing Metasploit'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.26 – 安装Metasploit'
- en: '](img/Figure_1.26_B15630.jpg)'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.26_B15630.jpg)'
- en: Figure 1.26 – Installing Metasploit
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.26 – 安装Metasploit
- en: 'Once connected, you''ll be able to start Metasploit with a fresh new database
    full of exploits. In previous years, you would have had to start up a database
    in the background before launching Metasploit. However, now, the following command
    will start Metasploit with a database running in the background:'
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦连接，您将能够启动一个全新的数据库中充满了漏洞的Metasploit。在以前的几年里，您必须在启动Metasploit之前在后台启动数据库。然而，现在，以下命令将在后台启动一个运行的数据库启动Metasploit：
- en: '[PRE7]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Feel free to get comfortable with Metasploit. There are copious amounts of resources
    to learn all things about the popular pentesting tool. We will be using the tool
    quite a bit throughout this book, so don't worry if you don't want to rummage
    around the internet and books for more information.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 随意熟悉Metasploit。有大量的资源可以学习有关这个流行的渗透测试工具的所有内容。我们将在本书中大量使用这个工具，所以如果您不想在互联网和书籍中寻找更多信息，也不用担心。
- en: In this section, we learned quite a bit about what exactly a vulnerable service
    is and how it can be set up. We also included a brief introduction to what it
    means to attack these vulnerabilities and learned a little bit about Metasploit
    – a very popular tool in the pentesting community.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们学到了关于什么是一个易受攻击的服务以及如何设置它的一些知识。我们还简要介绍了攻击这些漏洞意味着什么，并学到了一些关于Metasploit的知识-这是渗透测试社区中非常流行的工具。
- en: Next, we are going to learn about the AWS Command Line Interface and how we
    can install it and use it.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将学习AWS命令行界面以及如何安装它并使用它。
- en: The AWS Command Line Interface (CLI)
  id: totrans-212
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: AWS命令行界面（CLI）
- en: The AWS CLI is a great command-line tool that allows you to interface with AWS
    technology such as S3 buckets, interacting with EC2 instances and others. We will
    start to see actual use cases of implementing the AWS CLI in more depth in [*Chapter
    4*](B15630_04_Final_ASB_ePub.xhtml#_idTextAnchor171)*, Exploiting S3 Buckets*.
    The AWS CLI is a great way to learn and get comfortable with using a terminal-like
    interface because it allows you to interact with everything in your AWS environment.
    For pentesting, it's always good to be comfortable with using a command line and/or
    a terminal because you never know when a GUI just won't do the trick. Imagine
    being in the middle of a penetration test and your tool interface freezes, or
    the frontend of an application throws an error and ceases to work. This is where
    understanding the command line proves to be beneficial.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: AWS CLI是一个很棒的命令行工具，可以让您与AWS技术进行交互，比如S3存储桶，与EC2实例等进行交互。我们将开始看到在[*第4章*](B15630_04_Final_ASB_ePub.xhtml#_idTextAnchor171)*，利用S3存储桶*中更深入地实施AWS
    CLI的实际用例。AWS CLI是一个很好的学习和熟悉使用类似终端的界面的方式，因为它允许您与AWS环境中的一切进行交互。对于渗透测试来说，熟悉使用命令行和/或终端总是很好的，因为您永远不知道GUI何时会不起作用。想象一下，当您进行渗透测试时，您的工具界面冻结了，或者应用程序的前端出现错误并停止工作。这就是理解命令行的好处所在。
- en: Installing the AWS CLI
  id: totrans-214
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装AWS CLI
- en: 'Now we will need to move forward and install the AWS CLI on our Kali Linux
    machine. This will be the command line we will use throughout this book to interact
    with our AWS environment:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们需要继续在我们的Kali Linux机器上安装AWS CLI。这将是我们在本书中使用的命令行，以与我们的AWS环境进行交互：
- en: 'To begin, let''s check and see if the AWS CLI is already installed on our machines:'
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，让我们检查一下AWS CLI是否已经安装在我们的机器上：
- en: '[PRE8]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'If you have an old version, you should see what version you have. If you haven''t
    used it in a while, it''s best to go ahead and reinstall it:'
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您有旧版本，您应该查看您有哪个版本。如果您有一段时间没有使用它，最好重新安装：
- en: '[PRE9]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Double-check to ensure that your command-line interface successfully installed
    by running the `--version` switch again.
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过再次运行`--version`开关来确保您的命令行界面已成功安装。
- en: Now your host is set up to interact with resources in AWS and cover the material
    in this book. Feel free to play around and get comfortable with the command-line
    interface. It's something that you'll need to get used to as you go through this
    book and interact with AWS in the real world.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您的主机已经设置好，可以与AWS中的资源进行交互并覆盖本书中的内容。随意尝试并熟悉命令行界面。这是您在阅读本书并与AWS在现实世界中进行交互时需要习惯的东西。
- en: Exploring basic AWS CLI commands
  id: totrans-222
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 探索基本的AWS CLI命令
- en: Now we will look at some basic AWS CLI commands, now that there is a general
    understanding of what the AWS CLI is and how it works. The following shows a few
    commands that you'll see throughout this book. These commands are meant to interact
    with various services, such as S3, EC2, and Lambda.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将看一些基本的AWS CLI命令，现在已经对AWS CLI是什么以及它是如何工作有了一个基本的了解。以下显示了您将在本书中看到的一些命令。这些命令旨在与各种服务进行交互，如S3、EC2和Lambda。
- en: 'Once you''ve configured your AWS CLI, use the following command to get a list
    of commands:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您配置了AWS CLI，使用以下命令获取命令列表：
- en: '[PRE10]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The following command is useful to describe the attributes of an EC2 server:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 以下命令对描述EC2服务器的属性非常有用：
- en: '[PRE11]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The next command will list out the buckets in an S3 environment:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个命令将列出S3环境中的存储桶：
- en: '[PRE12]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The last command we will mention is used to list out functions with Lambda:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将提到的最后一个命令用于列出Lambda中的函数：
- en: '[PRE13]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: As you can see, there are quite a few services that you can interact with via
    the AWS CLI. You'll become more and more familiar with interacting with these
    services as we continue to go through more exercises in this book. Now that we
    have discussed the last topic in this chapter, let's wrap up and recap!
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，有很多服务可以通过AWS CLI进行交互。随着我们在本书中继续进行更多练习，您将越来越熟悉与这些服务进行交互。现在我们已经讨论了本章的最后一个主题，让我们总结一下！
- en: Summary
  id: totrans-233
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we learned how to create an AWS account that will allow us
    to set up an environment for us to create a host and pentest it later throughout
    the book. It is essential that we understand how to make labs within AWS, mainly
    due to it being the sole way we will be performing testing in this book, and how
    you would in a real-life situation. We learned what an EC2 instance is and how
    to set up an instance with various operating systems, helping us understand the
    importance of the various operating systems that we would see in a real-world
    pentesting situation. We learned about setting up vulnerable services within our
    host and what vulnerabilities entail regarding pentesting and AWS security. Lastly,
    we learned how to quickly set up the AWS CLI for us to interact with our AWS resources.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学会了如何创建一个AWS账户，这将允许我们为我们创建一个主机并在本书中的后续部分进行渗透测试。我们必须了解如何在AWS中创建实验室是至关重要的，主要是因为这是我们在本书中进行测试的唯一方式，以及在现实生活中的情况下。我们学到了什么是EC2实例，以及如何使用各种操作系统设置实例，帮助我们理解在现实世界的渗透测试情况下我们将看到的各种操作系统的重要性。我们学到了如何在我们的主机中设置易受攻击的服务，以及关于渗透测试和AWS安全方面的漏洞的含义。最后，我们学会了如何快速设置AWS
    CLI以便与我们的AWS资源进行交互。
- en: In the next chapter, we will start looking more at Kali Linux, some of its history,
    and how we will be using it throughout this book, and how it pertains to pentesting.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将更多地了解Kali Linux，它的一些历史，以及我们将如何在整本书中使用它，以及它与渗透测试的关系。
- en: Further reading
  id: totrans-236
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多阅读
- en: 'You can find the files for the AWS CLI here: [https://github.com/aws/aws-cli](https://github.com/aws/aws-cli)'
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可以在这里找到AWS CLI的文件：[https://github.com/aws/aws-cli](https://github.com/aws/aws-cli)
- en: 'More information about AWS Educate: [https://aws.amazon.com/about-aws/whats-new/2015/05/aws-educate-students-and-educators-can-access-aws-technology-cloud-courses-training-and-collaboration-tools/](https://aws.amazon.com/about-aws/whats-new/2015/05/aws-educate-students-and-educators-can-access-aws-technology-cloud-courses-training-and-collaboration-tools/)'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有关AWS Educate的更多信息：[https://aws.amazon.com/about-aws/whats-new/2015/05/aws-educate-students-and-educators-can-access-aws-technology-cloud-courses-training-and-collaboration-tools/](https://aws.amazon.com/about-aws/whats-new/2015/05/aws-educate-students-and-educators-can-access-aws-technology-cloud-courses-training-and-collaboration-tools/)
- en: 'The PuTTY user guide can be found here: [https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html)'
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PuTTY用户指南可以在这里找到：[https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html)
- en: 'More information on S3: [https://docs.aws.amazon.com/cli/latest/reference/s3/](https://docs.aws.amazon.com/cli/latest/reference/s3/)'
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有关S3的更多信息：[https://docs.aws.amazon.com/cli/latest/reference/s3/](https://docs.aws.amazon.com/cli/latest/reference/s3/)
- en: 'More information on Metasploit: [https://www.metasploit.com/](https://www.metasploit.com/)'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有关Metasploit的更多信息：[https://www.metasploit.com/](https://www.metasploit.com/)
