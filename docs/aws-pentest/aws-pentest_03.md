# 第二章：渗透测试和道德黑客

以下章节讨论了渗透测试，也称为渗透测试。渗透测试是在 20 世纪 60 年代出现的一种与计算机有关的事物。随着计算机系统开始更多地分发数据，确保数据的安全变得至关重要。在讨论了通信线路如何被渗透后，建议使用某种类型的“渗透评估”来评估计算机系统和通信线路的“真实威胁”评估。进入 20 世纪 70 年代初，虎队成为了第一个渗透测试团队，并执行了类似于本书中将看到和阅读到的战术。这些虎队的主要责任是发现漏洞，并根据手动利用发现的漏洞来评估威胁影响级别。

快进到今天，渗透测试的世界越来越受欢迎，并且正在成为评估公司基础设施和安全状况的常见方式。企业雇佣渗透测试人员来合法地黑客攻击他们的公司，并突出显示弱点。渗透测试的目的是让善良的人在坏人发现之前知道漏洞。

在我们深入了解 AWS 之前，我们将学习关于网络安全渗透测试的部分，以及成功执行渗透测试意味着什么，为我们在本书中的工作奠定基础。我们需要理解它，这样我们才能像渗透测试人员一样思考，并以这种思维过程来阅读本书。毕竟，要了解敌人，你必须像敌人一样思考。

在本章中，我们将简要介绍渗透测试的定义。然后，我们将在自己的机器上本地设置 Kali Linux 系统，并探索操作系统上安装的工具。不要担心没有 Linux 经验；本章将涵盖您需要了解的一切。我们还将介绍一些渗透测试工具，并在需要时安装一些工具。我们还将学习如何编写一个基本的脚本，可以针对我们自己的主机运行。

在本章中，我们将涵盖以下主题：

+   什么是渗透测试？

+   Kali Linux

+   Linux 命令

+   渗透测试工具

+   操作系统

# 技术要求

要按照本章的说明进行操作，您需要以下内容：

+   VirtualBox: [`www.virtualbox.org/manual/ch01.html`](https://www.virtualbox.org/manual/ch01.html)

+   PyCharm

本章中使用的代码可在以下链接找到：[`github.com/PacktPublishing/AWS-Penetration-Testing/tree/master/Chapter%202:%20Pentesting%20and%20Ethical%20Hacking`](https://github.com/PacktPublishing/AWS-Penetration-Testing/tree/master/Chapter%202:%20Pentesting%20and%20Ethical%20Hacking)。

查看以下视频以查看代码的实际操作：[`bit.ly/386jRrY`](https://bit.ly/386jRrY)

# 什么是渗透测试？

“渗透测试人员”这个职业头衔是一个有趣的职业头衔。虽然这个职业头衔可能是一个不错的谈话开场白，尽管有些有趣的评论，但渗透测试可以是网络安全领域内最有价值的职业之一。那么，什么是渗透测试，或者渗透测试？

渗透测试是通过手动和自动利用评估系统的攻击面。这涉及使用多个来源发现和利用系统内的问题。一个系统是由人员、机制、软件和政策组成的实体（系统）。

另一种看待渗透测试的方式是，它突出了系统的工作方式，并揭示了使其暴露于黑客攻击的漏洞，使漏洞能够在对手利用之前得到纠正。这使人员了解他们的技术、其安全性以及攻击者如何思考和利用这些系统。在今天的环境中，对手总是与公司玩猫鼠游戏。渗透测试人员的工作是确保这些系统有更有技能的猫来猎捕恶意的老鼠。

## 在坏人之前找到关键问题

不出现在新闻中是游戏的名字，渗透测试是帮助公司留在游戏中的过程。正如我们许多人所见，新闻喜欢报道被网络犯罪分子攻击的公司。这些攻击给公司造成了数百万美元的损失，同时也损害了它们的声誉。许多这些公司都是小公司，它们恢复的机会较小。事实上，60%的小企业在遭受网络攻击后的 6 个月内倒闭。渗透测试是一种高水平的质量保证检查，确保公司可以关闭其攻击面的漏洞并在被利用之前解决问题，最终使它们远离新闻，并避免遭受严重的经济后果。

## 渗透测试方法

了解渗透测试所涉及的步骤是至关重要的。对参与的了解不仅让您了解您的业务内部如何执行安全操作，还提供了攻击者可能实际尝试利用您的系统的正式表现。

以下是渗透测试参与过程中所采取的步骤的压缩列表：

1.  **规划** 渗透测试是渗透测试中最关键的阶段之一。在这个阶段，您需要合法和逻辑地制定整个计划。确定参与范围并设定目标。

1.  您将在**侦察**阶段收集信息。这将涉及您 passively 或 actively 查找信息。

1.  **威胁建模**依赖于您收集测试期间收集的所有数据，并使用这些数据来给出系统的视图，突出其测量的威胁。

1.  **测试和利用** 涉及您探测先前测试中发现的漏洞。如果探测被验证为成功，那么利用漏洞就开始了。利用漏洞可以通过多种方式进行。您可以通过向 Web 应用程序发送意外输入、使用自动化工具和利用程序，以及/或执行手动利用等常见方式来进行。

1.  当您进入**后渗透**阶段时，您将保持持久性并执行横向移动和数据外泄。此外，保持隐秘并掩盖您的踪迹是执行的良好实践。保持隐秘允许蓝队测试检测和响应。

1.  **报告** 是测试中最关键的部分。提交出色的报告确保客户/被测试公司了解发现的问题以及如何在渗透测试参与过程中发现的问题进行缓解。

虽然我们已经了解了渗透测试的一般步骤，但我们还需要了解不同的方法，接下来我们将会看到。这些方法是可以通过渗透测试执行的渗透测试的“风格”。这些风格使用外部人员或内部人员的方法，并且在今天的常见渗透测试实践中使用！

## 渗透测试的类型

在规划渗透测试时，了解您想要遵循的方法是很重要的。让我们来看一下一般的方法：

+   **黑盒**：这种测试类型涉及对范围内目标进行评估，但对范围内系统和应用程序的内部工作一无所知。通常，它可以被视为对系统功能要求的验证。例如，客户将开发一个新应用程序，并要求在用户级别执行测试。

通常，用户对应用程序的内部工作一无所知，只使用它的功能属性 - 这意味着可能需要进行功能测试。功能测试旨在突出任何有人可能发现的应用程序中的漏洞。

+   **白盒**：白盒测试是你在现实世界中看到的最常见的测试方法。它涉及对系统进行全面了解的测试。将其视为质量保证或测试系统的每一个可能的细节，以确保它不容易受到攻击。白盒测试是发现和验证源代码和系统设置内部的一个很好的方法。通常，在新产品（应用程序、硬件等）被整合到业务之前，会执行白盒测试。在本书中，我们将一直进行白盒测试。

+   **灰盒**：简单来说，这是黑盒测试和白盒测试的混合体。一个很好的例子是测试一个 Web 应用程序。测试人员将完全了解 Web 应用程序的前端，但对后端几乎一无所知。

## 优点和缺点

+   我们已经探讨了各种测试风格，让我们在继续之前先看看它们的优缺点。每种测试风格都有最佳的时间和地点，我们将在下面看到这些条件。

### 优点

白盒测试具有以下优点：

+   由于发现所需的时间较少，因此速度快

+   由于时间限制较少，价格便宜

+   允许测试人员有更多时间查看深层功能方面，如代码审查

黑盒测试具有以下优点：

+   由于测试人员必须模拟真实的威胁向量，因此提供更可靠和现实的结果

+   通过钓鱼活动突显最终用户的弱点

灰盒测试具有以下优点：

+   使用白盒测试和黑盒测试的组合

+   允许创造性，不受一种测试风格的约束

现在我们已经看过了优点，让我们继续看看每种测试类型的缺点。

### 缺点

白盒测试具有以下缺点：

+   通常，白盒测试不会根据真实的攻击者场景提供结果。

+   如果计划不周，可能会很头疼。通常，白盒测试没有准备好，测试开始时会缺少很多信息。例如，当白盒测试开始时，目标业务往往会忽视某些东西，并忘记渗透测试的特定资源。这是需要注意的事情，并且在*第十章**，渗透测试最佳实践*中有更多讨论。

+   这样的测试可能会提出有偏见的意见，因为测试人员已经对环境了解一切。

黑盒测试具有以下缺点：

+   因为测试人员需要花时间获取访问权限，所以耗时。

+   根据参与的长度，可能会很昂贵。

灰盒测试具有以下缺点：

+   根据渗透测试的范围和渗透测试的知识程度，可能会耗费时间。

+   根据测试的长度，可能也会很昂贵。

+   现在我们已经对渗透测试有了一个很好的概述，让我们下载 Kali Linux 的 VirtualBox 镜像，并设置操作系统，以便我们可以用它与我们的 AWS 环境进行交互。

# Kali Linux

Kali Linux 是一个 Debian 发行版，由 Offensive Security（[www.offensive-security.com](http://www.offensive-security.com)）免费提供。由于安全性的日益重要，Kali Linux 在过去几年中变得很受欢迎。事实上，对于从事渗透测试的任何人来说，它都是必不可少的。这是因为操作系统预装了一系列安全工具，无需手动安装。

在本节中，我们将学习如何在本地设置我们自己的 Kali Linux 镜像。这个练习的目的是让我们更加熟悉 Kali，并教会您如何设置自己的虚拟机。我们还将在本书中使用这个 Kali 实例与 AWS 进行交互。

## 设置 Linux 镜像

设置 Kali Linux 很容易。按照这里给出的步骤进行：

1.  我们需要去 Offensive Security 网站上获取一个 Kali 镜像。确保您获取的是 VirtualBox 的`Kali Linux 64 位版本`：https://www.offensive-security.com/kali-linux-vm-vmware-VirtualBox-image-download/。

1.  在下载的同时，让我们去下载一个新版本的 VirtualBox。VirtualBox 将是我们构建和托管 Kali 机器的地方：https://www.VirtualBox.org/wiki/Downloads。

1.  按照说明安装 VirtualBox。安装步骤将根据您的主机操作系统而有所不同。

1.  启动 VirtualBox，转到左上角，单击**导入虚拟设备...**，列在**文件**下方：![图 2.1 - 选择导入虚拟设备的文件菜单](img/Figure_2.01_B15630.jpg)

图 2.1 - 文件菜单中选择导入虚拟设备...

1.  在那之后，您需要导入我们在*步骤 1*中下载的 Kali Linux `.ova`文件。`.ova`文件是一个 VirtualBox 格式的文件，它允许我们将虚拟镜像直接导入到 VirtualBox 中，几乎没有任何努力：![图 2.2 - 导入 Kali Linux .ova 文件](img/Figure_2.02_B15630.jpg)

图 2.2 - 导入 Kali Linux .ova 文件

1.  选择新镜像后，您需要更改虚拟机的名称。在这种情况下，我们将名称更改为**AWS Kali**。如果您将名称更改为其他内容，请确保记住您的命名，以便在本书中使用 Kali Linux 机器。我们还关闭**USB 控制器**功能，因为我们不会使用它：![图 2.3 - 虚拟设备设置窗口](img/Figure_2.03_B15630.jpg)

图 2.3 - 虚拟设备设置窗口

1.  现在让我们启动我们的 Kali Linux 虚拟机。为此，请双击您创建的主机。虚拟机将启动并提示您进行用户登录：![图 2.4 - Kali Linux 启动屏幕](img/Figure_2.04_B15630.jpg)

图 2.4 - Kali Linux 启动屏幕

1.  要登录，请使用以下凭据：

用户名：`root`

密码：`toor`

现在我们已经登录到了 Kali 机器，让我们熟悉一些基本的 Linux 命令，这些命令将帮助我们在本书中进行操作。了解这些命令的作用很重要，因为它允许您在 Kali Linux 机器以及其他 Linux 发行版中进行操作。

## 探索基本的 Linux 命令

由于我们正在使用 AWS 和 Kali Linux，了解一些基本的 Linux 命令很重要。您将使用许多工具，这些工具需要使用终端。因此，了解如何运行基本命令至关重要。我们将使用我们在本地设置的新 Kali Linux 镜像来发现一些新的命令。

1.  当您的 Kali 实例启动并运行时，让我们登录并创建一个目录。为此，您需要输入`mkdir`命令。这个命令允许我们创建可以存储信息的目录。让我们把目录命名为`Pentesting`：

```
$ mkdir Pentesting
```

1.  之后，您需要进入该目录，但在这之前，我们需要知道我们当前正在工作的目录是什么。使用`pwd`命令打印出您当前的目录。使用`cd`命令进入`Pentesting`目录：

```
$ cd Pentesting 
```

1.  现在我们有了目录，让我们创建一个`.txt`文件，以便以后在本书中添加笔记。键入`touch`命令以创建一个名为`notes.txt`的文件：

```
$ touch notes.txt
```

1.  现在我们已经创建了一个文件，让我们在其中放一些实际的笔记。我们将使用`echo`命令将一些文本输出到我们的`notes.txt`文件中。之后，我们将使用`cat`命令列出文件中的单词。`cat`命令打印文件的内容，还可以用于将两个文件连接在一起。之后，我们将创建另一个名为`notes2.txt`的文件，并将其与`notes.txt`组合成一个文件。

1.  让我们将一些文本输出到`notes.txt`中：

```
$ echo "I love pentesting!" > notes.txt
```

1.  现在使用`cat`命令列出上下文：

```
$ cat notes.txt
```

1.  现在让我们创建另一个文件，并一次性添加一些文本：

```
$ echo "And I love AWS!" > notes2.txt
```

1.  然后，我们将组合`notes.txt`和`notes2.txt`以形成一个文件：

```
$ cat notes.txt notes2.txt > AWSPentesting.txt
```

您应该有类似以下内容的东西：

![图 2.5 - 组合 notes.txt 和 notes2.txt 的输出](img/Figure_2.05_B15630.jpg)

图 2.5 - 组合 notes.txt 和 notes2.txt 的输出

恭喜！您现在已经学会了在 Linux 操作系统中创建目录和文件。虽然这些命令很重要，但并非我们需要了解的所有命令。现在，我们将看一些其他命令，这些命令在我们阅读本书并了解更多关于 AWS 和渗透测试时是很重要的。

**其他命令**：

在阅读本书时，我们需要了解的一些其他命令如下：

+   `ls`：这个命令表示“列出”，用于列出目录的内容。

+   `rm`：此命令表示“删除”，并从目录中删除文件。

+   `mv`：此命令将文件从一个目录移动到您指定的另一个位置。

+   `ping`：这个命令不仅适用于 Linux，而且是一个很好的命令。`ping`命令向主机发送回显请求，希望收到回显响应。它与主机通信，以查看它们是否在线。但是，有时主机会禁用 ping，使它们看起来离线。如果发生这种情况，我们可以在`ping`中使用`-Pn`开关。

+   `ifconfig`：这允许您查看正在运行的网络接口。使用 Kali，运行`ifconfig`通常会显示**eth0**接口，该接口通常路由或连接到您的主**网络接口卡**（**NIC**）。

在本节中，我们探索了 Linux 中的基本命令。这些命令将帮助我们有效地使用 Linux，以便我们能够跟上本标题中的课程。接下来，我们将开始探索将帮助我们学习渗透测试的渗透测试工具。

渗透测试工具

在渗透测试中，您将拥有大量的工具可供选择，以满足您的所有需求。除了使用手动测试、自动化测试甚至编写自己的脚本之外 - 我们将在本书中进行 - 在测试方面的创造力真的是无限的。

虽然我鼓励您查看 Kali Linux 中的工具，但我们还将简要介绍一些我们将在本书中经常使用的工具。在本节中，让我们看一看 NMAP 和**Metasploit**。这两个工具在扫描和探测服务和漏洞时提供非常准确的结果。我们还将简要介绍**AWS Inspector**，这是一个在 EC2 实例上进行漏洞分析的绝佳工具。

## NMAP

NMAP 是一个在 Kali Linux 中预先安装的精彩工具。它是一个开源工具，通常被网络管理员使用，但由于其能够同时发现多个主机上的服务和开放端口的能力，它在渗透测试中变得越来越受欢迎 - 这通常被称为端口扫描。

端口扫描是通过探测特定端口来进行的，如果该端口是开放的，就会返回有关该端口的信息。还有各种脚本可以从 NMAP 运行，告诉你扫描的主机是否容易受到特定问题的影响。还记得我们在[*第一章*]（B15630_01_Final_ASB_ePub.xhtml#_idTextAnchor025）*，构建您的 AWS 环境*中设置了一个匿名服务器吗？我们可以使用以下脚本来检测匿名 FTP 登录：

```
$ nmap -sV -sC -p 21 <Victim IP> 
```

让我们分解命令以更好地理解发生了什么。我们将按顺序分解开关：

+   `-sV`开关列举了服务的版本。这意味着扫描输出将传达正在使用的 FTP 版本。

+   `-sC`开关用于与扫描一起使用脚本。在这种情况下，它将检查匿名 FTP。

+   `-p`开关表示要扫描的端口。在我们的情况下，我们只使用了端口`21`，因为我们只是探测端口`21`。但是，我们可以扫描多个端口。

随着我们在本书中的进展，我们将更多地发现和使用 NMAP。与此同时，请随意查看更多有关 NMAP 的功能。请访问[www.nmap.org](http://www.nmap.org)获取更多信息。

## AWS Inspector

AWS Inspector 是您的 AWS 环境中可用的工具，它在 AWS 云环境中的 EC2 实例上运行自动化安全评估。该扫描程序检查常见的漏洞、曝光和最佳实践 - 修复措施 - 这将使您能够安全快速地加固您的环境。AWS Inspector 的缺点是有服务费用，因此我们将在本书中避免使用它。但是，欢迎阅读有关该服务的更多信息。

## Metasploit

我们在[*第一章*]（B15630_01_Final_ASB_ePub.xhtml#_idTextAnchor025）*，构建您的 AWS 环境*中提到了 Metasploit，并学习了如何通过我们的 AWS Kali 实例更新它。鉴于我们在[*第一章*]（B15630_01_Final_ASB_ePub.xhtml#_idTextAnchor025）*，构建您的 AWS 环境*中学到的有关 Metasploit 的知识，让我们快速看一下它的一些特性。我们将访问我们的本地实例进行此练习：

1.  在我们做任何事情之前，我们需要以与之前相同的方式更新 Metasploit，在[*第一章*]（B15630_01_Final_ASB_ePub.xhtml#_idTextAnchor025）*，构建您的 AWS 环境*中：

```
$ apt install metasploit-framework 
```

1.  一旦您完成了更新 Metasploit，就可以开始启动程序了：

```
$ msfdb run
```

1.  现在 Metasploit 正在运行，让我们在我们自己的主机上测试一下端口扫描模块。这将帮助我们了解一些 Metasploit 命令的语法。在开始之前，我们需要在我们的主机上启动 SSH。要开始，请打开一个新的终端并输入以下命令以启动 SSH：

```
$ service ssh start
```

1.  为了确保服务正在运行，我们可以输入以下命令：

```
$ service ssh status
```

如果一切正常运行，您应该看到类似于以下截图中的输出：

![图 2.6 - 启动 SSH 的输出](img/Figure_2.06_B15630.jpg)

图 2.6 - 启动 SSH 的输出

现在我们已经启动了 SSH，让我们看看我们可以用它和 Metasploit 做些什么：

1.  回到您打开 Metasploit 的终端，并使用`search`命令查找 TCP 端口扫描程序。语法应该类似于`search TCP portscan`。其中的一个最初的结果将是`auxiliary/scanner/portscan/tcp`。让我们使用它来扫描我们的机器：

```
$ use auxiliary/scanner/portscan/tcp
```

1.  加载模块后，键入`options`命令以查看我们需要设置的参数。`options`命令列出了模块的所有参数。不同的模块将有不同的需要设置的参数：![图 2.7 - 选项命令的输出](img/Figure_2.07_B15630.jpg)

图 2.7 - 选项命令的输出

1.  在本章中，我们唯一需要设置的参数是`RHOSTS`。现在，`RHOSTS`代表`ifconfig`命令来发现您的机器的 IP。在这种情况下，我的机器的 IP 是`192.168.1.5`：![图 2.8 - 运行 ifconfig 的输出](img/Figure_2.08_B15630.jpg)

图 2.8 - 运行 ifconfig 的输出

1.  现在您知道了您的机器的 IP，键入以下命令将其分配给`RHOSTS`参数：

```
$ set RHOSTS 192.168.1.5
```

1.  由于这是我们需要的唯一参数，请继续使用`run`命令来针对我们的主机启动模块。它应该会发现 SSH 有一个开放的端口：

![图 2.9 - 使用运行命令的输出](img/Figure_2.09_B15630.jpg)

图 2.9 - 使用运行命令的输出

正如你所看到的，它显示端口`22`是开放的！查看命令的输出显示主机扫描已经完成 100%，并显示`22 - TCP OPEN`。

就像那样，我们现在知道如何在 Metasploit 中设置扫描模块。我们将在整本书中经常使用 Metasploit，并且我们将在*第九章**，使用 Metasploit 进行真实渗透测试等！*中使用它整整一章。现在我们知道了一些关于使用 Metasploit 的知识，让我们继续看看脚本编写。

## 脚本编写

脚本编写是道德黑客和渗透测试的重要-甚至是必不可少的-部分。有时您可能会遇到工具运行不好，或者您可能只需要编写一个快速脚本来测试应用程序或服务。如果有疑问，编写一个脚本将帮助您实现所需的结果。我们将使用**PyCharm**中的 Python 编程来看一些非常基本的脚本编写。

PyCharm 是一个允许您构建和运行自己代码的 IDE。IDE 与使用终端和文本编辑器的区别在于软件中打包的内置故障排除。无需寻找语法错误；在运行代码之前，IDE 将突出显示问题。本节将介绍在本地 Kali 实例上安装 PyCharm 并创建一个 Python 脚本，我们可以在一两步中进行调试。如果您以前从未编写过脚本，不要感到不知所措；这个基本脚本将为我们提供前进 Python 所需的一般知识和语法：

1.  首先，我们需要在本地 Kali 机器上安装 PyCharm。为此，您需要获取当前的下载，您可以从 JetBrains 获取：[`www.jetbrains.com/pycharm/download/`](https://www.jetbrains.com/pycharm/download/)。

1.  下载免费的社区版，然后将其移动到我们的工作文件夹中：

```
$ mv <PyCharm> <working directory>
```

1.  一旦移动过去，你会想继续提取文件夹中的所有内容，然后将其移动到`/opt`文件夹中：

```
$ sudo tar xfz <pycharm.tar.gz> -C /opt/
```

1.  现在我们已经提取了它，我们可以继续并运行程序。要开始，请进入`/bin`文件夹并运行以下命令：

```
$ ./pycharm.sh
```

1.  安装 PyCharm 后，创建一个新项目并命名为`Script`。这将是我们的工作文件夹，我们可以在整本书中制作所有我们的脚本。随意给您的文件夹取任何您喜欢的名字，但请确保您记住名称和存储位置：![图 2.10 - 在 PyCharm 中创建一个新项目](img/Figure_2.10_B15630.jpg)

图 2.10 - 在 PyCharm 中创建一个新项目

1.  现在我们有了一个文件夹，让我们创建一个名为`1`的程序。这将自动将文件存储为`1.py`。要开始，请右键单击文件夹并创建一个新文件。然后，为它分配一个名称；在这种情况下，为它分配名称`1`。点击`statement`变量具有与`if`条件匹配的文本。让我们看看如果将声明更改为*Hello World!*会发生什么：

```
#!/usr/bin/python
statement = "Hello W0rld!"
if statement == "Hello World":
   print statement
else:
   print"That statement is not correct"
```

很可能你会得到另一个声明*该声明不正确*。这是由于变量的语法与`if`语句设置的条件不匹配。条件应该是“Hello World”，而不是“Hello World！”-因此使条件无效。

花些时间了解 Python 的工作原理。有许多资源可以突出 Python 的基础知识以及其在安全和渗透测试中的用法。在本书的后面，我们将发现如何使用 Python 为我们的 AWS 环境编写脚本的方法。

# 操作系统

在您的渗透测试旅程中，您将遇到多种不同的操作系统。各种操作系统具有不同的用途，包括作为服务器、主机客户端或云环境。了解这些各种操作系统很重要，因为您需要了解它们在其环境中的工作方式。在本节中，我们将讨论渗透测试时应该了解的 Linux 和 Windows 系统的一些方面。

## Linux/Unix

Linux 是基于 Unix 平台的开源操作系统。它出现在我们目前使用的许多设备和服务器上，因此重要的是您了解一些基本知识。它是开源的，因此具有开放的协作平台，允许其他开发人员对其进行工作，这意味着您可以添加自己的代码和错误修复。

Linux 有许多不同的操作系统“风味”，例如 Debian - Kali 就是其中之一，Fedora 和 Ubuntu 等。在您的 IT 职业生涯中，甚至在本书中，都可能会遇到其中一些系统！

## Linux 文件权限

了解 Linux 文件系统的工作原理很重要。Linux 文件系统被称为**扁平文件系统**，这意味着操作系统中的每个文件必须具有不同的名称。操作系统中的文件具有三种不同的权限可以设置：

+   读取：允许用户读取文件

+   写入：允许用户写入文件

+   执行：允许用户执行程序

这很重要，因为有时您需要了解或设置文件的权限。在渗透测试中，您将遇到需要编辑然后设置为可执行文件的开源工具。`chmod`命令允许您更改文件的权限以使其成为可执行文件。例如，如果我们有一个名为`pentest.py`的文件，并且需要将其设置为可执行文件，我们可以使用以下命令创建可执行文件：

```
$ chmod +x pentest.py
```

有时，您可能没有权限运行此类程序。您可能需要额外的特权来运行命令，甚至在某些目录中移动。要解锁这些特权，让我们谈谈**超级用户**。

## sudo

`sudo`代表**superuser do**，将以超级用户身份运行其后的任何命令：

```
$ sudo chmod +x pentest.py
```

所有`sudo`用户都存储在`/etc/sudoers`文件路径中，只能通过使用`visudo`命令进行编辑。随时可以在本地 Kali 实例中检查文件路径。

现在我们对 Linux 有了更多了解，让我们来看看我们生活中曾经使用过的操作系统之一：Windows 操作系统。

## Windows

Windows 是每个人在生活中很可能都使用过的操作系统。它是最常见的家庭用户操作系统，通常用作许多不同公司的用户操作系统。虽然该操作系统易于使用，具有令人惊叹的桌面环境，一切都可以通过点击和拖动来完成，但由于漏洞和新版本中的某些 UI 和 UX 决策，该操作系统在近年来遭受了一些抨击。

多年来，许多不同的漏洞利用已针对 Windows 操作系统。例如，有**EternalBlue**，一种攻击**服务器消息块**服务的漏洞利用，允许攻击者访问受害者的系统。实际上，这种漏洞利用被用于利用系统，然后使用这些系统作为勒索软件有效载荷的服务器，几年前造成了许多麻烦。

多年来，其他漏洞和问题也已经被发现针对 Windows 系统。EternalBlue 只是一个例子，但是一个重要的例子，突出了为什么补丁和安全性如此重要。如果 Windows 系统存在漏洞，可能会在大规模上造成问题。

## 图形用户界面

Linux 和 Windows 之间最大的区别之一是终端中的“kali-undercover”。

# 摘要

本章涵盖了相当多的内容，所以如果有需要，请返回查看。我们学习了什么是渗透测试，以及如何在我们的机器上本地设置 Kali Linux 并在操作系统中使用各种工具，我们还研究了各种操作系统。

在下一章中，我们将进入本书的下一部分，并开始研究 AWS 以及如何在我们自己的环境中进行渗透测试和安全评估。

# 进一步阅读

+   了解更多关于 AWS Inspector 的信息：https://aws.amazon.com/inspector/

+   Python 网站和资源：https://www.python.org

+   NMAP 网站和资源：https://www.nmap.org
