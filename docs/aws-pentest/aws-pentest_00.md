# 前言

渗透测试已经成为验证和保护企业的一种非常有效的方法，无论是小型企业还是大型企业。渗透测试的目的是通过对组织内的对象、服务和流程进行全面枚举和利用，来评估漏洞的影响。本书专注于使用渗透测试的改编版本，并将其应用于道德黑客和保护 AWS 流行的云服务。

# 这本书是为谁准备的

这本书适用于对云技术有基本了解的学生和专业人士，他们希望在 AWS 和渗透测试中获得实际的安全知识。

# 本书涵盖的内容

*第一章*, *构建您的 AWS 环境*，从 AWS 的基础知识开始。AWS 是一个不断发展的云技术提供商，许多公司正在使用它来存储他们的数据。本章将帮助您了解如何创建基本的 AWS 环境，以及涵盖了可以在受控环境中利用的配置错误服务。不需要对 AWS 有任何了解，本章将为您提供关于如何设置自己的 AWS 环境的一切所需的知识。

*第二章*, *渗透测试和道德黑客*，介绍了渗透测试本身。渗透测试开始变得流行起来；公司进行渗透测试并了解他们对系统的未知情况已经变得司空见惯。渗透测试是发现和利用 IT 系统中典型扫描器无法检测到的问题的实践。本章将简要介绍渗透测试是什么，并通过使用渗透测试工具进行练习，让你亲自动手。

*第三章*, *探索渗透测试和 AWS*，讨论了工具。对任何渗透测试的第一步总是涉及扫描系统和资源。渗透测试人员使用各种工具和技术，以确保他们正确地扫描系统并枚举尽可能多的信息。本章将重点介绍使用 NMAP 和 Metasploit 从目标中获取信息，这些信息可以用于进一步的利用。

*第四章*, *利用 S3 存储桶*，涵盖了 S3 存储桶。S3 存储桶是 AWS 用来存储数据的主要资源之一。也被称为简单存储服务存储桶，S3 存储桶是存储对象（如数据和元数据）的好方法。然而，与其他文件存储解决方案一样，S3 存储桶可以通过简单的配置错误轻松被利用。这些配置错误可能导致数据泄露和其他严重的安全问题。本章将重点介绍 S3 存储桶、它们的功能以及如何利用公共存储桶和配置错误的存储桶的问题。

*第五章*, *理解易受攻击的 RDS 服务*，探讨了另一个 AWS 的漏洞。**亚马逊关系型数据库服务**（**RDS**）是可扩展的，使得设置基于云的数据库变得容易，允许用户像使用典型数据库一样操作。RDS 允许用户通过诸如 MySQL 和 Amazon Aurora 之类的服务进行交互，就像用户在典型的物理数据库基础设施中一样。RDS 的缺点与常规数据库相同：注入和配置错误。本章将介绍常见的配置错误以及它们如何导致可能的注入。

第六章《设置和渗透测试 AWS Aurora RDS》继续关注数据库。AWS Aurora 为 AWS 账户提供了类似 SQL 的数据库功能，操作简单。以类似于 PostgreSQL 和 MySQL 的查询为重点，Aurora 使用户可以轻松地与高性能存储系统进行交互。然而，对其的错误可能会造成严重后果，如果没有充分保护，可能会导致数据泄露。本章将讨论 Aurora 所提供的优缺点，并探讨 SQL 注入的危险 - 这是针对托管 MySQL 等服务的网站的恶意攻击。

第七章《评估和渗透测试 Lambda 服务》转向了 Lambda。Lambda 允许用户创建代码，以便稍后根据需要响应事件。这些事件可以是 AWS 环境中发生的任何事情 - HTTP 请求、对 S3 存储桶的修改，或者例如新的 EC2 实例被启动。本章将重点讨论 Lambda 中的漏洞发现如何导致服务的利用以及内部流程和对象的发现。

第八章《评估 AWS API Gateway》专注于 API Gateway。AWS API Gateway 充当应用程序托管数据的网关。这些应用程序托管的数据各不相同；然而，不变的是一些数据可能被未经授权的人员视为有吸引力。本章将讨论 AWS API Gateway 是什么，如何检查 API 调用，并如何通过渗透测试 API 调用来纠正问题。

第九章《使用 Metasploit 进行真实渗透测试！》深入探讨了 Metasploit。Metasploit 是一种自动化的渗透测试工具，使渗透测试人员能够轻松利用漏洞。Metasploit 提供了利用载荷，并已成为测试常见漏洞的流行工具。Metasploit 还配备了 meterpreter shell，允许渗透测试人员在利用系统上进行反向连接。反向 shell 允许渗透测试人员根据权限获得一定程度的控制，从而简化了枢纽和窃取。本章将以实际案例展示如何使用 Metasploit 在真实环境中对 AWS 环境进行渗透测试。

第十章《渗透测试最佳实践》是我们认识到渗透测试并非一刀切的评估类型。适用于一次渗透测试的内容可能并不适用于另一次。保持对趋势的关注、磨练技能，并发展对渗透测试含义的理解是至关重要的。本章将讨论在保持渗透测试技能和更新流程方面的最佳实践，以及如何跟上渗透测试的步伐。

第十一章《避免麻烦》探讨了您的行为可能产生的潜在影响。对 AWS 系统进行渗透测试可能会对系统造成严重侵入，并且如果执行不正确还可能导致法律问题。在对 AWS 进行渗透测试时，了解作为渗透测试人员在 AWS 系统上可以做什么和不能做什么至关重要。本章将介绍对 AWS 进行渗透测试的注意事项，以及拒绝服务、洪水攻击以及这些技术可能对渗透测试团队产生的法律影响。

第十二章《AWS 的其他项目》解释了 AWS 在市场空间中仍然相对较新，但在很大程度上正在增长。这种增长导致许多安全服务为公司创建培训平台，以便在 AWS 渗透测试的“安全空间”中进行测试和培训。本章将探讨可以集成以增强您的 AWS 渗透测试方法的各种项目。

# 为了充分利用本书

本书将要求您在整个文本中在各种操作系统上安装特定程序。请注意，虽然由于更新，某些软件版本可能不匹配，但安装方法将保持不变。

![](img/B15630_Preface_Table.jpg)

**如果您使用本书的数字版本，我们建议您自己输入代码或通过 GitHub 存储库（下一节中提供的链接）访问代码。这样做将有助于避免与复制和粘贴代码相关的任何潜在错误。**

完成本书后，我强烈建议您花一些时间调整书中学到的策略和技术，并将它们融入到您所在企业的方法论中。

# 下载示例代码文件

您可以从 GitHub 上的[`github.com/PacktPublishing/AWS-Penetration-Testing`](https://github.com/PacktPublishing/AWS-Penetration-Testing)下载本书的示例代码文件。如果代码有更新，将在现有的 GitHub 存储库上进行更新。

我们还有来自丰富书籍和视频目录的其他代码捆绑包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)上找到。快去看看吧！

# 代码演示

本书的实际代码演示视频可在 https://bit.ly/3kSoMQT 观看。

# 下载彩色图像

我们还提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。您可以在这里下载：[`www.packtpub.com/sites/default/files/downloads/9781839216923_ColorImages.pdf`](http://www.packtpub.com/sites/default/files/downloads/9781839216923_ColorImages.pdf)。

# 使用的约定

本书中使用了许多文本约定。

`文本中的代码`：表示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。这里有一个例子：“`aws`：此命令允许您与您的 AWS 环境进行交互。”

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：

```
Set RHOSTS <<aurora instance>>
Set USERNAME admin
Set STOP_ON_SUCCESS true
Set PASS_FILE AuroraPasswords.txt 
```

任何命令行输入或输出都以以下方式编写：

```
$ aws s3api get-bucket-policy --bucket packtawspentesting --output text | python -m json.tool
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会以这种方式出现在文本中。这里有一个例子：“下一个屏幕将显示**配置选项**图标。”

提示或重要说明

像这样。
