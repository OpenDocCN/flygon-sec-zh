# *第六章*：设置和渗透测试 AWS Aurora RDS

AWS Aurora 为 AWS 账户提供了类似 SQL 的数据库功能。以使用 PostgreSQL 和 MySQL 为中心，例如查询，Aurora 使用户可以轻松地与高性能存储系统进行交互。然而，副作用可能会带来致命的代价，如果不充分保护，可能会导致数据泄漏。本章将讨论 Aurora 所提供的内容，以及**SQL 注入**（**SQLi**）的危险 - 这是针对托管 MySQL 等服务的网站的恶意攻击。我们还将讨论**拒绝服务**（**DoS**）和**分布式拒绝服务**（**DDoS**）的缓解和预防。

在本章中，我们将涵盖以下主题：

+   理解和设置 Aurora RDS

+   白盒/功能性渗透测试 Aurora

+   设置 SQLi 实验室

+   与 SQLi 有趣

+   避免 DDoS

# 技术要求

要按照本章的说明进行操作，您将需要以下内容：

+   Juice Shop 将用于创建我们的 SQli 实验室。更多信息可以在这里找到：[`owasp.org/www-project-juice-shop/`](https://owasp.org/www-project-juice-shop/)。

本章中使用的代码可在以下链接找到：

+   [`github.com/bkimminich/juice-shop`](https://github.com/bkimminich/juice-shop)

+   [`raw.githubusercontent.com/danielmiessler/SecLists/master/Passwords/Default-Credentials/mssql-betterdefaultpasslist.txt`](https://raw.githubusercontent.com/danielmiessler/SecLists/master/Passwords/Default-Credentials/mssql-betterdefaultpasslist.txt)

查看以下视频以查看代码的实际操作：[`bit.ly/2TIx2qz`](https://bit.ly/2TIx2qz)

# 理解和设置 Aurora RDS

在*第五章*中，*理解易受攻击的 RDS 服务*，我们研究了关系数据库并设置了自己的 RDS 数据库，并实现了 MySQL 作为运行在 RDS 实例上的基础服务。正如你所看到的，设置数据库相对简单，所以现在我们将开始研究 Aurora。

Aurora 的一个好处是简单性，我们将在设置 Aurora 集群时进行研究。因为 Aurora 运行在 RDS 之上，它完成了大部分的*繁重工作*，并允许你与以前一样进行接口。Aurora 的另一个巨大优势是安全性。Aurora 对静态数据和传输数据进行加密。在两个级别进行加密可以确保数据的机密性，无论是存储还是使用。在渗透测试中，诸如**个人可识别信息**（**PII**）之类的数据非常敏感，如果发现未加密，应该立即披露。

重要提示

如果在渗透测试期间发现 PII 未受保护，则渗透测试应该停止并恢复，并立即通知管理人员。

Aurora 兼容 MySQL 和 PostgreSQL。Aurora 的一个伟大之处在于需要 MySQL 和 PostgreSQL 等服务的工具也可以在 Aurora 中运行。Aurora 是使用与 MySQL 和 PostgreSQL 相同或相似的数据库引擎构建的。

接下来，让我们使用一些我们已经掌握的知识来设置 Aurora 和 MySQL 数据库。

## 设置 Aurora

现在，设置 Aurora 应该相对不那么复杂，因为我们已经在 RDS 上设置了数据库。如果还没有，请转到*第五章*，*理解易受攻击的 RDS 服务*，并设置一个数据库，以便了解在 AWS 中设置数据库的步骤。拥有数据库是继续前进所必需的。

就像以前一样，转到 Amazon RDS 控制台，然后单击**创建数据库**开始。接下来，按照以下步骤：

1.  选择**标准创建**：![图 6.1 - 选择标准创建](img/Figure_6.01_B15630.jpg)

图 6.1 - 选择标准创建

1.  选择**具有 MySQL 兼容性的 Amazon Aurora**：![图 6.2 – Aurora 选择](img/Figure_6.02_B15630.jpg)

图 6.2 – Aurora 选择

1.  选择**区域数据库**位置以适应您的位置。

在**数据库特性**屏幕上，选择**一个写入者和多个读取者 - 并行查询**。这是一个很好的方法，因为它允许一个更加冗余的混合工作负载：

![图 6.3 – 一个写入者和多个读取者 - 并行查询](img/Figure_6.03_B15630.jpg)

图 6.3 – 一个写入者和多个读取者 - 并行查询

1.  在**设置**页面上，为您的集群命名。确保您记住这个名字。

1.  设置用户名和密码：![图 6.4 – 为您的新实例创建用户名和密码](img/Figure_6.04_B15630.jpg)

图 6.4 – 为您的新实例创建用户名和密码

1.  选择**密码验证**。

1.  点击**创建数据库**：

![图 6.5 – 新的 Aurora 集群](img/Figure_6.05_B15630.jpg)

图 6.5 – 新的 Aurora 集群

就是这样 – 我们已经设置了一个可以使用的 Aurora 数据库集群。尝试连接并测试一些功能，就像您在上一章中测试 MySQL 时所做的那样，*第五章*，*理解易受攻击的 RDS 服务*。

现在我们的 Aurora 实例正在运行，让我们进行一项渗透测试练习，演示一个实际的渗透测试人员如何查看与 Aurora 渗透测试相关的一些*易于攻击*的内容。

重要提示

*易于攻击*是在系统、网络和应用程序中发现的易于利用的漏洞。

# 白盒/功能性渗透测试 Aurora

就像我们之前对 RDS 所做的那样，我们将从渗透测试的角度来看看我们可以从 Aurora 中找到什么。我们知道环境，因为我们设置了它，但是为了下一个练习的缘故，让我们假设我们正在对 Aurora 实例进行渗透测试。这个测试涉及查看实例是否可以被公开访问，密码字段的强度如何，以及在查看实例时我们可能能做的其他任何事情。

我们要这样做的原因是尽可能多地暴露白盒渗透测试方法。白盒渗透测试是最常见的渗透测试方法，因为它允许渗透测试人员完全测试所有功能目的和合规目的。我们将把这个方法应用到我们的 Aurora 实例上。

我们的参与始于扫描 Aurora 实例。请记住，除了实例的地址，我们一无所知！

## 侦察 – 扫描公共访问

像往常一样，我们需要检查实例是否是公共的。我们可以通过使用 NMAP 运行`no ping`扫描来做到这一点：

```
$ nmap -Pn -vv <<aurora instance IP>>
```

这将给我们以下输出：

![图 6.6 – 扫描 Aurora 并发现端口 3306](img/Figure_6.06_B15630.jpg)

图 6.6 – 扫描 Aurora 并发现端口 3306

从前面的屏幕截图中，看起来实例实际上是在端口`3306`上公开访问的，这是 MySQL 服务使用的端口。现在我们知道目标主机的以下信息：

+   正在使用 MySQL。

+   端口`3306`对公众开放。

这些信息非常重要，因为我们知道系统正在使用 MySQL 的默认端口，并且我们知道正在使用的数据库类型。由于它使用默认端口，这可能意味着安全控制措施较少。

重要提示

将端口更改为不同的服务可以通过混淆增加一些安全性。然而，这可能表明目标上可能实施了更多的安全性。

现在，我们可以继续深入研究如何访问 Aurora 实例。这将需要使用用户名和密码列表进行一些暴力破解。

## 枚举用户名和密码

现在我们对正在运行的服务有了更多的信息，我们需要继续并开始攻击这些服务。在我们的白盒渗透测试方法论的下一步中，我们将开始寻找一些弱密码。如果我们发现了用户名和密码，我们就可以直接访问目标。

发现用户名和密码的一个好而快速的方法是尝试使用默认名称来对服务和设备进行攻击。在我们的情况下，我们知道 MySQL 使用默认用户名`admin`。因为我们知道这一点，我们将使用`admin`用户名进行暴力破解，并使用可以在 GitHub 上找到的密码列表，方法如下：

1.  要获取密码列表，请运行以下命令：

```
$ wget https://raw.githubusercontent.com/PacktPublishing/AWS-Penetration-Testing/master/Chapter%206%3A%20Setting%20up%20and%20pentesting%20AWS%20Aurora%20RDS/mssql-betterdefaultpasslist.txt
```

1.  如果您打开文件，您会注意到列表中既有用户名又有密码 – 我们只需要密码。我们可以使用`awk`命令来切片和打印出密码，并将其存储在一个新文件中：

```
$ cat mssql-betterdefaultpasslist.txt | awk -F: {'print $2'} > AuroraPasswords.txt
```

1.  现在我们已经生成了密码列表，是时候来看一看是否可以获取到 Aurora 的用户名和密码了。我们将使用 Metasploit 来执行这个任务。首先，您需要启动 Metasploit：

```
$ msfdb run
```

1.  接下来，我们将加载`mysql`登录扫描器：

```
$ use auxiliary/scanner/mysql/mysql_login
```

1.  一旦您加载了您的模块，您需要设置一些参数。就像在[*第五章*]（B15630_05_Final_ASB_ePub.xhtml#_idTextAnchor227）中一样，*了解易受攻击的 RDS 服务*，设置以下参数：

```
Set RHOSTS <<aurora instance>>
Set USERNAME admin
Set STOP_ON_SUCCESS true
Set PASS_FILE AuroraPasswords.txt 
```

1.  一旦您设置好所有参数，使用`run`命令来执行针对 Aurora 主机的扫描：

![图 6.7 – 密码暴力破解](img/Figure_6.07_B15630.jpg)

图 6.7 – 密码暴力破解

我们已成功枚举了用户名和密码：

+   `admin`

+   `password`

重要提示

使用默认密码非常危险！确保在发现时报告默认用户名和密码。适当的纠正措施是将密码和用户名更改为符合**强**用户名和密码准则的内容。

从这里开始，我们有了可以让我们访问和拥有所有权限的凭据。这将允许我们删除数据库和表，以及添加我们自己的后门。强调发现弱凭据所涉及的问题非常重要，因为正如您所看到的，我们能够接管数据库！

现在我们对后端的工作原理有了更好的理解，让我们来看看如何通过建立我们自己的易受攻击的网站来（合法地）攻击前端。

# 为 SQLi 设置实验室

我们接下来要做的练习涉及设置一个 EC2 实例，安装一个易受攻击的 Web 程序，并在您的 EC2 实例上安装 Docker 服务。一旦一切就绪，我们将开始研究一些实际的 SQLi，并测试 Web 应用程序的易受攻击区域。

我们正在安装的易受攻击的应用程序**Juice Shop**是一个非常受欢迎的 Web 应用程序，充满了不同难度级别的黑客挑战 – 它甚至配备了一个黑客仪表板，您可以用来跟踪您的进度。要了解更多关于这个应用程序的信息，OWASP 有一个页面，上面有关于该项目的有用信息（[`owasp.org/www-project-juice-shop/`](https://owasp.org/www-project-juice-shop/)）。

重要提示

这个练习不涉及 Aurora – 它涉及 SQLi 和渗透测试参数，您可能会在使用 Aurora 的网站上看到。这个练习的目的是更加熟悉 SQLi 以及它的危险性。

首先，您需要设置一个 EC2 实例。到目前为止，您应该已经熟悉了如何设置实例；但是，如果您需要复习，请参考[*第一章*]（B15630_01_Final_ASB_ePub.xhtml#_idTextAnchor025），*构建您的 AWS 环境*！

一旦您在 EC2 仪表板上，请按照以下步骤启动和运行您的实例：

1.  点击**启动实例**。

1.  选择一个**Amazon 机器映像**（**AMI**）。我们使用的 AMI 是**Amazon ECS-优化的 Amazon Linux 2 AMI**：![图 6.8-选择 SQLi 实验的正确镜像](img/Figure_6.08_B15630.jpg)

图 6.8-选择 SQLi 实验的正确镜像

1.  配置**实例详细信息**，展开**高级详细信息**，并将以下脚本复制到**用户数据**中：

```
#!/bin/bash
yum update -y
yum install -y docker
service docker start
docker pull bkimminich/juice-shop
docker run -d -p 80:3000 bkimminich/juice-shop
```

1.  当您到达安全组时，请确保端口`80`对所有传入和传出流量都是开放的。

1.  启动您的实例。

1.  打开浏览器，搜索您的 EC2 实例的公共 DNS 名称。这样做的最简单方法是右键单击实例，然后选择包含*步骤 3*中脚本的`.sh`脚本。

您可能无法通过 HTTP 连接。常见问题是在设置 EC2 时错误配置安全组。如果无法通过 HTTP 连接，请确保您的安全组允许连接。请参考以下截图，并确保您的安全组设置正确：

![图 6.9-安全组仪表板](img/Figure_6.09_B15630.jpg)

图 6.9-安全组仪表板

设置完成后，连接到您的网络浏览器中的公共 DNS，您应该看到果汁店的主仪表板。要查看应用程序，请将 EC2 实例的公共 DNS 名称放入浏览器中，然后点击*Enter*：

![图 6.10-果汁店仪表板](img/Figure_6.10_B15630.jpg)

图 6.10-果汁店仪表板

干得好，我们已经成功在 AWS 中建立了我们自己的易受攻击的实验室。在我们继续之前，让我们看看在我们开始渗透测试之前可以做的一些快速清理工作。

## 配置果汁店自动启动

在我们继续之前，我们想做一个快速的**清理**步骤，这将自动为我们启动果汁店，每当我们的 EC2 实例启动时。每次启动实例时手动启动服务可能会很麻烦，这有助于节省我们的一些时间，这样我们就不必总是手动启动服务每当我们上线实例时。

让我们将其分解为以下步骤：

1.  您需要制作一个一行脚本，可以在启动时启动。我们可以通过两种不同的方式来做到这一点。首先，转到`init.d`目录：

```
$ cd /etc/init.d 
```

1.  一旦您进入目录，制作一个脚本，`init`可以在启动时调用。在这种情况下，我们将称之为`juiceShop.sh`：

```
$ sudo vi juiceShop.sh
```

1.  将以下脚本放入文件中并保存：

```
#!/bin/bash
sudo sudo docker run -d -p 80:3000 bkimminich/juice-shop
```

另一种方法是将其添加到实例的**cron 作业**中。cron 作业是用户可以在 Unix 操作系统上安排的基于时间的作业。**作业**是用户设置为以任何间隔运行的任务。在我们的情况下，我们希望果汁店在实例启动时运行。要做到这一点，请在您的 EC2 终端中键入以下命令：

```
$ @reboot sudo sudo docker run -d -p 80:3000 bkimminich/juice-shop
```

现在，我们有一个带有可用版本的果汁店的实例，可以开始测试 SQLi！在继续之前，请确保您的实例在启动时自动启动果汁店，方法是重新启动实例。

现在，让我们开始执行 SQLi 并对我们的易受攻击实例进行渗透测试。

# SQLi 的乐趣

现在我们已经准备好了，让我们继续对易受攻击的 Web 应用程序果汁店进行一些渗透测试。如果您需要了解 SQLi 是什么以及它是如何工作的，请查看*第五章*，*了解易受攻击的 RDS 服务*。

在我们开始之前，我们需要确保一些事情：

1.  我们的带有果汁店的 EC2 实例已经启动，并且可以通过 Web 浏览器访问。这将确保我们可以在接下来的练习中访问它。

1.  我们的*本地* Kali Linux 虚拟机在虚拟盒中启动。

完成了这两个步骤后，继续前往果汁店 EC2 实例的公共 DNS。接下来，让我们转到*记分牌*，看看 Web 应用程序上有哪些挑战。

在您的网络浏览器中转到目录：http://<<public dns>>/#/score-board/：

![图 6.11-果汁店记分牌](img/Figure_6.11_B15630.jpg)

图 6.11 - Juice Shop 记分牌

重要提示

在 Web 应用程序中找到`/score-board`是一个挑战。如果您想尝试各种方法来找到它，我建议使用目录搜索工具，如`gobuster`，`dirb`或`dirbuster`。

正如您所看到的，我们有很多挑战可供选择。我们只会专注于注入挑战；但是，也可以随意查看其他挑战。由于我们只想执行注入任务，因此单击**隐藏所有**以删除所有任务 - 这应该会使所有挑战消失。一旦所有任务都消失了，单击**注入** - 这将使所有注入挑战出现：

![图 6.12 - 仅带注入的 Juice Shop 记分牌](img/Figure_6.12_B15630.jpg)

图 6.12 - 仅带注入的 Juice Shop 记分牌

正如您所看到的，我们有一个广泛的挑战列表可供选择。每个挑战旁边都有一些星星 - 这些星星表示每个挑战的难度。星星越多，挑战就越困难。让我们将每个挑战都作为我们在实际渗透测试中会遇到的任务。

我们的第一个挑战将是绕过管理员登录提示并获得对 Web 应用程序的管理员访问权限。

## 绕过管理员登录

好的，让我们从一个简单的挑战开始，这在渗透测试中通常是一个实际的“在范围内”任务。在范围内的任务是允许的（在范围内）并且在渗透测试期间是必需的（任务）。这意味着客户希望您就特定任务（如结果、手动评估和关注的领域）提供反馈。在我们的情况下，我们需要就 Web 应用程序以及我们如何测试它以及如何进行修复提供反馈。

所以，让我们假设 Juice Shop 开设了一个在 AWS 内运行的新商店。他们希望我们测试登录页面的功能，并查看它是否容易受到任何注入的攻击。这样做有助于让 Juice Shop 了解他们的 Web 应用程序有多安全，以及他们需要修复什么。这是一种积极的方法，因为他们希望我们评估安全性，而不是合规性。

重要提示

测试合规性并不意味着您正在测试安全性。测试合规性意味着遵循一份检查清单，以测试在整体方案中可能或可能不是“安全”的项目。

让我们开始渗透测试吧！

1.  首先，我们需要进入登录页面。登录页面可以在以下位置找到：

```
<<public dns>>/#/login
```

我们将看到以下屏幕：

![图 6.13 - Juice Shop 的登录页面](img/Figure_6.13_B15630.jpg)

图 6.13 - Juice Shop 的登录页面

很好，现在我们有了登录页面。

1.  接下来，让我们测试一些奇怪的参数，看看登录页面是否正确处理输入。为了测试登录输入功能，请在用户名字段中输入`'`。密码可以是任何您想要的东西：

![图 6.14 - 检查错误](img/Figure_6.14_B15630.jpg)

图 6.14 - 检查错误

然后，我们得到了一个错误，如下所示。

![图 6.15 - 输入错误](img/Figure_6.15_B15630.jpg)

图 6.15 - 输入错误

您可以看到它给了我们一个关于对象的错误。这告诉我们它没有处理输入验证 - 但它并没有真正告诉我们它是什么类型的语法错误。从这里开始，我们需要对我们需要使用的语法类型进行一些猜测来执行注入。

我们将尝试使用一个简单的`TRUE`语句，这可能会让我们以管理员身份访问网站。就像以前一样，在这种情况下，密码并不重要。我们关注的是电子邮件字段的输入。在电子邮件字段中，输入以下真实语句：`'OR '1'='1'--`：

![图 6.16 - 测试 SQLi](img/Figure_6.16_B15630.jpg)

图 6.16 - 测试 SQLi

在上一个截图中，您可以看到我们有管理员访问权限！这是因为输入字段不会对输入进行消毒，并且只要语句为真，就会执行任何输入。在我们的情况下，`1=1`为真，因此命令被处理。如果您需要回顾 SQLi，请返回*第五章*，*了解易受攻击的 RDS 服务*，进行复习。

既然我们看到我们可以作为管理员登录，让我们看看这对非管理员用户有何影响。接下来，我们将看到我们可以以何种类型的用户身份登录。

## 以另一个用户身份登录

既然我们已经获得了管理员访问权限，让我们看看是否可以转变并以其他用户身份登录。在后期妥协后能够展示内部移动对于渗透测试和报告至关重要。如果您能够在网络中进行转变并在不被注意的情况下占有其他帐户，这将告诉客户他们的检测流程有多好。

重要说明

报告缺乏检测和警报是渗透测试的重要部分。如果目标没有标记您并发送警报，那么这意味着他们不会看到网络内部的攻击者。

有一个名为`bender`的用户可能在其帐户上有有价值的信息。出于密集的目的，我们将看到我们被指定找到一个用户，并在侦察期间找到了他，使用诸如`theHarvester`之类的工具。有人要求我们看看是否能够控制这个帐户。为了测试这一点，我们首先需要看看 Juice Shop 的电子邮件命名规则是什么：

![图 6.17 – 获取电子邮件方案](img/Figure_6.17_B15630.jpg)

图 6.17 – 获取电子邮件方案

成功的侦察后，我们看到电子邮件地址域为`@juice-sh.op`。现在，我们可以回到登录页面，并使用与之前相同的方法进行测试：

![图 6.18 – 使用 benders 帐户测试 SQLi](img/Figure_6.18_B15630.jpg)

图 6.18 – 使用 benders 帐户测试 SQLi

您将看到类似于这样的横幅：

*您成功解决了挑战：登录 Bender*

我们现在已成功完成分配给我们的任务，并将能够提交关于我们如何成功获取管理员帐户和`bender`用户帐户的报告。

既然我们已经执行了一些 SQLi 并执行了它，让我们开始了解如何防止它以及我们如何告诉客户和企业他们如何帮助减轻其组织内的潜在问题。

## 防止 SQLi

让我们就如何防止 SQLi 进行快速讨论。正如我们之前所看到的，如果没有正确地减轻，SQLi 可能是一种简单的策略，可以给攻击者带来*王国的钥匙*。既然我们已经亲身经历了这一点，让我们看看如何防止它！

在评估 Juice Shop 时，我们能够通过在**电子邮件**字段中输入真实语句来利用该应用程序。由于**电子邮件**部分的输入字段未被**参数化**，SQLi 是成功的。下面的示例说明了糟糕的查询和良好的查询语句。这些语句在实际数据库中：

```
username = "SELECT * FROM users WHERE email = '" + email + "'";
username = "SELECT * FROM users WHERE email = ?";
```

这两个查询都将被执行；但是，**第二个**查询只使用了电子邮件查询，而不是第一个查询，它查看了正在传递的整个参数，并将命令解释为整个 SQL 查询。这就是我们能够控制 Juice Shop 管理员帐户的方式。与其处理整个字符串，不如使用 SQL 语句加上电子邮件构造语句。 

既然我们已经看到了 SQLi 的工作原理和减轻方法，让我们看看如何减轻可能发生在您的 AWS 企业中的最危险的攻击之一：**DoS**！

# 避免 DoS

**DoS**是一个严重的网络应用程序漏洞，它有能力破坏服务和应用程序的可用性。DoS 的目标是关闭目标网络、服务或应用程序，并使其对用户和管理员不可访问 - 然而，最终，用户是主要的目标受众。

一种更复杂和破坏性更强的 DoS 攻击版本是**DDoS**攻击 - 使用多个攻击者机器攻击目标主机。DDoS 攻击通常是高技能和计划周密的攻击，利用僵尸网络向目标释放大量不需要的流量。

重要提示

僵尸网络是一大批被攻击者控制的受损计算机，用于进行对计算机所有者不知情的恶意攻击。

DDoS 攻击有两个非常明显的分类：

+   基础设施层攻击

+   应用层攻击

让我们快速看一下这两个分类的细节。虽然我们在 AWS 中无法实际进行 DoS 攻击，但了解这些分类并看看如何最大程度地减少 AWS 环境成为 DoS 或 DDoS 受害者的机会仍然是很好的。

## 基础设施层攻击

这一层的攻击通常是 SYN 洪水等攻击，以及耗尽受害主机资源的其他攻击。它们通过向目标发送大量的流量来使其不可用。这些类型的攻击通常不会在渗透测试期间使用，因为如果成功，它们将完全关闭客户的基础设施。然而，查找可能表明客户基础设施没有准备好处理 DoS 攻击的指标仍然是一个好的做法，比如没有检测到来自多个主机的格式错误数据包，或者没有检测到 DDoS 攻击使用的某些特定签名。

## 应用层攻击

这种类型的攻击是您可能会看到的较少的攻击向量；然而，在渗透测试中，这是您可能真正要做的事情。应用层的攻击涉及查看一个应用程序，而不是整个公司，并且试图在可能的情况下“破坏”应用程序。在渗透测试中，对应用程序进行 DoS 攻击可能是对应用程序进行模糊测试，直到应用程序出错并且无法再运行。这在**缓冲区溢出**中是一种极为常见的技术。

虽然我们不会在本书中深入研究缓冲区溢出，但我强烈建议您查看一些适合初学者的练习，这些练习将帮助您熟悉这个概念（[`github.com/stephenbradshaw/vulnserver`](https://github.com/stephenbradshaw/vulnserver)）。

## 在 AWS 中防范 DDoS 攻击

现在我们了解了 DDoS 可能给企业带来的问题，至关重要的是我们了解一些如何保护免受破坏式攻击的概念。确保您的基础设施周围有防范不受欢迎的流量的保护措施，并且有规则限制只允许必要的流量是很重要的。您的客户业务需要了解什么是正常流量，什么不是正常流量。

备份和扩展对于确保您免受 DDoS 攻击的保护至关重要。如果已经实施了适当的扩展，另一个系统可以在另一个系统由于错误或攻击而崩溃时接管工作。AWS 有一个名为**AWS Shield**的应用程序 - 一个出色的 DDoS 管理应用程序（[`aws.amazon.com/shield/`](https://aws.amazon.com/shield/)）。

使用**Web 应用程序防火墙**（**WAFs**）是保护您拥有的任何公共面向 Web 的应用程序的绝佳方式，特别是如果它们用于员工和客户。AWS WAF 提供可定制的 Web 安全，允许管理员在它们甚至到达 Web 应用程序之前识别和消除目标。

# 总结

在本章中，我们学习了关于 Aurora 及其在 AWS 中的用途。我们设置了自己的 Aurora 实例，并学习了如何使用常见的渗透测试技术来寻找配置错误。接下来，我们学习了如何在 EC2 实例中设置 SQLi 实验室，并练习了一些在实际渗透测试中会遇到的常见注入方法。最后，我们讨论了 DoS 攻击及其对业务的影响。

现在您已经完成了本章，您可以在 AWS 中设置自己的实验室，以便在安全和授权的环境中测试 SQLi 攻击，并了解渗透测试 Amazon Aurora 的基础知识。

在下一章中，我们将介绍 Lambda 服务，并学习如何在 Lambda 中寻找配置错误。

# 进一步阅读

+   Aurora 查询：[`docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-mysql-parallel-query.html`](https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-mysql-parallel-query.html)

+   在 AWS 中设置 WordPress：[`docs.aws.amazon.com/elasticbeanstalk/latest/dg/php-hawordpress-tutorial.html`](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/php-hawordpress-tutorial.html)
