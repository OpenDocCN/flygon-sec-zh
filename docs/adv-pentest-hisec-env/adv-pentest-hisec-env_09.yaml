- en: Chapter 9. Data Collection Tools and Reporting
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第9章。数据收集工具和报告
- en: As painful as it may seem, every step of the penetration test must be properly
    documented. This enables not only accurate and repeatable results, but also the
    ability for someone to double-check the work and ensures nothing was missed during
    testing. As penetration testing is becoming more common, testing teams are becoming
    more segmented and specialized. There may be one person on a team that is specialized
    in application penetration testing and another that is a post-exploitation genius.
    One thing that does not change from role to role is the need for proper documentation
    and reporting.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管可能看起来很痛苦，但渗透测试的每一步都必须得到适当的记录。这不仅可以确保准确和可重复的结果，还可以让其他人检查工作，并确保在测试过程中没有遗漏任何内容。随着渗透测试变得越来越普遍，测试团队也变得更加分段和专业化。团队中可能有一个人专门负责应用程序渗透测试，另一个人可能是后期利用的天才。从一个角色到另一个角色，需要适当的文档记录和报告。
- en: Luckily, there are tools available to the community that reduce the overall
    pain of documenting every single step, command, and result of a penetration test.
    With proper usage of these tools, documentation will become second nature.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，社区中有可用的工具，可以减少记录每个渗透测试步骤、命令和结果的整体痛苦。正确使用这些工具，文档记录将变得自然而然。
- en: 'This chapter introduces the usage of tools and techniques that can make documenting
    the testing progress less painful and report writing easier:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了可以使测试进展记录变得不那么痛苦，报告撰写变得更容易的工具和技术的使用：
- en: Simple text editors
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 简单的文本编辑器
- en: Revisiting Dradis — time to collaborate
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重新审视Dradis — 合作的时候到了
- en: A report overview
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告概述
- en: Before we get started with the fun stuff we need to review the basics. These
    methods are tried and true and seldom go wrong. Efficiency aside, these methods
    just work.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始有趣的事情之前，我们需要复习基础知识。这些方法经过验证，很少出错。除了效率之外，这些方法都是有效的。
- en: Record now — Sort later
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 立即记录 — 以后整理
- en: Nearly everything discussed in this book has been possible via the BackTrack
    command line. Now wouldn't it be nice to just have every single input and output
    recorded for you? Obviously, this will not be the pinnacle of penetration testing
    record keeping, but having such a log could end up saving you trouble in the long
    run.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 本书讨论的几乎所有内容都可以通过BackTrack命令行实现。现在，只需记录每个输入和输出会不会很好？显然，这不会是渗透测试记录保存的巅峰，但拥有这样的日志最终可能会为您节省麻烦。
- en: '[PRE0]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The Linux script command will log most of the commands used during testing.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Linux脚本命令将记录测试过程中使用的大部分命令。
- en: Old school — The text editor method
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 老派 — 文本编辑器方法
- en: Just as with website creation fanatics, there is a group of individuals who
    use only pure text editors as a both data repository and report generation tool.
    Do not let the apparent lack of features of such a tool fool you though. At DerbyCon
    this year, I had the pleasure of speaking to one individual who mentioned he had
    every single step of data collection automated with vi. By using automation and
    scripting, the output from various tools could be processed, converted, and collected
    into the vi text file. Using macros and scripts he was then able to produce full
    reports. The initial setup for this may have been complex, but the simple elegance
    of the final product is remarkable.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 就像网站创建爱好者一样，有一群人只使用纯文本编辑器作为数据存储库和报告生成工具。不过，不要让这种工具表面上缺乏功能的外表愚弄您。在今年的DerbyCon上，我有幸与一位个人交谈，他提到他已经用vi自动化了数据收集的每一步。通过使用自动化和脚本，来自各种工具的输出可以被处理、转换并收集到vi文本文件中。然后，通过宏和脚本，他能够生成完整的报告。这个初始设置可能很复杂，但最终产品的简单优雅令人印象深刻。
- en: Popular Linux text editors include **vim** which takes a bit of practice and
    Nano which provides a convenient method of editing and collecting simple file
    data.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 流行的Linux文本编辑器包括**vim**，需要一些练习，以及Nano，它提供了一种方便的编辑和收集简单文件数据的方法。
- en: Nano
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Nano
- en: Nano has been used throughout this book for various text editing needs. It is
    quick and simple to learn which makes it perfect for taking quick notes or rapidly
    editing documents.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Nano已经在本书中用于各种文本编辑需求。它快速简单，非常适合快速记录笔记或快速编辑文档。
- en: Note
  id: totrans-17
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Do not be fooled by the apparent simplicity of Nano (Nano's another text editor).
    Nano performs power user functionality such as test justification, syntax highlighting,
    powerful text searching, and more.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 不要被Nano的表面简单所迷惑（Nano是另一个文本编辑器）。Nano执行强大的用户功能，如测试调整，语法高亮，强大的文本搜索等。
- en: To launch Nano from BackTrack type `nano` followed by the name of the file that
    will need to be edited or created. Nano will create the file in your current working
    directory.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 要从BackTrack启动Nano，请键入`nano`，然后输入需要编辑或创建的文件名。Nano将在当前工作目录中创建文件。
- en: '[PRE1]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![Nano](img/7744OS_09_01.jpg)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![Nano](img/7744OS_09_01.jpg)'
- en: 'Nano is very customizable through command-line options or by editing the configuration
    file at `/etc/nanorc`. Some of the options available to be set by using `nanorc`
    include the following, and more:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 通过命令行选项或编辑`/etc/nanorc`配置文件，可以对Nano进行非常自定义化。使用`nanorc`可以设置的一些选项包括以下内容，等等：
- en: Case sensitive searching
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 区分大小写的搜索
- en: Text file conversion options — do you want to convert Dos or Mac text files?
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文本文件转换选项 — 您想转换Dos或Mac文本文件吗？
- en: Should the editor wrap your text?
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编辑器是否应该换行您的文本？
- en: Auto indent options
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动缩进选项
- en: If you decide to take advantage of Nano during your testing process, be sure
    to take a look at the settings and find a configuration that works best for your
    workflow and preference.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 如果决定在测试过程中利用Nano，请务必查看设置，并找到最适合您的工作流程和偏好的配置。
- en: 'More information about Nano can be found online at: [http://tuxradar.com/content/text-editing-nano-made-easy](http://tuxradar.com/content/text-editing-nano-made-easy).'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 有关Nano的更多信息，请访问：[http://tuxradar.com/content/text-editing-nano-made-easy](http://tuxradar.com/content/text-editing-nano-made-easy)。
- en: VIM — The power user's text editor of choice
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: VIM — 强大用户的文本编辑器选择
- en: VIM is an improved version of vi that is available as charityware.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: VIM是vi的改进版本，可作为慈善软件使用。
- en: Note
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you find that you want to use VIM, you are encouraged to make a donation
    to the ICCF. This information is displayed when starting the editor through the
    `vim` command.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您发现想要使用VIM，建议您向ICCF捐赠。当通过`vim`命令启动编辑器时，将显示此信息。
- en: '![VIM — The power user''s text editor of choice](img/7744OS_09_02.jpg)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![VIM-首选的高级文本编辑器](img/7744OS_09_02.jpg)'
- en: There are a few basic commands that anyone using VIM should be familiar with.
    To assist those that are completely new to VIM, the tool provides a tutorial that
    can be reached via typing `vimtutor` at the command line.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些基本命令是任何使用VIM的人都应该熟悉的。为了帮助那些完全不熟悉VIM的人，该工具提供了一个教程，可以通过在命令行输入`vimtutor`来访问。
- en: '[PRE2]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![VIM — The power user''s text editor of choice](img/7744OS_09_03.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![VIM-首选的高级文本编辑器](img/7744OS_09_03.jpg)'
- en: 'Some benefits of using VIM to collect data during testing include:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 使用VIM收集测试数据的一些好处包括：
- en: Preinstalled on many Linux distributions.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预装在许多Linux发行版中。
- en: Very small resource footprint this can be beneficial when running intensive
    processes on the system.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 资源占用非常小，这在系统运行密集进程时非常有益。
- en: Compare multiple files by using the `diff` function. Perfect for those times
    when you had performed a test three months ago and want to quickly look for the
    differences. Also useful for ensuring that website code has not been modified
    from test to test. For instance, to compare `test1.txt` to `test2.txt:`
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`diff`函数比较多个文件。在您三个月前执行测试并希望快速查找差异的时候非常完美。也可用于确保网站代码在测试之间未被修改。例如，比较`test1.txt`和`test2.txt`：
- en: '[PRE3]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![VIM — The power user''s text editor of choice](img/7744OS_09_04.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![VIM-首选的高级文本编辑器](img/7744OS_09_04.jpg)'
- en: Binary files can be reviewed and even edited by using the Binary mode.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以使用二进制模式查看甚至编辑二进制文件。
- en: Can open files in read-only mode to avoid accidental file changes.
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以以只读模式打开文件，以避免意外更改文件。
- en: 'Basic on the fly file encryption by using the `-X` switch. If using a recent
    version of VIM (7.3+) the encryption can be set to use Blowfish as the encryption
    type. To encrypt a file named `test.txt` start a file using:'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用`-X`开关进行即时文件加密。如果使用最新版本的VIM（7.3+），可以将加密设置为使用Blowfish作为加密类型。要加密名为`test.txt`的文件，请开始一个文件：
- en: '[PRE4]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: You will be prompted to enter an encryption key. This key will be needed to
    decrypt the file in the future.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 您将被提示输入加密密钥。将来解密文件时将需要此密钥。
- en: '[PRE5]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Enter some test into the file:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 输入一些测试内容到文件中：
- en: '![VIM — The power user''s text editor of choice](img/7744OS_09_05.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![VIM-首选的高级文本编辑器](img/7744OS_09_05.jpg)'
- en: 'When saved and reopened without the proper encryption key the information in
    the file is undecipherable:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 当保存并重新打开而没有正确的加密密钥时，文件中的信息是无法解读的。
- en: '[PRE6]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![VIM — The power user''s text editor of choice](img/7744OS_09_06.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![VIM-首选的高级文本编辑器](img/7744OS_09_06.jpg)'
- en: Encrypting the data collected during testing is both beneficial and encouraged;
    however, it is important to note that the type of symmetric encryption used by
    VIM is not ideal for sharing files. A separate solution focused on asymmetrical
    encryption methods may be more appropriate in such cases.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 对测试期间收集的数据进行加密既有益又受到鼓励；但是，重要的是要注意，VIM使用的对称加密类型并不适合共享文件。在这种情况下，可能更适合专注于非对称加密方法的单独解决方案。
- en: NoteCase
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: NoteCase
- en: 'If you are more comfortable using a graphical editor to collect and manage
    your testing information there are many options available. One of these tools
    that can be used to collect project or testing data when using BackTrack is NoteCase.
    It can be installed in your BackTrack guest machine via `apt-get install notecase`.
    Here is a sample of how NoteCase could be used to collect information about a
    site you are testing:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您更喜欢使用图形编辑器来收集和管理测试信息，那么有许多可用选项。其中一个工具是NoteCase，可以用于在使用BackTrack时收集项目或测试数据。可以通过`apt-get
    install notecase`在BackTrack客户机中安装它。以下是NoteCase如何用于收集有关正在测试的站点的信息的示例：
- en: '![NoteCase](img/7744OS_09_07.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![NoteCase](img/7744OS_09_07.jpg)'
- en: 'Notecase allows the file to be saved in an encrypted format by choosing **File**
    | **Save As** and selecting the appropriate drop-down selection:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: Notecase允许选择**文件** | **另存为**并选择适当的下拉选择，以加密格式保存文件：
- en: '![NoteCase](img/7744OS_09_08.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![NoteCase](img/7744OS_09_08.jpg)'
- en: Dradis framework for collaboration
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Dradis协作框架
- en: When it comes to collaboration and sharing of data during a penetration test
    it is hard to beat the benefits and options available in Dradis. This is one of
    the two primary data collection tools we had discussed in [Chapter 1](ch01.html
    "Chapter 1. Planning and Scoping for a Successful Penetration Test"), *Planning
    and Scoping for a Successful Penetration Test*, and is oftentimes the tool of
    choice for data collection. As always, there needs to be some data available to
    us prior to being able to start. For this example, we will assume that a small
    business has asked us to perform a penetration test on their web server, which
    is still in the development stage and not available on the Internet. According
    to the rules of engagement we are not allowed to access anything other than this
    one particular server which can be reached locally on the `192.168.75.0/24` subnet.
    We are given VPN access to the `192.168.75.0/24` network and are allowed up to
    two simultaneous connections. The timeframe for testing is limited and as such
    we intend to use two people to perform our test.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行渗透测试期间进行协作和数据共享时，很难超越Dradis提供的好处和选项。这是我们在[第1章](ch01.html "第1章。规划和范围确定成功的渗透测试")中讨论的两种主要数据收集工具之一，*规划和范围确定成功的渗透测试*，通常是数据收集的首选工具。与往常一样，我们需要在开始之前有一些可用的数据。在本例中，我们假设一家小企业要求我们对其仍处于开发阶段且尚未在互联网上提供的Web服务器进行渗透测试。根据约定，我们不允许访问除了这一个特定服务器之外的任何内容，该服务器可以在`192.168.75.0/24`子网上本地访问。我们被允许访问`192.168.75.0/24`网络的VPN，并且可以同时进行两个连接。测试的时间有限，因此我们打算使用两个人来进行测试。
- en: 'In order to follow along with this example you will need the following virtual
    environment up and running:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 为了跟随本示例，您需要以下虚拟环境处于运行状态：
- en: Two BackTrack guest machines on the `192.168.75.0/24` subnet (VLAN1).
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`192.168.75.0/24`子网（VLAN1）上的两台BackTrack客户机。'
- en: pfSense configured to assign addresses via DHCP for the `192.168.75.0/24` subnet
    (VLAN1).
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: pfSense配置为通过DHCP为`192.168.75.0/24`子网（VLAN1）分配地址。
- en: Kioptrix Level 1 set up to connect to VLAN1.
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kioptrix Level 1设置为连接到VLAN1。
- en: This setup should allow you to effectively follow along with the remainder of
    this chapter. Reporting is an area of great flexibility, and as such it will require
    some time to find the "right" template and format that you would like to use for
    your tests.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这个设置应该让您能够有效地跟随本章的其余部分。报告是一个非常灵活的领域，因此需要一些时间来找到您想要用于测试的“正确”模板和格式。
- en: Binding to an available interface other than 127.0.0.1
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 绑定到127.0.0.1以外的可用接口
- en: There is a slight modification that will need to be made to start Dradis while
    binding to a different port.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 需要对启动Dradis进行轻微修改，同时绑定到不同的端口。
- en: '[PRE7]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Change line 15 to match the following:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 更改第15行以匹配以下内容：
- en: '[PRE8]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Save the file and invoke the `start.sh` command with the `-h` feature to display
    the available options:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 保存文件，并使用`-h`功能调用`start.sh`命令以显示可用选项：
- en: '[PRE9]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![Binding to an available interface other than 127.0.0.1](img/7744OS_09_09.jpg)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![绑定到127.0.0.1以外的可用接口](img/7744OS_09_09.jpg)'
- en: 'At this point we can bind to `192.168.75.11` on port 3004 (use the IP address
    of the BackTrack machine **you** are using to host the Dradis server) by typing:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，我们可以通过输入以下内容绑定到`192.168.75.11`的3004端口（使用托管Dradis服务器的BackTrack机器的IP地址**您**）：
- en: '[PRE10]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Test your configuration by starting up a browser and typing `https://192.168.75.11:3004`
    on the localhost and on the other BackTrack machine. Note that in the following
    screenshot we are able to determine that the Dradis server on `192.168.75.11`
    is reachable by both machines.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 通过启动浏览器并在本地主机和其他BackTrack机器上键入`https://192.168.75.11:3004`来测试您的配置。请注意，在下面的屏幕截图中，我们能够确定`192.168.75.11`上的Dradis服务器可以被两台机器访问。
- en: '![Binding to an available interface other than 127.0.0.1](img/7744OS_09_10.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![绑定到127.0.0.1以外的可用接口](img/7744OS_09_10.jpg)'
- en: 'Changes made by either system will be updated to be seen by both users. When
    a change is made the other logged-in users are notified:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 任一系统所做的更改都将更新，以便两个用户都能看到。当进行更改时，其他已登录用户会收到通知：
- en: '![Binding to an available interface other than 127.0.0.1](img/7744OS_09_11.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![绑定到127.0.0.1以外的可用接口](img/7744OS_09_11.jpg)'
- en: 'When this note appears simply click on the **Refresh the tree** icon at the
    top of the node column next to add branch:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 当出现此提示时，只需单击节点列顶部的**刷新树**图标旁边的添加分支：
- en: '![Binding to an available interface other than 127.0.0.1](img/7744OS_09_12.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![绑定到127.0.0.1以外的可用接口](img/7744OS_09_12.jpg)'
- en: Effectively using tools such as Dradis will enable your team to be more efficient
    and thorough when performing testing.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 有效地使用Dradis等工具将使您的团队在执行测试时更加高效和彻底。
- en: The report
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 报告
- en: 'At the end of the penetration test all of the data will need to be turned into
    information that allows the business and network owners to take action. Although
    the goals of a penetration test may vary, the need to document the entire process
    and put the results into an easily digestible format remains the same. Some items
    that should be included in an executive report include the following:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在渗透测试结束时，所有数据都需要转化为信息，以便业务和网络所有者采取行动。尽管渗透测试的目标可能各不相同，但将整个过程记录下来并将结果放入易于理解的格式中的需求是一样的。执行报告中应包括以下一些内容：
- en: Cover page
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 封面
- en: Your company logo
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您公司的标志
- en: Title and description of the test performed
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试执行的标题和描述
- en: Confidentiality reminder
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保密提醒
- en: Date and time of testing
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试日期和时间
- en: 'The cover page should be both professional and eye catching. If you happen
    to have any graphics available for your logo, this is an ideal place to display
    them. Take a look at this sample to get the basic idea of a typical reporting
    cover sheet:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 封面应该既专业又吸引人眼球。如果您的标志有任何可用的图形，这是展示它们的理想地方。看看这个样本，了解典型报告封面的基本概念：
- en: '![The report](img/7744OS_09_13.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![报告](img/7744OS_09_13.jpg)'
- en: 'The next page should provide an index of the material included within the report.
    Adding an index allows the reader to quickly jump to the location of interest.
    This is especially important when the person is attending a meeting or needs a
    quick refresher of what the report covers:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的页面应提供报告中包含的材料的索引。添加索引可以让读者快速跳转到感兴趣的位置。当人们参加会议或需要快速了解报告内容时，这一点尤为重要：
- en: '![The report](img/7744OS_09_14.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![报告](img/7744OS_09_14.jpg)'
- en: The next page should be the **Executive Summary**, which can be used to quickly
    review the findings. An Executive Summary may vary based on the target audience.
    In our example, we assume that we do not know who the report is being presented
    to and thus try to cover all bases — the technical and non-technical managers.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的页面应该是**执行摘要**，可用于快速查看发现。执行摘要可能会根据目标受众而有所不同。在我们的示例中，我们假设我们不知道报告将被呈现给谁，因此尝试涵盖所有方面——技术和非技术管理人员。
- en: This portion of the report should provide someone who was not part of the initial
    testing process with enough information to understand what the test was, and what
    the goal of the testing was. It should also provide a quick overview of what the
    findings are and if anything in particular was discovered that requires immediate
    attention.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 报告的这部分应该为未参与初始测试过程的人提供足够的信息，以了解测试内容和测试目标。它还应该快速概述发现的内容，以及是否发现了需要立即注意的特定内容。
- en: 'Take a look at following example:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 看看以下示例：
- en: '![The report](img/7744OS_09_15.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![报告](img/7744OS_09_15.jpg)'
- en: As discussed, we managed to capture several major areas within a single page.
    The information should be brief and to the point and technical jargon should be
    avoided whenever possible as the report may eventually be provided to non-technical
    members of the management team.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 正如讨论的那样，我们设法在一页内涵盖了几个主要领域。信息应该简洁明了，尽量避免技术术语，因为报告最终可能会提供给管理团队的非技术成员。
- en: Tip
  id: totrans-100
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Someone has to pay to fix all of the holes you found, but they are unlikely
    to do so if they don't understand your report.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 必须有人付钱来修复你发现的所有漏洞，但如果他们不理解你的报告，他们不太可能这样做。
- en: The primary sections that should be covered in less than one page include the
    title and a brief description, the scope or introduction, and the timeline that
    the testing occurred in. Many people do not understand that a person performing
    a penetration test is limited by resources just like any other part of a team.
    If it takes two days to crack a password but you only had one to perform testing
    it does not necessarily mean that the passwords are secure, just that you did
    not have sufficient time to properly perform your testing.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在不到一页的篇幅中应该包括的主要部分包括标题和简要描述、范围或介绍以及测试发生的时间表。许多人不明白，进行渗透测试的人和团队的其他部分一样，也受到资源的限制。如果破解一个密码需要两天，但你只有一天来进行测试，这并不一定意味着密码是安全的，只是你没有足够的时间来正确执行你的测试。
- en: The findings section in the executive summary is very important. Most of the
    management team will probably never read about all of the steps that had to be
    taken to find these holes, they just want to know what they are and what the priorities
    are for each type so that they can begin issuing remediation strategies and plans.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在执行摘要中，发现部分非常重要。大多数管理团队可能永远不会阅读所有必须采取的步骤，他们只想知道这些漏洞是什么，每种类型的优先级是什么，这样他们就可以开始制定补救策略和计划。
- en: 'Take a look at the next page in our report:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 看看我们报告的下一页：
- en: '![The report](img/7744OS_09_16.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![报告](img/7744OS_09_16.jpg)'
- en: Not only did we clearly define and summarize the findings, but we also provided
    a nice chart to assist in the visualization of the findings. By breaking down
    the vulnerabilities for the client, you make their life easier and may avoid having
    to make another visit in the future just to go over your findings again.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不仅清晰地定义和总结了发现，还提供了一个漂亮的图表来帮助可视化发现。通过为客户分解漏洞，你让他们的生活更轻松，也许可以避免将来再次访问，只是为了再次讨论你的发现。
- en: 'It is important to provide a clearly defined network diagram from your perspective.
    This allows the client to understand that all appropriate systems were tested,
    and in some cases exposes issues that the client was not even aware of, such as
    systems on the network that do not necessarily belong. Ideally, you would have
    one listing of all services available on the network. In the sample below we only
    listed the port and the description because we know that only one system was involved.
    Another method would be to list all services such as this:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 从你的角度提供一个清晰定义的网络图很重要。这使客户能够理解所有适当的系统都经过了测试，并且在某些情况下暴露了客户甚至没有意识到的问题，比如网络上不一定属于的系统。理想情况下，你会有一个列出网络上所有可用服务的列表。在下面的示例中，我们只列出了端口和描述，因为我们知道只涉及一个系统。另一种方法是列出所有服务，如下所示：
- en: '| **Port** | **Description** | **Systems** |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| **端口** | **描述** | **系统** |'
- en: '| --- | --- | --- |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| 80 | HTTP | 192.168.75.1, 192.168.75.2, 192.168.75.15 |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| 80 | HTTP | 192.168.75.1, 192.168.75.2, 192.168.75.15 |'
- en: 'A listing such as this can become actionable if there are services on systems
    that should not be there. For example: A development server is still running a
    web server that was supposedly shut down years ago.'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如果系统上存在不应该存在的服务，这样的列表就可以变得可操作。例如：一个开发服务器仍在运行一个据说几年前就关闭的Web服务器。
- en: Take a look at the following example page which includes a basic network diagram
    and a listing of fictional ports that are open on `192.168.75.15`.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 看看下面的示例页面，其中包括基本的网络图和一个虚构的端口列表，这些端口在`192.168.75.15`上是开放的。
- en: '![The report](img/7744OS_09_17.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![报告](img/7744OS_09_17.jpg)'
- en: Finally, the time has come to provide some detailed reporting. This is your
    chance to list the findings in detail and also provide information about how these
    issues were discovered. There is typically no limit to the amount of data that
    can be placed in the detailed report portion. Be sure to provide at least enough
    information so that an administrator could attempt to emulate specific portions
    of the testing to ensure any mitigating controls that have been put in place are
    actually working.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，是时候提供一些详细的报告了。这是你详细列出发现并提供有关如何发现这些问题的信息的机会。通常在详细报告部分可以放置的数据量是没有限制的。一定要提供足够的信息，以便管理员可以尝试模拟测试的特定部分，以确保已经实施的缓解控制是否真正起作用。
- en: At some point in the document the methodology used should be addressed, be it
    a subset of a standard methodology or even something that you have come up with
    on your own — it is important to understand what you did. This is where having
    your notes available comes in very handy.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在文档的某个地方，应该讨论使用的方法论，无论是标准方法论的子集，还是你自己想出的东西——理解你所做的事情很重要。这就是有备忘录非常方便的地方。
- en: 'Here is a small example of what this section could look like:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 这是这一部分可能看起来像的一个小例子：
- en: '![The report](img/7744OS_09_18.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![报告](img/7744OS_09_18.jpg)'
- en: If you look closely you will note that there is a section for remediation. All
    of the information that is needed to remediate the issues is already in the report,
    but sometimes it is good to make a listing of vulnerable systems that are associated
    with particular vulnerabilities. This makes it quick and simple for a business
    to address the vulnerabilities in a logical fashion. For instance, the administrators
    could be tasked with updating all versions of SAMBA on the network and with the
    remediation section in your report they can go directly to work on the list.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你仔细看，你会注意到有一个补救部分。所有需要补救问题的信息已经在报告中，但有时将与特定漏洞相关的脆弱系统列出来是很有用的。这样可以让企业以逻辑方式快速简单地解决漏洞。例如，管理员可以负责更新网络上的所有SAMBA版本，并且在报告的补救部分，他们可以直接开始处理列表上的工作。
- en: Any additional information that is not directly related to providing actionable
    data should be added to an appendix. This includes any large data dumps such as
    directory listings, URLs, installed software and versions, and so on.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 任何与提供可操作数据无直接关系的附加信息都应该添加到附录中。这包括任何大型数据转储，如目录列表、URL、安装的软件和版本等。
- en: Challenge to the reader
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 读者的挑战
- en: Use the lab setup that was provided earlier to perform a fully documented test
    against the Kioptrix Level 1 Machine!
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 使用之前提供的实验室设置，对Kioptrix Level 1机器进行完全记录的测试！
- en: After you have completed your report take a step back and picture yourself as
    a business owner who receives this report as your output. Does your work allow
    for remediation of any issues that were found? Did you provide enough cross-reference
    material so that the document can stand on its own after the initial consultation
    has been completed?
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 在完成报告后，退一步，想象自己是一个收到这份报告的企业所有者。你的工作是否允许补救发现的任何问题？你是否提供了足够的交叉参考材料，以便文件在初始咨询完成后能够自行立足？
- en: Take a look at [Chapter 1](ch01.html "Chapter 1. Planning and Scoping for a
    Successful Penetration Test"), *Planning and Scoping for a Successful Penetration
    Test*, again and see if you can set up an HTML template that enables you to easily
    import your detail data into your final report. Once something like this has been
    automated it has the potential to save a significant amount of time!
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 再次查看[第1章](ch01.html "第1章。规划和范围确定成功的渗透测试")，“规划和范围确定成功的渗透测试”，看看是否可以设置一个HTML模板，使你能够轻松地将详细数据导入最终报告。一旦像这样的东西被自动化，它就有潜力节省大量时间！
- en: Summary
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we looked at several means of securely collecting data while
    performing our testing such as VIM, Nano, and NoteCase. We also built upon our
    existing knowledge of Dradis to configure it to be used by several testers at
    the same time.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们研究了在进行测试时安全地收集数据的几种方法，如VIM、Nano和NoteCase。我们还在现有的Dradis知识基础上进行了扩展，配置它以供多个测试人员同时使用。
- en: We reviewed several key items that should be part of any penetration testing
    report. Sometimes the only visibility your company receives will be based on this
    report. The better the report, the more likely it is that you will be called in
    again the next time a penetration test is required.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 我们审查了应该包括在任何渗透测试报告中的几个关键项目。有时，你的公司所接收到的唯一可见性将基于这份报告。报告越好，你下次被要求进行渗透测试的可能性就越大。
- en: We closed by issuing a small challenge to the reader to complete and document
    an assessment on the configuration reviewed within this chapter.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们向读者提出了一个小挑战，要求完成并记录对本章中所审查的配置进行评估。
- en: In the next chapter, we will have the chance to put all of this information
    to work when we proceed with building out a test lab that emulates a secured fictional
    corporation.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，当我们继续建立一个模拟安全的虚构公司的测试实验室时，我们将有机会将所有这些信息付诸实践。
