# 前言

渗透测试人员面临着防火墙、入侵检测系统、基于主机的保护、硬化系统以及由知识渊博的分析员组成的团队，他们通过安全信息管理系统收集的数据。在这样的环境中，仅仅运行自动化工具通常会产生很少的结果。这种安全的虚假感觉很容易导致关键数据和资源的丢失。

《高度安全环境下的高级渗透测试》提供了超越基本自动化扫描的指导。它将为您提供一个基石，可用于承担有效测量传统安全环境的整个攻击面的复杂和艰巨任务。

《高度安全环境下的高级渗透测试》使用仅有的免费工具和资源来教授这些概念。我们将使用的其中一个工具是著名的渗透测试平台 BackTrack。BackTrack 的出色开发团队不断更新平台，提供一些最好的安全工具。我们将用于模拟渗透测试的大多数工具都包含在最新版本的 BackTrack 中。

渗透测试执行标准（PTES），[`www.pentest-standard.org`](http://www.pentest-standard.org)，被用作我们许多阶段的指南。尽管标准中的并非所有内容都会被讨论，但我们将尽可能地将本书中的知识与标准的基本原则相一致。

《高度安全环境下的高级渗透测试》提供了关于如何在您自己的设备上使用 VirtualBox、pfSense、snort 和类似技术模拟高度安全环境的逐步说明。这使您能够在安全的环境中实践本书中学到的知识。您还将有机会在执行测试时，亲眼见证安全响应团队可能在渗透测试的一侧看到的情况！

《高度安全环境下的高级渗透测试》通过提出一个挑战来结束，您将使用虚拟实验室模拟从头到尾的整个渗透测试。渗透测试人员需要能够向客户解释缓解策略；考虑到这一点，我们将讨论各种缓解策略，以解决各章节中列出的攻击。

# 本书涵盖内容

《第一章》《规划和范围确定成功的渗透测试》向您介绍了渗透测试的解剖学。您将学习如何有效地确定渗透测试的范围，以及在处理第三方供应商设备或环境时应该设定的限制。还将讨论优先级技术。

《第二章》《高级侦察技术》将指导您通过数据收集方法，通常可以避免触发警报。我们将专注于各种侦察策略，包括深入挖掘深网和专业网站，以获取有关您目标的信息。

《第三章》《枚举：明智选择目标》提供了对执行系统足迹和网络枚举的方法的详细描述。目标是枚举环境并解释在选择目标时要寻找的内容。本章涉及中级到高级的 Nmap 技术，并使用 PBNJ 来检测网络上的变化。本章还介绍了如何避免枚举尝试以及如何混淆攻击者的方法（为蓝队争取时间）。

第四章，“远程攻击”，将深入探讨 Metasploit®框架。我们还将描述使用 Armitage 进行团队测试。我们将查看来自`Exploit-DB.com`的概念验证攻击代码，我们将重新编写和编译；我们还将研究 THC Hydra 和 John the Ripper 进行密码攻击。

第五章，“网络应用程序攻击”，重点讨论网络应用程序攻击。我们将首先提供逐步说明如何构建网络应用程序攻击实验室，然后详细介绍 w3af 和 WebScarab 的用法。负载平衡将被详细讨论，因为许多环境现在都具有这些功能。我们将介绍检测网络应用程序防火墙和负载平衡的方法，并提供实际示例。我们将在本章结束时介绍 Mantra 浏览器。

第六章，“攻击和客户端攻击”，讨论了绕过 AV 签名，详细介绍了社会工程工具包的更高级功能，并介绍了缓冲区溢出和模糊测试的细节。

第七章，“攻击后”，描述了成功攻击完成后执行的活动。我们将涵盖权限提升、高级 meterpreter 功能、在不同操作系统类型上设置特权帐户，以及清理工作，以留下一个干净的系统。

第八章，“绕过防火墙和避免检测”，涵盖了可以用来尝试绕过检测的方法。这包括避免入侵检测系统和高级规避技术。我们还讨论了增加恶意用户或应用程序的可检测性的方法。

第九章，“数据收集工具和报告”，将帮助您从您在测试中收集的所有数据中创建报告和统计数据。您将学习如何收集所有测试数据以及如何验证结果。您还将逐步学习如何生成报告。

第十章，“设置虚拟测试实验室环境”，将指导您设置一个模拟具有多层 DMZ 环境的公司的测试环境，使用 IDS 和“一些”加固系统和应用程序。这包括设置 VBOX、BackTrack、虚拟防火墙、IDS 和监控。

第十一章，“挑战-将所有内容整合在一起”，将让您通过实际操作来运用您在整本书中学到的技能。我们将为您设置挑战，要求您从头到尾对您的测试环境进行渗透测试。我们将提供挑战的逐步解决方案，以确保材料已经完全吸收。

# 你需要什么来读这本书

为了练习这些材料，您需要一台性能和空间足够的计算机来运行我们需要构建实验室的虚拟化工具。任何一台带有一点硬盘空间的现代计算机都应该足够。本书中描述的虚拟化工具可以在今天大多数现代操作系统上运行。

# 这本书是为谁准备的

这本书适合任何有动力、信念和愿意打破常规并学习安全测试的道德人士。本书中的许多材料都是针对那些对安全概念有一些经验并对不同操作系统有基本了解的人。如果您是渗透测试人员、安全顾问，或者只是对测试环境的安全性感兴趣，那么这本书适合您。

请注意：

+   **本书中的信息仅供以合乎道德的方式使用**。

+   **除非您得到设备所有者的书面许可，否则不要使用本书中的任何信息**。

+   **如果您进行非法行为，您应该预料到会被逮捕并依法起诉**。

+   **如果您滥用本书中包含的任何信息，我们不承担责任**。

**此处的信息只能在获得适当人员的书面授权后用于测试环境**。

# 约定

在本书中，您会发现一些区分不同信息类型的文本样式。以下是一些这些样式的示例，以及它们的含义解释。

文本中的代码单词显示如下："我们将使用名为`FotoStation.jpg`的图片"。

代码块设置如下：

```
ExifTool Version Number : 7.89
File Name : FlashPix.ppt
Directory : ./t/images
File Size : 9.5 kB

```

当我们希望引起您对代码块的特定部分的注意时，相关的行或项目会以粗体显示：

```
HEAD / HTTP/1.0
HTTP/1.1 200 OK
Content-Length: 9908
Content-Type: text/html

```

任何命令行输入或输出都以以下方式书写：

```
# cd /pentest/enumeration/google/metagoofil 

```

**新术语**和**重要单词**以粗体显示。例如，您在屏幕上看到的单词，例如菜单或对话框中的单词，会在文本中显示为这样："将**网络适配器**设置为**内部网络**允许我们的 BackTrack 系统与新创建的 Ubuntu 机器共享相同的子网。"

### 注意

警告或重要说明会以这样的方式显示在一个框中。

### 提示

提示和技巧是这样显示的。

# 读者反馈

我们始终欢迎读者的反馈。让我们知道您对本书的看法——您喜欢或不喜欢的地方。读者的反馈对我们开发您真正受益的标题非常重要。

要向我们发送一般反馈，只需发送电子邮件至 `<feedback@packtpub.com>`，并在消息主题中提及书名。

如果您在某个主题上有专业知识，并且有兴趣撰写或为书籍做出贡献，请参阅我们的作者指南 [www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 书籍的自豪所有者，我们有一些事情可以帮助您充分利用您的购买。

## 勘误

尽管我们已经尽一切努力确保内容的准确性，但错误确实会发生。如果您在我们的书中发现错误——也许是文本或代码中的错误——我们将不胜感激，如果您能向我们报告。通过这样做，您可以帮助其他读者避免挫折，并帮助我们改进本书的后续版本。如果您发现任何勘误，请访问[`www.packtpub.com/support`](http://www.packtpub.com/support)报告，选择您的书，点击**勘误提交表格**链接，并输入您的勘误详情。一旦您的勘误经过验证，您的提交将被接受，并将被上传到我们的网站，或添加到该标题的勘误部分的任何现有勘误列表中。

## 盗版

互联网上侵犯版权材料的盗版是所有媒体的持续问题。在 Packt，我们非常重视保护我们的版权和许可。如果您在互联网上发现我们作品的任何非法副本，请立即向我们提供位置地址或网站名称，以便我们采取补救措施。

请通过 `<copyright@packtpub.com>` 联系我们，并附上涉嫌盗版材料的链接。

我们感谢您帮助保护我们的作者，以及我们提供有价值内容的能力。

## 问题

如果您在阅读本书的任何方面遇到问题，请通过 `<questions@packtpub.com>` 与我们联系，我们将尽力解决。
