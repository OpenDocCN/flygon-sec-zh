# 设置 Python 环境

在本章中，我们将涵盖以下内容：

+   在 Linux 中设置 Python 环境

+   在 macOS 中设置 Python 环境

+   在 Windows 中设置 Python 环境

# 介绍

在本章中，我们将学习如何在您的计算机上设置 Python。除了 Windows 之外，大多数操作系统默认都安装了 Python 解释器。要检查 Python 解释器是否已安装，您可以打开一个命令行窗口，输入`python`并按下*Enter*键--您将得到如下结果：

![](img/00005.jpeg)

您可以从 Python 官方网站--[`www.python.org/`](https://www.python.org/)下载最新的 Python 二进制文件和源代码。

# 在 Linux 中设置 Python 环境

让我们逐步了解如何在 Linux 系统上设置 Python 环境。首先，我们可以学习如何安装 Python，如果它不是默认安装的。

# 准备工作

由于我们在不同风味的 Linux 发行版中有许多包管理器，如`apt`/`apt-get`和`dpkg`。对于基于 Debian 的发行版，如 Ubuntu，`yum`（Yellowdog）适用于 CentOS/RHEL，`zypper`和`yast`适用于 SuSE Linux，这些包管理器将帮助我们在 Linux 发行版中轻松安装 Python。有了这个，你只需发出一个命令，包管理器就会搜索所需的包及其依赖项，下载这些包，并将它们安装在你的系统中。

# 如何做…

首先，您必须在系统上安装 Python。

# 安装 Python

1.  如果您使用的是基于 Debian 的发行版，如 Ubuntu，您可以使用以下命令安装 Python：

```py
$ sudo apt-get install python
```

如果您的系统运行 CentOS/RHEL，请使用以下命令安装 Python：

```py
$ sudo yum install python  
```

如果是 SuSE Linux 发行版，请使用以下命令安装 Python：

```py
$ sudo yum install python 
```

1.  在终端中使用以下命令检查已安装的 Python 解释器的版本：

```py
$ python -version  
```

这将打印当前安装的 Python 版本。

1.  如果您想安装特定版本的 Python，我们可以从[`www.python.org/`](https://www.python.org/)网站下载 Python 源代码并手动安装。为此，您可以从[`www.python.org/ftp/python/`](https://www.python.org/ftp/python/)下载所需的源存档。

您可以使用以下命令下载；确保用您需要的版本号替换版本号：

```py
$ wget https://www.python.org/ftp/python/3.6.2/Python-3.6.2.tgz      
```

1.  然后，我们必须使用以下命令提取下载的存档：

```py
$ tar -xvzf Python-3.6.2.tgz    
```

它将被提取到一个`Python-3.6.2`文件夹中。

1.  现在您可以配置、构建和安装 Python，为此您需要在系统上安装 C 编译器。如果没有安装，您可以按照以下步骤进行：

+   +   对于 Debian/Ubuntu：

```py
$ sudo apt-get install gcc
```

+   +   对于 CentOs/RHEL：

```py
$ yum install gcc
```

然后，您可以运行 configure 来配置构建，然后使用`make altinstall`命令安装构建：

```py
$ cd Python-3.6.2
$ ./configure --prefix=/usr/local
$ make altinstall  
```

安装后，您可以看到系统上安装的 Python 的两个版本，并且您可以选择在运行脚本时使用哪个版本。

# 建立虚拟环境

现在您可以学习设置一个虚拟环境，这将帮助您设置一个隔离的脚本环境。这将帮助我们将不同项目所需的依赖项保持在不同的位置。此外，它有助于保持全局 site-packages 干净，并与项目依赖项分开：

1.  您可以使用`pip`在系统中安装虚拟环境模块：

```py
$ pip install virtualenv 
```

1.  然后使用以下命令测试安装：

```py
$ virtualenv --version 
```

1.  尝试在`project`文件夹内创建一个新的虚拟环境：

```py
$ mkdir new-project-folder
$ cd new-project-folder
$ virtualenv new-project
```

这将在当前目录中创建一个名为`new-project`的文件夹。

如果您想要使用您选择的 Python 解释器创建一个虚拟环境，如下所示：

```py
$ virtualenv -p /usr/bin/python3 new-project  
```

1.  您可以使用以下命令激活这个虚拟环境：

```py
$ source new-project/bin/activate  
```

1.  如果您在虚拟环境中完成了工作，可以使用以下命令停用并退出虚拟环境：

```py
$ deactivate  
```

1.  我们可以使用`virtualenvwrapper`使其更简单。`virtualenvwrapper`有助于将所有虚拟环境保存在一个地方。要安装`virtualenvwrapper`，我们可以使用`pip`命令：

```py
$ pip install virtualenvwrapper  
```

我们必须设置`WORKON_HOME`变量，该变量是保存所有虚拟环境的文件夹：

```py
$ export WORKON_HOME=~/Envs
$ source /usr/local/bin/virtualenvwrapper.sh  
```

1.  使用`virtualenvwrapper`，我们可以按以下方式创建项目：

```py
$ mkvirtualenv new-project  
```

这将在`WORKON_HOME`内创建虚拟环境，即`~/Envs`。

1.  要激活创建的项目，我们可以使用以下命令：

```py
$ workon new-project    
```

1.  更方便的是，我们可以使用以下单个命令创建虚拟环境和`project`文件夹：

```py
$ mkproject new-project    
```

1.  最后，我们可以使用`deactivate`命令退出虚拟环境。

# 设置编辑器或 IDE

最后，您需要一个文本编辑器或 IDE 来编辑脚本。由于 Python 程序只是我们可以直接编辑的文本文件，如果您没有喜欢的文本编辑器，**sublime text3**是一个不错的选择：

1.  要安装 sublime text3，您可以从[`www.sublimetext.com/3`](https://www.sublimetext.com/3)下载最新版本。

1.  您可以使用以下命令从命令行安装 sublime text3：

```py
$ sudo add-apt-repository ppa:webupd8team/sublime-text-3
$ sudo apt-get update
$ sudo apt-get install sublime-text-installer
```

1.  如果您可以为 sublime text3 安装`Anaconda`软件包，那将更好。要安装它，请使用键盘快捷键*Ctrl +Shift* + *P*，然后输入`install`。这将显示一个选项 Package Control: Install Package。

![](img/00006.jpeg)

1.  选择此选项并搜索软件包`Anaconda`。选择要安装的软件包。

![](img/00007.jpeg)

# 在 macOS 中设置 Python 环境

同样，在 Linux 环境中，macOS 也默认安装了 Python。但是，您需要了解基本的安装步骤，因为这将有助于更新和重新安装。

# 准备就绪

首先，如果您尚未安装 Xcode，请从 App Store 安装 Xcode。然后使用以下命令更新命令行工具：

```py
$ xcode-select --install 
```

此外，我们还需要安装`Homebrew`，这是 macOS 的软件包管理器，为此打开终端并输入以下命令：

```py
$ ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"  
```

# 如何做...

现在，您可以使用`Homebrew`软件包管理器在 macOS 中安装 Python。

# 安装 Python

1.  搜索`Homebrew`以查找可以安装的选项：

```py
$ brew search python 
```

这将得到以下结果：

![](img/00008.jpeg)

1.  要安装 Python 3，可以运行以下命令：

```py
$ brew install python3  
```

随着 Python 3 一起，`brew`将安装`pip3`和`setuptools`。

1.  要设置虚拟环境和`virtualenvwrapper`，您可以按照我们在 Linux 环境中所做的相同步骤。

1.  要安装 sublime text3，从[`www.sublimetext.com/3`](https://www.sublimetext.com/3)获取软件包并运行安装程序。配置 Sublime text 3 的其他所有内容与 Linux 环境中的相同。

# 在 Windows 中设置 Python 环境

在 Windows 中，默认情况下未安装 Python 解释器。因此，我们必须下载并安装 Python。

# 如何做...

我们可以从官方网站下载 Python 并在系统中安装它。执行以下步骤：

1.  转到 Python 的官方网站（[`python.org/download/`](http://python.org/download/)）并下载最新版本的 Windows MSI 安装程序。

1.  运行安装程序。

1.  您可以选择安装启动器供所有用户（推荐），然后单击立即安装以完成安装。

![](img/00009.jpeg)

1.  安装完成后，最好将您的版本的默认 Python 目录添加到`PATH`中。

如果您已将 Python 安装在`C:\Python36\`中，则应将以下目录添加到您的`PATH`--`C:\Python36\;C:\Python36\Scripts\`。

为此，请转到我的电脑 | 属性 | 高级系统设置 | 环境变量，并编辑`PATH`变量以添加新目录。

![](img/00010.jpeg)

1.  现在，您可以像为其他环境安装一样安装虚拟环境和`virtualenvwrapper`。

1.  此外，您还可以下载并安装 sublime text 3 作为编辑器。
