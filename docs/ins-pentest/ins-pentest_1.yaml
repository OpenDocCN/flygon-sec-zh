- en: 'Chapter 1. Instant Penetration Testing: Setting Up a Test Lab How-to'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章。即时渗透测试：建立测试实验室的方法
- en: 'Welcome to *Instant Penetration Testing: Setting Up a Test Lab How-to*. This
    How-to contains the necessary information and essential steps required to do all
    the preparation work and build your own lab for practicing infrastructure, web,
    and Wi-Fi penetration testing.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 欢迎来到*即时渗透测试：建立测试实验室的方法*。本方法包含了进行所有准备工作和建立自己的实验室来练习基础设施、网络和Wi-Fi渗透测试所需的必要信息和基本步骤。
- en: Understanding penetration testing (Must know)
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解渗透测试（必知）
- en: This section contains a short overview of penetration testing (what it is, what
    types of penetration testing exist, the typical workflow, and what you should
    remember).
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 这一部分包含了渗透测试的简要概述（它是什么，有哪些类型的渗透测试，典型的工作流程，以及你应该记住什么）。
- en: 'Let us start by defining what penetration testing is and do a quick review
    of its main must-know details. According to *NIST SP 800-115*, *Technical Guide
    to Information Security Testing and Assessment*, it is defined as follows:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从定义渗透测试开始，快速回顾一下它的主要必知细节。根据*NIST SP 800-115*，*信息安全测试和评估技术指南*，它的定义如下：
- en: Penetration testing is security testing in which assessors mimic real-world
    attacks to identify methods for circumventing the security features of an application,
    system, or network. It often involves launching real attacks on real systems and
    data that use tools and techniques commonly used by attackers.
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 渗透测试是安全测试，评估者模拟真实世界的攻击，以识别绕过应用程序、系统或网络安全功能的方法。它通常涉及对使用攻击者常用的工具和技术的真实系统和数据发起真实攻击。
- en: 'Generally speaking, there are two main types of penetration tests:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 一般来说，渗透测试主要有两种类型：
- en: '**External**: These tests are performed from the outside of the testing area
    (usually network) and mimicking potential external threats.'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**外部**：这些测试是从测试区域（通常是网络）的外部进行的，并模拟潜在的外部威胁。'
- en: '**Internal**: These tests are performed from the inside of network and imitate
    a potential internal intruder, who could be a visitor (authorized or not) able
    to connect to the office network or a disloyal employee.'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**内部**：这些测试是从网络内部进行的，模拟潜在的内部入侵者，可能是一个能够连接到办公网络的访客（授权或未授权）或一个不忠诚的员工。'
- en: 'It is worth mentioning that external penetration tests could be additionally
    divided into several types by different criteria, sometimes based on targets:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 值得一提的是，外部渗透测试可以根据不同的标准进一步分为几种类型，有时是基于目标：
- en: VPN penetration tests
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VPN渗透测试
- en: Web application penetration tests
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web应用程序渗透测试
- en: Wi-Fi penetration tests
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wi-Fi渗透测试
- en: 'It is important to say that penetration testing goals may vary as well. Some
    companies may want to check their network vulnerabilities, others may want to
    test the effectiveness of their security solutions such as IPS, and some may need
    to test their security processes such as monitoring and incident response. Moreover,
    there are also penetration tests necessary for compliance purposes; for example,
    PCI DSS. Those goals determine general conditions for penetration tests. Penetration
    tests are most-widely classified as follows:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是要说，渗透测试的目标也可能各不相同。一些公司可能想要检查他们的网络漏洞，其他一些可能想要测试他们的安全解决方案的有效性，比如IPS，还有一些可能需要测试他们的安全流程，比如监控和事件响应。此外，也有一些渗透测试是为了符合法规要求而必要的；例如PCI
    DSS。这些目标决定了渗透测试的一般条件。渗透测试通常被分类如下：
- en: '**Black box**: Penetration tester does not have any information about his targets
    prior to testing'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**黑盒**：渗透测试人员在测试之前没有任何关于目标的信息'
- en: '**Gray box**: Penetration tester has some basic information about target infrastructure'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**灰盒**：渗透测试人员对目标基础设施有一些基本信息'
- en: '**White box**: Penetration tester has all the information he needs and is able
    to ask the customer for additional info during the testing process'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**白盒**：渗透测试人员拥有他所需的所有信息，并且能够在测试过程中向客户询问额外的信息'
- en: How to do it...
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Everyone should know that the penetration testing workflow consists of the
    four following phases:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 每个人都应该知道，渗透测试工作流程包括以下四个阶段：
- en: Planning
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 规划
- en: Discovery
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现
- en: Attack
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻击
- en: Reporting
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告
- en: 'Planning and reporting phases are usually made once during the project, but
    discovery and attack phases could be iterated several times, depending on their
    results. The following is a diagram of the penetration testing workflow:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 规划和报告阶段通常在项目期间只进行一次，但发现和攻击阶段根据其结果可以进行多次迭代。以下是渗透测试工作流程的图表：
- en: '![How to do it...](img/4124_01_01.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/4124_01_01.jpg)'
- en: In the beginning, the planning phase, all the organizational questions are negotiated,
    all the approvals are received, the working time and dates are settled, and other
    management work is done. All this information will be used by a penetration tester
    in the reporting phase.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在规划阶段开始时，所有组织问题都会得到协商，所有批准都会得到，工作时间和日期都会确定，其他管理工作也会完成。渗透测试人员将在报告阶段使用所有这些信息。
- en: Discovery is the process of target networks and systems data mining (IPs, open
    ports, network services and versions, OSs, and so on) and vulnerability identification
    based on gained information. Data mining is performed by analyzing the target
    hosts' reactions and responses on external interaction. This interaction is often
    called **Enumeration** and could be performed by means of automated tools (scanning)
    or manually.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发现是目标网络和系统数据挖掘的过程（IP地址、开放端口、网络服务和版本、操作系统等），并根据获得的信息识别漏洞。数据挖掘是通过分析目标主机对外部交互的反应和响应来进行的。这种交互通常被称为**枚举**，可以通过自动化工具（扫描）或手动进行。
- en: The next step after enumeration in the discovery phase is vulnerability identification.
    Similar to the enumeration process, this step could be automated, non-automated
    or, in most cases, mixed. The automated approach supposes the use of specialized
    software tools, while non-automated means comparing the targets' software versions
    gained during the enumeration process with vulnerability databases and analyzing
    the targets' behavior after data input.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在发现阶段枚举之后的下一步是漏洞识别。与枚举过程类似，这一步可以是自动化的、非自动化的，或者在大多数情况下是混合的。自动化方法假定使用专门的软件工具，而非自动化方法意味着将在枚举过程中获得的目标软件版本与漏洞数据库进行比较，并分析数据输入后目标的行为。
- en: In general, different types of scanning are used simultaneously in the discovery
    phase, if there is no such goal to avoid IDS.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 一般来说，在发现阶段同时使用不同类型的扫描，如果没有避免入侵检测系统的目标。
- en: The next phase is actually penetration itself and is performed by conducting
    different kinds of attacks against disclosed vulnerabilities on target systems,
    which is called vulnerabilities exploitation. After a successful exploitation,
    you can get a new route to reach other systems, which were inaccessible before.
    In such cases, the penetration tester goes back to the discovery phase and repeats
    it for newly achieved targets. Thus, a couple of discovery and attack phases could
    be iterated several times, depending on the scope and agreements between a penetration
    tester and a client.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 实际上，下一个阶段是渗透本身，通过对目标系统上披露的漏洞进行不同类型的攻击来执行。成功利用后，您可以获得到达以前无法访问的其他系统的新路径。在这种情况下，渗透测试人员将返回到发现阶段，并为新获得的目标重复该过程。因此，发现和攻击阶段可能根据渗透测试人员和客户之间的范围和协议进行多次迭代。
- en: Finally, at the reporting phase, the penetration tester develops a final report,
    which includes all the organizational project details, all the data collected
    during the discovery phase, and a description of the attack phase with the obtained
    results.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，在报告阶段，渗透测试人员编制最终报告，其中包括所有组织项目细节，发现阶段收集的所有数据，以及攻击阶段的描述和获得的结果。
- en: There's more...
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Here are some important things to remember.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些重要的事项需要记住。
- en: Common reasons to set up your own lab
  id: totrans-33
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 建立自己的实验室的常见原因
- en: 'Before starting your work on planning and setting up the lab, it is a good
    idea to do some preparation work and determine your own reasons for why you need
    a lab. Normally, penetration testers and information security specialists have
    a combination of several reasons to build their own labs, but here I want to give
    you the most common reasons:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始规划和设置实验室之前，做一些准备工作并确定自己需要实验室的原因是个好主意。通常，渗透测试人员和信息安全专家有多种原因来建立自己的实验室，但在这里我想给你最常见的原因：
- en: It is the best way to practise professional penetration testing skills and gain
    more knowledge about testing
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这是练习专业渗透测试技能和获取更多关于测试的知识的最佳方式
- en: All your practising in lab is legal, because you own and control it and there
    is no need to get a **Letter of Authorization** (**LOA**) first, so there is no
    risk of breaking the law
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您在实验室中的所有练习都是合法的，因为您拥有并控制它，无需首先获得**授权函**（**LOA**），因此没有违法风险
- en: This is a fully controlled environment, whose parameters and configurations
    could be changed in different ways in order to try different tools and techniques
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这是一个完全受控的环境，其参数和配置可以以不同的方式进行更改，以尝试不同的工具和技术
- en: A lab could be useful for preparing a working environment; that is, configuring
    software tools and different templates in the laptop that will be used for penetration
    testing
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实验室可以用于准备工作环境；也就是，在笔记本电脑中配置软件工具和不同的模板，以用于渗透测试
- en: Using a fully controlled lab is one of the best ways to find and research new
    software vulnerabilities
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用完全受控的实验室是发现和研究新软件漏洞的最佳方法之一
- en: Information security mechanisms' and solutions' effectiveness and performance
    could also be researched and assessed in the lab
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信息安全机制和解决方案的有效性和性能也可以在实验室中进行研究和评估
- en: It is important to say that different types of penetration testing require different
    approaches and methodologies to be used for performing specific tasks. This is
    why a penetration tester has to work out all the basic methodologies step by step,
    permanently controlling everything that happens inside the lab environment and
    analyzing the environment reaction. This is why constant practising and learning
    are the two processes that are necessary for every professional penetration tester
    who wants to carry out projects successfully. You can use a lab, both for initial
    study with skill practising and for later training with penetration testing of
    certain technologies, or for learning new modes or functionality of your tools.
    The latter could be reached by setting up all appropriate technologies in your
    lab.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是要说，不同类型的渗透测试需要使用不同的方法和方法来执行特定任务。这就是为什么渗透测试人员必须逐步制定所有基本方法，不断控制实验室环境内发生的一切，并分析环境的反应。这就是为什么不断练习和学习是每个想成功执行项目的专业渗透测试人员所必需的两个过程。您可以使用实验室，既用于初始学习和技能练习，也用于后续对特定技术进行渗透测试，或者学习工具的新模式或功能。通过在实验室中设置所有适当的技术，可以实现后者。
- en: At the same time, if you are the penetration tester working with customers,
    you can meet a variety of different software and technologies used in the customer's
    networks and it is extremely important for you to be familiar with them and to
    know what to do. Also, during penetration tests, you might meet technologies,
    mechanisms, or software that are new for you. So, you obviously would have to
    learn and practise hacking them at a safe lab, but not on a customer's productive
    system.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 同时，如果您是与客户合作的渗透测试人员，您可能会遇到客户网络中使用的各种不同软件和技术，对您来说熟悉它们并知道该怎么做是非常重要的。此外，在渗透测试期间，您可能会遇到对您来说是新的技术、机制或软件。因此，您显然需要在安全的实验室中学习和练习对它们进行黑客攻击，而不是在客户的生产系统上进行。
- en: On the other hand, if you are an information security officer or an internal
    penetration tester who is going to perform tests for your employer's company inside
    its corporate network, then you have to test the penetration testing methodology
    and plan its influence on target systems and the whole network (by means of training
    with your tools and researching), while not disrupting or reducing any system
    functionality or performance. On the basis of the results of such a training,
    a penetration tester can usually tune specific tools or choose tools that work
    with the target environment in the most effective way.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，如果您是一名信息安全官员或内部渗透测试人员，将在雇主公司的企业网络内执行测试，那么您必须测试渗透测试方法并计划其对目标系统和整个网络的影响（通过使用工具进行培训和研究），同时不会干扰或降低任何系统功能或性能。根据这种培训的结果，渗透测试人员通常可以调整特定工具或选择以最有效的方式与目标环境一起工作的工具。
- en: What is more important is that the speed and effectiveness of the whole penetration
    testing process often depends upon how good and comfortable tools are set up in
    pentesting laptop. However, just installing all the necessary tools is not enough
    – laptop tuning and hardening is another significant activity in preparation for
    performing penetration tests. Consequently, the lab becomes very useful for writing
    most common scripts, configuring proxies and frameworks, identifying network connection
    parameters, and so on.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 更重要的是，整个渗透测试过程的速度和效果往往取决于渗透测试笔记本电脑中工具的设置有多好和舒适。然而，仅仅安装所有必要的工具是不够的 - 笔记本电脑的调整和加固是准备进行渗透测试的另一个重要活动。因此，实验室对于编写大多数常见脚本、配置代理和框架、识别网络连接参数等非常有用。
- en: 'I also mentioned that using your own lab is also a good way to find and research
    new software vulnerabilities. A lot of information security researchers use their
    own labs for this reason. In general, the research process usually includes the
    following steps:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我还提到使用自己的实验室也是发现和研究新软件漏洞的好方法。许多信息安全研究人员出于这个原因使用他们自己的实验室。一般来说，研究过程通常包括以下步骤：
- en: Installing the interested software that needs to be researched.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装需要研究的感兴趣的软件。
- en: Using special techniques to find vulnerabilities; for example, fuzzing.
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用特殊技术来发现漏洞；例如，模糊测试。
- en: Using a debugger or other techniques to research vulnerability and determine
    its parameters.
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用调试器或其他技术来研究漏洞并确定其参数。
- en: Understanding the possible effects of vulnerability exploitation.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 了解漏洞利用的可能影响。
- en: Creating and testing **Proof-of-Concept** (**PoC**) for this vulnerability to
    publicly demonstrate that it is exploitable.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建和测试**概念验证**（**PoC**）以公开证明该漏洞是可利用的。
- en: The last reason for setting up your own lab that I would like to mention, is
    assessing the effectiveness and performance of information security mechanisms
    and solutions. In this case, a lab is useful because you can research the behavior
    of security facilities by sequentially applying different attack techniques on
    them and varying configuration parameters. One of the important advantages of
    using a lab for such assessments is the ability to legally and safely perform
    stress-testing of information systems and security facilities.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我想要提到设置自己的实验室的最后一个原因是评估信息安全机制和解决方案的有效性和性能。在这种情况下，实验室是有用的，因为您可以通过顺序应用不同的攻击技术和变化配置参数来研究安全设施的行为。使用实验室进行此类评估的一个重要优势是能够合法和安全地对信息系统和安全设施进行压力测试。
- en: What you should remember
  id: totrans-52
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 您应该记住的事情
- en: 'There are several important rules that you should always remember in order
    to avoid law infringement while performing penetration testing:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行渗透测试时，您应该始终记住几条重要规则，以避免侵犯法律：
- en: To avoid any legal problems, you should always get an approval from your customers.
    LOA is an authoritative permission, which makes penetration test legal. LOA should
    be issued by the proper authorities, very specifically in scope (actually, what
    to test) of penetration testing and must contain confirmation from the customer,
    who he really owns all assets in the scope.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为了避免任何法律问题，您应该始终获得客户的批准。LOA是一种权威的许可，使渗透测试合法化。LOA应由适当的当局发放，非常明确地界定了渗透测试的范围（实际上是什么要测试），并且必须包含来自客户的确认，他真正拥有范围内的所有资产。
- en: Like in every information security audit or assessment, you should also negotiate
    a **Non-Disclosure Agreement** (**NDA**) with the customer prior to starting your
    penetration test project. This agreement limits the information disclosure for
    both sides, so customers are confident in saving the confidentiality of their
    information, and you are certain about your methodology privacy.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 就像在每次信息安全审计或评估中一样，您还应该在开始渗透测试项目之前与客户协商**保密协议**（**NDA**）。该协议限制了双方的信息披露，因此客户可以放心地保存其信息的机密性，而您则可以确保您的方法的隐私性。
- en: It is important to negotiate organizational details such as specific testing
    windows (exact dates and time), necessary contacts, and incident response procedures
    in case of an accidental target system failure.
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重要的是要协商组织细节，如特定的测试时间窗口（确切的日期和时间）、必要的联系人以及在意外目标系统故障的情况下的事件响应程序。
- en: Additional reading
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 额外阅读
- en: 'If you want to go deeper into the penetration testing process and its details,
    you can check the following:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想深入了解渗透测试过程及其细节，可以查看以下内容：
- en: '*NIST SP 800-115*, *Technical Guide to Information Security Testing and Assessment*'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*NIST SP 800-115*，*信息安全测试和评估技术指南*'
- en: '*Hacking Exposed 7: Network Security Secrets & Solutions*, by *Stuart McClure*,
    *Joel Scambray*, and *George Kurtz*, *2012*'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Hacking Exposed 7: Network Security Secrets & Solutions*，作者*Stuart McClure*，*Joel
    Scambray*和*George Kurtz*，*2012*'
- en: '[http://www.pentest-standard.org](http://www.pentest-standard.org)'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://www.pentest-standard.org](http://www.pentest-standard.org)'
- en: Planning the lab environment (Should know)
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 规划实验室环境（应该知道）
- en: This section reveals how to plan your lab environment step by step and shows
    what you should consider during the lab planning process.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 本节揭示了如何逐步规划您的实验室环境，并显示了在实验室规划过程中应考虑的内容。
- en: Getting ready
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'To get the best result after setting up your lab, you should plan it properly
    at first. Your lab will be used to practise certain penetration testing skills.
    Therefore, in order to properly plan your lab environment, you should first consider
    which skills you want to practise based on ideas and reasons listed in the *Understanding
    penetration testing (Must know)* recipe. Although you could also have non-common
    or even unique reasons to build a lab, I can provide you with the average list
    of skills one might need to practice:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 为了在设置实验室后获得最佳结果，您应该首先进行适当的规划。您的实验室将用于练习特定的渗透测试技能。因此，为了正确规划您的实验室环境，您应该首先考虑根据*了解渗透测试（必须知道）*食谱中列出的想法和原因，您想要练习哪些技能。尽管您也可能有非常规或甚至独特的原因来建立实验室，但我可以为您提供一个平均技能清单，您可能需要练习：
- en: Essential skills
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基本技能
- en: Discovery techniques
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现技术
- en: Enumeration techniques
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 枚举技术
- en: Scanning techniques
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扫描技术
- en: Network vulnerability exploitation
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络漏洞利用
- en: Privilege escalation
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 特权升级
- en: OWASP TOP 10 vulnerabilities discovery and exploitation
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OWASP十大漏洞发现和利用
- en: Password and hash attacks
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码和哈希攻击
- en: Wireless attacks
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无线攻击
- en: Additional skills
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 额外技能
- en: Modifying and testing exploits
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修改和测试利用
- en: Tunneling
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 隧道
- en: Fuzzing
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Fuzzing
- en: Vulnerability research
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 漏洞研究
- en: Documenting the penetration testing process
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 记录渗透测试过程
- en: 'All these skills are applied in real-life penetration testing projects, depending
    on its depth and the penetration tester''s qualifications. The following skills
    could be practised at three lab types or their combinations:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些技能都应用于现实生活中的渗透测试项目，取决于其深度和渗透测试人员的资质。以下技能可以在三种实验室类型或它们的组合中进行练习：
- en: Network security lab
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络安全实验室
- en: Web application lab
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web应用实验室
- en: Wi-Fi lab
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wi-Fi实验室
- en: 'I should mention that the lab planning process for each of the three lab types
    listed consists of the same four phases:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 我应该提到，列出的三种实验室类型的实验室规划过程由相同的四个阶段组成：
- en: '**Determining the lab environment requirements**: This phase helps you to actually
    understand what your lab should include. In this phase, all the necessary lab
    environment components should be listed and their importance for practising different
    penetration testing skills should be assessed.'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**确定实验室环境要求**：这个阶段帮助您真正理解您的实验室应该包括什么。在这个阶段，应列出所有必要的实验室环境组件，并评估它们对练习不同渗透测试技能的重要性。'
- en: '**Determining the lab environment size**: The number of various lab environment
    components should be defined in this phase.'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**确定实验室环境规模**：应该在这个阶段定义各种实验室环境组件的数量。'
- en: '**Determining the required resources**: The point of this phase is to choose
    which hardware and software could be used for building the lab with the specified
    parameters and fit it with what you actually have or are able to get.'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**确定所需资源**：这个阶段的重点是选择哪些硬件和软件可以用于构建具有指定参数的实验室，并使其与您实际拥有或能够获得的内容相匹配。'
- en: '**Determining the lab environment architecture**: This phase designs the network
    topology and network address space.'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**确定实验室环境架构**：这个阶段设计网络拓扑和网络地址空间。'
- en: How to do it...
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到...
- en: 'Now, I want to describe step by step how to plan a common lab combined of all
    three lab types listed in the preceding section using the following four-phase
    approach:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我想逐步描述如何使用以下四阶段方法规划前一节列出的所有三种实验室类型的常见实验室：
- en: '**Determine the lab environment requirements**:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**确定实验室环境要求**：'
- en: 'To fit our goal and practise particular skills, the lab should contain the
    following components:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 为了达到我们的目标并练习特定的技能，实验室应包含以下组件：
- en: '| Skills to practise | Necessary components |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '| 练习的技能 | 必要的组件 |'
- en: '| --- | --- |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Discovery techniques | Several different hosts with various OSsFirewallIPS
    |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
  zh: '| 发现技术 | 具有各种操作系统的几个不同主机防火墙IPS |'
- en: '| Enumeration techniques |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
  zh: '| 枚举技术 |'
- en: '| Scanning techniques |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
  zh: '| 扫描技术 |'
- en: '| Network vulnerability exploitation |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
  zh: '| 网络漏洞利用 |'
- en: '| OWASP TOP 10 vulnerabilities discovery and exploitation | Web serverWeb applicationDatabase
    serverWeb application firewall |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
  zh: '| OWASP十大漏洞发现和利用 | Web服务器Web应用数据库服务器Web应用防火墙 |'
- en: '| Password and hash attacks | WorkstationsServersDomain controllerFTP server
    |'
  id: totrans-101
  prefs: []
  type: TYPE_TB
  zh: 密码和哈希攻击 | 工作站服务器域控制器FTP服务器 |
- en: '| Wireless attacks | Wireless routerRadius serverLaptop or any other host with
    Wi-Fi adapter |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
  zh: '| 无线攻击 | 无线路由器Radius服务器笔记本电脑或任何其他带有Wi-Fi适配器的主机 |'
- en: '| Modifying and testing exploits | Any hostVulnerable network serviceDebugger
    |'
  id: totrans-103
  prefs: []
  type: TYPE_TB
  zh: '| 修改和测试利用 | 任何主机易受攻击的网络服务调试器 |'
- en: '| Privilege escalation | Any host |'
  id: totrans-104
  prefs: []
  type: TYPE_TB
  zh: '| 特权升级 | 任何主机 |'
- en: '| Tunneling | Several hosts |'
  id: totrans-105
  prefs: []
  type: TYPE_TB
  zh: '| 隧道 | 几个主机 |'
- en: '| Fuzzing | Any hostVulnerable network serviceDebugger |'
  id: totrans-106
  prefs: []
  type: TYPE_TB
  zh: '| Fuzzing | 任何主机易受攻击的网络服务调试器 |'
- en: '| Vulnerability research |'
  id: totrans-107
  prefs: []
  type: TYPE_TB
  zh: '| 漏洞研究 |'
- en: '| Documenting the penetration testing process | Specialized software |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| 记录渗透测试过程 | 专业软件 |'
- en: 'Now, we can make our component list and define the importance of each component
    for our lab (importance ranges between less important, **Additional,** and most
    important, **Essential**):'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以列出我们的组件清单，并定义每个组件对我们实验室的重要性（重要性范围在不太重要，**附加**，和最重要，**必要**）：
- en: '| Components | Importance |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| 组件 | 重要性 |'
- en: '| --- | --- |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Windows server | Essential |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| Windows服务器 | 重要 |'
- en: '| Linux server | Important |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| Linux服务器 | 重要 |'
- en: '| FreeBSD server | Additional |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| FreeBSD服务器 | 额外 |'
- en: '| Domain controller | Important |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| 域控制器 | 重要 |'
- en: '| Web server | Essential |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| Web服务器 | 重要 |'
- en: '| FTP Server | Important |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| FTP服务器 | 重要 |'
- en: '| Web site | Essential |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| 网站 | 重要 |'
- en: '| Web 2.0 application | Important |'
  id: totrans-119
  prefs: []
  type: TYPE_TB
  zh: '| Web 2.0应用程序 | 重要 |'
- en: '| Web application firewall | Additional |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '| Web应用程序防火墙 | 额外 |'
- en: '| Database server | Essential |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| 数据库服务器 | 重要 |'
- en: '| Windows workstation | Essential |'
  id: totrans-122
  prefs: []
  type: TYPE_TB
  zh: '| Windows工作站 | 重要 |'
- en: '| Linux workstation | Additional |'
  id: totrans-123
  prefs: []
  type: TYPE_TB
  zh: '| Linux工作站 | 额外 |'
- en: '| Laptop or any other host with Wi-Fi adapter | Essential |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| 笔记本电脑或任何其他带有Wi-Fi适配器的主机 | 重要 |'
- en: '| Wireless router | Essential |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '| 无线路由器 | 重要 |'
- en: '| Radius server | Important |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '| 半径服务器 | 重要 |'
- en: '| Firewall | Important |'
  id: totrans-127
  prefs: []
  type: TYPE_TB
  zh: '| 防火墙 | 重要 |'
- en: '| IPS | Additional |'
  id: totrans-128
  prefs: []
  type: TYPE_TB
  zh: '| IPS | 额外 |'
- en: '| Debugger | Additional |'
  id: totrans-129
  prefs: []
  type: TYPE_TB
  zh: '| 调试器 | 额外 |'
- en: '**Determine the lab environment size**:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**确定实验室环境规模**：'
- en: 'In this step, we should decide how many instances of each component we need
    in our lab. We will count only the essential and important components'' numbers,
    so let''s exclude all additional components. This means that we''ve now got the
    following numbers:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步中，我们应该决定我们实验室中每个组件的实例数量。我们只会计算必要和重要组件的数量，所以让我们排除所有额外的组件。这意味着我们现在有以下数量：
- en: '| Components | Number |'
  id: totrans-132
  prefs: []
  type: TYPE_TB
  zh: '| 组件 | 数量 |'
- en: '| --- | --- |'
  id: totrans-133
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Windows server | 2 |'
  id: totrans-134
  prefs: []
  type: TYPE_TB
  zh: '| Windows服务器 | 2 |'
- en: '| Linux server | 1 |'
  id: totrans-135
  prefs: []
  type: TYPE_TB
  zh: '| Linux服务器 | 1 |'
- en: '| Domain controller | 1 |'
  id: totrans-136
  prefs: []
  type: TYPE_TB
  zh: '| 域控制器 | 1 |'
- en: '| Web server | 1 |'
  id: totrans-137
  prefs: []
  type: TYPE_TB
  zh: '| Web服务器 | 1 |'
- en: '| FTP Server | 1 |'
  id: totrans-138
  prefs: []
  type: TYPE_TB
  zh: '| FTP服务器 | 1 |'
- en: '| Web site | 1 |'
  id: totrans-139
  prefs: []
  type: TYPE_TB
  zh: '| 网站 | 1 |'
- en: '| Web 2.0 application | 1 |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '| Web 2.0应用程序 | 1 |'
- en: '| Database server | 1 |'
  id: totrans-141
  prefs: []
  type: TYPE_TB
  zh: '| 数据库服务器 | 1 |'
- en: '| Windows workstation | 2 |'
  id: totrans-142
  prefs: []
  type: TYPE_TB
  zh: '| Windows工作站 | 2 |'
- en: '| Host with Wi-Fi adapter | 2 |'
  id: totrans-143
  prefs: []
  type: TYPE_TB
  zh: '| 带有Wi-Fi适配器的主机 | 2 |'
- en: '| Wireless router | 1 |'
  id: totrans-144
  prefs: []
  type: TYPE_TB
  zh: '| 无线路由器 | 1 |'
- en: '| Radius server | 1 |'
  id: totrans-145
  prefs: []
  type: TYPE_TB
  zh: '| 半径服务器 | 1 |'
- en: '| Firewall | 2 |'
  id: totrans-146
  prefs: []
  type: TYPE_TB
  zh: '| 防火墙 | 2 |'
- en: '**Determine required resources**:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**确定所需资源**：'
- en: 'Now, we will discuss the required resources:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将讨论所需的资源：
- en: Server and victim workstations will be virtual machines based on VMWare Workstation
    8.0\. To run the virtual machines without any trouble, you will need to have an
    appropriate hardware platform based on a CPU with two or more cores and at least
    4 GB RAM.
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务器和受害者工作站将是基于VMWare Workstation 8.0的虚拟机。为了无需任何麻烦地运行虚拟机，您需要具有基于具有两个或更多核心的CPU和至少4GB
    RAM的适当硬件平台。
- en: Windows servers OSs will work under Microsoft Windows 2008 Server and Microsoft
    Windows Server 2003.
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows服务器操作系统将在Microsoft Windows 2008 Server和Microsoft Windows Server 2003下运行。
- en: We will use Ubuntu 12.04 LTS as a Linux server OS. Workstations will work under
    Microsoft Windows XP SP3 and Microsoft Windows 7.
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们将使用Ubuntu 12.04 LTS作为Linux服务器操作系统。工作站将在Microsoft Windows XP SP3和Microsoft
    Windows 7下运行。
- en: ASUS WL-520gc will be used as the LAN and WLAN router.
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ASUS WL-520gc将用作LAN和WLAN路由器。
- en: Any laptop as the attacker's host.
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 任何笔记本电脑作为攻击者的主机。
- en: Samsung Galaxy Tab as the Wi-Fi victim (or other device supporting Wi-Fi).
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 三星Galaxy Tab作为Wi-Fi受害者（或其他支持Wi-Fi的设备）。
- en: We will use free software as a web server, an FTP-server, and a web application,
    so there is no need for any hardware or financial resources to get these requirements.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用免费软件作为Web服务器、FTP服务器和Web应用程序，因此不需要任何硬件或财务资源来满足这些要求。
- en: '**Determine the lab environment architecture**:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**确定实验室环境架构**：'
- en: 'Now, we need to design our lab network and draw a scheme:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要设计我们的实验室网络并绘制一个方案：
- en: '![How to do it...](img/4124_02_01.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![操作步骤...](img/4124_02_01.jpg)'
- en: 'Address space parameters:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 地址空间参数：
- en: '**DHCP server**: 192.168.1.1'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DHCP服务器**：192.168.1.1'
- en: '**Gateway**: 192.168.1.1'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网关**：192.168.1.1'
- en: '**Address pool**: 192.168.1.2-15'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**地址池**：192.168.1.2-15'
- en: '**Subnet mask**: 255.255.255.0'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**子网掩码**：255.255.255.0'
- en: How it works...
  id: totrans-164
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: 'In the first step, we discovered which types of lab components we need by determining
    what could be used to practise the following skills:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在第一步中，我们通过确定可以用于练习以下技能的内容来发现我们需要哪些类型的实验室组件：
- en: All OSs and network services are suitable for practising discovery, enumeration,
    and scanning techniques and also for network vulnerability exploitation. We also
    need at least two firewalls – windows built-in software and router built-in firewall
    functions.
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有操作系统和网络服务都适用于练习发现、枚举和扫描技术，也适用于网络漏洞利用。我们还需要至少两个防火墙 - Windows内置软件和路由器内置防火墙功能。
- en: Firewalls are necessary for learning different scanning techniques and firewall
    rule detection knowledge. Additionally, you can use any IPS for practising evasion
    techniques.
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防火墙对于学习不同的扫描技术和防火墙规则检测知识是必要的。此外，您可以使用任何IPS来练习规避技术。
- en: A web server, a website, and a web application are necessary for learning how
    to disclose and exploit OWASP TOP 10 vulnerabilities. Though a **web application
    firewall** (**WAF**) is not necessary, it helps to improve web penetration testing
    skills to a higher level.
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web服务器、网站和Web应用程序对于学习如何揭露和利用OWASP TOP 10漏洞是必要的。虽然**Web应用程序防火墙**（**WAF**）不是必需的，但它有助于提高Web渗透测试技能到更高的水平。
- en: An FTP service ideally serves as a way to practise password brute-forcing. Microsoft
    domain services are necessary to understand and try Windows domain passwords and
    hash attacks including relaying. This is why we need at least one network service
    with remote password authentication and at least one Windows domain controller
    with two Windows workstations.
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: FTP服务理想情况下用作练习密码暴力破解的方式。微软域服务是必要的，以了解和尝试Windows域密码和哈希攻击，包括中继。这就是为什么我们至少需要一个具有远程密码验证的网络服务，以及至少一个具有两个Windows工作站的Windows域控制器。
- en: A wireless access point is essential for performing various wireless attacks,
    but it is better to combine a LAN router and Wi-Fi access point in one device.
    So, we will use a Wi-Fi router with several LAN ports. A radius server is necessary
    for practising attacks on WLAN with WPA-Enterprise security.
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无线接入点对于执行各种无线攻击是必要的，但最好将LAN路由器和Wi-Fi接入点合并在一个设备中。因此，我们将使用一个带有多个LAN端口的Wi-Fi路由器。半径服务器对于练习具有WPA-Enterprise安全性的WLAN上的攻击是必要的。
- en: A laptop and a tablet PC with any Wi-Fi adapters will work as an attacker and
    victim in wireless attacks.
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 笔记本电脑和平板电脑配备任何Wi-Fi适配器将作为无线攻击中的攻击者和受害者。
- en: Tunneling techniques could be practised at any two hosts; it does not matter
    whether we use Windows or any other OS.
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 隧道技术可以在任何两台主机上进行实践；无论我们使用Windows还是其他操作系统都无所谓。
- en: Testing and modifying exploits as well as fuzzing and vulnerability research
    need a debugger installed on a vulnerable host.
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试和修改漏洞利用以及模糊和漏洞研究需要在易受攻击的主机上安装调试器。
- en: To properly document a penetration testing process, one can use just any test
    processor software, but there are several specialized software solutions, which
    make things much more comfortable and easier.
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为了正确记录渗透测试过程，可以使用任何测试处理器软件，但也有一些专门的软件解决方案，可以让事情变得更加舒适和简单。
- en: In the second step, we determined which software and hardware we can use as
    instances of chosen component types and set their importance based on a common
    lab for a basic and intermediate professional level penetration tester.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在第二步，我们确定了可以用作所选组件类型实例的软件和硬件，并根据初级和中级专业水平渗透测试的常见实验室设置了它们的重要性。
- en: In the third step, we understood which solutions will be suitable for our tasks
    and what we can afford. I have tried to choose a cheaper option, which is why
    I am going to use virtualization software. The ASUS WL-520gc router combines the
    LAN router and Wi-Fi access point in the same device, so it is cheaper and more
    comfortable than using dedicated devices. A laptop and a tablet PC are also chosen
    for practising wireless attacks, but it is not the cheapest solution.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 在第三步，我们了解了哪些解决方案适合我们的任务以及我们能负担得起什么。我尝试选择更便宜的选项，这就是为什么我要使用虚拟化软件。ASUS WL-520gc路由器将LAN路由器和Wi-Fi接入点结合在同一设备中，因此比使用专用设备更便宜和更舒适。笔记本电脑和平板电脑也被选择用于练习无线攻击，但这并不是最便宜的解决方案。
- en: In the fourth step, we designed our lab network based on determined resources.
    We have chosen to put all the hosts in the same subnet to set up the lab in an
    easier way. The subnet has its own DHCP server to dynamically assign network addresses
    to hosts.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在第四步，我们基于确定的资源设计了我们的实验室网络。我们选择将所有主机放在同一个子网中，以更轻松地设置实验室。子网有自己的DHCP服务器，可以动态分配网络地址给主机。
- en: There's more...
  id: totrans-178
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Let me give you an account of alternative ways to plan the lab environment details.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 让我给你介绍一下规划实验室环境细节的替代方法。
- en: Lab environment components variations
  id: totrans-180
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验室环境组件变化
- en: It is not necessary to use a laptop as the attacker machine and a tablet PC
    as the victim – you just need two PCs with connected Wi-Fi adapters to perform
    various wireless attacks.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 不必使用笔记本电脑作为攻击者机器和平板电脑作为受害者 - 您只需要两台带有连接的Wi-Fi适配器的PC来执行各种无线攻击。
- en: As an alternative to virtual machines, a laptop, and a tablet PC or old unused
    computers (if you have them) could also be used to work as hardware hosts. There
    is only one condition – their hardware resources should be enough for planned
    OSs to work.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 作为虚拟机的替代方案，笔记本电脑、平板电脑或旧的未使用的计算机（如果有的话）也可以用作硬件主机。只有一个条件 - 它们的硬件资源应足够支持计划中的操作系统工作。
- en: An IPS could be either a software or hardware, but hardware systems are more
    expensive. For our needs, it is enough to use any freeware Internet security software
    including both the firewall and IPS functionality.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: IPS可以是软件或硬件，但硬件系统更昂贵。对于我们的需求，使用任何免费的互联网安全软件，包括防火墙和IPS功能，就足够了。
- en: It is not essential to choose the same OS as I have chosen in this chapter;
    you can use any other OSs that support the required functionality. The same is
    true about network services – it is not necessary to use an FTP service; you can
    use any other service that supports network password authentication such as telnet
    and SSH.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中选择与我选择的相同操作系统并不是必要的；您可以使用任何其他支持所需功能的操作系统。关于网络服务也是如此 - 不必使用FTP服务；您可以使用任何其他支持网络密码身份验证的服务，如telnet和SSH。
- en: You will have to additionally install any debugger on one of the victim's workstations
    in order to test the new or modified exploits and perform vulnerability research,
    if you need to.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 如果需要，您还需要在受害者工作站中额外安装任何调试器，以测试新的或修改的漏洞利用并进行漏洞研究。
- en: Finally, you can use any other hardware or virtual router that supports LAN
    routing and Wi-Fi access point functionality. A connected, dedicated LAN router
    and Wi-Fi access point are also suitable for the lab.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，您可以使用任何其他支持LAN路由和Wi-Fi接入点功能的硬件或虚拟路由器。连接的专用LAN路由器和Wi-Fi接入点也适用于实验室。
- en: Choosing virtualization solutions – pros and cons
  id: totrans-187
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 选择虚拟化解决方案 - 优缺点
- en: 'Here, I want to list some pros and cons of the different virtualization solutions
    in table format:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我想以表格形式列出不同虚拟化解决方案的优缺点：
- en: '| Solution | Pros | Cons |'
  id: totrans-189
  prefs: []
  type: TYPE_TB
  zh: '| 解决方案 | 优点 | 缺点 |'
- en: '| --- | --- | --- |'
  id: totrans-190
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| VMWare ESXi |'
  id: totrans-191
  prefs: []
  type: TYPE_TB
  zh: '| VMWare ESXi |'
- en: Enterprise solution
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 企业解决方案
- en: Powerful solution
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 强大的解决方案
- en: Easily supports a lot of virtual machines on the same physical server as separate
    partitions
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在同一台物理服务器上轻松支持大量虚拟机作为单独的分区
- en: No need to install the OS
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无需安装操作系统
- en: '|'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Very high cost
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 成本非常高
- en: Requires a powerful server
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要强大的服务器
- en: Requires processor virtualization support
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要处理器虚拟化支持
- en: '|'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| VMWare workstation |'
  id: totrans-201
  prefs: []
  type: TYPE_TB
  zh: '| VMWare工作站 |'
- en: Comfortable to work with
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 易于操作
- en: User friendly GUI
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户友好的图形界面
- en: Easy install
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 易安装
- en: Virtual `*nix` systems work fast
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟`*nix`系统运行速度快
- en: Better works with virtual graphics
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与虚拟图形更好地配合
- en: '|'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Shareware
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 共享软件
- en: It sometimes faces problems with USB Wi-Fi adapters on Windows 7
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Windows 7上有时会遇到USB Wi-Fi适配器的问题
- en: Demanding towards system resources
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对系统资源要求高
- en: Does not support 64-bit guest OS
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不支持64位客户操作系统
- en: Virtual Windows systems work slowly
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟Windows系统运行缓慢
- en: '|'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| VMWare player |'
  id: totrans-214
  prefs: []
  type: TYPE_TB
  zh: '| VMWare播放器 |'
- en: Freeware
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 免费软件
- en: User-friendly GUI
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户友好的图形界面
- en: Easy to install
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 易安装
- en: '|'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Cannot create new virtual machines
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无法创建新的虚拟机
- en: Poor functionality
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 功能较差
- en: '|'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| Micrisoft Virtual PC |'
  id: totrans-222
  prefs: []
  type: TYPE_TB
  zh: '| 微软虚拟PC |'
- en: Freeware
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 免费软件
- en: Great compatibility and stability with Microsoft systems
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与Microsoft系统的兼容性和稳定性很好
- en: Good USB support
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 良好的USB支持
- en: Easy to install
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 易于安装
- en: '|'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Works only on Windows and only with Windows
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仅在Windows上工作，且仅与Windows配合使用。
- en: Does not support a lot of features that concurrent solutions do
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不支持许多与并发解决方案相同的功能
- en: '|'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| Oracle Virtual Box |'
  id: totrans-231
  prefs: []
  type: TYPE_TB
  zh: '| Oracle Virtual Box |'
- en: Freeware
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 免费软件
- en: Virtual Windows systems work fast
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟Windows系统运行速度快
- en: User-friendly GUI
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户友好的GUI
- en: Easy to install
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 易于安装
- en: Works on Mac OS and Solaris as well as on Windows and Linux
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Mac OS和Solaris上以及在Windows和Linux上都可以使用
- en: Supports the "Teleportation" technology
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持“传送”技术
- en: '|'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Paid USB support
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 付费USB支持
- en: Virtual `*nix` systems work slowly
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟`*nix`系统运行缓慢
- en: '|'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Here, I have listed only the leaders of the virtualization market in my opinion.
    Historically, I am mostly accustomed to VMWare Workstation, but of course, you
    can choose any other solutions that you may like.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我只列出了我认为是虚拟化市场领导者。从历史上看，我大多习惯于VMWare Workstation，但当然，您可以选择任何其他您喜欢的解决方案。
- en: You can find more comparison info at [http://virt.kernelnewbies.org/TechComparison](http://virt.kernelnewbies.org/TechComparison).
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在[http://virt.kernelnewbies.org/TechComparison](http://virt.kernelnewbies.org/TechComparison)找到更多比较信息。
- en: Setting up the network security lab (Must know)
  id: totrans-244
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置网络安全实验室（必须知道）
- en: 'This section is aimed at setting up a lab environment for practising penetration
    testing in general. Skills that you can practise with this type of lab are as
    follows:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 本节旨在为一般渗透测试设置实验室环境。您可以通过此类型的实验室练习以下技能：
- en: Essential skills
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基本技能
- en: Discovery techniques
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现技术
- en: Enumeration techniques
  id: totrans-248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 枚举技术
- en: Scanning techniques
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扫描技术
- en: Network vulnerability exploitation
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络漏洞利用
- en: Privilege escalation
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 权限提升
- en: Password and hash attacks
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码和哈希攻击
- en: Additional skills
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 额外的技能
- en: Modifying and testing exploits
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修改和测试利用
- en: Tunneling
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 隧道
- en: Fuzzing
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模糊测试
- en: Vulnerability research
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 漏洞研究
- en: Documenting the penetration testing process
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 记录渗透测试过程
- en: Getting ready
  id: totrans-259
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'Prior to setting up the network security lab environment, let''s do some preparation.
    We need to clearly understand our lab network topology for this task. It will
    differ from the topology given in the *Planning the lab environment (Should know)*
    recipe, because of tweaking for the current lab needs. In this recipe, the other
    components are necessary:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 在设置网络安全实验室环境之前，让我们做一些准备工作。我们需要清楚地了解我们的实验室网络拓扑结构。由于需要调整当前实验室的需求，它将与*规划实验室环境（应知道）*食谱中给出的拓扑结构有所不同。在本食谱中，其他组件是必需的：
- en: Router
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 路由器
- en: Domain controller (Windows 2008)
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 域控制器（Windows 2008）
- en: FTP server (Ubuntu)
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: FTP服务器（Ubuntu）
- en: Two workstations (Windows 7 Pro and Windows XP Pro)
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个工作站（Windows 7专业版和Windows XP专业版）
- en: Attacker workstation
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻击者工作站
- en: 'You can see the current task network topology in the following diagram:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在以下图表中看到当前任务的网络拓扑：
- en: '![Getting ready](img/4124_03_01.jpg)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: ！[准备就绪]（img/4124_03_01.jpg）
- en: 'Since we decided to use virtual machines, we need to clearly understand the
    current lab environment architecture (physical and logical). One physical PC will
    be used as a host workstation for virtual machines. It could be the same PC, which
    will be used as an attacker workstation. One more physical component is the router;
    all other components will be virtual machines, bridged to the router via a host
    workstation network interface. The described network security lab architecture
    is provided in the following diagram:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们决定使用虚拟机，我们需要清楚地了解当前实验室环境的架构（物理和逻辑）。一个物理PC将用作虚拟机的主机工作站。它可以是同一台PC，也可以用作攻击者工作站。另一个物理组件是路由器；所有其他组件将是虚拟机，通过主机工作站网络接口桥接到路由器。所述的网络安全实验室架构如下图所示：
- en: '![Getting ready](img/4124_03_02.jpg)'
  id: totrans-269
  prefs: []
  type: TYPE_IMG
  zh: ！[准备就绪]（img/4124_03_02.jpg）
- en: 'Before we proceed with setting up the lab, you should prepare the router and
    distributions of the following software:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续设置实验室之前，您应准备以下软件的路由器和发行版：
- en: VMware Workstation 8 (installer)
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware Workstation 8（安装程序）
- en: Microsoft Windows Server 2008 (`.iso` installer disk image)
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Windows Server 2008（`.iso`安装程序光盘映像）
- en: Ubuntu server 12 (`.iso` installer disk image)
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ubuntu服务器12（`.iso`安装程序光盘映像）
- en: Windows 7 (`.iso` installer disk image)
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows 7（`.iso`安装程序光盘映像）
- en: Windows XP (`.iso` installer disk image)
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows XP（`.iso`安装程序光盘映像）
- en: Except VMware Workstation, software versions without service packs are preferable,
    because they contain more publicly announced vulnerabilities, which you can exploit
    to practise your skills in the lab.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 除了VMware Workstation外，最好使用没有服务包的软件版本，因为它们包含更多公开宣布的漏洞，您可以利用这些漏洞在实验室中练习您的技能。
- en: How to do it...
  id: totrans-277
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'We need to configure our router in the first step. For my example, I used ASUS
    WL-520GC, but the difference between home routers is not significant:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要首先配置我们的路由器。在我的示例中，我使用了ASUS WL-520GC，但家用路由器之间的差异并不显著：
- en: Plug in the power supply and Internet connection cable to the router. The Internet
    connection cable should be plugged in the WAN port.
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电源适配器和Internet连接电缆插入路由器。 Internet连接电缆应插入WAN端口。
- en: Now, connect the LAN adapter of the computer, which will host the virtual machines
    (host workstation) to any of the router LAN ports with the network cable.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，将托管虚拟机（主机工作站）的计算机的LAN适配器与路由器的任何LAN端口用网络电缆连接起来。
- en: The power indicator, WAN port indicator, and one of LAN port indicators in the
    router front panel must shine with green lights.
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 路由器前面板上的电源指示灯、WAN端口指示灯和一个LAN端口指示灯必须亮起绿灯。
- en: Open the browser on the host workstation, go to the address `192.168.1.1`, and
    input the username and password for the router. By default, it is `admin:admin`.
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在主机工作站上打开浏览器，转到地址`192.168.1.1`，并输入路由器的用户名和密码。默认情况下是`admin:admin`。
- en: 'In the left panel, click on the IP **config** link and input your WAN settings
    (taken from your ISP) to the corresponding fields. Leave the LAN IP settings as
    default (IP: `192.168.1.1`, Subnet Mask: `255.255.255.0`). Click on **Apply**.'
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧面板中，点击IP **config**链接，并在相应的字段中输入您的WAN设置（从您的ISP获取）。将LAN IP设置保留为默认值（IP：`192.168.1.1`，子网掩码：`255.255.255.0`）。点击**应用**。
- en: In the **DHCP Server** page, enable **Integrated DHCP server** and change the
    setup of the IP pool from `192.168.1.2` to `192.168.1.15`. Click on **Apply**.
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**DHCP服务器**页面上，启用**集成DHCP服务器**，并将IP池的设置从`192.168.1.2`更改为`192.168.1.15`。点击**应用**。
- en: Go to the Internet firewall section, enable **Internet firewall** and disable
    **Web access from WAN**. All other settings are left by default. Click on **Finish**
    and then **Save & Restart**.
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到Internet防火墙部分，启用**Internet防火墙**，并禁用**来自WAN的Web访问**。所有其他设置保持默认。点击**完成**，然后点击**保存并重新启动**。
- en: The router will reboot, which indicates that it is ready for us to work with
    it.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 路由器将重新启动，这表示它已经准备好供我们使用。
- en: 'Now, we need to install our virtualization software; in my case, it is VMware
    Workstation 8 (the installation process is similar for older versions):'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要安装虚拟化软件；在我的情况下，是VMware Workstation 8（安装过程对于旧版本是类似的）：
- en: Start the setup process by executing the distribution file.
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过执行分发文件开始设置过程。
- en: Choose the custom setup type and click on **Next** to view the setup options:![How
    to do it...](img/4124_03_03.jpg)
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择自定义安装类型，然后点击**下一步**查看设置选项：![如何做…](img/4124_03_03.jpg)
- en: I used the default settings, which are enough for our task, but you can change
    them if you need more VMware features enabled or want to install it into another
    directory. After selecting your settings, click on **Next**.
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我使用了默认设置，这对我们的任务已经足够了，但如果您需要启用更多VMware功能或者想要将其安装到其他目录中，您可以更改这些设置。选择您的设置后，点击**下一步**。
- en: Select the **Check for product updates on startup** checkbox on the next screen
    and click on **Next**.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕上选择**启动时检查产品更新**复选框，然后点击**下一步**。
- en: Select the **Help improve VMware Workstation** checkbox on the next screen if
    you want to let the VMware Workstation software send the debugging information
    to VMware company servers for further analysis. Click on **Next**.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您希望让VMware Workstation软件将调试信息发送到VMware公司服务器进行进一步分析，请在下一个屏幕上选择**帮助改进VMware
    Workstation**复选框。然后点击**下一步**。
- en: Select the location where you want to put shortcuts for VMware Workstation,
    and click on **Next**.
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择您想要放置VMware Workstation快捷方式的位置，然后点击**下一步**。
- en: Click on **Continue** to start the installation process. It can take a while
    to install the program and its components.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**继续**开始安装过程。安装程序及其组件的安装可能需要一段时间。
- en: Enter your license key when prompted for it, and finish the installation.
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在提示时输入您的许可密钥，并完成安装。
- en: 'Now, we need to update the VMware Workstation software to the latest version:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要将VMware Workstation软件更新到最新版本：
- en: Run VMware Workstation.
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行VMware Workstation。
- en: In the drop-down menu **Help**, click on **Software Updates**.
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**帮助**下拉菜单中，点击**软件更新**。
- en: In the opened **Software Updates** windows, click on the **Check for Updates**
    button.
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在打开的**软件更新**窗口中，点击**检查更新**按钮。
- en: Install the available updates by choosing them and click on **Next**.
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择它们并点击**下一步**来安装可用的更新。
- en: Now, the VMware workstation is ready for work and we can proceed with the other
    lab components.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，VMware Workstation已经准备就绪，我们可以继续进行其他实验组件的工作。
- en: First, we should install the servers. Let us start from Windows Server 2008
    which will be our DC.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们应该安装服务器。让我们从Windows Server 2008开始，它将是我们的DC。
- en: Select **New virtual machine…** in the drop-down menu **File of VMware Workstation**
    or press *Ctrl* + *N*.
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在VMware Workstation的**文件**下拉菜单中选择**新虚拟机…**，或按下*Ctrl* + *N*。
- en: In the opened wizard, select the typical configuration for the new virtual machine
    and click on **Next**.
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在打开的向导中，选择新虚拟机的典型配置，然后点击**下一步**。
- en: In the next window, select **Installer disk image file (iso)**, and browse through
    the path to the installer image of Windows Server 2008, and click on **Next**:![How
    to do it...](img/4124_03_04.jpg)
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个窗口中，选择**安装程序磁盘映像文件（iso）**，然后浏览到Windows Server 2008的安装程序映像的路径，点击**下一步**：![如何做…](img/4124_03_04.jpg)
- en: In the next window, type in a product key if you have one or skip it, select
    the **Windows Server 2008 Enterprise** version, type in the user name (I use `lab`
    here), and click on **Next**:![How to do it...](img/4124_03_05.jpg)
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个窗口中，如果您有产品密钥，请输入；如果没有，可以跳过，选择**Windows Server 2008企业版**，输入用户名（我这里使用`lab`），然后点击**下一步**：![如何做…](img/4124_03_05.jpg)
- en: If you did not provide a product key, a new dialog window will appear and ask
    for your confirmation in order to proceed without a product key. Click on **Yes**.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您没有提供产品密钥，将会出现一个新的对话框窗口，询问您是否要在没有产品密钥的情况下继续。点击**是**。
- en: In the next window, type in the name for this virtual machine (I used the default
    one). Choose the file location for the virtual machine path and click on **Next**:![How
    to do it...](img/4124_03_06.jpg)
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个窗口中，为这个虚拟机输入名称（我使用默认名称）。选择虚拟机路径的文件位置，然后点击**下一步**：![如何做…](img/4124_03_06.jpg)
- en: Set the system volume disk size for the virtual machine (it is better to set
    no less than 40 gigabytes) in the next window and select **Split virtual disk
    into multiple files**, then click on **Next**.
  id: totrans-309
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在虚拟机的系统卷磁盘大小窗口中设置大小（最好不少于40 GB），然后选择**将虚拟磁盘分割成多个文件**，然后点击**下一步**。
- en: Click on the **Customize hardware** button in the next window to manually set
    virtual machine hardware parameters.
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个窗口中点击**自定义硬件**按钮手动设置虚拟机硬件参数。
- en: 'In the new window, set no less than 1 GB of memory, but it''s better to set
    2 GB or more. Set the essential parameters to the following values:'
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新窗口中，设置不少于1 GB的内存，但最好设置为2 GB或更多。将基本参数设置为以下值：
- en: '| Parameter | Value |'
  id: totrans-312
  prefs: []
  type: TYPE_TB
  zh: '| 参数 | 值 |'
- en: '| --- | --- |'
  id: totrans-313
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Memory | 2 GB |'
  id: totrans-314
  prefs: []
  type: TYPE_TB
  zh: '| 内存 | 2 GB |'
- en: '| Processors | 1 |'
  id: totrans-315
  prefs: []
  type: TYPE_TB
  zh: '| 处理器 | 1 |'
- en: '| Network adapter | Bridged (without physical network connection state replication)
    |'
  id: totrans-316
  prefs: []
  type: TYPE_TB
  zh: '| 网络适配器 | 桥接（无物理网络连接状态复制） |'
- en: '| USB controller | None |'
  id: totrans-317
  prefs: []
  type: TYPE_TB
  zh: '| USB控制器 | 无 |'
- en: '| Display | Use host settings for monitors |'
  id: totrans-318
  prefs: []
  type: TYPE_TB
  zh: '| 显示 | 使用主机设置的监视器 |'
- en: Click on **Close**.
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**关闭**。
- en: Select **Power** **on this virtual machine after creation** and click on **Finish**.
  id: totrans-320
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**创建后启动此虚拟机**，然后单击**完成**。
- en: Now, your virtual machine is ready for installing the OS. This process will
    start automatically after turning the virtual machine on and will last for a while.
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您的虚拟机已准备好安装操作系统。此过程将在打开虚拟机后自动开始，并将持续一段时间。
- en: The VMware workstation will automatically start installing the VMware tools
    after the installation of the Windows 2008 server; wait until this process ends.
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装Windows 2008服务器后，VMware Workstation将自动开始安装VMware工具；等待此过程结束。
- en: Reboot the guest system and log in. You must see the initial configuration dialog
    box.
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新启动客户系统并登录。您应该看到初始配置对话框。
- en: Click on the **Set time zone** link and set your time, date, and time zone.
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**设置时区**链接，设置您的时间、日期和时区。
- en: Provide a computer description and the name using the link in the initial configuration
    window.
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在初始配置窗口中使用链接提供计算机描述和名称。
- en: 'Open the **Local area connection properties** window using the following sequence:
    **Configure networking** | **Local area connection** | **Properties**. Leave all
    properties to the default setting except TCP/IPv4\. Set the values for the TCP/IPv4
    properties as shown in the following screenshot:![How to do it...](img/4124_03_07.jpg)'
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下顺序打开**本地连接属性**窗口：**配置网络** | **本地连接** | **属性**。除了TCP/IPv4之外，将所有属性保留为默认设置。将TCP/IPv4属性的值设置如下截图所示：![如何操作...](img/4124_03_07.jpg)
- en: 'Now, you should have an initial configuration window similar to the following
    screenshot:'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您应该有一个类似以下截图的初始配置窗口：
- en: '![How to do it...](img/4124_03_08.jpg)'
  id: totrans-328
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作...](img/4124_03_08.jpg)'
- en: Now, we need to assign a Domain Controller role to our server. In the initial
    configuration window, click on the **Add roles** link and then **Next** to open
    the **Server Roles** assigning dialog window. Select the **Active Directory Domain
    Services** checkbox and start the role installation by clicking on the **Next**
    and **Install** buttons:![How to do it...](img/4124_03_09.jpg)
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要为服务器分配域控制器角色。在初始配置窗口中，单击**添加角色**链接，然后单击**下一步**以打开**服务器角色**分配对话框。选择**活动目录域服务**复选框，并通过单击**下一步**和**安装**按钮开始安装角色：![如何操作...](img/4124_03_09.jpg)
- en: When the role installation will be finished, open the **Start** menu and type
    in `dcpromo` in the **Search** field. Launch **dcpromo**:![How to do it...](img/4124_03_10.jpg)
  id: totrans-330
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 角色安装完成后，打开**开始**菜单，在**搜索**字段中键入`dcpromo`。启动**dcpromo**：![如何操作...](img/4124_03_10.jpg)
- en: Continue clicking on **Next** in the opened dialog window until you get to the
    **Choosing deployment configuration** dialog box, select **Create a new domain
    in a new forest**, and click on **Next**:![How to do it...](img/4124_03_11.jpg)
  id: totrans-331
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在打开的对话框中继续单击**下一步**，直到到达**选择部署配置**对话框，选择**在新林中创建新域**，然后单击**下一步**：![如何操作...](img/4124_03_11.jpg)
- en: Type in your lab domain name (FQDN), for example `lab.local,` and click on **Next**:![How
    to do it...](img/4124_03_12.jpg)
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入您的实验室域名（FQDN），例如`lab.local`，然后单击**下一步**：![如何操作...](img/4124_03_12.jpg)
- en: Now, we need to choose the functional level for the domain forest. Choose the
    latest version in your system (for mine, it is **Windows Server 2008**) and click
    on **Next**:![How to do it...](img/4124_03_13.jpg)
  id: totrans-333
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要为域林选择功能级别。选择您系统中的最新版本（对我来说是**Windows Server 2008**），然后单击**下一步**：![如何操作...](img/4124_03_13.jpg)
- en: In the next screen, we must enable a **DNS server** role for our domain controller
    in order for it to work correctly:![How to do it...](img/4124_03_14.jpg)
  id: totrans-334
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕中，我们必须为我们的域控制器启用**DNS服务器**角色，以使其正常工作：![如何操作...](img/4124_03_14.jpg)
- en: When the wizard prompts you about the integration with an existing DNS infrastructure,
    click on **Yes**.
  id: totrans-335
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当向导提示您是否与现有DNS基础设施集成时，单击**是**。
- en: In the next dialog box, leave the `Database`, `Log`, and `SYSVOL` folders as
    default and click on **Next**.
  id: totrans-336
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个对话框中，将`数据库`、`日志`和`SYSVOL`文件夹保留为默认设置，然后单击**下一步**。
- en: Set the directory service restore mode administrator account password and click
    on **Next**.
  id: totrans-337
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置目录服务恢复模式管理员帐户密码，然后单击**下一步**。
- en: Check the summary info, click on **Next**, wait while the wizard is installing
    active directory domain services, and restart the system.
  id: totrans-338
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查摘要信息，单击**下一步**，等待向导安装活动目录域服务，并重新启动系统。
- en: Take a snapshot of the domain controller virtual machine after its successful
    installation and initial configuration. To take a snapshot, select the **Take
    Snapshot** menu item, type in a snapshot name and comments in the dialog window,
    and click on the **Take Snapshot** button:![How to do it...](img/4124_03_15.jpg)
  id: totrans-339
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在域控制器虚拟机成功安装和初始配置后，拍摄一个快照。选择**拍摄快照**菜单项，在对话窗口中输入快照名称和注释，然后单击**拍摄快照**按钮：![如何操作...](img/4124_03_15.jpg)
- en: 'After creating a domain controller, continue with installing Ubuntu Server:'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 创建域控制器后，继续安装Ubuntu Server：
- en: In VMware Workstation press *Ctrl* + *N* and follow the on-screen instructions
    to create a new Ubuntu virtual machine. This process is similar to creating a
    Windows Server 2008 virtual machine, so you should not have any trouble. Make
    sure you do not forget the root password that you enter during this process and
    set the network connection as bridged.
  id: totrans-341
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在VMware Workstation中按下*Ctrl* + *N*，按照屏幕上的说明创建一个新的Ubuntu虚拟机。这个过程类似于创建Windows
    Server 2008虚拟机，所以您不应该遇到任何问题。确保您在此过程中输入的root密码，并将网络连接设置为桥接。
- en: Ubuntu installation will start automatically after finishing with virtual machine
    creation. It will also automatically install VMware tools. It will take several
    minutes depending on your computer's performance and virtual machine properties.
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在完成虚拟机创建后，Ubuntu安装将自动开始。它还将自动安装VMware工具。这将根据您计算机的性能和虚拟机属性而有所不同，需要几分钟。
- en: After the installation, you should be able to see a standard Ubuntu Server console
    with a login invitation:![How to do it...](img/4124_03_16.jpg)
  id: totrans-343
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，您应该能够看到一个标准的Ubuntu服务器控制台，邀请您登录：![如何做...](img/4124_03_16.jpg)
- en: Log in and type the `ifconfig` command without arguments to find the name of
    your network interface. In my case it is `eth0`.
  id: totrans-344
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录并输入不带参数的`ifconfig`命令以查找您的网络接口的名称。在我的情况下，它是`eth0`。
- en: 'Now, configure your network interface by executing the following command:'
  id: totrans-345
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，通过执行以下命令配置您的网络接口：
- en: '[PRE0]'
  id: totrans-346
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'You will have to type in the root password to execute the command. After this,
    check if network interface settings are set as per our requirements, by typing
    the `ifconfig` command again but without any argument:'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 您将需要输入root密码来执行该命令。之后，检查网络接口设置是否符合我们的要求，方法是再次输入`ifconfig`命令，但不带任何参数：
- en: '![How to do it...](img/4124_03_17.jpg)'
  id: totrans-348
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/4124_03_17.jpg)'
- en: 'Now, we need to add a route through a default gateway in order to let our server
    access the Internet. Do it by executing the following command:'
  id: totrans-349
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要添加一个默认网关的路由，以便让我们的服务器访问互联网。执行以下命令来完成这一步：
- en: '[PRE1]'
  id: totrans-350
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Now, execute the `route` command without any arguments and try `ping www.google.com`:![How
    to do it...](img/4124_03_18.jpg)
  id: totrans-351
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，执行不带任何参数的`route`命令，并尝试`ping www.google.com`：![如何做...](img/4124_03_18.jpg)
- en: 'Let us install the FTP server now. I have chosen `vsftpd` as the solution for
    an easy way to install and setup. Type in the following command:'
  id: totrans-352
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们安装FTP服务器。我选择了`vsftpd`作为安装和设置的简便解决方案。输入以下命令：
- en: '[PRE2]'
  id: totrans-353
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The installation will be done in automated mode.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 安装将以自动模式完成。
- en: 'To configure the `vsftp` daemon, open the `/etc/vsftpd.conf` file with the
    Nano editor by executing the following command:'
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要配置`vsftp`守护程序，请执行以下命令使用Nano编辑器打开`/etc/vsftpd.conf`文件：
- en: '[PRE3]'
  id: totrans-356
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Uncomment the following lines in the `vsftpd.conf` file:'
  id: totrans-357
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 取消`vsftpd.conf`文件中的以下行的注释：
- en: '[PRE4]'
  id: totrans-358
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Then, press *Ctrl* + *X* to exit. Answer `Y` to the question about saving your
    changes and choose the same file for saving `/etc/vsftpd.conf`.
  id: totrans-359
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，按下*Ctrl* + *X*退出。回答`Y`以保存更改，并选择相同的文件保存`/etc/vsftpd.conf`。
- en: Now, we need to create at least one user who will have FTP access to his home
    directory. The easiest way to do it is to use the `adduser` command, which will
    prompt you with all the needed data and automatically create the user's home directory:![How
    to do it...](img/4124_03_19.jpg)
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要创建至少一个用户，他将拥有FTP访问权限到他的主目录。最简单的方法是使用`adduser`命令，它将提示您输入所有所需的数据，并自动创建用户的主目录：![如何做...](img/4124_03_19.jpg)
- en: 'Restart the FTP daemon by executing the following command:'
  id: totrans-361
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过执行以下命令重新启动FTP守护程序：
- en: '[PRE5]'
  id: totrans-362
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Take a snapshot of your new virtual Ubuntu server.
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 拍摄您的新虚拟Ubuntu服务器的快照。
- en: 'Now, we need to install and set up virtual Windows workstations. Let''s start
    from Windows XP:'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要安装和设置虚拟Windows工作站。让我们从Windows XP开始：
- en: In VMware Workstation, press *Ctrl* + *N* and follow the on-screen instructions
    to create a new virtual machine with customized parameters. Do not forget to set
    up the network interface for the virtual machine as `bridged`. The Windows XP
    installation process starts automatically right after creating a virtual machine.
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在VMware Workstation中，按下*Ctrl* + *N*，按照屏幕上的说明创建一个带有自定义参数的新虚拟机。不要忘记为虚拟机设置网络接口为`bridged`。创建虚拟机后，Windows
    XP安装过程会自动启动。
- en: You will be prompted to enter the Windows product key if you have not done it
    in the previous step. Enter the valid product key (you can find a lot of trial
    keys on the Internet). Windows XP with SP3 lets you skip the product key entering
    step during installation.
  id: totrans-366
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您之前没有输入Windows产品密钥，您将被提示输入。输入有效的产品密钥（您可以在互联网上找到很多试用密钥）。具有SP3的Windows XP允许您在安装过程中跳过输入产品密钥的步骤。
- en: 'As long as we use virtual machines for our lab, performance is important for
    us. We can improve the performance of Windows XP in the following ways:'
  id: totrans-367
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于我们在实验室中使用虚拟机，性能对我们很重要。我们可以通过以下方式提高Windows XP的性能：
- en: Open **Control Panel** from the **Start** menu and switch to the classic view.
  id: totrans-368
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**开始**菜单打开**控制面板**，切换到经典视图。
- en: Double-click on the **System** icon.
  id: totrans-369
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击**系统**图标。
- en: Go to the **Advanced** tab and click on the **Settings** button in the **Performance**
    section.
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**高级**选项卡，然后单击**性能**部分的**设置**按钮。
- en: 'Select the **Adjust to best performance** option and click on **Apply and OK**:'
  id: totrans-371
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**调整为最佳性能**选项，然后单击**应用和确定**：
- en: '![How to do it...](img/4124_03_20.jpg)'
  id: totrans-372
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/4124_03_20.jpg)'
- en: As this workstation will be used to practice penetration testing skills, it
    should have some vulnerabilities. This is why we need to turn off automatic updates
    — go to the **Automatic Updates** tab, select **Turn Off Automatic updates**,
    and click on **Apply** and then **OK**.
  id: totrans-373
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于这台工作站将用于练习渗透测试技能，因此它应该具有一些漏洞。这就是为什么我们需要关闭自动更新 - 转到**自动更新**选项卡，选择**关闭自动更新**，然后单击**应用**，然后单击**确定**。
- en: 'The network connection for the Windows XP workstation is configured to acquire
    the dynamic IP address by default, so it must be already set. But, you need to
    manually set the domain controller IP as the primary DNS server address:'
  id: totrans-374
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Windows XP工作站的网络连接默认配置为获取动态IP地址，因此它必须已经设置好。但是，您需要手动将域控制器IP设置为主DNS服务器地址：
- en: Open **Control Panel** and double-click on the **Network connections** icon.
  id: totrans-375
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**控制面板**，双击**网络连接**图标。
- en: Open **Local Area Connection** and its properties.
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**本地连接**及其属性。
- en: Select **Internet Protocol (TCP/IP)** and click on the **Properties** button.
  id: totrans-377
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**Internet Protocol (TCP/IP)**，然后单击**属性**按钮。
- en: 'Set the following properties and return to **Control Panel**:'
  id: totrans-378
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置以下属性并返回到**控制面板**：
- en: '![How to do it...](img/4124_03_21.jpg)'
  id: totrans-379
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/4124_03_21.jpg)'
- en: 'Now, we need to join the Windows XP workstation to our lab domain:'
  id: totrans-380
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要将Windows XP工作站加入我们的实验室域：
- en: Make sure that the domain controller is turned on.
  id: totrans-381
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保域控制器已打开。
- en: Double-click on the **System** icon.
  id: totrans-382
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击**系统**图标。
- en: Go to the **Computer Name** tab in the **System Properties** dialog window.
  id: totrans-383
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**计算机名称**选项卡，在**系统属性**对话框中。
- en: Click on the **Change…** button.
  id: totrans-384
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**更改...**按钮。
- en: Set the computer name as `WinXP`.
  id: totrans-385
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将计算机名称设置为`WinXP`。
- en: In the **Member of** section, select the **Domain** radio button and type in
    the lab domain name in the text field below it. In my case, it is `lab.local`,
    and click on **OK**:![How to do it...](img/4124_03_22.jpg)
  id: totrans-386
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**成员**部分，选择**域**单选按钮，并在其下方的文本字段中输入实验域名。在我的情况下，它是`lab.local`，然后单击**确定**：![如何操作...](img/4124_03_22.jpg)
- en: You will be prompted for domain credentials. Enter the domain administrator's
    credentials and you should see the welcome window.
  id: totrans-387
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将被提示输入域凭据。输入域管理员的凭据，您应该会看到欢迎窗口。
- en: Restart the Windows XP virtual machine and take a snapshot of it.
  id: totrans-388
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新启动Windows XP虚拟机并对其进行快照。
- en: 'The last lab component is Windows 7:'
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一个实验组件是Windows 7：
- en: In VMware Workstation, press *Ctrl* + *N* and follow the on-screen instructions
    to create a new virtual machine with customized parameters. Do not forget to set
    up the network interface for the virtual machine as `bridged`. The Windows 7 installation
    process starts automatically right after creating a virtual machine.
  id: totrans-390
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在VMware Workstation中，按下*Ctrl* + *N*，并按照屏幕上的说明创建一个具有自定义参数的新虚拟机。不要忘记为虚拟机设置网络接口为`桥接`。创建虚拟机后，Windows
    7安装过程会自动启动。
- en: Windows 7 starts automatically after its installation.
  id: totrans-391
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Windows 7安装后会自动启动。
- en: Log in and set up the performance setting to **Adjust for best performance**
    in the **System Properties** dialog window; it can be found at **Control Panel**
    | **All Control Panel Items** | **System** | **Advanced System Settings**.
  id: totrans-392
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录并在**系统属性**对话框中设置性能设置为**为最佳性能而调整**；它可以在**控制面板** | **所有控制面板项目** | **系统** | **高级系统设置**中找到。
- en: Turn to the **Computer Name** tab and join this workstation to the lab domain
    in the same way as we did for Windows XP.
  id: totrans-393
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**计算机名称**选项卡，并以与我们为Windows XP做的方式相同，将此工作站加入实验室域。
- en: Reboot the system and take a snapshot.
  id: totrans-394
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新启动系统并拍摄快照。
- en: 'Finally, we are done with the installation and configuration tasks and can
    check some components to see if they work ok:'
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们已经完成了安装和配置任务，并可以检查一些组件，看看它们是否正常工作：
- en: By joining the Windows workstation to the domain, we have already checked if
    the lab domain works.
  id: totrans-396
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过将Windows工作站加入域，我们已经检查了实验域是否正常工作。
- en: 'Now, check the FTP server in the following way:'
  id: totrans-397
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，以以下方式检查FTP服务器：
- en: In the Windows XP **Start** menu, find the **Run** command and enter `cmd`.
  id: totrans-398
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Windows XP的**开始**菜单中，找到**运行**命令并输入`cmd`。
- en: In the command line, type `ftp` and press *Enter*.
  id: totrans-399
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在命令行中，输入`ftp`并按*Enter*。
- en: Type the command `open 192.168.1.14` and press *Enter*.
  id: totrans-400
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入命令`open 192.168.1.14`并按*Enter*。
- en: 'You should see something similar to the following code if the FTP server works:'
  id: totrans-401
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果FTP服务器正常工作，您应该会看到类似以下代码的内容：
- en: '[PRE6]'
  id: totrans-402
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Enter the username and password.
  id: totrans-403
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入用户名和密码。
- en: After logging in, enter the `ls` command and the `ftp` user directory listing
    should be executed if everything works fine.
  id: totrans-404
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录后，输入`ls`命令，如果一切正常，`ftp`用户目录列表应该被执行。
- en: Try to ping all the hosts from every host.
  id: totrans-405
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试从每个主机ping所有主机。
- en: How it works...
  id: totrans-406
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: Let's explore the essential steps that we just went over.
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们探索刚刚讨论的基本步骤。
- en: During the router configuration process, we need to restrict Internet users
    from rooting our lab router, so we should disable web access to the router from
    the external network (WAN) and activate the firewall.
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 在路由器配置过程中，我们需要限制互联网用户从外部网络（WAN）对我们的实验路由器进行路由，因此我们应该禁用路由器的Web访问，并激活防火墙。
- en: When you start the VMware Workstation software, it will indicate if there are
    any updates available, and will ask if you want to install them. Some updates
    need to uninstall VMware Workstation first to install the new version. It will
    be done automatically if you click on **Yes**. Software updates for VMware Workstation
    are strongly recommended to be installed, because it is a way to fix known bugs
    and security flaws in VMware software.
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 当您启动VMware Workstation软件时，它会指示是否有可用的更新，并询问是否要安装它们。有些更新需要先卸载VMware Workstation，然后安装新版本。如果您单击**是**，它将自动完成。强烈建议安装VMware
    Workstation的软件更新，因为这是修复VMware软件中已知错误和安全漏洞的一种方式。
- en: But, we do not need any software updates for our virtual systems because we
    need them to have vulnerabilities with which we can practice penetration testing
    skills. This is the reason why I recommend you to turn off the automatic updates
    on all virtual systems.
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，我们不需要为我们的虚拟系统进行任何软件更新，因为我们需要它们具有漏洞，以便我们可以练习渗透测试技能。这就是为什么我建议您关闭所有虚拟系统上的自动更新。
- en: We use bridged network interfaces in our virtual machines in order to let them
    communicate with the router, as they were physical hosts. If we set up NAT, then
    our systems will use VMware Workstation as a software DHCP server and will work
    in another subnet than the router.
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在虚拟机中使用桥接网络接口，以便它们可以像物理主机一样与路由器通信。如果我们设置NAT，那么我们的系统将使用VMware Workstation作为软件DHCP服务器，并且将在与路由器不同的子网中工作。
- en: I intentionally did not type in the Windows product key, because I use it only
    for demonstration purposes less than 30 days. But if you want to use it longer,
    then I recommend you to buy licenses.
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 我故意没有输入Windows产品密钥，因为我只是用它进行演示，不到30天。但如果您想使用更长时间，我建议您购买许可证。
- en: The domain controller as well as DNS server; should have a static IP address
    in order to operate well. So, let it be `192.168.1.15`. It is also a good practice
    to give static IPs to servers; that is why our Ubuntu server also has a static
    IP.
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: 域控制器以及DNS服务器都应该有一个静态IP地址才能正常运行。所以，让它是`192.168.1.15`。给服务器分配静态IP也是一个好的做法；这就是为什么我们的Ubuntu服务器也有一个静态IP。
- en: A domain infrastructure needs a DNS server that is why we used `dcpromo` to
    install a DNS server role to the domain controller for maintaining the active
    directory.
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: 域基础设施需要一个DNS服务器，这就是为什么我们使用`dcpromo`将DNS服务器角色安装到域控制器上以维护活动目录。
- en: During the domain controller configuration process, I set only two roles (**Domain
    Services** and **DNS Server**), but you can add or remove other roles for any
    training purposes and at any time later.
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: 在域控制器配置过程中，我只设置了两个角色（**域服务**和**DNS服务器**），但您可以根据任何培训目的随时添加或删除其他角色。
- en: By default, `vsftpd` is configured to only allow an anonymous download. During
    the installation, an FTP user is created with a home directory `/home/ftp`. This
    is the default FTP directory. But we want to practise password guessing techniques
    with the FTP server, so we need to create different FTP users. I have shown you
    how to create an FTP user and now you can easily create as many users as you want.
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，`vsftpd`配置为仅允许匿名下载。在安装过程中，会创建一个带有主目录`/home/ftp`的FTP用户。这是默认的FTP目录。但是我们想要练习使用FTP服务器的密码猜测技术，所以我们需要创建不同的FTP用户。我已经向您展示了如何创建FTP用户，现在您可以轻松地创建任意数量的用户。
- en: There's more...
  id: totrans-417
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Being a professional penetration tester means always going further find out
    more information than was given and constantly improving your knowledge. This
    is common for both a professional penetration tester and a real hacker, and this
    is also the reason to check the next paragraphs.
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: 成为专业的渗透测试人员意味着始终超越所给出的信息，不断提高自己的知识。这对于专业的渗透测试人员和真正的黑客都是常见的，这也是检查下一段的原因。
- en: Alternative solutions and configurations
  id: totrans-419
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 替代解决方案和配置
- en: You have to understand that the described way of building a network security
    lab is not the only one or the right one – there could be plenty of variations
    and different solutions starting from small personal labs to corporate virtualization
    clusters.
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: 您必须明白，描述的建立网络安全实验室的方式并不是唯一的或正确的方式 - 可能有很多变化和不同的解决方案，从小型个人实验室到企业虚拟化集群。
- en: 'Let me give you some options:'
  id: totrans-421
  prefs: []
  type: TYPE_NORMAL
  zh: 让我给您一些选择：
- en: If you are going to research vulnerabilities and modify or write your own exploits,
    it might be useful to set up VMware Workstation with the Visual Studio plugin
    for debugging purposes. It provides an interface between virtual machines and
    Microsoft Visual Studio.
  id: totrans-422
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您打算研究漏洞并修改或编写自己的利用程序，设置带有Visual Studio插件的VMware Workstation以进行调试可能会很有用。它提供了虚拟机和Microsoft
    Visual Studio之间的接口。
- en: You may need to add other hosts and install other additional network services
    in order to practise specific skills. This is not difficult, and you can always
    find appropriate manuals on the Internet.
  id: totrans-423
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可能需要添加其他主机并安装其他附加网络服务，以练习特定的技能。这并不难，您总是可以在互联网上找到适当的手册。
- en: You can also replace some or all of the virtual machines with old unused physical
    computers and connect them into a network with a router or switch.
  id: totrans-424
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您还可以用旧的未使用的物理计算机替换一些或所有虚拟机，并将它们连接到具有路由器或交换机的网络中。
- en: If you do not want to manually install and configure all virtual systems, you
    can find virtual machines with already installed OSs on the Internet. You can
    also use specially-crafted vulnerable virtual machines. For example, one of the
    best vulnerable machines for lab purposes is **Metasploitable**.
  id: totrans-425
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您不想手动安装和配置所有虚拟系统，可以在互联网上找到已安装操作系统的虚拟机。您还可以使用专门制作的易受攻击的虚拟机。例如，用于实验目的的最佳易受攻击的机器之一是**Metasploitable**。
- en: Additional tips
  id: totrans-426
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 额外的提示
- en: 'Here, I would like to tell you about some more useful things:'
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我想告诉您一些更有用的东西：
- en: After setting up the lab and taking snapshots of all the virtual machines, you
    will start performing different kinds of techniques and attacks against them.
    When you finish with the basic discovery and enumeration attacks, you would probably
    want to improve your skills to the next level and test yourself against different
    security solutions. In that case, install and set up integrated **host antivirus**,
    **firewall**, and **intrusion preventing systems** (**HIPS**) on the target virtual
    machines and take new snapshots. This will let you practise different firewall
    rules enumeration techniques, which is called **firewalking**, and different IDS
    evasion techniques. You can always revert your systems from any state to any of
    your snapshots in order to compare the results of using different techniques performed
    on different system states.
  id: totrans-428
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置实验室并对所有虚拟机进行快照后，您将开始对它们执行不同类型的技术和攻击。完成基本的发现和枚举攻击后，您可能希望将自己的技能提升到下一个水平，并测试自己对不同安全解决方案的反应。在这种情况下，在目标虚拟机上安装和设置集成的**主机防病毒**、**防火墙**和**入侵防止系统**（**HIPS**），并进行新的快照。这将让您练习不同的防火墙规则枚举技术，称为**firewalking**，以及不同的IDS规避技术。您可以随时将系统从任何状态还原到您的任何快照中，以比较在不同系统状态上执行不同技术的结果。
- en: One of the most useful techniques that I usually use during penetration testing
    projects is tunneling. It is a technique for passing your traffic through hosts,
    already controlled by you (successfully attacked). This means that you can reach
    non-routable hosts and networks. That is why I strongly recommend you to learn
    and practise it in your lab if you want to leverage your penetration testing skills
    robustly.
  id: totrans-429
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我在渗透测试项目中经常使用的最有用的技术之一是隧道技术。这是一种通过已由您控制（成功攻击）的主机传递流量的技术。这意味着您可以访问不可路由的主机和网络。这就是为什么我强烈建议您在实验室中学习和练习它，如果您想要充分利用您的渗透测试技能。
- en: Always try new techniques and software in your lab to understand them well.
  id: totrans-430
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在实验室中尝试新的技术和软件，以便更好地理解它们。
- en: Try different penetration testing distributions such as BackTrack, and choose
    which fits you the best.
  id: totrans-431
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尝试不同的渗透测试发行版，如BackTrack，并选择最适合您的版本。
- en: I always take snapshots of my virtual systems. A snapshot is a saved state of
    a virtual machine that lets you return to any point you have previously saved.
    This means that you have a great opportunity to do whatever you want with your
    virtual machines, without being afraid of totally misconfiguring or losing them.
    So, do not forget to take snapshots.
  id: totrans-432
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我总是对我的虚拟系统进行快照。快照是虚拟机的保存状态，可以让您返回到之前保存的任何时间点。这意味着您有很好的机会对虚拟机进行任何想做的事情，而不必担心完全错误配置或丢失它们。所以，不要忘记拍摄快照。
- en: Additional info
  id: totrans-433
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 额外信息
- en: 'To get additional info, you can check the following resources:'
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取更多信息，您可以查看以下资源：
- en: '[technet.microsoft.com](http://technet.microsoft.com)'
  id: totrans-435
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[technet.microsoft.com](http://technet.microsoft.com)'
- en: '[www.ubuntu.com](http://www.ubuntu.com)'
  id: totrans-436
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[www.ubuntu.com](http://www.ubuntu.com)'
- en: '[www.offensive-security.com](http://www.offensive-security.com) and [www.offensive-security.com/metasploit-unleashed/Metasploitable](http://www.offensive-security.com/metasploit-unleashed/Metasploitable)'
  id: totrans-437
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[www.offensive-security.com](http://www.offensive-security.com)和[www.offensive-security.com/metasploit-unleashed/Metasploitable](http://www.offensive-security.com/metasploit-unleashed/Metasploitable)'
- en: '[www.backtrack-linux.org](http://www.backtrack-linux.org)'
  id: totrans-438
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[www.backtrack-linux.org](http://www.backtrack-linux.org)'
- en: '[pentestlab.wordpress.com](http://pentestlab.wordpress.com)'
  id: totrans-439
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[pentestlab.wordpress.com](http://pentestlab.wordpress.com)'
- en: Setting up a web app lab (Should know)
  id: totrans-440
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置Web应用实验室（应该知道）
- en: 'This section is aimed at setting up a lab environment for practising web application
    penetration testing. You can practise the following skills using this type of
    a lab:'
  id: totrans-441
  prefs: []
  type: TYPE_NORMAL
  zh: 本节旨在为练习Web应用程序渗透测试设置实验室环境。您可以使用这种类型的实验室练习以下技能：
- en: Essential skills
  id: totrans-442
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基本技能
- en: Enumeration techniques
  id: totrans-443
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 枚举技术
- en: Scanning techniques
  id: totrans-444
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扫描技术
- en: OWASP TOP 10 vulnerabilities discovery and exploitation
  id: totrans-445
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OWASP TOP 10漏洞发现和利用
- en: Privilege escalation
  id: totrans-446
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 特权升级
- en: Additional skills
  id: totrans-447
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 额外技能
- en: Fuzzing
  id: totrans-448
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模糊测试
- en: Vulnerability research
  id: totrans-449
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 漏洞研究
- en: Documenting the penetration testing process
  id: totrans-450
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 记录渗透测试过程
- en: Getting ready
  id: totrans-451
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'At first, we have to determine the web app lab topology and architecture. In
    this recipe, we will use only components essential for web app penetration testing
    and will not include others. The following lab components are necessary for our
    current task:'
  id: totrans-452
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们必须确定Web应用程序实验室的拓扑和架构。在这个实验中，我们将只使用对Web应用程序渗透测试至关重要的组件，而不包括其他组件。以下实验室组件对我们当前的任务是必要的：
- en: Router
  id: totrans-453
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 路由器
- en: Web server
  id: totrans-454
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web服务器
- en: Victim web client workstation
  id: totrans-455
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 受害者Web客户端工作站
- en: Attacker workstation
  id: totrans-456
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻击者工作站
- en: 'You can see the current task network topology in the following diagram:'
  id: totrans-457
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在以下图表中看到当前任务的网络拓扑：
- en: '![Getting ready](img/4124_04_01.jpg)'
  id: totrans-458
  prefs: []
  type: TYPE_IMG
  zh: '![准备就绪](img/4124_04_01.jpg)'
- en: Our lab topology and physical architecture will not be the same as we are going
    to build the lab on virtual machines. We will use one physical router and one
    physical PC (which will also be an attacker's host) for hosting a virtual web
    server, and a virtual client workstation with bridged network interfaces.
  id: totrans-459
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的实验室拓扑和物理架构将不同于我们将在虚拟机上构建实验室。我们将使用一个物理路由器和一个物理PC（也将是攻击者主机）来托管一个虚拟Web服务器，以及一个具有桥接网络接口的虚拟客户端工作站。
- en: 'The described network security lab architecture is provided in the following
    diagram:'
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: 所描述的网络安全实验室架构如下图所示：
- en: '![Getting ready](img/4124_04_02.jpg)'
  id: totrans-461
  prefs: []
  type: TYPE_IMG
  zh: '![准备就绪](img/4124_04_02.jpg)'
- en: 'Before we proceed with setting up the lab, you should prepare the router and
    distributions of the following software:'
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们继续设置实验室之前，您应该准备好路由器和以下软件的分发版：
- en: VMware Workstation 8 (installer)
  id: totrans-463
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware Workstation 8（安装程序）
- en: Microsoft Windows Server 2003 (`.iso` installer disk image)
  id: totrans-464
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Windows Server 2003（`.iso`安装盘映像）
- en: Windows XP (`.iso` installer disk image)
  id: totrans-465
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows XP（`.iso`安装盘映像）
- en: XAMPP Apache distribution (installer for Windows can be downloaded from [http://www.apachefriends.org/en/xampp-windows.html](http://www.apachefriends.org/en/xampp-windows.html))
  id: totrans-466
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: XAMPP Apache分发版（Windows安装程序可从[http://www.apachefriends.org/en/xampp-windows.html](http://www.apachefriends.org/en/xampp-windows.html)下载）
- en: Mozilla Firefox (offline installer, the older the version, the better it is)
  id: totrans-467
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mozilla Firefox（离线安装程序，版本越旧越好）
- en: Google Chrome (offline installer, the older the version, the better it is)
  id: totrans-468
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Google Chrome（离线安装程序，版本越旧越好）
- en: Apple Safari (offline installer, the older the version, the better it is)
  id: totrans-469
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Apple Safari（离线安装程序，版本越旧越好）
- en: Except VMware Workstation, older software versions and no service packs are
    preferable, because they contain more publicly announced vulnerabilities, which
    you can exploit to practise your skills in the lab.
  id: totrans-470
  prefs: []
  type: TYPE_NORMAL
  zh: 除了VMware Workstation外，较旧的软件版本和无服务包更可取，因为它们包含更多公开宣布的漏洞，您可以利用这些漏洞来在实验室中练习您的技能。
- en: I recommend finding the offline browser installer, otherwise installers will
    try to download and install the latest versions with fixed bugs.
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议找到离线浏览器安装程序，否则安装程序将尝试下载并安装带有修复错误的最新版本。
- en: How to do it…
  id: totrans-472
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: As always, our initial steps should be configuring the router and installing
    the VMware Workstation 8 in the same way as it was described in the *Setting up
    the network security lab (Must know)* recipe.
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
  zh: 和往常一样，我们的初始步骤应该是配置路由器，并以与*设置网络安全实验室（必须知道）*食谱中描述的方式安装VMware Workstation 8。
- en: After updating the VMware Workstation, you can disconnect the WAN cable from
    your router as we do not need an Internet connection anymore.
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: 更新VMware Workstation后，您可以从路由器断开WAN电缆，因为我们不再需要互联网连接。
- en: 'Now, we can proceed with setting up a web client workstation and a web server
    hosting a vulnerable web application. Let us start with a workstation. It will
    be the Windows XP workstation with several web browsers installed:'
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以继续设置Web客户端工作站和托管易受攻击的Web应用程序的Web服务器。让我们从工作站开始。它将是安装了几个Web浏览器的Windows
    XP工作站：
- en: In the VMware Workstation, press *Ctrl* + *N* and follow the on-screen instructions
    to create a new virtual machine with customized parameters. Do not forget to set
    up the network interface for a virtual machine as `bridged`. The Windows XP installation
    process starts automatically right after creating a virtual machine.
  id: totrans-476
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在VMware Workstation中，按下*Ctrl* + *N*并按照屏幕上的说明创建具有自定义参数的新虚拟机。不要忘记为虚拟机设置网络接口为`桥接`。创建虚拟机后，Windows
    XP安装过程将自动启动。
- en: You will be prompted to enter the Windows product key if you have not done it
    in the previous step. Enter the valid product key (you can find a lot of trial
    keys on the Internet). Windows XP, with SP3, lets you skip the product key entering
    step during installation.
  id: totrans-477
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您在上一步骤中尚未完成，将提示您输入Windows产品密钥。输入有效的产品密钥（您可以在互联网上找到很多试用密钥）。Windows XP SP3允许您在安装过程中跳过输入产品密钥的步骤。
- en: 'So long as we use virtual machines for our lab, performance is important for
    us. We can improve the performance of Windows XP in the following way:'
  id: totrans-478
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 只要我们在实验室中使用虚拟机，性能对我们很重要。我们可以通过以下方式改善Windows XP的性能：
- en: Open **Control Panel** through the **Start** menu and switch to the classic
    view.
  id: totrans-479
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过**开始**菜单打开**控制面板**并切换到经典视图。
- en: Double-click on the **System** icon.
  id: totrans-480
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击**系统**图标。
- en: Go to the **Advanced** tab and click on the **Settings** button in the **Performance**
    section.
  id: totrans-481
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**高级**选项卡，并在**性能**部分单击**设置**按钮。
- en: Select the **Adjust to best performance** option and click on **Apply and OK**.
  id: totrans-482
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**调整为最佳性能**选项，然后单击**应用**和**确定**。
- en: '![How to do it…](img/4124_04_04_(1).jpg)'
  id: totrans-483
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/4124_04_04_(1).jpg)'
- en: As this workstation will be used to practise penetration testing skills, it
    should have some vulnerabilities. This is why we need to turn off automatic updates;
    go to the **Automatic Updates** tab, select the **Turn Off Automatic updates**
    option, and click **Apply** and then **OK**.
  id: totrans-484
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于这台工作站将用于练习渗透测试技能，因此它应该具有一些漏洞。这就是为什么我们需要关闭自动更新；转到**自动更新**选项卡，选择**关闭自动更新**选项，然后单击**应用**，然后单击**确定**。
- en: 'The network connection for the Windows XP workstation is configured to acquire
    a dynamic IP address by default, so it must be already set. But, you need to manually
    set the domain controller IP as the primary DNS server address:'
  id: totrans-485
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Windows XP工作站的网络连接默认配置为获取动态IP地址，因此必须已经设置好。但是，您需要手动将域控制器IP设置为主DNS服务器地址：
- en: Open **Control Panel** and double-click on the **Network connections** icon.
  id: totrans-486
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**控制面板**，双击**网络连接**图标。
- en: Open **Local Area Connection** and its properties.
  id: totrans-487
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**本地连接**及其属性。
- en: Select **Internet Protocol (TCP/IP)** and click on the **Properties** button.
  id: totrans-488
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**Internet Protocol (TCP/IP)**并单击**属性**按钮。
- en: 'Set up the following properties and return to the **Network connections** window:'
  id: totrans-489
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置以下属性并返回到**网络连接**窗口：
- en: '![How to do it…](img/4124_04_05.jpg)'
  id: totrans-490
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/4124_04_05.jpg)'
- en: We need to turn the network interface off before installing browsers so they
    do not download and install the latest versions. Right-click on **Local Area Connection**
    and select **Disable**:![How to do it…](img/4124_04_06.jpg)
  id: totrans-491
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装浏览器之前，我们需要关闭网络接口，以便它们不会下载和安装最新版本。右键单击**本地连接**，然后选择**禁用**：![如何做…](img/4124_04_06.jpg)
- en: The network connection icon should become grey, which means an inactive state
    of the interface.
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: 网络连接图标应变为灰色，表示接口处于非活动状态。
- en: Install the Google Chrome browser (for the web app lab's needs, I use Chrome
    v.14) by running the installer and following the on-screen instructions.
  id: totrans-493
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过运行安装程序并按照屏幕上的说明安装Google Chrome浏览器（对于Web应用实验室的需求，我使用Chrome v.14）。
- en: Now, we need to turn off the Google Chrome automatic updates. In the **Start**
    menu click on **Run** and enter the `regedit` command.
  id: totrans-494
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要关闭Google Chrome的自动更新。在**开始**菜单中单击**运行**，然后输入`regedit`命令。
- en: Find the `HKEY_LOCAL_MACHINE\SOFTWARE\Policies` key in the registry editor.
  id: totrans-495
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在注册表编辑器中找到`HKEY_LOCAL_MACHINE\SOFTWARE\Policies`键。
- en: Create a subkey `\Google\Update\`.
  id: totrans-496
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建子键`\Google\Update\`。
- en: In `HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Google\Update\`, create a DWORD parameter
    `AutoUpdateCheckPeriodMinute`, and set its value to `0`:![How to do it…](img/4124_04_07.jpg)
  id: totrans-497
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Google\Update\`中，创建一个DWORD参数`AutoUpdateCheckPeriodMinute`，并将其值设置为`0`：![如何做…](img/4124_04_07.jpg)
- en: Close the registry editor and run the Mozilla Firefox installer (for the web
    app lab's needs, I use Firefox v8).
  id: totrans-498
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭注册表编辑器并运行Mozilla Firefox安装程序（对于Web应用实验室的需求，我使用Firefox v8）。
- en: Follow the on-screen instructions and select **Standard Installation**.
  id: totrans-499
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照屏幕上的说明选择**标准安装**。
- en: Run the Mozilla Firefox browser after the installation.
  id: totrans-500
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装Mozilla Firefox浏览器后运行。
- en: Select the option not to import any data from other browsers when prompted.
  id: totrans-501
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在提示时选择不从其他浏览器导入任何数据的选项。
- en: In the **Tools** drop-down menu, select **Options**.
  id: totrans-502
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**工具**下拉菜单中，选择**选项**。
- en: Go to the **Advanced** tab in the **Options** window.
  id: totrans-503
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**选项**窗口的**高级**选项卡。
- en: Open the sub-tab **Update** and deselect all the checkboxes. For Firefox 8,
    it looks similar to the following screenshot:![How to do it…](img/4124_04_08.jpg)
  id: totrans-504
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开子选项卡**更新**并取消所有复选框。对于Firefox 8，它看起来类似于以下截图：![如何做…](img/4124_04_08.jpg)
- en: 'For the latest versions of Firefox, for example 15, the update options sub-tab
    has been changed and you need to select **Never check for updates**, as shown
    in the following screenshot:'
  id: totrans-505
  prefs: []
  type: TYPE_NORMAL
  zh: 对于最新版本的Firefox，例如15，更新选项子选项卡已更改，您需要选择**从不检查更新**，如下截图所示：
- en: '![How to do it…](img/4124_04_09.jpg)'
  id: totrans-506
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/4124_04_09.jpg)'
- en: Close Mozilla Firefox and proceed with installing the Apple Safari browser.
  id: totrans-507
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭Mozilla Firefox并继续安装Apple Safari浏览器。
- en: Run the Apple Safari installer (for the web app lab's needs, I use Safari v4),
    and follow the on-screen instructions.
  id: totrans-508
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行Apple Safari安装程序（对于Web应用实验室的需求，我使用Safari v4），并按照屏幕上的说明进行操作。
- en: Apple Safari lets you choose the automatic update options during installation,
    so deselect the **Automatically update Safari and other Apple software** checkbox
    when prompted, and finish the installation.
  id: totrans-509
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 苹果Safari允许您在安装过程中选择自动更新选项，因此在提示时取消选择**自动更新Safari和其他苹果软件**复选框，并完成安装。
- en: Now, open the **Network Connections** window from **Control Panel** and enable
    **Local Area Connection** by right-clicking on its icon and selecting **Enable**:![How
    to do it…](img/4124_04_10.jpg)
  id: totrans-510
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，从**控制面板**打开**网络连接**窗口，并通过右键单击其图标并选择**启用**来启用**本地连接**：![操作步骤…](img/4124_04_10.jpg)
- en: The last thing we need to do with our Windows XP virtual machine is take a snapshot.
  id: totrans-511
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要对Windows XP虚拟机进行快照。
- en: In the VM dropdown menu of VMware Workstation, select **Snapshot** | **Take
    Snapshot…**, and input a name and a description for the new snapshot:![How to
    do it…](img/4124_04_11.jpg)
  id: totrans-512
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在VMware Workstation的VM下拉菜单中，选择**快照** | **拍摄快照…**，并为新快照输入名称和描述：![操作步骤…](img/4124_04_11.jpg)
- en: Our web client workstation is now ready for lab experiments, and we can go further
    by installing a Windows 2003-based web server.
  id: totrans-513
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的网络客户端工作站现在已准备好进行实验，我们可以通过安装基于Windows 2003的Web服务器来进一步进行。
- en: In VMware Workstation, press *Ctrl* + *N*, and follow the on-screen instructions
    to create a new virtual machine with customized parameters. Do not forget to set
    up the network interface for the virtual machine as `bridged`.
  id: totrans-514
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在VMware Workstation中，按下*Ctrl* + *N*，并按照屏幕上的指示创建具有自定义参数的新虚拟机。不要忘记为虚拟机设置网络接口为`桥接`。
- en: Depending on the Windows Server 2003 distribution, the installer can prompt
    you with which type of Windows 2003 you want to install. We need to choose **Windows
    2003 Server Standard** (option **B**):![How to do it…](img/4124_04_12.jpg)
  id: totrans-515
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据Windows Server 2003的发行版，安装程序可能会提示您要安装哪种类型的Windows 2003。我们需要选择**Windows 2003
    Server标准版**（选项**B**）：![操作步骤…](img/4124_04_12.jpg)
- en: After this, the Windows Server 2003 installation process starts.
  id: totrans-516
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 之后，Windows Server 2003的安装过程开始。
- en: During the installation, you will be prompted for a product key. Enter any trial
    key found on the Internet or enter a valid key if you have a license.
  id: totrans-517
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装过程中，将提示输入产品密钥。如果有许可证，可以输入在互联网上找到的任何试用密钥，或者输入有效的密钥。
- en: After the installation of Windows Server 2003, wait until VMware Tools is installed
    and restart the system.
  id: totrans-518
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装Windows Server 2003后，等待直到安装VMware Tools并重新启动系统。
- en: Now, we need to set up the network connection properties. Open **Local Area
    Connection Properties** and set the static IP `192.168.1.13` using other IP settings,
    as described in the *Setting up the network security lab (Must know)* recipe.
  id: totrans-519
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要设置网络连接属性。打开**本地连接属性**，并使用其他IP设置设置静态IP`192.168.1.13`，如*设置网络安全实验室（必须知道）*中所述。
- en: Now, copy the XAMPP installer to the Windows 2003 Server virtual machine and
    run it.
  id: totrans-520
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，将XAMPP安装程序复制到Windows 2003 Server虚拟机并运行它。
- en: Follow the on-screen instructions and leave the XAMPP path by default as `C:\xampp\`
    when prompted:![How to do it…](img/4124_04_14.jpg)
  id: totrans-521
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照屏幕上的指示，当提示时将XAMPP路径保持默认为`C:\xampp\`！[操作步骤…](img/4124_04_14.jpg)
- en: Also, we should install Apache and MySQL as services, so select the following
    checkboxes during installation:![How to do it…](img/4124_04_15.jpg)
  id: totrans-522
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，我们应该将Apache和MySQL安装为服务，因此在安装过程中选择以下复选框：![操作步骤…](img/4124_04_15.jpg)
- en: Click on **Install** and wait while the installation ends.
  id: totrans-523
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**安装**，等待安装结束。
- en: The Apache server and the MySQL server will start automatically after the installation.
  id: totrans-524
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装后，Apache服务器和MySQL服务器将自动启动。
- en: Now, find the `htdocs` directory in the `XAMPP` directory (in my case, it is
    `C:\xampp\htdocs`), and delete all the default content from that directory:![How
    to do it…](img/4124_04_16.jpg)
  id: totrans-525
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，在`XAMPP`目录中找到`htdocs`目录（在我的情况下，它是`C:\xampp\htdocs`），并删除该目录中的所有默认内容：![操作步骤…](img/4124_04_16.jpg)
- en: Now, copy the unzipped Damn Vulnerable Web Application folder `dvwa` into the
    empty `htdocs` directory.
  id: totrans-526
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，将解压缩的Damn Vulnerable Web Application文件夹`dvwa`复制到空的`htdocs`目录中。
- en: Go to the `dvwa` directory and find the `.htaccess` file.
  id: totrans-527
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到`dvwa`目录并找到`.htaccess`文件。
- en: Open it for editing with notepad.
  id: totrans-528
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用记事本打开它进行编辑。
- en: 'Find the next part of the code:'
  id: totrans-529
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到代码的下一部分：
- en: '[PRE7]'
  id: totrans-530
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Replace it with the following:'
  id: totrans-531
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用以下内容替换它：
- en: '[PRE8]'
  id: totrans-532
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Save the file and close the Notepad.
  id: totrans-533
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存文件并关闭记事本。
- en: Let us now simplify the attacker's task by reducing some PHP security settings.
    Go to the XAMPP control panel, click on Apache's **Config** button and select
    **PHP (php.ini)** to open the PHP `config` file:![How to do it…](img/4124_04_24.jpg)
  id: totrans-534
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们通过减少一些PHP安全设置来简化攻击者的任务。转到XAMPP控制面板，单击Apache的**配置**按钮，并选择**PHP (php.ini)**以打开PHP
    `config`文件：![操作步骤…](img/4124_04_24.jpg)
- en: Find the `allow_url_fopen` parameter in the `php.ini` file and set its value
    to `off`.
  id: totrans-535
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`php.ini`文件中找到`allow_url_fopen`参数，并将其值设置为`off`。
- en: Find the `allow_url_include` parameter and set its value to `off` as well.
  id: totrans-536
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到`allow_url_include`参数，并将其值设置为`off`。
- en: Now, we need to restart the Apache server to apply the new settings. Click on
    Apache's **Stop** button:![How to do it…](img/4124_04_17.jpg)
  id: totrans-537
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要重新启动Apache服务器以应用新的设置。单击Apache的**停止**按钮：![操作步骤…](img/4124_04_17.jpg)
- en: 'You can see it in the status log area, and the **Stop** button should change
    its caption to **Start**:'
  id: totrans-538
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在状态日志区域看到它，**停止**按钮应更改其标题为**启动**：
- en: '![How to do it…](img/4124_04_18.jpg)'
  id: totrans-539
  prefs: []
  type: TYPE_IMG
  zh: '![操作步骤…](img/4124_04_18.jpg)'
- en: Start the Apache server by clicking on the **Start** button.
  id: totrans-540
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过单击**启动**按钮启动Apache服务器。
- en: Now, let us check the network access to the Damn Vulnerable Web Application.
    Start your Windows XP virtual machine if it was stopped and run any web browser.
  id: totrans-541
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们检查对Damn Vulnerable Web Application的网络访问。如果Windows XP虚拟机已停止，则启动它并运行任何网络浏览器。
- en: Type `192.168.1.13/dvwa/` into the address bar. You should see the following
    screenshot:![How to do it…](img/4124_04_19.jpg)
  id: totrans-542
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在地址栏中键入`192.168.1.13/dvwa/`。您应该看到以下截图：![操作步骤…](img/4124_04_19.jpg)
- en: The next step is creating a database. Open the link you see in the browser window
    and you will be redirected to the DVWA control page:![How to do it…](img/4124_04_20.jpg)
  id: totrans-543
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是创建数据库。打开浏览器窗口中看到的链接，您将被重定向到DVWA控制页面：![如何做…](img/4124_04_20.jpg)
- en: Click on the **Create / Reset Database** button.
  id: totrans-544
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建/重置数据库**按钮。
- en: In the left-bottom corner of the DVWA control page, you will be able to see
    that the DVWA security level is set to high:![How to do it…](img/4124_04_21.jpg)
  id: totrans-545
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在DVWA控制页面的左下角，您将能够看到DVWA安全级别设置为高：![如何做…](img/4124_04_21.jpg)
- en: Let us change it to the low level. Click on the **DVWA Security** button at
    the left side of the page.
  id: totrans-546
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们将其更改为低级别。点击页面左侧的**DVWA安全**按钮。
- en: In the DVWA login page, type in the username as `admin` and the password as
    `password`:![How to do it…](img/4124_04_22.jpg)
  id: totrans-547
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在DVWA登录页面，输入用户名为`admin`，密码为`password`：![如何做…](img/4124_04_22.jpg)
- en: Click on the **DVWA Security** button on the left side of the page again.
  id: totrans-548
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次点击页面左侧的**DVWA安全**按钮。
- en: Select the **low** security level in the drop-down menu:![How to do it…](img/4124_04_23.jpg)
  id: totrans-549
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下拉菜单中选择**低**安全级别：![如何做…](img/4124_04_23.jpg)
- en: Then, click on the **Submit** button.
  id: totrans-550
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，点击**提交**按钮。
- en: Now, take a snapshot; our web server and vulnerable web application are ready
    for practising web penetration testing skills.
  id: totrans-551
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，拍摄一个快照；我们的Web服务器和易受攻击的Web应用程序已准备好用于练习Web渗透测试技能。
- en: How it works...
  id: totrans-552
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Let me explain the essential steps.
  id: totrans-553
  prefs: []
  type: TYPE_NORMAL
  zh: 让我解释一下基本步骤。
- en: At first, we need to configure the router in order to provide our lab with networking
    capabilities. Then, our virtualization software, which will support the virtual
    machines, should be installed. After that, we can install and set up our virtual
    server and workstation.
  id: totrans-554
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们需要配置路由器，以便为我们的实验室提供网络功能。然后，我们的虚拟化软件，将支持虚拟机的安装。之后，我们可以安装和设置我们的虚拟服务器和工作站。
- en: To truly imitate the real-world scenarios, where different people use various
    web browsers to access web applications, we need to install several web browsers
    on our virtual web client machine. I have chosen Google Chrome, Mozilla Firefox,
    and Apple Safari as victim client browsers, because they are the most popular
    in real life and you should practice every kind of client-side attack with at
    least each of these three browsers. Also, I should mention that some kinds of
    client-side attacks work better with certain browsers and with others, different
    exploits are aimed at different browsers, and that is why we need several web
    browsers installed on the victim web client workstation not to restrict our training
    facilities to only a short list of attack performance.
  id: totrans-555
  prefs: []
  type: TYPE_NORMAL
  zh: 为了真正模拟现实世界的情景，不同的人使用各种Web浏览器访问Web应用程序，我们需要在虚拟Web客户端机器上安装几种Web浏览器。我选择了Google
    Chrome，Mozilla Firefox和Apple Safari作为受害者客户端浏览器，因为它们在现实生活中最受欢迎，您应该至少使用这三种浏览器练习每种客户端攻击。此外，我应该提到，某些类型的客户端攻击在某些浏览器上效果更好，而在其他浏览器上，不同的漏洞利用针对不同的浏览器，这就是为什么我们需要在受害者Web客户端工作站上安装几种Web浏览器，以免将我们的培训设施限制在仅有限的攻击性能列表上。
- en: To leave more opportunities for exploitation, we need to have as many vulnerabilities
    in web browsers as we can (the more, the better). Fully patched browsers require
    using the newest exploits, which are hard to find and use because in most cases
    you will need to personally modify and debug them. So, for successful and productive
    training, we need to have more older vulnerabilities, and this is the reason why
    we installed the older versions of web browsers and turned off automatic updates.
  id: totrans-556
  prefs: []
  type: TYPE_NORMAL
  zh: 为了留下更多的利用机会，我们需要在Web浏览器中尽可能多地存在漏洞（越多越好）。完全打补丁的浏览器需要使用最新的漏洞利用，这些漏洞利用很难找到和使用，因为在大多数情况下，您将需要自行修改和调试它们。因此，为了成功和高效的培训，我们需要更多旧版本的漏洞，这就是为什么我们安装了旧版本的Web浏览器并关闭了自动更新的原因。
- en: The XAMPP package was chosen because it already contains an Apache server, a
    MySQL server, and PHP configured to work together. It is easy to install, so we
    don't have to perform any additional configuration to run a web server.
  id: totrans-557
  prefs: []
  type: TYPE_NORMAL
  zh: 选择XAMPP软件包是因为它已经包含了Apache服务器、MySQL服务器和PHP配置在一起工作。它很容易安装，因此我们不需要执行任何额外的配置来运行Web服务器。
- en: But we need to additionally configure the DVWA access settings to allow access
    from external clients and not only localhost connections. This is the reason why
    we edited the `.htaccess` file in a relevant way.
  id: totrans-558
  prefs: []
  type: TYPE_NORMAL
  zh: 但是我们需要额外配置DVWA访问设置，以允许外部客户端访问，而不仅仅是本地主机连接。这就是为什么我们以相关方式编辑了`.htaccess`文件的原因。
- en: Also we need create a database in DVWA in order to let it work as it should.
  id: totrans-559
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们需要在DVWA中创建一个数据库，以使其正常工作。
- en: For those readers who have already high web penetration testing skills, the
    high DVWA security level is recommended because they know all the basic techniques
    and need to practise advanced tricking attack skills. But for beginners I recommend
    learning basic attack and exploitation techniques with a low DVWA security level
    to leverage your knowledge step by step.
  id: totrans-560
  prefs: []
  type: TYPE_NORMAL
  zh: 对于那些已经具有高级Web渗透测试技能的读者，建议使用高DVWA安全级别，因为他们了解所有基本技术，并需要练习高级欺骗攻击技能。但对于初学者，我建议使用低DVWA安全级别学习基本的攻击和利用技术，以逐步提升您的知识。
- en: There's more...
  id: totrans-561
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Web application penetration testing is the most rapidly changing security issue
    and any penetration tester who wants to have up-to-date knowledge needs to constantly
    learn and train. This section gives you advice on where to look for more information.
  id: totrans-562
  prefs: []
  type: TYPE_NORMAL
  zh: Web应用程序渗透测试是最快速变化的安全问题，任何想要拥有最新知识的渗透测试人员都需要不断学习和训练。本节为您提供了在哪里寻找更多信息的建议。
- en: Alternative lab options
  id: totrans-563
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备选实验室选项
- en: Let me show you some alternative options of building a web application penetration
    testing lab.
  id: totrans-564
  prefs: []
  type: TYPE_NORMAL
  zh: 让我展示一些构建Web应用程序渗透测试实验室的备选选项。
- en: So, at first, it is not necessary to use a hardware router. Using the built-in
    VMware Workstation NAT capabilities is enough, but we need a hardware router for
    other types of labs, so why not use it in this lab as well. Additionally, using
    a hardware router has a better influence on the lab performance.
  id: totrans-565
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，首先，不需要使用硬件路由器。使用内置的VMware Workstation NAT功能就足够了，但是我们需要硬件路由器用于其他类型的实验室，所以为什么不在这个实验室中也使用它呢。此外，使用硬件路由器对实验室性能有更好的影响。
- en: Also, you don't have to install the web server on a Windows machine. You can
    easily use a Linux-based server if you have appropriate knowledge. I should also
    mention that DVWA is platform independent, so you should not get any troubles
    installing it on a Linux-based web server.
  id: totrans-566
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，您不必在Windows机器上安装Web服务器。如果您有适当的知识，可以轻松使用基于Linux的服务器。我还应该提到，DVWA是平台无关的，因此您不应该在基于Linux的Web服务器上安装它时遇到任何问题。
- en: The web client workstation can be also be a Linux-based system. In addition
    to this, it is better to have both Windows- and Linux-based client workstations
    to have a larger field for experimentation.
  id: totrans-567
  prefs: []
  type: TYPE_NORMAL
  zh: Web客户端工作站也可以是基于Linux的系统。除此之外，最好同时拥有基于Windows和Linux的客户端工作站，以便有更大的实验空间。
- en: Alternative vulnerable web app packages
  id: totrans-568
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备选的易受攻击的Web应用程序包
- en: Damn Vulnerable Web Application is not the one and only vulnerable web app that
    you can use for training in your lab environment.
  id: totrans-569
  prefs: []
  type: TYPE_NORMAL
  zh: Damn Vulnerable Web Application并不是您可以在实验室环境中用于培训的唯一易受攻击的Web应用程序。
- en: 'There are a lot of prepared vulnerable web applications on the Internet that
    are ready for use with whole virtual server images having vulnerable web app installed.
    Here is the list of some of them:'
  id: totrans-570
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网上有许多准备好的易受攻击的Web应用程序，可以使用整个虚拟服务器映像来安装易受攻击的Web应用程序。以下是其中一些的列表：
- en: OWASP Broken Web Applications Project ([https://www.owasp.org/index.php/OWASP_Broken_Web_Applications_Project](https://www.owasp.org/index.php/OWASP_Broken_Web_Applications_Project))
  id: totrans-571
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OWASP破损Web应用程序项目([https://www.owasp.org/index.php/OWASP_Broken_Web_Applications_Project](https://www.owasp.org/index.php/OWASP_Broken_Web_Applications_Project))
- en: NOWASP (Mutillidae) Web Pen-Test Practice Application ([http://sourceforge.net/projects/mutillidae/](http://sourceforge.net/projects/mutillidae/))
  id: totrans-572
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NOWASP（Mutillidae）Web渗透测试实践应用程序([http://sourceforge.net/projects/mutillidae/](http://sourceforge.net/projects/mutillidae/))
- en: SQLol ([https://github.com/SpiderLabs/SQLol](https://github.com/SpiderLabs/SQLol))
  id: totrans-573
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQLol ([https://github.com/SpiderLabs/SQLol](https://github.com/SpiderLabs/SQLol))
- en: Hackxor ([http://sourceforge.net/projects/hackxor/](http://sourceforge.net/projects/hackxor/))
  id: totrans-574
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Hackxor ([http://sourceforge.net/projects/hackxor/](http://sourceforge.net/projects/hackxor/))
- en: Bodgeit ([http://code.google.com/p/bodgeit/](http://code.google.com/p/bodgeit/))
  id: totrans-575
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bodgeit ([http://code.google.com/p/bodgeit/](http://code.google.com/p/bodgeit/))
- en: Additional info
  id: totrans-576
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 额外信息
- en: 'Here are some additional information resources:'
  id: totrans-577
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些额外的信息资源：
- en: '[http://www.dvwa.co.uk/](http://www.dvwa.co.uk/)'
  id: totrans-578
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://www.dvwa.co.uk/](http://www.dvwa.co.uk/)'
- en: '[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)'
  id: totrans-579
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)'
- en: '[https://www.owasp.org/index.php/Web_Application_Firewall](https://www.owasp.org/index.php/Web_Application_Firewall)'
  id: totrans-580
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.owasp.org/index.php/Web_Application_Firewall](https://www.owasp.org/index.php/Web_Application_Firewall)'
- en: '[https://www.owasp.org/index.php/Category:OWASP_Testing_Project](https://www.owasp.org/index.php/Category:OWASP_Testing_Project)'
  id: totrans-581
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.owasp.org/index.php/Category:OWASP_Testing_Project](https://www.owasp.org/index.php/Category:OWASP_Testing_Project)'
- en: '[https://www.owasp.org/index.php/OWASP_Top_Ten_Project](https://www.owasp.org/index.php/OWASP_Top_Ten_Project)'
  id: totrans-582
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.owasp.org/index.php/OWASP_Top_Ten_Project](https://www.owasp.org/index.php/OWASP_Top_Ten_Project)'
- en: Setting up a Wi-Fi lab (Become an expert)
  id: totrans-583
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 建立Wi-Fi实验室（成为专家）
- en: This section describes how to set up a lab for practising Wi-Fi penetration
    skills with basic wireless network protection mechanisms.
  id: totrans-584
  prefs: []
  type: TYPE_NORMAL
  zh: 本节描述了如何设置一个实验室，以练习具有基本无线网络保护机制的Wi-Fi渗透技能。
- en: 'Skills you can practise using this type of lab are as follows:'
  id: totrans-585
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用此类型实验室练习的技能如下：
- en: Essential skills
  id: totrans-586
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基本技能
- en: Discovery techniques
  id: totrans-587
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现技术
- en: Enumeration techniques
  id: totrans-588
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 枚举技术
- en: Password and hash attacks
  id: totrans-589
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码和哈希攻击
- en: Wireless attacks
  id: totrans-590
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无线攻击
- en: Additional skills
  id: totrans-591
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 额外技能
- en: Documenting the penetration testing process
  id: totrans-592
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 记录渗透测试过程
- en: Getting ready
  id: totrans-593
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'At first, we have to determine the Wi-Fi lab topology and architecture. In
    this chapter, we will use only those components that are essential for Wi-Fi penetration
    testing and will not include others. The following lab components are necessary
    for our current task:'
  id: totrans-594
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们必须确定Wi-Fi实验室的拓扑和架构。在本章中，我们将仅使用对Wi-Fi渗透测试至关重要的组件，而不包括其他组件。以下实验室组件对我们当前的任务是必要的：
- en: Wireless router
  id: totrans-595
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无线路由器
- en: LAN workstation
  id: totrans-596
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: LAN工作站
- en: Victim Wi-Fi client (workstation, laptop, smartphone, or tablet PC)
  id: totrans-597
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 受害者Wi-Fi客户端（工作站，笔记本电脑，智能手机或平板电脑）
- en: 'We will use a direct LAN connection between the LAN workstation and the router,
    and wireless connections between the victim Wi-Fi client and the wireless router.
    The topology of that network looks similar to the following diagram:'
  id: totrans-598
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在LAN工作站和路由器之间使用直接的LAN连接，以及在受害者Wi-Fi客户端和无线路由器之间使用无线连接。该网络的拓扑类似于以下图表：
- en: '![Getting ready](img/4124_05_01.jpg)'
  id: totrans-599
  prefs: []
  type: TYPE_IMG
  zh: '![准备就绪](img/4124_05_01.jpg)'
- en: How to do it…
  id: totrans-600
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: We will set up two Wi-Fi networks of different types. The initial router setup
    is the same for both types, so I will give the instructions only once before describing
    the security mechanism's setup. I will use the ASUS WL-520GC router, and all my
    examples will be given for this model of router.
  id: totrans-601
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将建立两种不同类型的Wi-Fi网络。初始路由器设置对两种类型都是相同的，因此在描述安全机制设置之前，我只会给出一次说明。我将使用ASUS WL-520GC路由器，并且我的所有示例都将针对此型号的路由器进行说明。
- en: 'I want to start by setting up a WEP protected network:'
  id: totrans-602
  prefs: []
  type: TYPE_NORMAL
  zh: 我想首先建立一个受WEP保护的网络：
- en: Connect your workstation to the router using a LAN cable.
  id: totrans-603
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用LAN电缆将您的工作站连接到路由器。
- en: Open the browser at the LAN workstation and go to the address `192.168.1.1`.
  id: totrans-604
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在LAN工作站上打开浏览器，转到地址`192.168.1.1`。
- en: Log in to the router control panel using the default login ID and password `admin:admin`
    and go to the **Wireless** section.
  id: totrans-605
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用默认登录ID和密码`admin:admin`登录路由器控制面板，然后转到**无线**部分。
- en: Set the wireless network name (**SSID**) in the corresponding field; for example,
    set it to `wifilab`.
  id: totrans-606
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在相应的字段中设置无线网络名称（**SSID**）；例如，将其设置为`wifilab`。
- en: Leave the **Channel** and **Wireless Mode** settings as **Auto**.
  id: totrans-607
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**频道**和**无线模式**设置保留为**自动**。
- en: Set **Authentication Method** as **Shared Key**.
  id: totrans-608
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**认证方法**设置为**共享密钥**。
- en: Set the **Passphrase** setting value; it will be your key for connecting to
    the wireless network. Use an easy and not complicated key value, something that
    can be guessed by a dictionary.
  id: totrans-609
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置**密码短语**的值；它将成为连接到无线网络的关键。使用简单而不复杂的密钥值，可以通过字典猜测。
- en: Leave all other settings on this page as their default values.
  id: totrans-610
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将此页面上的所有其他设置保留为它们的默认值。
- en: 'Now, you should have settings similar to the following:'
  id: totrans-611
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您应该有类似以下的设置：
- en: '![How to do it…](img/4124_05_03.jpg)'
  id: totrans-612
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/4124_05_03.jpg)'
- en: Now, go to the **Wireless** | **Advanced** section and set the **Hide SSID**
    option to **Yes**, leaving all other settings on this page as their default values:![How
    to do it…](img/4124_05_04.jpg)
  id: totrans-613
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，转到**无线** | **高级**部分，并将**隐藏SSID**选项设置为**是**，将此页面上的所有其他设置保留为它们的默认值：![如何做…](img/4124_05_04.jpg)
- en: Click on **Finish** and then **Save & Restart**.
  id: totrans-614
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**完成**，然后**保存并重新启动**。
- en: After the router reboots, go to **System setup** | **Settings Management** and
    save a backup copy of your current router settings to the file.
  id: totrans-615
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 路由器重新启动后，转到**系统设置** | **设置管理**，并将当前路由器设置保存到文件中备份。
- en: The WEP protected network is ready for operating now.
  id: totrans-616
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: WEP受保护的网络现在已经准备好运行了。
- en: 'After configuring a router, you need to connect your victim Wi-Fi client device
    to the `wifilab` network. Depending upon the type of your device and its OS, there
    can be different ways to connect to a wireless network, but the basic steps in
    general are the same:'
  id: totrans-617
  prefs: []
  type: TYPE_NORMAL
  zh: 配置路由器后，您需要将受害者Wi-Fi客户端设备连接到`wifilab`网络。根据您的设备类型和其操作系统，连接到无线网络可能有不同的方式，但一般的基本步骤是相同的：
- en: Enter the wireless network name (**SSID**) – it is `wifilab` in our case.
  id: totrans-618
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入无线网络名称（**SSID**）- 在我们的情况下是`wifilab`。
- en: Enter the wireless network passphrase, which you have set during the router
    configuration process.
  id: totrans-619
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入您在路由器配置过程中设置的无线网络密码短语。
- en: Click on **Connect**, or **OK**, or whatever button your system offers you to
    connect to the wireless network.
  id: totrans-620
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**连接**，或**确定**，或系统提供的任何按钮以连接到无线网络。
- en: 'After setting up a WEP protected wireless network, we can proceed with setting
    up a more secure WPA-PSK protected network:'
  id: totrans-621
  prefs: []
  type: TYPE_NORMAL
  zh: 设置了WEP受保护的无线网络后，我们可以继续设置更安全的WPA-PSK受保护的网络：
- en: Log in to the router control panel and go to the **Wireless** section.
  id: totrans-622
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到路由器控制面板，然后转到**无线**部分。
- en: Set the wireless network name (**SSID**) in the corresponding field; for example,
    set it to `wifilab` again.
  id: totrans-623
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在相应的字段中设置无线网络名称（**SSID**）；例如，再次将其设置为`wifilab`。
- en: Leave the **Channel** and **Wireless Mode** settings as **Auto**.
  id: totrans-624
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**频道**和**无线模式**设置保留为**自动**。
- en: Set **Authentication Method** as **WPA-Personal**.
  id: totrans-625
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**认证方法**设置为**WPA-Personal**。
- en: Now, set the value of **WPA Pre-Shared key**. Use something easy and not complicated
    as a key value, something that can be guessed by a dictionary.
  id: totrans-626
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，设置**WPA预共享密钥**的值。使用简单而不复杂的密钥值，可以通过字典猜测。
- en: You should have settings similar to the following:![How to do it…](img/4124_05_05.jpg)
  id: totrans-627
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您的设置应该类似于以下内容：![如何做…](img/4124_05_05.jpg)
- en: Now, go to **Wireless** | **Advanced**, and set the **Hide SSID** option to
    **Yes**, leaving all other settings on this page as their default values:![How
    to do it…](img/4124_05_04.jpg)
  id: totrans-628
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，转到**无线** | **高级**，并将**隐藏SSID**选项设置为**是**，将此页面上的所有其他设置保留为它们的默认值：![如何做…](img/4124_05_04.jpg)
- en: Click on **Finish** and then **Save & Restart**.
  id: totrans-629
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**完成**，然后**保存并重新启动**。
- en: After the router reboots, go to the **System setup** | **Settings Management**,
    and save a backup copy of your current router settings to the file.
  id: totrans-630
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 路由器重新启动后，转到**系统设置** | **设置管理**，并将当前路由器设置保存到文件中备份。
- en: The WPA-PSK protected network is ready for operating now.
  id: totrans-631
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: WPA-PSK受保护的网络现在已经准备好运行了。
- en: Now, you need to connect your victim Wi-Fi client device to the `wifilab` network
    in the same way as it was described in the *Planning the lab environment (Should
    know)* recipe.
  id: totrans-632
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您需要以与*规划实验室环境（应该知道）*食谱中描述的方式将受害者Wi-Fi客户端设备连接到`wifilab`网络。
- en: How it works...
  id: totrans-633
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: I would like to give you some explanation of the described steps in this section.
  id: totrans-634
  prefs: []
  type: TYPE_NORMAL
  zh: 我想给你一些关于本节描述步骤的解释。
- en: I have chosen the network topology based on real-world penetration testing scenarios.
    We need at least one wireless client connected to the wireless network, because
    most of the attacks require both a communicating wireless access point and a client.
    We also need a LAN workstation in order to practise penetration in the LAN through
    WLAN.
  id: totrans-635
  prefs: []
  type: TYPE_NORMAL
  zh: 我选择了基于真实渗透测试场景的网络拓扑。我们至少需要一个连接到无线网络的无线客户端，因为大多数攻击都需要通信的无线接入点和客户端。我们还需要一个局域网工作站，以便通过WLAN进行LAN的渗透练习。
- en: I recommend using simple and easy guessing values for the WEP and WPA password
    phrases to facilitate password guessing, which you will perform while practising
    wireless attacks.
  id: totrans-636
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议在练习无线攻击时使用简单和易猜测的WEP和WPA密码短语值，以便于密码猜测。
- en: I also recommend saving your router configuration backups in order to easily
    revert the router to the needed state without having to repeat all the configuration
    steps every time.
  id: totrans-637
  prefs: []
  type: TYPE_NORMAL
  zh: 我还建议保存路由器配置备份，以便在不必重复所有配置步骤的情况下轻松将路由器恢复到所需状态。
- en: It is necessary to restart the router every time after changing its configuration
    in order to apply new settings.
  id: totrans-638
  prefs: []
  type: TYPE_NORMAL
  zh: 每次更改路由器配置后，都需要重新启动路由器以应用新设置。
- en: There's more...
  id: totrans-639
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多…
- en: As usual, if you do not want to limit yourself to only the given steps, then
    there is more information in the following sections to help you choose your next
    steps.
  id: totrans-640
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，如果您不想仅限于给定的步骤，那么在以下部分中还有更多信息可帮助您选择下一步。
- en: Improving your hacker skills
  id: totrans-641
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提高你的黑客技能
- en: An advanced hacker has to be an expert in every type of security, including
    Wi-Fi WPA-Enterprise protection. So, if you want to become a highly qualified
    Wi-Fi penetration testing expert, I recommend you to additionally set up a Radius
    server in your lab network and connect the router to it for practising WPA-Enterprise
    protection hacking.
  id: totrans-642
  prefs: []
  type: TYPE_NORMAL
  zh: 高级黑客必须成为各种安全性的专家，包括Wi-Fi WPA-Enterprise保护。因此，如果您想成为高度合格的Wi-Fi渗透测试专家，我建议您在实验室网络中另外设置一个Radius服务器，并将路由器连接到该服务器，以练习WPA-Enterprise保护黑客技术。
- en: 'It is better done with a virtual Linux machine and free-radius software. You
    will need to install a virtual Linux host with a bridged network interface configured
    to use a static IP address. The network topology with the Radius server will look
    similar to the following diagram:'
  id: totrans-643
  prefs: []
  type: TYPE_NORMAL
  zh: 最好使用虚拟Linux机器和free-radius软件。您需要安装一个虚拟Linux主机，并配置桥接网络接口以使用静态IP地址。带有Radius服务器的网络拓扑将类似于以下图表：
- en: '![Improving your hacker skills](img/4124_05_02.jpg)'
  id: totrans-644
  prefs: []
  type: TYPE_IMG
  zh: '![提高黑客技能](img/4124_05_02.jpg)'
- en: 'After creating a virtual Linux machine, you will need to install the free-radius
    software. The easiest way to do it is to use `apt-get` command:'
  id: totrans-645
  prefs: []
  type: TYPE_NORMAL
  zh: 创建虚拟Linux机器后，您需要安装free-radius软件。最简单的方法是使用`apt-get`命令：
- en: '[PRE9]'
  id: totrans-646
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Or:'
  id: totrans-647
  prefs: []
  type: TYPE_NORMAL
  zh: 或者：
- en: '[PRE10]'
  id: totrans-648
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '`free-radius-wpe` is the modified version of `free-radius` and is mostly used
    for hacking purposes, but you can also use it just for creating a Radius server.'
  id: totrans-649
  prefs: []
  type: TYPE_NORMAL
  zh: '`free-radius-wpe`是`free-radius`的修改版本，主要用于黑客目的，但您也可以仅用于创建Radius服务器。'
- en: After installing, you will need to edit some configuration files in order to
    set the connection key, which will be used by the router to work with a Radius
    server, and set up account settings to let users connect to the wireless network
    via WPA-Enterprise.
  id: totrans-650
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，您需要编辑一些配置文件，以设置连接密钥，路由器将使用该密钥与Radius服务器进行通信，并设置帐户设置，以便用户通过WPA-Enterprise连接到无线网络。
- en: At the end, you need to set the Radius server IP address, port number, and connection
    key in the router settings. Reboot the router.
  id: totrans-651
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，您需要在路由器设置中设置Radius服务器IP地址、端口号和连接密钥。重新启动路由器。
- en: Tips
  id: totrans-652
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: 'Most Wi-Fi routers support the WPS protocol (Wi-Fi Protected setup: [http://www.wi-fi.org/knowledge-center/articles/wi-fi-protected-setup%E2%84%A2](http://www.wi-fi.org/knowledge-center/articles/wi-fi-protected-setup%E2%84%A2)),
    which allows us to easily connect devices to the wireless network. But recently,
    WPS was compromised and is now considered unsafe. Also, the WPS key can be guessed
    in less than 30 hours.'
  id: totrans-653
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数Wi-Fi路由器支持WPS协议（Wi-Fi Protected setup：[http://www.wi-fi.org/knowledge-center/articles/wi-fi-protected-setup%E2%84%A2](http://www.wi-fi.org/knowledge-center/articles/wi-fi-protected-setup%E2%84%A2)），这使我们能够轻松地将设备连接到无线网络。但最近，WPS已被破解，现在被认为是不安全的。此外，WPS密钥可以在不到30小时内被猜出。
- en: You can learn how to do it at [http://www.ehacking.net/2012/01/reaver-wps-wpawpa2-cracking-tutorial.html](http://www.ehacking.net/2012/01/reaver-wps-wpawpa2-cracking-tutorial.html).
  id: totrans-654
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在[http://www.ehacking.net/2012/01/reaver-wps-wpawpa2-cracking-tutorial.html](http://www.ehacking.net/2012/01/reaver-wps-wpawpa2-cracking-tutorial.html)学习如何做到这一点。
- en: 'It is often necessary to guess the WPA keys by using a dictionary, but such
    procedures take a lot of time with big dictionaries. That is why I recommend using
    cloud services to easily and quickly test hashes with big dictionaries. For example,
    I use this service: [http://www.cloudcracker.com](http://www.cloudcracker.com).'
  id: totrans-655
  prefs: []
  type: TYPE_NORMAL
  zh: 通常需要使用字典来猜测WPA密钥，但使用大字典进行此类过程需要很长时间。这就是为什么我建议使用云服务来轻松快速地测试具有大字典的哈希。例如，我使用这项服务：[http://www.cloudcracker.com](http://www.cloudcracker.com)。
- en: Another thing worth mentioning is the wireless interface with packet injection
    capabilities on the attacker's machine, which is essential for successful wireless
    attacks. It could be Wi-Fi cards based on Atheros or Prism chipsets. For example,
    I use the ALFA Network AWUS036NH wireless USB adapter.
  id: totrans-656
  prefs: []
  type: TYPE_NORMAL
  zh: 另一件值得一提的事情是攻击者机器上具有数据包注入功能的无线接口，这对于成功的无线攻击至关重要。它可以是基于Atheros或Prism芯片组的Wi-Fi卡。例如，我使用ALFA
    Network AWUS036NH无线USB适配器。
- en: Additional info
  id: totrans-657
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 额外信息
- en: 'I recommend that you check the following books to improve your Wi-Fi penetration
    testing skills to an advanced level:'
  id: totrans-658
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议您查看以下书籍，以提高您的Wi-Fi渗透测试技能到高级水平：
- en: '*Johnny Cache, Vincent Liu. Hacking Wireless Exposed: Wireless Security Secrets
    & Solutions*, Second Edition'
  id: totrans-659
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Johnny Cache, Vincent Liu. Hacking Wireless Exposed: Wireless Security Secrets
    & Solutions*, Second Edition'
- en: '*Andrew Vladimirov, Konstantin V. Gavrilenko, Andrei A. Mikhailovsky. Wi-Foo:
    The Secrets of Wireless Hacking*'
  id: totrans-660
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Andrew Vladimirov, Konstantin V. Gavrilenko, Andrei A. Mikhailovsky. Wi-Foo:
    The Secrets of Wireless Hacking*'
- en: '*Rob Flickenger, Roger Weeks. Wireless Hacks: Tips & Tools for Building, Extending,
    and Securing Your Network*, Second Edition'
  id: totrans-661
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Rob Flickenger, Roger Weeks. Wireless Hacks: Tips & Tools for Building, Extending,
    and Securing Your Network*, Second Edition'
- en: 'If you are going to become a Wi-Fi penetration testing expert, you should definitely
    check the following web resources:'
  id: totrans-662
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您要成为Wi-Fi渗透测试专家，您应该确保查看以下网络资源：
- en: 'Aircrack-Ng wireless attack toolset: [http://www.aircrack-ng.org/](http://www.aircrack-ng.org/)'
  id: totrans-663
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Aircrack-Ng无线攻击工具集：[http://www.aircrack-ng.org/](http://www.aircrack-ng.org/)
- en: 'Wireless penetration testing methodology: [http://wirelessdefence.org/Contents/Wireless%20Pen%20Test%20Framework.html](http://wirelessdefence.org/Contents/Wireless%20Pen%20Test%20Framework.html)'
  id: totrans-664
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无线渗透测试方法：[http://wirelessdefence.org/Contents/Wireless%20Pen%20Test%20Framework.html](http://wirelessdefence.org/Contents/Wireless%20Pen%20Test%20Framework.html)
- en: Reviewing online lab portals (Become an expert)
  id: totrans-665
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 审查在线实验室门户网站（成为专家）
- en: In this section, I will make short reviews of public online penetration testing
    labs on the Internet, which are being held by third parties.
  id: totrans-666
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我将简要介绍互联网上由第三方举办的公共在线渗透测试实验室。
- en: Getting ready
  id: totrans-667
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Nowadays, there are a lot of such online penetration testing lab portals available,
    which offer plenty of various network services and lab environment topologies
    suitable for almost any training tasks and needs. But, there is at least one common
    thing with them that is important for any junior penetration tester – you do not
    need to install, set up, and maintain any hardware or software on your own; it
    is already done for you.
  id: totrans-668
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，有很多这样的在线渗透测试实验室门户可用，它们提供了大量适用于几乎任何培训任务和需求的各种网络服务和实验室环境拓扑。但是，它们至少有一个共同点对于任何初级渗透测试人员来说很重要——您不需要自己安装、设置和维护任何硬件或软件；这些都已经为您完成了。
- en: It is worth mentioning that you cannot change all lab components settings and
    this is the reason why they are not suitable for some kinds of specific tasks,
    which demand configuring specific lab environment parameters.
  id: totrans-669
  prefs: []
  type: TYPE_NORMAL
  zh: 值得一提的是，您无法更改所有实验室组件的设置，这就是它们不适用于某些需要配置特定实验室环境参数的特定任务的原因。
- en: 'To start training with online penetration testing labs, you will need the following:'
  id: totrans-670
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用在线渗透测试实验室进行培训，您将需要以下内容：
- en: A computer with Internet access
  id: totrans-671
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一台有互联网访问权限的计算机
- en: A web browser
  id: totrans-672
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个网络浏览器
- en: An e-mail address, which will be used only for working with online penetration
    testing lab portals and will not be connected to your other e-mail accounts
  id: totrans-673
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个仅用于使用在线渗透测试实验室门户的电子邮件地址，不会连接到您的其他电子邮件帐户
- en: BackTrack 5R3 virtual machine
  id: totrans-674
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: BackTrack 5R3虚拟机
- en: How to do it…
  id: totrans-675
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Let us check some online lab portals with a short description of each. We will
    start by examining "Hacking-Lab" – one of the most interesting online hacking
    portals, which offers you various online hacking challenges, including OWASP TOP
    10 trainings:'
  id: totrans-676
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看一些在线实验室门户及其简短描述。我们将从检查“Hacking-Lab”开始——这是最有趣的在线黑客门户之一，它为您提供各种在线黑客挑战，包括OWASP十大培训：
- en: Open your browser and enter the address as [https://www.hacking-lab.com/](https://www.hacking-lab.com/).
    You should see the following page:![How to do it…](img/4124_06_01.jpg)
  id: totrans-677
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开浏览器，输入地址[https://www.hacking-lab.com/](https://www.hacking-lab.com/)。您应该看到以下页面：![如何做…](img/4124_06_01.jpg)
- en: 'Click on **Remote Security Lab** on the left side of the main page, then click
    on **Topology** to see that the **Hacking Lab** portal consists of two logical
    parts: **Public web portal** and **VPN-protected lab network**:![How to do it…](img/4124_06_02.jpg)'
  id: totrans-678
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在主页左侧单击**远程安全实验室**，然后单击**拓扑**，查看**Hacking Lab**门户由两个逻辑部分组成：**公共Web门户**和**VPN保护实验室网络**：![如何做…](img/4124_06_02.jpg)
- en: To start using the Hacking Lab programs, you need to register and log in with
    your account.
  id: totrans-679
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用Hacking Lab程序，您需要注册并使用您的帐户登录。
- en: Click on **Create a free account now!** on the left side of the web page and
    register.
  id: totrans-680
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击网页左侧的**现在创建免费帐户！**并注册。
- en: Click on the **Events** link to check which events are available at the moment:![How
    to do it…](img/4124_06_08.jpg)
  id: totrans-681
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**事件**链接以查看当前有哪些事件：![如何做…](img/4124_06_08.jpg)
- en: Choose the event and click on **Register Now** in the **Status** column. In
    my case, it is **OWASP Top Ten**.
  id: totrans-682
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择事件，然后在**状态**列中单击**立即注册**。在我的情况下，是**OWASP十大**。
- en: Return to the **Events** page, click on the event that you have chosen and select
    the challenge from the opened list to read details.
  id: totrans-683
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回**事件**页面，单击您选择的事件，然后从打开的列表中选择挑战以阅读详细信息。
- en: 'Some of the events require a VPN connection to the lab. Let me show you how
    to establish it with **OWASP Top Ten event #1 - OWASP A1 - Blind SQL Injection
    Attack**. Remember that you will be allowed to establish a connection only if
    you are registered to one of the events which requires it.'
  id: totrans-684
  prefs: []
  type: TYPE_NORMAL
  zh: 一些事件需要与实验室建立VPN连接。让我向您展示如何在**OWASP十大事件＃1 - OWASP A1 - 盲SQL注入攻击**中建立连接。请记住，只有在注册了需要连接的事件之一时，您才能建立连接。
- en: Click on the **Download** link on the left side of the web page and choose **LiveCD**.
  id: totrans-685
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击网页左侧的**下载**链接，然后选择**LiveCD**。
- en: Select the last version and download **VMware8 Appliance**.
  id: totrans-686
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择最新版本并下载**VMware8 Appliance**。
- en: Now, run VMware Workstation and select **Open** in the **File** menu and select
    the **LiveCD VMware8 Appliance** in the new dialog window.
  id: totrans-687
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，运行VMware Workstation，然后在**文件**菜单中选择**打开**，在新的对话框中选择**LiveCD VMware8 Appliance**。
- en: In the **Import Virtual Machine** dialog window, set the virtual machine name
    directory and click on **Import**.
  id: totrans-688
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**导入虚拟机**对话框中，设置虚拟机名称目录，然后单击**导入**。
- en: Run the LiveCD virtual machine:![How to do it…](img/4124_06_06.jpg)
  id: totrans-689
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行LiveCD虚拟机：![如何做…](img/4124_06_06.jpg)
- en: Click on the flag icon at the top-right corner and change the keyboard layout
    to **US**.
  id: totrans-690
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击右上角的旗帜图标，将键盘布局更改为**US**。
- en: Now, right-click on the VPN connection icon next to keyboard layout and select
    **Connect Password**. The following window will be opened:![How to do it…](img/4124_06_07.jpg)
  id: totrans-691
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，在键盘布局旁边右键单击VPN连接图标，然后选择**连接密码**。将打开以下窗口：![如何做…](img/4124_06_07.jpg)
- en: Enter your Hacking-Lab ID (e-mail) with the initial password and click on **OK**.
    The VPN connection icon at the top-right corner should become green if everything
    was correct.
  id: totrans-692
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入您的Hacking-Lab ID（电子邮件）和初始密码，然后单击**确定**。如果一切正确，右上角的VPN连接图标应该变成绿色。
- en: 'Now, open the browser and enter the vulnerable application URL: [http://glocken.hacking-lab.com/12001/inputval_case2/inputval2/index.html](http://glocken.hacking-lab.com/12001/inputval_case2/inputval2/index.html).![How
    to do it…](img/4124_06_09.jpg)'
  id: totrans-693
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，打开浏览器并输入易受攻击的应用程序URL：[http://glocken.hacking-lab.com/12001/inputval_case2/inputval2/index.html](http://glocken.hacking-lab.com/12001/inputval_case2/inputval2/index.html)。![如何做…](img/4124_06_09.jpg)
- en: Start solving the challenge!
  id: totrans-694
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 开始解决挑战！
- en: Now, let us take a look at another portal called Hack-a-Server.
  id: totrans-695
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看另一个名为Hack-a-Server的门户。
- en: This portal is used not only by white-hat hackers and penetration testers who
    want to improve their skills, but also by system administrators and owners of
    real servers who want to test its security and are ready to pay for vulnerabilities
    disclosure. You can find the main idea of that portal right at its home page.
  id: totrans-696
  prefs: []
  type: TYPE_NORMAL
  zh: 该门户不仅被白帽黑客和渗透测试人员用来提高他们的技能，还被系统管理员和真实服务器的所有者用来测试其安全性，并愿意为漏洞披露付费。您可以在其主页上找到该门户的主要理念。
- en: Open the browser and enter the address as [https://www.hackaserver.com/](https://www.hackaserver.com/).![How
    to do it…](img/4124_06_04.jpg)
  id: totrans-697
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开浏览器，输入地址为[https://www.hackaserver.com/](https://www.hackaserver.com/)。![如何做…](img/4124_06_04.jpg)
- en: Click on **Sign Up** at the top right-corner of the page.
  id: totrans-698
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击页面右上角的**注册**。
- en: Enter your nickname, e-mail, password, and click on **Sign Up**.
  id: totrans-699
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入您的昵称、电子邮件、密码，然后点击**注册**。
- en: Check your e-mail; you will receive a message from the Hack-A-Server portal
    containing your account activation link. Click on the link.
  id: totrans-700
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查您的电子邮件；您将收到来自Hack-A-Server门户的包含您的帐户激活链接的消息。点击链接。
- en: Only Training and Exam arenas are available for you in this step. But, it is
    worth mentioning that Hack-A-Server is a commercial start up and that is why it
    allows you to earn money for vulnerabilities disclosure and exploitation at the
    playground arena.
  id: totrans-701
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步中，只有培训和考试竞技场对您可用。但是，值得一提的是，Hack-A-Server是一家商业初创公司，这就是为什么它允许您在游乐场竞技场上披露和利用漏洞来赚钱。
- en: But, before you can access the playground arena where money could be earned,
    you have to pass the exam.
  id: totrans-702
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，在您可以访问游乐场竞技场并赚钱之前，您必须通过考试。
- en: Click on the **Training Arena** link at the top of the web page and check what
    is available for practising your penetration testing skills:![How to do it…](img/4124_06_05.jpg)
  id: totrans-703
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击网页顶部的**培训竞技场**链接，查看可用于练习渗透测试技能的内容：![如何做…](img/4124_06_05.jpg)
- en: Select any target and click on **Hack It!** to view the target details.
  id: totrans-704
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择任何目标，点击**黑吧！**查看目标详细信息。
- en: The portal will ask you to download the certificate bundle (connection package)
    to create a VPN connection to the training arena.
  id: totrans-705
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 门户将要求您下载证书包（连接包）以创建到培训竞技场的VPN连接。
- en: Download the certificate bundle and unzip it.
  id: totrans-706
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载证书包并解压缩。
- en: Start the BackTrack 5R3 virtual machine.
  id: totrans-707
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动BackTrack 5R3虚拟机。
- en: Copy the unzipped connection package to your virtual BackTrack 5R3 machine.
  id: totrans-708
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将解压缩的连接包复制到您的虚拟BackTrack 5R3机器中。
- en: Open the terminal and change the working directory to the certificate bundle
    directory.
  id: totrans-709
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开终端，将工作目录更改为证书包目录。
- en: 'Run the following command:'
  id: totrans-710
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE11]'
  id: totrans-711
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Now, open a new terminal window and check the connection to the target by trace
    routing and pinging its IP address (you can find it on the target details web
    page):![How to do it…](img/4124_06_10.jpg)
  id: totrans-712
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，打开一个新的终端窗口，通过跟踪路由和ping其IP地址（您可以在目标详细信息网页上找到）来检查与目标的连接：![如何做…](img/4124_06_10.jpg)
- en: Now hack it!
  id: totrans-713
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在开始黑吧！
- en: To pass the exam, you will have to find as many vulnerabilities as you can at
    the exam arena and submit a report to the Hack-a-Server team for review. If you
    pass the exam, you will be allowed into the playground arena, where you can get
    paid for hacking.
  id: totrans-714
  prefs: []
  type: TYPE_NORMAL
  zh: 要通过考试，您将需要在考试竞技场找到尽可能多的漏洞，并提交报告给Hack-a-Server团队进行审核。如果您通过了考试，您将被允许进入游乐场竞技场，您可以在那里获得报酬。
- en: There's more…
  id: totrans-715
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多…
- en: 'If you are interested in trying as many online hacking playgrounds as possible,
    you should definitely check the following ones too:'
  id: totrans-716
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有兴趣尝试尽可能多的在线黑客游乐场，您也应该绝对检查以下内容：
- en: '[http://try2hack.nl](http://try2hack.nl)'
  id: totrans-717
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://try2hack.nl](http://try2hack.nl)'
- en: '[http://www.hackthissite.org](http://www.hackthissite.org)'
  id: totrans-718
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://www.hackthissite.org](http://www.hackthissite.org)'
- en: '[http://www.dareyourmind.net](http://www.dareyourmind.net)'
  id: totrans-719
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://www.dareyourmind.net](http://www.dareyourmind.net)'
- en: '[http://www.hackquest.com/](http://www.hackquest.com/)'
  id: totrans-720
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://www.hackquest.com/](http://www.hackquest.com/)'
- en: '[http://www.root-me.org](http://www.root-me.org)'
  id: totrans-721
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://www.root-me.org](http://www.root-me.org)'
- en: '[http://hax.tor.hu](http://hax.tor.hu)'
  id: totrans-722
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://hax.tor.hu](http://hax.tor.hu)'
